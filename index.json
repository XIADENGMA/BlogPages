[{"content":"","date":"2025å¹´10æœˆ20æ—¥","externalUrl":null,"permalink":"/tags/archlinux/","section":"Tags","summary":"","title":"Archlinux","type":"tags"},{"content":"","date":"2025å¹´10æœˆ20æ—¥","externalUrl":null,"permalink":"/tags/gnome/","section":"Tags","summary":"","title":"Gnome","type":"tags"},{"content":" 0.å†™åœ¨å¼€å¤´ # è¿™æ˜¯ä¸€ä¸ªå¾ˆå°ä¼—çš„é—®é¢˜ï¼Œåº”è¯¥å¾ˆå°‘æœ‰äººå’Œæˆ‘ä¸€æ ·ï¼Œå°†MacOSçš„å›¾æ ‡ç”¨åœ¨archlinux+gnomeä¸Šã€‚è€Œé—®é¢˜å‡ºç°çš„åŸå› æ˜¯ï¼šgdk-pixbuf 2.42.11ï¼ˆ2024-04-19ï¼‰èµ·ï¼ŒICN/ICNSç­‰å¤šç§åŠ è½½å™¨é»˜è®¤å°±ä¸å†æ„å»ºï¼Œå¾ˆå¤šå‘è¡Œç‰ˆï¼ˆå« Archï¼‰æ²¿ç”¨äº†è¿™ä¸ªé»˜è®¤è®¾ç½®ï¼Œæ‰€ä»¥Nautilus 49.1ä¸ä¼šä¸º.icnsç”Ÿæˆç¼©ç•¥å›¾ã€‚\nä¿®å¤æ–¹æ³• # å®‰è£…å¿…éœ€å·¥å…· paru -S --needed libicns imagemagick å†™å…¥ thumbnailer æè¿°æ–‡ä»¶ï¼ˆç”¨æˆ·çº§ï¼‰ mkdir -p ~/.local/share/thumbnailers cat \u0026gt; ~/.local/share/thumbnailers/icns.thumbnailer \u0026lt;\u0026lt;\u0026#39;EOF\u0026#39; [Thumbnailer Entry] TryExec=icns2png # ç”¨ ImageMagick 7 çš„å…¥å£ `magick`ï¼ˆArch é»˜è®¤ï¼‰ Exec=bash -lc \u0026#39;tmp=$(mktemp -d); icns2png -x -o \u0026#34;$tmp\u0026#34; %i \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; f=$(ls -1 \u0026#34;$tmp\u0026#34;/* 2\u0026gt;/dev/null | sort -V | tail -n1); test -n \u0026#34;$f\u0026#34; \u0026amp;\u0026amp; magick \u0026#34;$f\u0026#34; -thumbnail %s \u0026#34;%o\u0026#34;; rm -rf \u0026#34;$tmp\u0026#34;\u0026#39; MimeType=image/x-icns; EOF é‡å¯æ–‡ä»¶ç®¡ç†å™¨å¹¶æ¸…ç†æ—§ç¼©ç•¥å›¾ç¼“å­˜ nautilus -q || true rm -rf ~/.cache/thumbnails/* ä¿®å¤ç»“æœ # ç°åœ¨å·²ç»å¯ä»¥å’Œä¹‹å‰ä¸€æ ·æ­£å¸¸æ˜¾ç¤ºäº†ã€‚ ","date":"2025å¹´10æœˆ20æ—¥","externalUrl":null,"permalink":"/posts/gnome49-.icns%E6%96%87%E4%BB%B6%E9%A2%84%E8%A7%88%E4%BF%AE%E5%A4%8D/","section":"æ–‡ç« ","summary":"","title":"Gnome49 .Icnsæ–‡ä»¶é¢„è§ˆä¿®å¤","type":"posts"},{"content":"","date":"2025å¹´10æœˆ20æ—¥","externalUrl":null,"permalink":"/tags/icns/","section":"Tags","summary":"","title":"Icns","type":"tags"},{"content":"","date":"2025å¹´10æœˆ20æ—¥","externalUrl":null,"permalink":"/","section":"MyBlog","summary":"","title":"MyBlog","type":"page"},{"content":"","date":"2025å¹´10æœˆ20æ—¥","externalUrl":null,"permalink":"/tags/nautilus/","section":"Tags","summary":"","title":"Nautilus","type":"tags"},{"content":"","date":"2025å¹´10æœˆ20æ—¥","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":"","date":"2025å¹´10æœˆ19æ—¥","externalUrl":null,"permalink":"/tags/cvae/","section":"Tags","summary":"","title":"CVAE","type":"tags"},{"content":"","date":"2025å¹´10æœˆ19æ—¥","externalUrl":null,"permalink":"/tags/embodied-ai/","section":"Tags","summary":"","title":"Embodied AI","type":"tags"},{"content":"","date":"2025å¹´10æœˆ19æ—¥","externalUrl":null,"permalink":"/tags/math/","section":"Tags","summary":"","title":"Math","type":"tags"},{"content":"","date":"2025å¹´10æœˆ19æ—¥","externalUrl":null,"permalink":"/tags/model/","section":"Tags","summary":"","title":"Model","type":"tags"},{"content":"","date":"2025å¹´10æœˆ19æ—¥","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"},{"content":"","date":"2025å¹´10æœˆ19æ—¥","externalUrl":null,"permalink":"/tags/vae/","section":"Tags","summary":"","title":"VAE","type":"tags"},{"content":"","date":"2025å¹´10æœˆ19æ—¥","externalUrl":null,"permalink":"/series/%E5%B8%B8%E8%A7%81%E6%A8%A1%E5%9E%8B%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA/","section":"Series","summary":"","title":"å¸¸è§æ¨¡å‹æ·±å…¥æµ…å‡º","type":"series"},{"content":" 0. å†™åœ¨å¼€å¤´ # åœ¨ ACT æ¨¡å‹ ä¸­ï¼Œæˆ‘ä»¬æåˆ°äº† VAE å’Œ CVAEã€‚æœ¬æ–‡å¯¹è¿™ä¸¤ç±»ç”Ÿæˆæ¨¡å‹åšä¸€ä¸ªç›´è§‚æ¢³ç†ã€‚\nVAEï¼šæŠŠè‡ªç¼–ç å™¨æ”¾è¿›æ¦‚ç‡å›¾æ™¯ï¼Œç”¨å˜åˆ†æ¨æ–­ä¸é‡å‚æ•°åŒ–æŠ€å·§æŠŠâ€œå­¦ä¹ å¯é‡‡æ ·çš„æ½œå˜é‡åˆ†å¸ƒâ€è½¬æˆå¯å¾®çš„é‡å»ºé¡¹ + KL æ­£åˆ™ï¼Œä»è€Œæ—¢èƒ½å‹ç¼©åˆèƒ½ç”Ÿæˆã€‚ CVAEï¼šåœ¨ VAE çš„æ½œå˜é‡ä¸/æˆ–è§£ç å™¨ä¸­æ˜¾å¼åŠ å…¥æ¡ä»¶ $c$ï¼Œä½¿ç”Ÿæˆåˆ†å¸ƒå˜ä¸º $p_\\theta(x\\mid z,c)$ï¼Œä»è€Œå®ç°å—æ§ç”Ÿæˆï¼ˆæŒ‰æ ‡ç­¾ã€æ–‡æœ¬ç­‰å®šå‘å‡ºæ ·æœ¬ï¼‰ã€‚ AEï¼ˆAutoencoderï¼Œè‡ªç¼–ç å™¨ï¼‰ # ç»“æ„ï¼šç¼–ç å™¨å°†è¾“å…¥ $x$ æ˜ å°„ä¸ºç¡®å®šæ€§çš„æ½œåœ¨å‘é‡ $z=f_\\phi(x)$ï¼›è§£ç å™¨é‡å»º $\\hat x=g_\\theta(z)$ã€‚\nè®­ç»ƒç›®æ ‡ï¼šæœ€å°åŒ–é‡å»ºè¯¯å·®ï¼ˆæ— å…ˆéªŒä¸ $\\mathrm{KL}$ æ­£åˆ™ï¼‰ã€‚å¸¸è§æŸå¤±ï¼š\n$$ \\mathcal{L}_{\\mathrm{AE}}(\\theta,\\phi) = \\mathbb{E}_{x\\sim\\mathcal{D}}\\big[\\ell\\!\\left(x,\\; g_\\theta\\!\\big(f_\\phi(x)\\big)\\right)\\big], $$ å…¶ä¸­ $\\ell$ å¯å–å‡æ–¹è¯¯å·®ï¼ˆMSEï¼‰æˆ–äº¤å‰ç†µç­‰ã€‚ ä½œç”¨ï¼šå­¦ä¹ æœ‰æ•ˆè¡¨ç¤ºä¸å‹ç¼©ï¼›ä½†æ½œåœ¨ç©ºé—´å¾€å¾€ä¸è¿ç»­ã€éš¾ä»¥å¹³æ»‘é‡‡æ ·ç”Ÿæˆã€‚\nVAEï¼ˆVariational Autoencoderï¼Œå˜åˆ†è‡ªç¼–ç å™¨ï¼‰ # æ ¸å¿ƒæƒ³æ³•ï¼šè®©ç¼–ç å™¨è¾“å‡ºåˆ†å¸ƒå‚æ•°ï¼ˆå¦‚å‡å€¼ $\\mu_\\phi(x)$ã€æ–¹å·® $\\sigma_\\phi^2(x)$ï¼‰ï¼Œå®šä¹‰è¿‘ä¼¼åéªŒ $q_\\phi(z\\mid x)=\\mathcal N\\!\\big(\\mu_\\phi(x),\\operatorname{diag}(\\sigma_\\phi^2(x))\\big)$ï¼Œå†ä»ä¸­é‡‡æ · $z$ é€å…¥è§£ç å™¨ã€‚ é‡å‚æ•°åŒ–æŠ€å·§ï¼šä¸ºä½¿é‡‡æ ·å¯åä¼ ï¼Œå†™ä½œ $$ z=\\mu_\\phi(x)+\\sigma_\\phi(x)\\odot\\varepsilon,\\quad \\varepsilon\\sim\\mathcal N(0,I). $$ ç›®æ ‡å‡½æ•°ï¼ˆæœ€å¤§åŒ– ELBOï¼Œç­‰ä»·äºæœ€å°åŒ–è´Ÿ ELBOï¼‰ï¼š $$ \\mathcal L_{\\mathrm{VAE}}(\\theta,\\phi) = \\mathbb{E}_{q_\\phi(z\\mid x)}\\!\\left[\\log p_\\theta(x\\mid z)\\right] - \\mathrm{KL}\\!\\left(q_\\phi(z\\mid x)\\,\\|\\,p(z)\\right) $$ å…¶ä¸­å…ˆéªŒå¸¸å– $p(z)=\\mathcal N(0,I)$ã€‚ ç¬¬ä¸€é¡¹æ˜¯é‡å»ºé¡¹ï¼Œé¼“åŠ±å¤åŸè¾“å…¥ï¼› ç¬¬äºŒé¡¹æ˜¯æ­£åˆ™é¡¹ï¼Œå°†è¿‘ä¼¼åéªŒæ‹‰å‘å…ˆéªŒï¼Œä½¿æ½œåœ¨ç©ºé—´å¹³æ»‘ã€å¯æ’å€¼ã€å¯é‡‡æ ·ã€‚ ä¼˜ç‚¹ï¼šæ½œåœ¨ç©ºé—´è¿ç»­ã€å¯æ§æ’å€¼ä¸éšæœºé‡‡æ ·ç”Ÿæˆæ–°æ ·æœ¬ã€‚ å±€é™ï¼šåŸºæœ¬ VAE æ˜¯æ— æ¡ä»¶ç”Ÿæˆï¼Œéš¾ä»¥æŒ‡å®šç”Ÿæˆâ€œæŸä¸€ç±»â€æ ·æœ¬ï¼›ä¸”é‡å»ºå¾€å¾€åæ¨¡ç³Šï¼ˆå¯¹åƒç´ çº§ä¼¼ç„¶çš„é«˜æ–¯å‡è®¾ç­‰æœ‰å…³ï¼‰ã€‚ VAE æ•°å­¦æ¨å¯¼ # è®¾æœ‰ $N$ ä¸ªç‹¬ç«‹åŒåˆ†å¸ƒæ ·æœ¬\n$$ X=(x^1,x^2,\\cdots,x^N). $$æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¯¹ç”Ÿæˆæ¨¡å‹çš„å‚æ•° $\\theta$ è¿›è¡Œæå¤§ä¼¼ç„¶ä¼°è®¡ã€‚ä¼¼ç„¶å†™ä¸º $p_\\theta(X)$ã€‚åœ¨ i.i.d. å‡è®¾ä¸‹ï¼Œæœ‰\n$$ \\log p_\\theta(X)=\\sum_{i=1}^N \\log p_\\theta(x^i). $$å…ˆè€ƒå¯Ÿå•ä¸ªæ ·æœ¬ $x$ çš„å¯¹æ•°ä¼¼ç„¶ã€‚å¯¹äºä»»æ„æ½œå˜é‡ $z$ï¼Œæ’ç­‰å¼\n$$ \\log p_\\theta(x)=\\log \\frac{p_\\theta(x,z)}{p_\\theta(z\\mid x)} $$æˆç«‹ï¼ˆå½“ $p_\\theta(z\\mid x)\u003e0$ æ—¶ï¼‰ã€‚\nå¼•å…¥å˜åˆ†åˆ†å¸ƒ $q_\\phi(z\\mid x)$ï¼ˆç”¨ä»¥è¿‘ä¼¼éš¾ä»¥æ±‚è§£çš„åéªŒ $p_\\theta(z\\mid x)$ï¼‰ã€‚å¯¹ä¸Šè¿°ç­‰å¼ä¸¤ä¾§ä»¥ $q_\\phi(z\\mid x)$ ç§¯åˆ†ï¼š\nå·¦è¾¹\n$$ \\int q_\\phi(z\\mid x)\\,\\log p_\\theta(x)\\,dz=\\log p_\\theta(x), $$å³è¾¹\n$$ \\begin{aligned} \\int q_\\phi(z\\mid x)\\,\\log \\frac{p_\\theta(x,z)}{p_\\theta(z\\mid x)}\\,dz \u0026=\\int q_\\phi(z\\mid x)\\,\\log \\frac{p_\\theta(x,z)}{q_\\phi(z\\mid x)}\\,dz \\;+\\;\\mathrm{KL}\\!\\left(q_\\phi(z\\mid x)\\,\\|\\,p_\\theta(z\\mid x)\\right). \\end{aligned} $$å› æ­¤å¾—åˆ°\n$$ \\log p_\\theta(x) =\\underbrace{\\int q_\\phi(z\\mid x)\\,\\log \\frac{p_\\theta(x,z)}{q_\\phi(z\\mid x)}\\,dz}_{\\text{ELBO}} +\\mathrm{KL}\\!\\left(q_\\phi(z\\mid x)\\,\\|\\,p_\\theta(z\\mid x)\\right). $$ç”± $\\mathrm{KL}\\ge 0$ å¯çŸ¥ï¼Œä¸‹ç•Œï¼ˆELBOï¼‰æ»¡è¶³\n$$ \\log p_\\theta(x)\\;\\ge\\;\\mathcal{L}(\\theta,\\phi;x) :=\\int q_\\phi(z\\mid x)\\,\\log \\frac{p_\\theta(x,z)}{q_\\phi(z\\mid x)}\\,dz. $$å°†è”åˆåˆ†å¸ƒæŒ‰é“¾å¼åˆ†è§£ $p_\\theta(x,z)=p_\\theta(x\\mid z)\\,p(z)$ï¼Œå¹¶å¯¹ ELBO é‡å†™ä¸ºæ ‡å‡†å½¢å¼ï¼š\n$$ \\begin{aligned} \\mathcal{L}(\\theta,\\phi;x) \u0026=\\mathbb{E}_{z\\sim q_\\phi(z\\mid x)}\\big[\\log p_\\theta(x\\mid z)\\big] -\\mathrm{KL}\\!\\left(q_\\phi(z\\mid x)\\,\\|\\,p(z)\\right). \\end{aligned} $$å…¶ä¸­ç¬¬ä¸€é¡¹æ˜¯é‡æ„é¡¹ï¼ˆæœŸæœ›å¯¹æ•°ä¼¼ç„¶ï¼‰ï¼Œç¬¬äºŒé¡¹æ˜¯å°†è¿‘ä¼¼åéªŒæ‹‰å‘å…ˆéªŒçš„æ­£åˆ™é¡¹ã€‚\nå¯¹æ•´æ‰¹æ ·æœ¬ï¼Œç›®æ ‡ä¸º\n$$ \\max_{\\theta,\\phi}\\;\\sum_{i=1}^N \\mathcal{L}(\\theta,\\phi;x^i) =\\max_{\\theta,\\phi}\\;\\sum_{i=1}^N\\left( \\mathbb{E}_{z\\sim q_\\phi(z\\mid x^i)}\\big[\\log p_\\theta(x^i\\mid z)\\big] -\\mathrm{KL}\\!\\left(q_\\phi(z\\mid x^i)\\,\\|\\,p(z)\\right)\\right). $$ç”±äº $p_\\theta(z\\mid x)$ éš¾ä»¥ç›´æ¥è®¡ç®—ï¼Œå¸¸ç”¨çš„åšæ³•æ˜¯ç›´æ¥æœ€å¤§åŒ– ELBOï¼ˆç­‰ä»·äºåœ¨å›ºå®š $x$ ä¸ $\\theta$ æ—¶æœ€å°åŒ– $\\mathrm{KL}\\!\\left(q_\\phi(z\\mid x)\\,\\|\\,p_\\theta(z\\mid x)\\right)$ï¼Œå› ä¸º $\\log p_\\theta(x)$ ä¸ºå¸¸æ•°ï¼‰ã€‚ä¼˜åŒ–æ–¹å¼ä¸Šæ—¢å¯ä»¥è”åˆå¯¹ $(\\theta,\\phi)$ åšæ¢¯åº¦ä¸Šå‡ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨å˜åˆ† EM çš„äº¤æ›¿ç­–ç•¥ï¼š\næ­¥éª¤ â‘ ï¼šå›ºå®š $\\theta$ï¼Œæ›´æ–° $\\phi$ï¼Œä»¥æœ€å¤§åŒ– $\\mathcal{L}(\\theta,\\phi;x)$ï¼›\næ­¥éª¤ â‘¡ï¼šå›ºå®š $\\phi$ï¼Œæ›´æ–° $\\theta$ï¼Œä»¥æœ€å¤§åŒ– $\\mathcal{L}(\\theta,\\phi;x)$ã€‚\nç›´è§‚ä¸Šï¼Œç¬¬ä¸€é¡¹ $\\mathbb{E}_{z\\sim q_\\phi(z\\mid x)}[\\log p_\\theta(x\\mid z)]$ å¯ç†è§£ä¸ºä» $q_\\phi(z\\mid x)$ é‡‡æ · $z$ åçš„é‡æ„å¯¹æ•°ä¼¼ç„¶çš„æœŸæœ›ï¼Œæœ€å¤§åŒ–å®ƒç­‰ä»·äºæœ€å°åŒ–é‡æ„è¯¯å·®ï¼›ç¬¬äºŒé¡¹ $-\\mathrm{KL}\\!\\left(q_\\phi(z\\mid x)\\,\\|\\,p(z)\\right)$ é¼“åŠ±è¿‘ä¼¼åéªŒæ¥è¿‘å…ˆéªŒã€‚\nç»†åŒ–ç›®æ ‡å‡½æ•° # è¯æ®ä¸‹ç•Œï¼ˆELBOï¼‰å†™ä½œï¼š\n$$ \\mathcal{L}(x) = \\mathbb{E}_{q_\\phi(z|x)}\\![\\log p_\\theta(x|z)]- D_{KL}\\!\\bigl(q_\\phi(z|x)\\,\\|\\,p(z)\\bigr). $$æœ€å¤§åŒ– $\\mathcal{L}(x)$ ç­‰ä»·äºæœ€å°åŒ–ç¬¬äºŒé¡¹çš„ $D_{KL}$ã€‚å–å…ˆéªŒ $p(z)=\\mathcal{N}(0,I)$ï¼Œå¹¶è®¾ $q_\\phi(z|x)=\\mathcal{N}\\!\\bigl(\\mu_\\phi(x),\\operatorname{diag}(\\sigma^2_\\phi(x))\\bigr)$ï¼Œå³å„ç»´ç‹¬ç«‹çš„é«˜æ–¯è¿‘ä¼¼ã€‚\nå¯¹å•ä¸ªç»´åº¦ $z_j$ï¼Œè®° $q(z_j|x)=\\mathcal{N}(\\mu,\\sigma^2)$ã€$p(z_j)=\\mathcal{N}(0,1)$ï¼ˆä¸ºç®€æ´çœç•¥ä¸‹æ ‡ä¸å‚æ•°ï¼‰ï¼Œæœ‰\n$$ \\begin{aligned} D_{KL}\\bigl(q(z_j|x)\\,\\|\\,p(z_j)\\bigr) \u0026= \\int q(z_j|x)\\,\\log\\frac{q(z_j|x)}{p(z_j)}\\,dz_j \\\\ \u0026= \\int q(z_j|x)\\,\\log \\frac{\\tfrac{1}{\\sqrt{2\\pi}\\sigma}\\exp\\!\\left(-\\tfrac{(z_j-\\mu)^2}{2\\sigma^2}\\right)} {\\tfrac{1}{\\sqrt{2\\pi}}\\exp\\!\\left(-\\tfrac{z_j^2}{2}\\right)}\\,dz_j \\\\ \u0026= \\frac{1}{2}\\int q(z_j|x) \\left( z_j^2 - \\log\\sigma^2 - \\frac{(z_j-\\mu)^2}{\\sigma^2} \\right) dz_j. \\end{aligned} $$å°†æœŸæœ›åˆ†è§£ä¸ºä¸‰é¡¹å¹¶åˆ†åˆ«è®¡ç®—ï¼š\n$$ \\int q(z_j|x)\\,z_j^2\\,dz_j=\\mathbb{E}[z_j^2] =\\operatorname{Var}(z_j)+\\mathbb{E}[z_j]^2=\\sigma^2+\\mu^2, $$$$ \\int q(z_j|x)\\,\\log\\sigma^2\\,dz_j=\\log\\sigma^2, $$$$ \\int q(z_j|x)\\,\\frac{(z_j-\\mu)^2}{\\sigma^2}\\,dz_j =\\frac{1}{\\sigma^2}\\,\\mathbb{E}\\!\\left[(z_j-\\mu)^2\\right]=1. $$æ•…å•ç»´çš„ KL ä¸º\n$$ D_{KL}\\bigl(q(z_j|x)\\,\\|\\,p(z_j)\\bigr) =\\frac{1}{2}\\left(\\mu^2+\\sigma^2-\\log\\sigma^2-1\\right). $$åœ¨ $J$ ç»´ç‹¬ç«‹å‡è®¾ä¸‹ï¼Œå¯¹æ‰€æœ‰ç»´åº¦æ±‚å’Œå¯å¾—\n$$ D_{KL}\\bigl(q_\\phi(z|x)\\,\\|\\,p(z)\\bigr) =\\frac{1}{2}\\sum_{j=1}^{J}\\left(\\mu_j^2+\\sigma_j^2-\\log\\sigma_j^2-1\\right). $$å› æ­¤ï¼Œæœ€å¤§åŒ– $\\mathcal{L}(x)$ ç­‰ä»·äºæœ€å°åŒ–ä¸Šå¼ï¼›è¿™ä¹Ÿæ˜¯ VAE è®­ç»ƒä¸­å¸¸ç”¨çš„é—­å¼ KL é¡¹ã€‚\næœ€å°é‡æ„ä»£ä»· # ç»™å®šå•ä¸ªæ ·æœ¬ $x$ï¼Œé‡æ„é¡¹å®šä¹‰ä¸º\n$$ \\mathbb{E}_{z\\sim q_\\phi(z|x)}\\!\\left[\\log p_\\theta(x|z)\\right] = \\int \\log p_\\theta(x|z)\\, q_\\phi(z|x)\\,dz \\approx \\frac{1}{n}\\sum_{i=1}^{n} \\log p_\\theta\\!\\left(x\\,\\big|\\,z^{(i)}\\right), $$å…¶ä¸­ $z^{(i)}\\sim q_\\phi(z|x)$ æ˜¯è’™ç‰¹å¡ç½—é‡‡æ ·ã€‚\nå¸¸è§çš„å‡è®¾æ˜¯ $p_\\theta(x|z)=\\mathcal N(\\mu_\\theta(z),\\sigma_\\theta^2(z)I)$ã€‚æ›´ç®€å•åœ°ï¼Œä¹Ÿå¯å›ºå®šåæ–¹å·®ä¸ºå¸¸æ•° $c\u003e0$ï¼š\n$$ p_\\theta(x|z)=\\mathcal N\\!\\left(f_\\theta(z),\\,cI\\right). $$æ­¤æ—¶\n$$ \\log p_\\theta(x|z) = -\\frac{D}{2}\\log(2\\pi) - \\frac{D}{2}\\log c - \\frac{1}{2c}\\,\\|x-f_\\theta(z)\\|^2, $$å› æ­¤æœ€å¤§åŒ–é‡æ„é¡¹ç­‰ä»·äºæœ€å°åŒ–å‡æ–¹è¯¯å·®çš„æœŸæœ›ï¼ˆå¿½ç•¥ä¸ $\\theta,\\phi$ æ— å…³çš„å¸¸æ•°ï¼‰ï¼š\n$$ \\max\\,\\mathbb{E}_{q_\\phi}\\!\\left[\\log p_\\theta(x|z)\\right] \\ \\Longleftrightarrow\\ \\min\\,\\frac{1}{2c}\\,\\mathbb{E}_{q_\\phi}\\!\\left[\\|x-f_\\theta(z)\\|^2\\right] \\ \\approx\\ \\min\\,\\frac{1}{2c}\\cdot\\frac{1}{n}\\sum_{i=1}^{n}\\big\\|x-f_\\theta\\!\\left(z^{(i)}\\right)\\big\\|^2. $$å°†å…¶ä¸ KL é¡¹åˆå¹¶ï¼ˆå–å…ˆéªŒ $p(z)=\\mathcal N(0,I)$ï¼Œä¸” $q_\\phi(z|x)=\\mathcal N\\!\\big(\\mu(x),\\operatorname{diag}\\sigma^2(x)\\big)$ï¼‰ï¼Œå¾—åˆ°å•æ ·æœ¬çš„è´Ÿ ELBOï¼ˆå¾…æœ€å°åŒ–ï¼‰ï¼š\n$$ \\min_{\\theta,\\phi}\\ \\left[ \\underbrace{\\frac{1}{2}\\sum_{j=1}^{J}\\!\\left(\\sigma_j^2+\\mu_j^2-\\log\\sigma_j^2-1\\right)}_{\\text{KL}\\big(q_\\phi(z|x)\\,\\|\\,\\mathcal N(0,I)\\big)} \\ +\\ \\underbrace{\\frac{1}{2c}\\cdot\\frac{1}{n}\\sum_{i=1}^{n}\\big\\|x-f_\\theta\\!\\left(z^{(i)}\\right)\\big\\|^2}_{-\\mathbb E_{q_\\phi}\\![\\log p_\\theta(x|z)]} \\right]. $$å…³äºå¯å¯¼æ€§ï¼šç›´æ¥å¯¹ $z$ é‡‡æ ·ä½¿å¾—å¯¹ç¼–ç å™¨å‚æ•° $\\phi$ çš„æ¢¯åº¦ä¸å¯ä¼ é€’ã€‚ä¸ºæ­¤ä½¿ç”¨é‡å‚æ•°åŒ–æŠ€å·§\n$$ z=\\mu_\\phi(x)+\\sigma_\\phi(x)\\odot\\varepsilon,\\qquad \\varepsilon\\sim\\mathcal N(0,I), $$ä»è€Œæ¢¯åº¦å¯ç»ç”± $\\varepsilon$ çš„ç¡®å®šæ€§å˜æ¢ä¼ å›ç¼–ç å™¨ã€‚\né‡å‚æ•°åŒ–æŠ€å·§ # å‡å®š $q(z\\mid x)=\\mathcal N(\\mu,\\sigma^2)$ï¼Œå…¶ä¸­ $\\mu=\\mu(x)$ã€$\\sigma=\\sigma(x)\u003e0$ã€‚ä»¤ $\\epsilon\\sim\\mathcal N(0,1)$ ä¸”ä¸ $x$ ç‹¬ç«‹ï¼Œå®šä¹‰é‡å‚æ•°åŒ–\n$$ z=\\mu+\\sigma\\,\\epsilon. $$äºæ˜¯ï¼Œåªéœ€å…ˆä» $\\epsilon\\sim\\mathcal N(0,1)$ é‡‡æ ·ï¼Œå†ä»£å…¥ä¸Šå¼ï¼Œå°±å¾—åˆ°äº†ç­‰ä»·äºä» $q(z\\mid x)$ é‡‡æ ·çš„æ ·æœ¬ã€‚\nè¯æ˜ï¼ˆæ¡ä»¶äº $x$ï¼‰ï¼š\n$$ \\mathbb E[z\\mid x]=\\mu+\\sigma\\,\\mathbb E[\\epsilon]=\\mu, $$$$ \\mathrm{Var}(z\\mid x)=\\mathbb E\\big[(z-\\mu)^2\\mid x\\big] =\\mathbb E\\big[(\\sigma\\epsilon)^2\\mid x\\big] =\\sigma^2\\,\\mathbb E[\\epsilon^2]=\\sigma^2. $$ æ¨¡å‹å›¾ # %%{init: {'theme':'base','themeVariables':{ 'background':'#E8F3FF', 'primaryColor':'#FFFFFF', 'primaryBorderColor':'#3B82F6', 'primaryTextColor':'#0F172A', 'lineColor':'#2563EB', 'fontFamily':'Inter, Arial' }}}%% flowchart LR %% --- Classes \u0026 link style --- classDef node fill:#FFFFFF,stroke:#3B82F6,stroke-width:1.5px,rx:10px,ry:10px,color:#0F172A; classDef soft fill:#F0F7FF,stroke:#60A5FA,stroke-width:1.5px,rx:10px,ry:10px,color:#0F172A; linkStyle default stroke:#2563EB,stroke-width:2px; %% --- Encoder --- subgraph ENCGRP[\"ç¼–ç å™¨ $q_Ï†(z|x)$\"] X[\"è®­ç»ƒæ ·æœ¬ $x$\"] ENC[\"ç¥ç»ç½‘ç»œ\"] MU[\"å‡å€¼ $Î¼_Ï†(x)$\"] LOGVAR[\"å¯¹æ•°æ–¹å·® $log Ïƒ_Ï†Â²(x)$\"] X --\u003e ENC ENC --\u003e MU ENC --\u003e LOGVAR end MU -- \"é‡å‚æ•°åŒ–\" --\u003e Z((\"éšå˜é‡ $z$\")) LOGVAR -- \"é‡å‚æ•°åŒ–\" --\u003e Z %% --- Decoder --- subgraph DECGRP[\"è§£ç å™¨ $p_Î¸(x|z)$\"] Z --\u003e DEC[\"ç¥ç»ç½‘ç»œ $f_Î¸$\"] DEC --\u003e XHAT[\"é‡æ„ $xÌ‚$\"] end %% --- Apply styles --- class X,ENC,MU,LOGVAR,DEC,XHAT node; class Z soft; style ENCGRP fill:#E6F0FF,stroke:#60A5FA,stroke-width:2px; style DECGRP fill:#E6F0FF,stroke:#60A5FA,stroke-width:2px; $$ \\text{ELBO}(\\theta,\\phi;x) = \\mathbb{E}_{q_\\phi(z\\mid x)}\\!\\big[\\log p_\\theta(x\\mid z)\\big]- \\mathrm{KL}\\!\\big(q_\\phi(z\\mid x)\\,\\|\\,p(z)\\big). $$æœ€å¤§åŒ– ELBO ç­‰ä»·äºæœ€å°åŒ–å…¶ç›¸åæ•°ï¼ˆå¸¸ä½œä¸ºè®­ç»ƒæŸå¤±ï¼‰ï¼š\n$$ \\min_{\\theta,\\phi}\\;\\mathcal{L}(x)= \\underbrace{-\\,\\mathbb{E}_{q_\\phi(z\\mid x)}\\!\\big[\\log p_\\theta(x\\mid z)\\big]}_{\\text{é‡æ„æŸå¤±}}+ \\underbrace{\\mathrm{KL}\\!\\big(q_\\phi(z\\mid x)\\,\\|\\,\\mathcal{N}(0,I)\\big)}_{\\text{å…ˆéªŒå¯¹é½}}. $$å½“é‡‡ç”¨å„å‘å¼‚æ€§é«˜æ–¯åéªŒè¿‘ä¼¼ \\(q*\\phi(z\\mid x)=\\mathcal N\\!\\big(\\mu*\\phi(x),\\mathrm{diag}(\\sigma\\_\\phi^2(x))\\big)\\) ä¸”å…ˆéªŒ \\(p(z)=\\mathcal N(0,I)\\) æ—¶ï¼ŒKL çš„é—­å¼è§£ä¸º\n$$ \\mathrm{KL}\\!\\big(q_\\phi(z\\mid x)\\,\\|\\,\\mathcal N(0,I)\\big) = \\frac{1}{2}\\sum_{j=1}^{J}\\Big(\\sigma_j^2+\\mu_j^2-\\log\\sigma_j^2-1\\Big), $$å…¶ä¸­ $\\mu*j,\\sigma_j$ ä¸º $\\mu*\\phi(x),\\sigma*\\phi(x)$ çš„åˆ†é‡ã€‚å®è·µä¸­å¸¸ç›´æ¥é¢„æµ‹ $\\log\\sigma*\\phi^2(x)$ã€‚\nè®­ç»ƒé˜¶æ®µï¼ˆlearningï¼‰ # ç¼–ç å™¨ $q\\_{\\phi}(z\\mid x)$ è¾“å…¥æ ·æœ¬ $x$ï¼Œç¥ç»ç½‘ç»œè¾“å‡ºè¿‘ä¼¼åéªŒå‚æ•°ï¼š\n$$ \\mu_\\phi(x),\\;\\log\\sigma_\\phi^2(x). $$ç”±æ­¤å¾—åˆ° $\\sigma*\\phi(x)=\\exp\\!\\big(\\tfrac{1}{2}\\log\\sigma*\\phi^2(x)\\big)$ã€‚\né‡å‚æ•°åŒ–é‡‡æ ·ï¼ˆå¯å¯¼ï¼‰ ä»æ ‡å‡†æ­£æ€é‡‡æ · $\\epsilon \\sim \\mathcal N(0, I)$ï¼Œæ„é€ \n$$ z=\\mu_\\phi(x)+\\sigma_\\phi(x)\\odot \\epsilon, $$ä½¿å¾—æ¢¯åº¦å¯ç»ç”± $z$ ä¼ å›åˆ° $\\phi$ã€‚\nè§£ç å™¨ $p\\_{\\theta}(x\\mid z)$ å°† $z$ è¾“å…¥è§£ç å™¨ $f*\\theta$ï¼Œå¾—åˆ°é‡æ„ $\\hat x=f*\\theta(z)$ï¼Œå¯¹åº”ä¼¼ç„¶ $p*\\theta(x\\mid z)$ã€‚\næŸå¤±å‡½æ•°ï¼ˆæœ€å°åŒ–ï¼‰\n$$ \\mathcal L(x) = -\\,\\mathbb E_{q_\\phi(z\\mid x)}[\\log p_\\theta(x\\mid z)] + \\mathrm{KL}\\!\\big(q_\\phi(z\\mid x)\\,\\|\\,\\mathcal N(0,I)\\big) $$ è‹¥å»ºæ¨¡ä¸ºä¼¯åŠªåˆ©ä¼¼ç„¶ $p\\_\\theta(x\\mid z)=\\mathrm{Bernoulli}(\\hat x)$ï¼ˆå›¾åƒå·²å½’ä¸€åŒ–è‡³ $[0,1]$ï¼‰ï¼Œ é‡æ„é¡¹å¯¹åº” BCEã€‚ è‹¥å»ºæ¨¡ä¸ºå„å‘åŒæ€§é«˜æ–¯ $p\\_\\theta(x\\mid z)=\\mathcal N(\\hat x,\\sigma_x^2 I)$ï¼ˆå¸¸å–å›ºå®š $\\sigma_x$ï¼‰ï¼Œ é‡æ„é¡¹ç­‰ä»·äº MSEï¼ˆå·®ä¸€ä¸ªå¸¸æ•°å› å­ï¼‰ã€‚ ä¼˜åŒ– å¯¹ $(\\phi,\\theta)$ è¿›è¡Œåå‘ä¼ æ’­ä¸å‚æ•°æ›´æ–°ï¼Œç›´è‡³æ”¶æ•›ã€‚\nç”Ÿæˆé˜¶æ®µï¼ˆinferenceï¼‰ # ç›´æ¥ä»å…ˆéªŒé‡‡æ · $z \\sim \\mathcal N(0,I)$ï¼Œé€å…¥è§£ç å™¨ $f*\\theta$ å¾—åˆ°æ–°æ ·æœ¬ $\\tilde x=f*\\theta(z)$ã€‚ CVAEï¼ˆConditional VAEï¼Œæ¡ä»¶å˜åˆ†è‡ªç¼–ç å™¨ï¼‰ # æ¡ä»¶åŒ–æ€è·¯ï¼šå¼•å…¥æ¡ä»¶ $c$ï¼ˆå¦‚ç±»åˆ«ã€æ–‡æœ¬ç‰¹å¾ï¼‰ï¼Œå¹¶å°†å…¶æ³¨å…¥ç¼–ç å™¨ä¸è§£ç å™¨ï¼š ç¼–ç å™¨æ¡ä»¶åŒ–ï¼š$\\text{Encoder}(x,c)\\to(\\mu_z,\\sigma_z)$ï¼Œå³ $q_\\phi(z\\mid x,c)$ï¼› è§£ç å™¨æ¡ä»¶åŒ–ï¼š$\\text{Decoder}(z,c)\\to \\hat x$ï¼Œå³ä½¿ç”¨ $p_\\theta(x\\mid z,c)$ã€‚ ç›®æ ‡å‡½æ•°ï¼ˆæ¡ä»¶ ELBOï¼‰ï¼š $$ \\mathcal L_{\\mathrm{CVAE}}(\\theta,\\phi) = \\mathbb{E}_{q_\\phi(z\\mid x,c)}\\!\\left[\\log p_\\theta(x\\mid z,c)\\right] - \\mathrm{KL}\\!\\left(q_\\phi(z\\mid x,c)\\,\\|\\,p(z\\mid c)\\right) $$ å®è·µä¸­å¸¸å– $p(z\\mid c)=\\mathcal N(0,I)$ï¼ˆä¸ $c$ æ— å…³ï¼‰ä»¥ç®€åŒ–ã€‚ æ•ˆæœï¼šé€šè¿‡åœ¨ç”Ÿæˆé˜¶æ®µæŒ‡å®š $c$ï¼Œå³å¯æŒ‰æ¡ä»¶å—æ§ç”Ÿæˆï¼ˆä¾‹å¦‚æ‰‹å†™ä½“æŒ‡å®šæ•°å­—â€œ7â€ï¼‰ã€‚ CVAE æ•°å­¦æ¨å¯¼ # è®¾ç”Ÿæˆæ¨¡å‹ä¸º $p_\\theta(x\\mid z,c)$ï¼Œå…ˆéªŒä¸º $p_\\theta(z\\mid c)$ï¼Œå˜åˆ†åˆ†å¸ƒä¸º $q_\\phi(z\\mid x,c)$ã€‚ç”±\n$$ p(x,z\\mid c)=p(z\\mid x,c)\\,p(x\\mid c) $$å¯å¾—æ’ç­‰å¼\n$$ \\log p(x\\mid c)=\\log\\frac{p(x,z\\mid c)}{p(z\\mid x,c)}. $$ä¸¤è¾¹å¯¹ $q_\\phi(z\\mid x,c)$ ç§¯åˆ†ï¼Œå·¦è¾¹ä¸º\n$$ \\int q_\\phi(z\\mid x,c)\\,\\log p(x\\mid c)\\,\\mathrm{d}z=\\log p(x\\mid c), $$å³è¾¹ä¸º\n$$ \\int q_\\phi(z\\mid x,c)\\,\\log\\frac{p(x,z\\mid c)}{p(z\\mid x,c)}\\,\\mathrm{d}z. $$åœ¨å³ä¾§åŠ å¹¶å‡å»åŒä¸€é¡¹ $\\int q_\\phi(z\\mid x,c)\\,\\log q_\\phi(z\\mid x,c)\\,\\mathrm{d}z$ï¼Œå¾—åˆ°\n$$ \\begin{aligned} \\log p(x\\mid c) \u0026=\\int q_\\phi(z\\mid x,c)\\,\\log\\frac{p(x,z\\mid c)}{q_\\phi(z\\mid x,c)}\\,\\mathrm{d}z +\\int q_\\phi(z\\mid x,c)\\,\\log\\frac{q_\\phi(z\\mid x,c)}{p(z\\mid x,c)}\\,\\mathrm{d}z \\\\ \u0026=\\underbrace{\\int q_\\phi(z\\mid x,c)\\,\\log\\frac{p(x,z\\mid c)}{q_\\phi(z\\mid x,c)}\\,\\mathrm{d}z}_{\\text{ELBO}(\\theta,\\phi;x,c)} +\\underbrace{KL\\!\\left(q_\\phi(z\\mid x,c)\\,\\|\\,p(z\\mid x,c)\\right)}_{\\ge 0}. \\end{aligned} $$ç”± $KL\\ge 0$ï¼Œå¾—å˜åˆ†ä¸‹ç•Œ\n$$ \\log p(x\\mid c)\\;\\ge\\;\\mathcal{L}_{\\text{ELBO}}(\\theta,\\phi;x,c) =\\int q_\\phi(z\\mid x,c)\\,\\log\\frac{p(x,z\\mid c)}{q_\\phi(z\\mid x,c)}\\,\\mathrm{d}z. $$å°†è”åˆåˆ†å¸ƒåˆ†è§£ä¸º\n$$ p(x,z\\mid c)=p_\\theta(x\\mid z,c)\\,p_\\theta(z\\mid c), $$å¯å°†ä¸‹ç•Œå†™æˆæ›´å¸¸è§çš„â€œé‡æ„é¡¹ âˆ’ KL é¡¹â€å½¢å¼ï¼š\n$$ \\begin{aligned} \\mathcal{L}_{\\text{ELBO}}(\\theta,\\phi;x,c) \u0026=\\int q_\\phi(z\\mid x,c)\\,\\Big[\\log p_\\theta(x\\mid z,c)+\\log p_\\theta(z\\mid c)-\\log q_\\phi(z\\mid x,c)\\Big]\\,\\mathrm{d}z \\\\ \u0026=\\mathbb{E}_{z\\sim q_\\phi(z\\mid x,c)}\\!\\big[\\log p_\\theta(x\\mid z,c)\\big] -KL\\!\\left(q_\\phi(z\\mid x,c)\\,\\|\\,p_\\theta(z\\mid c)\\right). \\end{aligned} $$å…¶ä¸­ç¬¬ä¸€é¡¹ä¸ºâ€œé‡æ„é¡¹â€ï¼Œç¬¬äºŒé¡¹ä¸ºâ€œæ­£åˆ™é¡¹â€ï¼ˆKLï¼‰ã€‚ç”±äºå¯¹ç»™å®šçš„ $x,c$ï¼Œ$\\log p(x\\mid c)$ ä¸å˜åˆ†å‚æ•° $\\phi$ æ— å…³ï¼Œå› æ­¤æœ€å¤§åŒ– $\\mathcal{L}_{\\text{ELBO}}$ ç­‰ä»·äºæœ€å°åŒ– $KL\\!\\left(q_\\phi(z\\mid x,c)\\,\\|\\,p(z\\mid x,c)\\right)$ï¼›åœ¨å®è·µä¸­é€šè¿‡åŒæ—¶ä¼˜åŒ– $\\theta,\\phi$ æ¥æœ€å¤§åŒ–è¯¥ä¸‹ç•Œã€‚\næå¤§ä¼¼ç„¶ # å¯¹æ¯” VAE ä¸ CVAE çš„ç›®æ ‡å‡½æ•°ï¼ˆæœ€å¤§åŒ– ELBO ä»¥è¿‘ä¼¼æœ€å¤§åŒ–å¯¹æ•°ä¼¼ç„¶ï¼‰ï¼š\nCVAEï¼š\n$$ \\log p_\\theta(x\\mid c)\\;\\ge\\; \\mathbb{E}_{q_\\phi(z\\mid x,c)} \\!\\big[\\underbrace{\\log p_\\theta(x\\mid z,c)}_{\\text{é‡æ„é¡¹ â‘ }}\\big] \\;-\\; \\underbrace{\\mathrm{KL}\\!\\left(q_\\phi(z\\mid x,c)\\,\\|\\,p(z\\mid c)\\right)}_{\\text{æ­£åˆ™é¡¹ â‘¡}} $$VAEï¼š\n$$ \\log p_\\theta(x)\\;\\ge\\; \\mathbb{E}_{q_\\phi(z\\mid x)} \\!\\big[\\underbrace{\\log p_\\theta(x\\mid z)}_{\\text{é‡æ„é¡¹ â‘ }}\\big] \\;-\\; \\underbrace{\\mathrm{KL}\\!\\left(q_\\phi(z\\mid x)\\,\\|\\,p(z)\\right)}_{\\text{æ­£åˆ™é¡¹ â‘¡}} $$è¯´æ˜ï¼š\nå‡è®¾ $q_\\phi(z\\mid x,c)$ ä¸ $q_\\phi(z\\mid x)$ ä¸ºé«˜æ–¯åˆ†å¸ƒï¼›åœ¨ CVAE ä¸­ï¼Œæ¨æ–­ç½‘ç»œ $q_\\phi(z\\mid x,c)$ ç›¸æ¯” VAE é¢å¤–æ¥æ”¶æ¡ä»¶ $c$ ä½œä¸ºè¾“å…¥ã€‚ ç”Ÿæˆåˆ†å¸ƒ $p_\\theta(x\\mid z,c)$ ä¸ $p_\\theta(x\\mid z)$ å¸¸æŒ‰æ•°æ®ç±»å‹é€‰å–ï¼šè¿ç»­æ•°æ®å¸¸ç”¨é«˜æ–¯ï¼ŒäºŒå€¼æ•°æ®å¸¸ç”¨ä¼¯åŠªåˆ©ç­‰ï¼›åœ¨ CVAE ä¸­ï¼Œç”Ÿæˆç½‘ç»œ $p_\\theta(x\\mid z,c)$ åŒæ ·é¢å¤–æ¥æ”¶æ¡ä»¶ $c$ã€‚ CVAE çš„å…ˆéªŒå¸¸å†™ä½œ $p(z\\mid c)$ï¼ˆä¹Ÿå¯åœ¨å®è·µä¸­ä½¿ç”¨æ ‡å‡†æ­£æ€ $p(z)$ ä½œä¸ºæ¡ä»¶æ— å…³çš„ç®€åŒ–ï¼‰ã€‚ ä¸¤ç§ç†è§£æ–¹å¼ # ç†è§£ 1ï¼šè®¾ $p(z)=\\mathcal{N}(0,I)$ï¼Œå¹¶å– $p(z\\mid c)=p(z)=\\mathcal{N}(0,I)$ã€‚\nç†è§£ 2ï¼šå‡è®¾ $z$ ä¸ $c$ ç‹¬ç«‹ï¼Œåˆ™æœ‰ $p(z\\mid c)=p(z)$ï¼›è‹¥å†è®¾ $p(z)=\\mathcal{N}(0,I)$ï¼Œåˆ™ $p(z\\mid c)=\\mathcal{N}(0,I)$ã€‚\nç»“è¯­ # è‡³æ­¤ï¼Œæˆ‘ä»¬ä» AE å‡ºå‘ï¼Œèµ°åˆ°èƒ½â€œå¯é‡‡æ ·â€çš„ VAEï¼Œå†åˆ°å¯â€œæŒ‰æ¡ä»¶å®šå‘ç”Ÿæˆâ€çš„ CVAEï¼šå‰è€…è§£å†³é‡æ„ä¸è¿ç»­æ½œåœ¨ç©ºé—´ï¼Œåè€…è®©ç”Ÿæˆå—æ§ã€æ›´å®ç”¨ã€‚è®­ç»ƒä¸­æŠŠæ¡å¥½é‡æ„â€”KL çš„å¹³è¡¡ï¼ˆå¦‚ KL é€€ç«ã€Î²-VAEï¼‰ï¼Œå¹¶å°†æ¡ä»¶ $c$ åŒæ—¶æ³¨å…¥ç¼–ç å™¨ä¸è§£ç å™¨ï¼Œå¾€å¾€å°±èƒ½å¾—åˆ°ç¨³å¥çš„åŸºçº¿ã€‚\nå‚è€ƒèµ„æ–™ # ç‚¹å‡»å±•å¼€æŸ¥çœ‹å‚è€ƒèµ„æ–™ VAE å˜åˆ†è‡ªç¼–ç å™¨åŸç†è§£æ VAE é—®é¢˜è§£ç­”+CVAE åŸç†è§£æ VAE è®ºæ–‡åœ°å€ CVAE è®ºæ–‡åœ°å€ ","date":"2025å¹´10æœˆ19æ—¥","externalUrl":null,"permalink":"/posts/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAvae%E5%92%8Ccvae%E6%A8%A1%E5%9E%8B/","section":"æ–‡ç« ","summary":"","title":"æ·±å…¥æµ…å‡º VAE å’Œ CVAE æ¨¡å‹","type":"posts"},{"content":"","date":"2025å¹´10æœˆ19æ—¥","externalUrl":null,"permalink":"/tags/methodology/","section":"Tags","summary":"","title":"Methodology","type":"tags"},{"content":" æ•°å­¦åŸºç¡€ # æœ¬æ–‡æ—¨åœ¨é€šä¿—æ˜“æ‡‚åœ°ä»‹ç»åŸºæœ¬æ¦‚å¿µï¼Œéƒ¨åˆ†è¡¨è¿°å¯èƒ½ä¸å®Œå…¨ä¸¥è°¨ã€‚\néšæœºäº‹ä»¶ # æ¦‚å¿µï¼šåœ¨è¯•éªŒä¸­å¯èƒ½å‘ç”Ÿä¹Ÿå¯èƒ½ä¸å‘ç”Ÿçš„äº‹ä»¶ç§°ä¸ºéšæœºäº‹ä»¶ã€‚éšæœºäº‹ä»¶é€šå¸¸ç”¨å¤§å†™å­—æ¯ $A$ã€$B$ã€$C$ ç­‰è¡¨ç¤ºã€‚\n$P(A)$ è¡¨ç¤ºäº‹ä»¶ $A$ å‘ç”Ÿçš„æ¦‚ç‡ã€‚\næ¦‚ç‡è¿ç®—æ³•åˆ™ # äº‹ä»¶ç‹¬ç«‹\nå®šä¹‰ï¼šå¦‚æœä¸¤ä¸ªäº‹ä»¶çš„å‘ç”Ÿäº’ä¸å½±å“ï¼Œåˆ™ç§°è¿™ä¸¤ä¸ªäº‹ä»¶ç‹¬ç«‹ã€‚\nå…¬å¼ï¼š$P(A, B) = P(A)P(B)$ å…¶ä¸­ $P(A, B)$ è¡¨ç¤ºäº‹ä»¶ $A$ å’Œäº‹ä»¶ $B$ åŒæ—¶å‘ç”Ÿçš„æ¦‚ç‡ã€‚\næ¡ä»¶æ¦‚ç‡\nå®šä¹‰ï¼šåœ¨äº‹ä»¶ $B$ å‘ç”Ÿçš„æ¡ä»¶ä¸‹ï¼Œäº‹ä»¶ $A$ å‘ç”Ÿçš„æ¦‚ç‡ç§°ä¸ºæ¡ä»¶æ¦‚ç‡ï¼Œè®°ä½œ $P(A|B)$ã€‚\nå…¬å¼ï¼š$P(A|B) = \\frac{P(A, B)}{P(B)}$\nå…¨æ¦‚ç‡å…¬å¼\nå®šä¹‰ï¼šå¦‚æœäº‹ä»¶ $B_1, B_2, \\dots, B_n$ æ˜¯æ ·æœ¬ç©ºé—´ $S$ çš„ä¸€ä¸ªåˆ’åˆ†ï¼ˆå³å®ƒä»¬äº’ä¸ç›¸äº¤ï¼Œä¸”å¹¶é›†ä¸º $S$ï¼‰ï¼Œåˆ™æœ‰ï¼š\n$$P(A) = \\sum_{i=1}^n P(A|B_i)P(B_i)$$ä¹Ÿå°±æ˜¯è¯´ï¼Œäº‹ä»¶ $A$ çš„æ¦‚ç‡ç­‰äºå…¶åœ¨å„ä¸ªäº’æ–¥äº‹ä»¶ $B_i$ ä¸Šå‘ç”Ÿçš„æ¡ä»¶æ¦‚ç‡ä¸ $B_i$ æœ¬èº«æ¦‚ç‡ä¹˜ç§¯ä¹‹å’Œã€‚\nè´å¶æ–¯å…¬å¼\nå®šä¹‰ï¼šå¦‚æœäº‹ä»¶ $B_1, B_2, \\dots, B_n$ æ˜¯æ ·æœ¬ç©ºé—´ $S$ çš„ä¸€ä¸ªåˆ’åˆ†ï¼Œåˆ™æœ‰ï¼š\n$$P(B_i|A) = \\frac{P(A|B_i)P(B_i)}{\\sum_{j=1}^n P(A|B_j)P(B_j)}$$ä¹Ÿå°±æ˜¯è¯´ï¼Œè´å¶æ–¯å…¬å¼è®¡ç®—çš„æ˜¯åœ¨äº‹ä»¶ $A$ å·²ç»å‘ç”Ÿçš„æ¡ä»¶ä¸‹ï¼Œå®ƒæ˜¯ç”±æŸä¸ªç‰¹å®šåŸå› ï¼ˆäº‹ä»¶ $B_i$ï¼‰å¼•èµ·çš„æ¦‚ç‡ã€‚\néšæœºå˜é‡ # æ¦‚å¿µï¼šéšæœºå˜é‡æ˜¯å°†éšæœºäº‹ä»¶çš„ç»“æœæ˜ å°„åˆ°ä¸€ä¸ªæ•°å€¼çš„å‡½æ•°ã€‚\néšæœºå˜é‡é€šå¸¸ç”¨å¤§å†™å­—æ¯ $X$ã€$Y$ã€$Z$ ç­‰è¡¨ç¤ºã€‚\nè¯•éªŒç»“æœçš„å…¨ä½“ç§°ä¸ºæ ·æœ¬ç©ºé—´ï¼Œè®°ä½œ $S$ã€‚\nç¦»æ•£éšæœºå˜é‡å’Œè¿ç»­éšæœºå˜é‡ # ç¦»æ•£éšæœºå˜é‡\nå®šä¹‰ï¼šå¦‚æœéšæœºå˜é‡ $X$ çš„å–å€¼æ˜¯æœ‰é™æˆ–å¯æ•°çš„ï¼Œåˆ™ç§° $X$ ä¸ºç¦»æ•£éšæœºå˜é‡ã€‚\nè¿ç»­éšæœºå˜é‡\nå®šä¹‰ï¼šå¦‚æœéšæœºå˜é‡ $X$ çš„å–å€¼åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªåŒºé—´å†…ï¼Œæ˜¯ä¸å¯æ•°çš„ï¼Œåˆ™ç§° $X$ ä¸ºè¿ç»­éšæœºå˜é‡ã€‚\nå¯¹éšæœºå˜é‡ $X=a$ çš„æ¦‚ç‡ï¼Œè®°ä½œ $P(X=a)$ï¼Œåœ¨ä¸å¼•èµ·æ··æ·†çš„æƒ…å†µä¸‹ï¼Œæœ‰æ—¶ä¹Ÿç®€å†™ä¸º $P(a)$ã€‚\nå¤šç»´éšæœºå˜é‡ # è®¾éšæœºå˜é‡ $X$ã€$Y$ ä¸ºç¦»æ•£å‹ï¼Œæ±‚è¾¹ç¼˜æ¦‚ç‡çš„å…¬å¼ä¸ºï¼š\n$$ P(Y=y) = \\sum_{i=1}^n P(X=x_i, Y=y) = \\sum_{x} P(X=x, Y=y) $$ æ¦‚ç‡åˆ†å¸ƒ # æ¦‚ç‡åˆ†å¸ƒï¼šæŒ‡ç”¨äºè¡¨è¿°éšæœºå˜é‡å–å€¼çš„æ¦‚ç‡è§„å¾‹ã€‚\nç¦»æ•£éšæœºå˜é‡å¸¸ç”¨åˆ†å¸ƒï¼šä¼¯åŠªåˆ©åˆ†å¸ƒ (Bernoulli Distribution) å³ä¸€æ¬¡è¯•éªŒä¸­ï¼Œéšæœºå˜é‡ $X$ åªæœ‰ä¸¤ç§å¯èƒ½çš„å–å€¼ï¼ˆä¾‹å¦‚æˆåŠŸ/å¤±è´¥ï¼‰ã€‚\n$X$ $0$ $1$ $P(X=k)$ $1-p$ $p$ å…¶æ¦‚ç‡è´¨é‡å‡½æ•°ä¸ºï¼š\n$$ P(X=k) = p^k(1-p)^{1-k}, \\quad k \\in \\{0, 1\\} $$è¯¥å¼å­è¡¨ç¤ºï¼Œå½“ç»“æœä¸º 1ï¼ˆæˆåŠŸï¼‰çš„æ¦‚ç‡ä¸º $p$ æ—¶ï¼Œéšæœºå˜é‡å–å€¼ä¸º $k$ çš„æ¦‚ç‡ã€‚\nè¿ç»­éšæœºå˜é‡å¸¸ç”¨åˆ†å¸ƒï¼šæ­£æ€åˆ†å¸ƒï¼ˆé«˜æ–¯åˆ†å¸ƒï¼ŒGaussian Distributionï¼‰ ä¸€ç»´æ­£æ€åˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼š\n$$ f(x) = \\frac{1}{\\sqrt{2\\pi\\sigma^2}} e^{-\\frac{(x-\\mu)^2}{2\\sigma^2}} $$å›¾åƒä¸ºï¼š\nå›¾åƒçš„å¯¹ç§°è½´ä½äº $x=\\mu$ å¤„ï¼Œæ­¤å¤„ä¹Ÿæ˜¯æ¦‚ç‡å¯†åº¦çš„å³°å€¼ç‚¹ï¼Œ$\\mu$ æ˜¯å‡å€¼ã€‚ å½“éšæœºå˜é‡ $X$ æœä»æ ‡å‡†æ­£æ€åˆ†å¸ƒæ—¶ï¼Œå†™ä½œ $X \\sim N(0,1)$ï¼Œæ­¤æ—¶å‡å€¼ä¸º 0ï¼Œæ–¹å·®ä¸º 1ã€‚\næœŸæœ›ã€æ–¹å·®ã€åæ–¹å·® # æœŸæœ› # æ•°å­¦æœŸæœ›ï¼ˆå‡å€¼ï¼‰ï¼šç”¨äºè¡¡é‡éšæœºå˜é‡å–å€¼çš„å¹³å‡æ°´å¹³ã€‚\nè®¾éšæœºå˜é‡ $X$ çš„æ¦‚ç‡åˆ†å¸ƒä¸º $P(X=x_i) = p_i, i=1, 2, \\dots, n$ã€‚\nç¦»æ•£å‹ï¼š$E(X) = \\sum_{i=1}^n x_i p_i$ è¿ç»­å‹ï¼š$E(X) = \\int_{-\\infty}^{\\infty} x f(x) dx$ éšæœºå˜é‡å‡½æ•°çš„æ•°å­¦æœŸæœ›ï¼š\nç¦»æ•£å‹ï¼š$E(g(X)) = \\sum_{i=1}^n g(x_i) p_i$ è¿ç»­å‹ï¼š$E(g(X)) = \\int_{-\\infty}^{\\infty} g(x) f(x) dx$ å…¶ä¸­ $g(X)$ æ˜¯éšæœºå˜é‡ $X$ çš„å‡½æ•°ã€‚\næ•°å­¦æœŸæœ›çš„æ€§è´¨ï¼š\nå¸¸æ•°çš„æœŸæœ›æ˜¯å…¶æœ¬èº«ï¼Œå³ $E(C)=C$ã€‚ è‹¥ $C$ æ˜¯å¸¸æ•°ï¼Œåˆ™ $E(CX) = C \\cdot E(X)$ã€‚ $E(X_1+X_2) = E(X_1) + E(X_2)$ã€‚ å¦‚æœ $X$ å’Œ $Y$ ç›¸äº’ç‹¬ç«‹ï¼Œåˆ™ $E(XY) = E(X)E(Y)$ã€‚ æ•°å­¦æœŸæœ›åœ¨è®ºæ–‡ä¸­çš„å¸¸ç”¨è¡¨è¾¾ï¼š ä¸€èˆ¬åœ°ï¼Œæ•°å­¦æœŸæœ›å¯èƒ½ä¼šå†™æˆè¿™æ ·ï¼š\n$$ E_{X \\sim P_{data}}[X] $$è¿™è¡¨ç¤ºæˆ‘ä»¬æ‰€æ±‚çš„æ•°å­¦æœŸæœ›çš„éšæœºå˜é‡ $X$ æœä»æ¦‚ç‡åˆ†å¸ƒ $P_{data}$ã€‚\nè¿˜æœ‰ä¸€äº›ä¼šå†™æˆè¿™æ ·ï¼š\n$$ E_{(X,Y) \\sim P}[X] $$è¿™è¡¨ç¤ºå¯¹éšæœºå˜é‡ $X$ å…³äº $(X,Y)$ çš„è”åˆæ¦‚ç‡åˆ†å¸ƒ $P$ æ±‚æœŸæœ›ã€‚å®ƒç­‰ä»·äºæ±‚ $X$ çš„è¾¹ç¼˜æœŸæœ›ï¼Œå³ $E[X]$ã€‚\næ–¹å·® # æ–¹å·®ï¼šç”¨äºè¡¡é‡éšæœºå˜é‡çš„ç¦»æ•£ç¨‹åº¦æˆ–æ³¢åŠ¨æ€§ã€‚\n$$ D(X) = E[(X - E(X))^2] = E(X^2) - [E(X)]^2 $$å…¶ä¸­ $E(X^2)$ è¡¨ç¤ºéšæœºå˜é‡ $X$ çš„å¹³æ–¹çš„æ•°å­¦æœŸæœ›ã€‚\næ–¹å·®çš„æ€§è´¨ï¼š\nå¸¸æ•°çš„æ–¹å·®ä¸º 0ï¼Œå³ $D(C) = 0$ã€‚ è®¾ $C$ æ˜¯å¸¸æ•°ï¼Œåˆ™ $D(CX) = C^2 D(X)$ã€‚ è®¾ $X$ã€$Y$ ä¸ºéšæœºå˜é‡ï¼Œåˆ™ $$ D(X \\pm Y) = D(X) + D(Y) \\pm 2Cov(X,Y) $$ å½“ $X$ã€$Y$ ç›¸äº’ç‹¬ç«‹æ—¶ï¼Œ $Cov(X,Y)=0$ï¼Œæœ‰ $$ D(X \\pm Y) = D(X) + D(Y) $$ åæ–¹å·® # åæ–¹å·®ï¼šåæ˜ éšæœºå˜é‡ä¹‹é—´çš„çº¿æ€§å…³ç³»å¼ºåº¦å’Œæ–¹å‘ã€‚\nå‡è®¾æœ‰éšæœºå˜é‡ $X$ã€$Y$ï¼Œå…¶åæ–¹å·®ä¸ºï¼š\n$$ Cov(X,Y) = E\\{[X - E(X)][Y - E(Y)]\\} $$åæ–¹å·®çš„æ€§è´¨ï¼š\nä»»æ„éšæœºå˜é‡ä¸å¸¸æ•°çš„åæ–¹å·®ä¸º 0ã€‚ è®¾ $C$ æ˜¯å¸¸æ•°ï¼Œåˆ™ $Cov(CX,Y) = C \\cdot Cov(X,Y)$ã€‚ è®¾ $X$ã€$Y$ã€$Z$ ä¸ºéšæœºå˜é‡ï¼Œåˆ™ $Cov(X \\pm Y, Z) = Cov(X, Z) \\pm Cov(Y, Z)$ã€‚ æå¤§ä¼¼ç„¶ä¼°è®¡ # æ¦‚å¿µï¼šä¸€ç§æ ¹æ®æ ·æœ¬æ•°æ®æ¥ä¼°è®¡æ¨¡å‹å‚æ•°çš„æ–¹æ³•ï¼Œå…¶ç›®æ ‡æ˜¯æ‰¾åˆ°èƒ½ä½¿è§‚æµ‹æ ·æœ¬å‡ºç°æ¦‚ç‡æœ€å¤§çš„å‚æ•°å€¼ã€‚\nå…·ä½“æ­¥éª¤ï¼š\nå†™å‡ºä¼¼ç„¶å‡½æ•°ã€‚ å¯¹ä¼¼ç„¶å‡½æ•°å–å¯¹æ•°ï¼Œå¹¶æ•´ç†å¾—åˆ°å¯¹æ•°ä¼¼ç„¶å‡½æ•°ã€‚ å¯¹å¯¹æ•°ä¼¼ç„¶å‡½æ•°å…³äºå‚æ•°æ±‚å¯¼æ•°ï¼Œå¹¶ä»¤å…¶ä¸ºé›¶ã€‚ æ±‚è§£è¯¥æ–¹ç¨‹ç»„ï¼Œå¾—åˆ°å‚æ•°çš„ä¼°è®¡å€¼ã€‚ ä¼¼ç„¶å‡½æ•°ï¼šå¯¹äºå•ä¸ªè§‚æµ‹å€¼ $x$ï¼Œå…¶ä¼¼ç„¶å‡½æ•° $L(\\theta|x)$ åœ¨å½¢å¼ä¸Šç­‰äºæ¦‚ç‡ï¼ˆå¯†åº¦ï¼‰å‡½æ•°ã€‚ç¦»æ•£å‹æ—¶ä¸º $P(x|\\theta)$ï¼Œè¿ç»­å‹æ—¶ä¸º $f(x|\\theta)$ã€‚å…¶ä¸­ $\\theta$ è¡¨ç¤ºæ‰€è¦æ±‚çš„æ¦‚ç‡åˆ†å¸ƒçš„å‚æ•°ã€‚\næå¤§ä¼¼ç„¶ä¼°è®¡é€šå¸¸å‡è®¾æ ·æœ¬æ˜¯ç‹¬ç«‹åŒåˆ†å¸ƒçš„ï¼ˆi.i.d.ï¼‰ã€‚\nä¿¡æ¯ç†µ # æ¦‚å¿µï¼šæè¿°ä¸€ä¸ªéšæœºå˜é‡å–å€¼çš„ä¸ç¡®å®šæ€§æˆ–ä¿¡æ¯é‡çš„å¤§å°ã€‚\n$$ H(X)=-\\sum_{i=1}^n P(x_i) \\log_{2} P(x_i) = -E[\\log_{2}P(X)] $$ KL æ•£åº¦ï¼ˆç›¸å¯¹ç†µï¼‰ # æ¦‚å¿µï¼šä¸€ç§ç”¨äºè¡¡é‡ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒä¹‹é—´å·®å¼‚çš„éå¯¹ç§°æ€§æŒ‡æ ‡ã€‚\n$$ KL(q||p)=\\sum_{i=1}^n q(x_i) \\log_{2} \\frac{q(x_i)}{p(x_i)}=\\int q(x) \\log_{2} \\frac{q(x)}{p(x)} dx $$æ€§è´¨ï¼š\néè´Ÿæ€§ï¼š$KL(q||p) \\geq 0$ã€‚å½“ä¸”ä»…å½“ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒå®Œå…¨ç›¸åŒæ—¶ï¼ŒKL æ•£åº¦ä¸º 0ã€‚ éå¯¹ç§°æ€§ï¼šé€šå¸¸ $KL(q||p) \\neq KL(p||q)$ã€‚ å‚è€ƒèµ„æ–™ # ç‚¹å‡»å±•å¼€æŸ¥çœ‹å‚è€ƒèµ„æ–™ æ•°å­¦åŸºç¡€â€”â€”ç”Ÿæˆæ¨¡å‹å¿…å¤‡çŸ¥è¯† ","date":"2025å¹´10æœˆ19æ—¥","externalUrl":null,"permalink":"/posts/%E4%B8%80%E4%BA%9B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/","section":"æ–‡ç« ","summary":"","title":"ä¸€äº›æ•°å­¦åŸºç¡€æ¦‚å¿µ","type":"posts"},{"content":"","date":"2025å¹´10æœˆ7æ—¥","externalUrl":null,"permalink":"/tags/act/","section":"Tags","summary":"","title":"ACT","type":"tags"},{"content":"","date":"2025å¹´10æœˆ7æ—¥","externalUrl":null,"permalink":"/tags/il/","section":"Tags","summary":"","title":"IL","type":"tags"},{"content":"","date":"2025å¹´10æœˆ7æ—¥","externalUrl":null,"permalink":"/tags/lerobot/","section":"Tags","summary":"","title":"LeRobot","type":"tags"},{"content":" 0.å†™åœ¨å¼€å¤´ # LeRobot ä»“åº“ç»å¸¸æ€§å˜åŠ¨ï¼Œè¯·åŠ¡å¿…å‚è€ƒå®˜æ–¹æ•™ç¨‹å’Œä»“åº“ä»£ç ï¼Œæ’°å†™æœ¬æ–‡æ—¶ç‰ˆæœ¬åœ¨a6ff3cfe 2025-10-14ã€‚ æœ¬æ–‡è®°å½•LeRobot SO-101æœºæ¢°è‡‚å®è·µï¼ŒåŒ…æ‹¬ä»ç¡¬ä»¶è¿æ¥ã€ç¯å¢ƒæ­å»ºåˆ°åŸºç¡€çš„æ ¡å‡†ã€é‡‡é›†æ•°æ®ã€è®­ç»ƒï¼ˆåŸºäº ACTï¼‰ã€æ¨ç†ï¼ˆåŸºäº ACTï¼‰ï¼Œå…·ä½“çš„ç«¯å£ã€è·¯å¾„ç­‰ä»…ä½œå‚è€ƒï¼Œä»¥å®é™…ç¯å¢ƒä¸ºå‡†ã€‚\nç¡¬ä»¶è¿æ¥ # æˆå“è¯´æ˜ä¹¦ WOWROBO SO-ARM101 åŒè‡‚ä½¿ç”¨è¯´æ˜ä¹¦ï¼ˆæˆå“ç‰ˆæœ¬ä¸“ç”¨ï¼‰\nè¿æ¥ä¸å®‰è£… è¯·æŒ‰ä»¥ä¸‹è¯´æ˜è¿æ¥è®¾å¤‡ç”µæºï¼šä¸»æ§éœ€è¿æ¥ 5V/6A ç”µæºï¼Œéšä»è‡‚è¿æ¥ 12V/8A ç”µæºã€‚ ç›¸æœºç»„ä»¶çš„å®‰è£…æ–¹æ³•è¯·å‚è€ƒä»¥ä¸‹è§†é¢‘ï¼Œåœ¨ 1 å°æ—¶ 6 åˆ† 32 ç§’ï¼ˆ1:06:32ï¼‰ å¤„å¼€å§‹æ¼”ç¤ºï¼š é“¾æ¥ï¼šhttps://www.bilibili.com/video/BV13bLyzKES8/\næ“ä½œæŒ‡å—é˜…è¯»å»ºè®® æœ¬äº§å“å‡ºå‚å‰å·²å®Œæˆèˆµæœº IDã€æ³¢ç‰¹ç‡ã€ç£ç¼–ç å™¨ä¸­ä½è®¾ç½®åŠé¥æ“ä½œåŠŸèƒ½æµ‹è¯•ã€‚å»ºè®®åœ¨å®Œå…¨ç†Ÿæ‚‰äº§å“å‰ä¸è¦æ‰‹åŠ¨æ›´æ”¹èˆµæœºå‚æ•°ã€‚ è¯·æ ¹æ®ä»¥ä¸‹æ–‡æ¡£å®Œæˆç¯å¢ƒé…ç½®å’Œç«¯å£è®¾ç½®åï¼Œä»æ­¥éª¤ â€œCalibrateâ€ å¼€å§‹æ“ä½œã€‚ é“¾æ¥ï¼šhttps://huggingface.co/docs/lerobot/so101\né‡è¦äº‹é¡¹ é”™è¯¯çš„æ ‡å®šæ–¹å‘å¯èƒ½å¯¼è‡´èˆµæœºæœé”™è¯¯çš„é™ä½æ–¹å‘è¿è¡Œï¼Œè¿›è€Œäº§ç”Ÿè¿‡è½½ï¼Œé€ æˆèˆµæœºæŸåï¼Œå°¤å…¶æ˜¯ä»è‡‚çš„ 3 å·èˆµæœºã€‚å› æ­¤ï¼Œåœ¨é¦–æ¬¡è¿›è¡Œé¥æ“ä½œæ—¶ï¼Œè¯·ä»”ç»†è§‚å¯Ÿæ¯ä¸ªèˆµæœºçš„è¿åŠ¨æ–¹å‘æ˜¯å¦ä¸é¢„æœŸä¸€è‡´ã€‚å¦‚å‘ç°æ–¹å‘å¼‚å¸¸ï¼Œè¯·ç«‹å³åœæ­¢å¹¶é‡æ–°è¿è¡Œæ ‡å®šæµç¨‹ã€‚ è¿™æ¬¾æœºæ¢°è‡‚çš„å»ºè®®æœ€å¤§è´Ÿè½½é‡é‡ä¸º 400 å…‹ï¼Œè¯·å‹¿è¶…å‡ºè¿™ä¸ªé‡é‡ï¼Œè¶…è½½å¯èƒ½ä¼šæŸåèˆµæœºã€‚ å› æ“ä½œä¸å½“å¯¼è‡´çš„èˆµæœºæŸåï¼ˆå¦‚è¿‡è½½ã€çƒ§æ¯ï¼‰ä¸åœ¨ä¿ä¿®èŒƒå›´å†…ï¼Œæ•¬è¯·çŸ¥æ‚‰ã€‚\nç”±äºç›´æ¥è´­ä¹°çš„æˆå“LeRobot SO-101ï¼Œæ‰€ä»¥æ— éœ€è‡ªå·±ç»„è£…é›¶ä»¶å’Œè®¾ç½®èˆµæœºã€‚ æœºæ¢°è‡‚è¿æ¥ç”µæºå’Œç”µè„‘ ç›¸æœºå°½é‡ç›´è¿ç”µè„‘ï¼Œæœºæ¢°è‡‚ä¸¤æ¡ä¿¡å·çº¿å¯ä»¥é€šè¿‡é›†çº¿å™¨è¿æ¥ç”µè„‘ã€‚ å®‰è£…æ‘„åƒå¤´ æ‘„åƒå¤´è¿æ¥æ•™ç¨‹ ç¯å¢ƒæ­å»º # å®‰è£…å¥½miniforgeå’Œé…ç½®condaè®¾ç½®åï¼Œå‚è€ƒå®˜æ–¹-å®‰è£…æ–‡æ¡£å®‰è£…lerobotç¯å¢ƒã€‚\nåˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼šconda create -y -n lerobot python=3.10 æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼šconda activate lerobot å®‰è£…ffmpegï¼šconda install ffmpeg -c conda-forge æ›´æ–°pipï¼špython -m pip install -U pip setuptools wheel æ‹‰å–lerobotä»“åº“å¹¶è¿›å…¥ï¼šgit clone https://github.com/huggingface/lerobot.git \u0026amp;\u0026amp; cd lerobot å®‰è£…lerobotï¼špip install 'lerobot[all]' æˆ–è€…åŸºç¡€çš„ï¼špip install 'lerobot[feetech]' æ›´æ–°åˆ°æœ€æ–° lerobot åº“ æš‚å­˜æœ¬åœ°ä¿®æ”¹ï¼šgit stash æ‹‰å–æœ€æ–°ä»£ç ï¼šgit pull æ¢å¤æœ¬åœ°ä¿®æ”¹ï¼šgit stash pop å¦‚æœæœ‰å†²çªï¼Œéœ€è¦æ‰‹åŠ¨è§£å†³ æ ¡å‡† # ç”±äºæˆ‘ä»¬è´­ä¹°çš„æˆå“LeRobot SO-101ï¼Œæ‰€ä»¥æ— éœ€è‡ªå·±è¿›è¡Œèˆµæœº IDã€æ³¢ç‰¹ç‡ã€ç£ç¼–ç å™¨ä¸­ä½è®¾ç½®ï¼Œç›´æ¥è¿›è¡Œæ ¡å‡†ã€‚\nå‚è€ƒè§†é¢‘ï¼š LeRobot å…·èº«æ™ºèƒ½æœºæ¢°è‡‚å®æ“å…¥é—¨è¯¾ç¨‹-01ï¼šè½¯ä»¶ç¯å¢ƒé…ç½®å’ŒåŒè‡‚æ ‡å®š å®˜æ–¹-æ ¡å‡†ç¤ºä¾‹è§†é¢‘ æ‰¾åˆ°USBç«¯å£ï¼š å®˜æ–¹-æ‰¾åˆ°æœºæ¢°è‡‚çš„ USB ç«¯å£ æ ¡å‡†ï¼š å®˜æ–¹-æ ¡å‡† Seeed Studio æ•™ç¨‹-æ ¡å‡†æœºæ¢°è‡‚ è¿æ¥æœºæ¢°è‡‚ç”µæºå’Œç”µè„‘åï¼Œæ¿€æ´»lerobotç¯å¢ƒï¼Œè¿›å…¥lerobotä»“åº“ã€‚\næ‰¾åˆ°ä¸¤ä¸ªæœºæ¢°è‡‚çš„ç«¯å£ï¼š\né€šè¿‡è¿è¡Œlerobot-find-portï¼Œå¹¶æ–­å¼€ æ‰¾åˆ°ä¸¤ä¸ªæœºæ¢°è‡‚çš„ç«¯å£ï¼š ä¸»è‡‚ï¼ˆLeaderArmï¼‰ï¼š/dev/ttyACM0 ä»è‡‚ï¼ˆFollowerArmï¼‰ï¼š/dev/ttyACM1 è®¾ç½®ä¸²å£è®¾å¤‡æƒé™ï¼šsudo chmod 666 /dev/ttyACM*\nå¦‚æœä¸æƒ³æ¯æ¬¡è¿æ¥è®¾å¤‡éƒ½è®¾ç½®æƒé™ï¼Œå¯ä»¥æŠŠè‡ªå·±åŠ å…¥å¯¹åº”è®¾å¤‡ç»„ï¼š æŸ¥çœ‹è®¾å¤‡ç»„ï¼š [xiadengma@archlinux ~]$ ls -l /dev/ttyACM* crw-rw---- 1 root uucp 166, 0 10æœˆ16æ—¥ 13:15 /dev/ttyACM0 crw-rw---- 1 root uucp 166, 1 10æœˆ16æ—¥ 13:15 /dev/ttyACM1 æŠŠè‡ªå·±åŠ å…¥å¯¹åº”è®¾å¤‡ç»„ï¼ˆæ ¹æ®ls -l /dev/ttyACM*è¾“å‡ºä¿®æ”¹ï¼‰ï¼Œå¹¶éªŒè¯æ˜¯å¦åŠ å…¥æˆåŠŸï¼š åŠ å…¥è®¾å¤‡ç»„ uucp å¹¶åˆ·æ–°ç¯å¢ƒ sudo usermod -aG uucp \u0026#34;$USER\u0026#34; \u0026amp;\u0026amp; exec su -l \u0026#34;$USER\u0026#34; éªŒè¯æ˜¯å¦åŠ å…¥æˆåŠŸ id ç»“æœä¸­ç»„æœ‰å¯¹åº”è®¾å¤‡ç»„å³å¯ã€‚ è®¾ç½®ä¸²å£è®¾å¤‡åˆ«åï¼š\nå¦‚æœä¸æƒ³æ¯æ¬¡è¿æ¥è®¾å¤‡éƒ½éœ€è¦è¿è¡Œlerobot-find-portæ¥æŸ¥æ‰¾ç«¯å£ï¼Œå¯ä»¥è®¾ç½®åˆ«åï¼š\næ‰¾åˆ°è®¾å¤‡çš„å”¯ä¸€å±æ€§ï¼ˆ/dev/ttyACM0è¯·è‡ªè¡Œä¿®æ”¹ï¼‰ï¼š\nudevadm info --query=property --name=/dev/ttyACM0 | sed -n \u0026#39;s/^ID_SERIAL_SHORT=\\(.*\\)$/ATTRS{serial}==\u0026#34;\\1\u0026#34;/p\u0026#39; è¾“å‡ºç¤ºä¾‹ï¼š\nATTRS{serial}==\u0026#34;5A7C118736\u0026#34; åˆ›å»ºudevè§„åˆ™æ–‡ä»¶ï¼š\nsudo touch /etc/udev/rules.d/99-my-robot.rules å†™å…¥ä¸‹é¢å†…å®¹ï¼ˆserialéƒ¨åˆ†å†…å®¹è¯·æ ¹æ®å®é™…ä¿®æ”¹ï¼‰ï¼š\n# Rule for the Leader Arm SUBSYSTEM==\u0026#34;tty\u0026#34;, ATTRS{serial}==\u0026#34;5A7C118736\u0026#34;, SYMLINK+=\u0026#34;leader_arm\u0026#34;, MODE=\u0026#34;0666\u0026#34; # Rule for the Follower Arm SUBSYSTEM==\u0026#34;tty\u0026#34;, ATTRS{serial}==\u0026#34;5A7C118880\u0026#34;, SYMLINK+=\u0026#34;follower_arm\u0026#34;, MODE=\u0026#34;0666\u0026#34; ç®€å•è§£é‡Šä¸€ä¸‹è§„åˆ™ï¼š\nSUBSYSTEM==\u0026quot;tty\u0026quot;: è¡¨ç¤ºè§„åˆ™åº”ç”¨äºä¸²è¡Œè®¾å¤‡ã€‚ ATTRS{serial}==\u0026quot;...\u0026quot;: åŒ¹é…æˆ‘ä»¬æ‰¾åˆ°çš„å”¯ä¸€è®¾å¤‡åºåˆ—å·ã€‚ SYMLINK+=\u0026quot;leader_arm\u0026quot;: åˆ›å»ºä¸€ä¸ªåä¸º /dev/leader_arm çš„ç¬¦å·é“¾æ¥ï¼ˆåˆ«åï¼‰ã€‚ MODE=\u0026quot;0666\u0026quot;: è¿™ä¸€æ­¥å°†è®¾å¤‡æ–‡ä»¶çš„æƒé™è®¾ç½®ä¸ºæ‰€æœ‰äººå¯è¯»å¯å†™ï¼Œå¯ä»¥é¿å…å¾ˆå¤š \u0026ldquo;Permission denied\u0026rdquo; çš„é”™è¯¯ã€‚ é‡æ–°åŠ è½½ udevè§„åˆ™å¹¶è§¦å‘\nsudo udevadm control --reload-rules \u0026amp;\u0026amp; sudo udevadm trigger éªŒè¯æ˜¯å¦è®¾ç½®æˆåŠŸ æ‹”æ’ä¸€ä¸‹ä½ çš„è®¾å¤‡ï¼Œç„¶åè¿è¡Œ ls -l /dev/leader_arm /dev/follower_arm ã€‚\n[xiadengma@archlinux ~]$ ls -l /dev/leader_arm /dev/follower_arm lrwxrwxrwx 1 root root 7 Oct 26 15:30 /dev/leader_arm -\u0026gt; ttyACM0 lrwxrwxrwx 1 root root 7 Oct 26 15:30 /dev/follower_arm -\u0026gt; ttyACM1 æ‰§è¡Œæ ¡å‡†\næ³¨æ„ï¼šä¸‹é¢å‘½ä»¤éƒ½æŒ‡å®šäº†æ ¡å‡†æ–‡ä»¶ä¿å­˜è·¯å¾„ï¼Œé»˜è®¤è·¯å¾„åœ¨~/.cache/huggingface/lerobot/calibration/ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œå¯ä»¥å»æ‰ä¸‹é¢æ‰€æœ‰å‘½ä»¤çš„--robot.calibration_dirå’Œ--teleop.calibration_dirã€‚ æ ¡å‡†è¿‡ç¨‹ï¼šè¿è¡Œæ ¡å‡†ç¨‹åºï¼Œç„¶åå°†æœºå™¨äººç§»åŠ¨åˆ°ä¸­é—´ä½ï¼ŒæŒ‰ä¸‹Enteråï¼Œå†å°†æ¯ä¸ªå…³èŠ‚åœ¨å…¶å®Œæ•´çš„è¿åŠ¨èŒƒå›´å†…ç§»åŠ¨ã€‚ æ ¡å‡†ä¸»è‡‚ï¼š ä¸»è‡‚åç§°ï¼ˆå¯è‡ªå®šä¹‰ï¼‰ï¼šmy_leader_arm ä¸»è‡‚æ ¡å‡†æ–‡ä»¶ä¿å­˜è·¯å¾„ï¼ˆå¯è‡ªå®šä¹‰ï¼‰ï¼š./data/calibration lerobot-calibrate \\ --robot.type=so101_leader \\ --robot.port=/dev/leader_arm \\ --robot.id=my_leader_arm \\ --robot.calibration_dir=./data/calibration æ ¡å‡†ä»è‡‚ï¼š ä»è‡‚åç§°ï¼ˆå¯è‡ªå®šä¹‰ï¼‰ï¼šmy_follower_arm ä»è‡‚æ ¡å‡†æ–‡ä»¶ä¿å­˜è·¯å¾„ï¼ˆå¯è‡ªå®šä¹‰ï¼‰ï¼š./data/calibration lerobot-calibrate \\ --robot.type=so101_follower \\ --robot.port=/dev/follower_arm \\ --robot.id=my_follower_arm \\ --robot.calibration_dir=./data/calibration æ ‡å®šæ•°æ®è§£è¯»\n{ \u0026#34;shoulder_pan\u0026#34;: { #è‚©éƒ¨æ—‹è½¬å…³èŠ‚ \u0026#34;id\u0026#34;: 1, # ç”µæœºçš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äºåœ¨æ€»çº¿é€šä¿¡æ—¶ç²¾å‡†å®šä½å’Œæ§åˆ¶ç‰¹å®šç”µæœº \u0026#34;drive_mode\u0026#34;: 0, # ç”µæœºçš„é©±åŠ¨æ¨¡å¼ï¼Œå–å€¼ä¸º 0 è¡¨ç¤ºç‰¹å®šçš„é©±åŠ¨æ¨¡å¼ï¼Œä¸åŒé©±åŠ¨æ¨¡å¼ä¼šå½±å“ç”µæœºçš„è¿åŠ¨ç‰¹æ€§ä¸æ§åˆ¶æ–¹å¼ \u0026#34;homing_offset\u0026#34;: 56, # å½’ä½åç§»é‡ï¼ŒæŒ‡ç”µæœºä»ç‰©ç†é›¶ç‚¹ä½ç½®åˆ°æ ¡å‡†é›¶ç‚¹ä½ç½®çš„åç§»é‡ã€‚æ­¤å‚æ•°èƒ½ä¿è¯ç”µæœºåœ¨æ¯æ¬¡å¯åŠ¨æ—¶éƒ½èƒ½å›åˆ°å‡†ç¡®çš„é›¶ç‚¹ä½ç½®ï¼Œä»è€Œæå‡è¿åŠ¨ç²¾åº¦ \u0026#34;range_min\u0026#34;: 829, #ç”µæœºè¿åŠ¨èŒƒå›´çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼Œä»¥æ•°å€¼å½¢å¼å‘ˆç°ã€‚è¿™ä¸¤ä¸ªå‚æ•°é™å®šäº†ç”µæœºçš„è¿åŠ¨è¾¹ç•Œï¼Œé¿å…å› è¶…å‡ºèŒƒå›´è€Œå¯¼è‡´ç¡¬ä»¶æŸåæˆ–è€…è¿åŠ¨å¼‚å¸¸ \u0026#34;range_max\u0026#34;: 2866 }, \u0026#34;shoulder_lift\u0026#34;: { #è‚©éƒ¨å‡é™å…³èŠ‚ \u0026#34;id\u0026#34;: 2, \u0026#34;drive_mode\u0026#34;: 0, \u0026#34;homing_offset\u0026#34;: 463, \u0026#34;range_min\u0026#34;: 836, \u0026#34;range_max\u0026#34;: 3136 }, \u0026#34;elbow_flex\u0026#34;: { #è‚˜éƒ¨å¼¯æ›²å…³èŠ‚ \u0026#34;id\u0026#34;: 3, \u0026#34;drive_mode\u0026#34;: 0, \u0026#34;homing_offset\u0026#34;: -100, \u0026#34;range_min\u0026#34;: 894, \u0026#34;range_max\u0026#34;: 3100 }, \u0026#34;wrist_flex\u0026#34;: { #è…•éƒ¨å¼¯æ›²å…³èŠ‚ \u0026#34;id\u0026#34;: 4, \u0026#34;drive_mode\u0026#34;: 0, \u0026#34;homing_offset\u0026#34;: -582, \u0026#34;range_min\u0026#34;: 928, \u0026#34;range_max\u0026#34;: 3213 }, \u0026#34;wrist_roll\u0026#34;: { #è…•éƒ¨æ—‹è½¬å…³èŠ‚ \u0026#34;id\u0026#34;: 5, \u0026#34;drive_mode\u0026#34;: 0, \u0026#34;homing_offset\u0026#34;: -650, \u0026#34;range_min\u0026#34;: 140, \u0026#34;range_max\u0026#34;: 3955 }, \u0026#34;gripper\u0026#34;: { #å¤¹çˆªå…³èŠ‚ \u0026#34;id\u0026#34;: 6, \u0026#34;drive_mode\u0026#34;: 0, \u0026#34;homing_offset\u0026#34;: -1229, \u0026#34;range_min\u0026#34;: 2044, \u0026#34;range_max\u0026#34;: 3461 } } é¥æ“ä½œ/ç¤ºæ•™ # å®˜æ–¹-æ¨¡ä»¿å­¦ä¹ æ•™ç¨‹ æ— æ‘„åƒå¤´é¥æ“ä½œ # æ‰§è¡Œé¥æ“ä½œï¼š lerobot-teleoperate \\ --robot.type=so101_follower \\ --robot.port=/dev/follower_arm \\ --robot.id=my_follower_arm \\ --robot.calibration_dir=./data/calibration \\ --teleop.type=so101_leader \\ --teleop.port=/dev/leader_arm \\ --teleop.id=my_leader_arm \\ --teleop.calibration_dir=./data/calibration è¿è¡Œåæ‘†åŠ¨ä¸»è‡‚ï¼Œä»è‡‚ä¼šè·Ÿéšè¿åŠ¨ï¼ŒæŒ‰Ctrl+Cé€€å‡º å®‰è£…æ‘„åƒå¤´ # å¦‚æœåœ¨ç¡¬ä»¶è¿æ¥ä¸­å®‰è£…äº†æ‘„åƒå¤´ï¼Œå¯ä»¥è¿›è¡Œæ‘„åƒå¤´é¥æ“ä½œã€‚\nè¿æ¥æ‘„åƒå¤´å’Œç”µè„‘ï¼ˆæœ€å¥½æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ‘„åƒå¤´æ‹æ“ä½œåŒºåŸŸï¼Œä¸€ä¸ªæ‘„åƒå¤´å®‰è£…åœ¨æœºæ¢°è‡‚è…•éƒ¨ï¼‰\næŸ¥çœ‹æ‘„åƒå¤´ç´¢å¼•å’Œè¾“å‡º\nlerobot-find-cameras opencv --output-dir ./data/cameras_images ç»“æœè¾“å‡ºå¦‚ä¸‹ï¼š\n--- Detected Cameras --- # æ£€æµ‹åˆ°çš„ç›¸æœºåˆ—è¡¨ Camera #0: # ç›¸æœº 0 Name: OpenCV Camera @ /dev/video0 # ç›¸æœºåç§°åŠè®¾å¤‡è·¯å¾„ Type: OpenCV # ç›¸æœºç±»å‹ï¼šOpenCV Id: /dev/video0 # ç›¸æœº IDï¼Œå³è®¾å¤‡è·¯å¾„ Backend api: V4L2 # ä½¿ç”¨çš„åç«¯ APIï¼šV4L2 Default stream profile: # é»˜è®¤æµé…ç½® Format: 0.0 # æ ¼å¼ï¼š0.0ï¼ˆé»˜è®¤è®¾ç½®ï¼‰ Width: 640 # å›¾åƒå®½åº¦ï¼š640 åƒç´  Height: 480 # å›¾åƒé«˜åº¦ï¼š480 åƒç´  Fps: 30.0 # æ¯ç§’å¸§æ•°ï¼š30 å¸§ -------------------- Camera #1: Name: OpenCV Camera @ /dev/video2 Type: OpenCV Id: /dev/video2 Backend api: V4L2 Default stream profile: Format: 0.0 Width: 640 Height: 480 Fps: 30.0 -------------------- Camera #2: Name: OpenCV Camera @ /dev/video6 Type: OpenCV Id: /dev/video6 Backend api: V4L2 Default stream profile: Format: 0.0 Width: 640 Height: 480 Fps: 30.0 -------------------- Camera #3: Name: OpenCV Camera @ /dev/video8 Type: OpenCV Id: /dev/video8 Backend api: V4L2 Default stream profile: Format: 0.0 Width: 640 Height: 480 Fps: 30.0 -------------------- Finalizing image saving... Image capture finished. Images saved to data/cameras_images è¿è¡Œå®Œæˆåä¼šåœ¨.data/cameras_imagesç›®å½•ä¸‹ä¿å­˜å›¾ç‰‡\næ ¹æ®è¾“å‡ºè®°å½•æ‘„åƒå¤´ï¼š\næ‰‹è…•å·¦æ‘„åƒå¤´ï¼š åç§°ï¼šwrist_left ç´¢å¼•ï¼š2 å®½åº¦ï¼š640 é«˜åº¦ï¼š480 å¸§ç‡ï¼š30 æœºæ¢°è‡‚æ­£å‰æ–¹æ‘„åƒå¤´ï¼š åç§°ï¼šfront_rgb ç´¢å¼•ï¼š8 å®½åº¦ï¼š640 é«˜åº¦ï¼š480 å¸§ç‡ï¼š30 ä½¿ç”¨æ‘„åƒå¤´è¿›è¡Œé¥æ“ä½œ # æ‰§è¡Œé¥æ“ä½œï¼š lerobot-teleoperate \\ --robot.type=so101_follower \\ --robot.port=/dev/follower_arm \\ --robot.id=my_follower_arm \\ --robot.cameras=\u0026#34;{ wrist_left: {type: opencv, index_or_path: 2, width: 640, height: 480, fps: 30}, front_rgb: {type: opencv, index_or_path: 8, width: 640, height: 480, fps: 30}}\u0026#34; \\ --teleop.type=so101_leader \\ --teleop.port=/dev/leader_arm \\ --teleop.id=my_leader_arm \\ --display_data=true è¿è¡Œåä¼šæ‰“å¼€rerunçª—å£ï¼Œå¯ä»¥æŸ¥çœ‹æœºæ¢°è‡‚å’Œæ‘„åƒå¤´ç”»é¢ æ‘†åŠ¨ä¸»è‡‚ï¼Œä»è‡‚ä¼šè·Ÿéšè¿åŠ¨ï¼ŒæŒ‰Ctrl+Cé€€å‡º ReRun Web å¯è§†åŒ– åœ¨src/lerobotä¸‹åˆ›å»ºextraæ–‡ä»¶å¤¹ï¼Œå¹¶æ·»åŠ web_visualization_utils.pyå’Œlerobot_teleoperate_web.pyä¸¤ä¸ªæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\nweb_visualization_utils.pyï¼š\n# Copyright 2024 The HuggingFace Inc. team. All rights reserved. # # Licensed under the Apache License, Version 2.0 (the \u0026#34;License\u0026#34;); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an \u0026#34;AS IS\u0026#34; BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. \u0026#34;\u0026#34;\u0026#34;Web-based visualization utilities using Rerun web viewer.\u0026#34;\u0026#34;\u0026#34; import numbers import os from typing import Any import numpy as np import rerun as rr from lerobot.utils.constants import OBS_PREFIX, OBS_STR def init_rerun_web( session_name: str = \u0026#34;lerobot_control_loop\u0026#34;, port: int = 9090, open_browser: bool = True, memory_limit: str = \u0026#34;10%\u0026#34;, ) -\u0026gt; None: \u0026#34;\u0026#34;\u0026#34; åˆå§‹åŒ– Rerun SDK ç”¨äº Web æµè§ˆå™¨å¯è§†åŒ–æ§åˆ¶å¾ªç¯ã€‚ Initializes the Rerun SDK for visualizing the control loop in a web browser. å‚æ•° Args: session_name: Rerun ä¼šè¯åç§° / Name of the Rerun session port: Web æœåŠ¡å™¨ç«¯å£ / Web server port (default: 9090) open_browser: æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ / Whether to automatically open browser (default: True) memory_limit: å†…å­˜é™åˆ¶ / Memory limit for Rerun (default: \u0026#34;10%\u0026#34;) ä½¿ç”¨ç¤ºä¾‹ Example: ```python from lerobot.extra.web_visualization_utils import init_rerun_web # åœ¨æµè§ˆå™¨ä¸­å¯åŠ¨å¯è§†åŒ– / Start visualization in browser init_rerun_web(session_name=\u0026#34;my_teleoperation\u0026#34;, port=9090) ``` è®¿é—® Access: åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ / Open in browser: http://localhost:9090 \u0026#34;\u0026#34;\u0026#34; batch_size = os.getenv(\u0026#34;RERUN_FLUSH_NUM_BYTES\u0026#34;, \u0026#34;8000\u0026#34;) os.environ[\u0026#34;RERUN_FLUSH_NUM_BYTES\u0026#34;] = batch_size rr.init(session_name) print(\u0026#34;ğŸŒ å¯åŠ¨ Rerun Web Viewer / Starting Rerun Web Viewer\u0026#34;) print(f\u0026#34;ğŸ“ è®¿é—®åœ°å€ / Access URL: http://localhost:{port}\u0026#34;) print(f\u0026#34;ğŸ’¾ å†…å­˜é™åˆ¶ / Memory limit: {memory_limit}\u0026#34;) rr.serve( open_browser=open_browser, web_port=port, server_memory_limit=memory_limit, ) def init_rerun_connect( addr: str = \u0026#34;127.0.0.1:9876\u0026#34;, session_name: str = \u0026#34;lerobot_control_loop\u0026#34;, ) -\u0026gt; None: \u0026#34;\u0026#34;\u0026#34; è¿æ¥åˆ°è¿œç¨‹ Rerun Viewer (é€‚ç”¨äºè¿œç¨‹æœåŠ¡å™¨)ã€‚ Connect to a remote Rerun Viewer (useful for remote servers). å‚æ•° Args: addr: è¿œç¨‹ Rerun Viewer åœ°å€ / Remote Rerun Viewer address (default: \u0026#34;127.0.0.1:9876\u0026#34;) session_name: Rerun ä¼šè¯åç§° / Name of the Rerun session ä½¿ç”¨ç¤ºä¾‹ Example: ```python from lerobot.extra.web_visualization_utils import init_rerun_connect # è¿æ¥åˆ°è¿œç¨‹ Rerun Viewer / Connect to remote Rerun Viewer # é¦–å…ˆåœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œ: rerun --port 9876 # First run in another terminal: rerun --port 9876 init_rerun_connect(addr=\u0026#34;127.0.0.1:9876\u0026#34;) ``` \u0026#34;\u0026#34;\u0026#34; batch_size = os.getenv(\u0026#34;RERUN_FLUSH_NUM_BYTES\u0026#34;, \u0026#34;8000\u0026#34;) os.environ[\u0026#34;RERUN_FLUSH_NUM_BYTES\u0026#34;] = batch_size rr.init(session_name) print(\u0026#34;ğŸ”— è¿æ¥åˆ°è¿œç¨‹ Rerun Viewer / Connecting to remote Rerun Viewer\u0026#34;) print(f\u0026#34;ğŸ“ åœ°å€ / Address: {addr}\u0026#34;) rr.connect_tcp(addr=addr) def _is_scalar(x): return isinstance(x, (float | numbers.Real | np.integer | np.floating)) or ( isinstance(x, np.ndarray) and x.ndim == 0 ) def log_rerun_data( observation: dict[str, Any] | None = None, action: dict[str, Any] | None = None, ) -\u0026gt; None: \u0026#34;\u0026#34;\u0026#34; å°†è§‚æµ‹å’ŒåŠ¨ä½œæ•°æ®è®°å½•åˆ° Rerun ç”¨äºå®æ—¶å¯è§†åŒ–ã€‚ Logs observation and action data to Rerun for real-time visualization. This function iterates through the provided observation and action dictionaries and sends their contents to the Rerun viewer. It handles different data types appropriately: - Scalar values (floats, ints) are logged as `rr.Scalar`. - 3D NumPy arrays that resemble images (e.g., with 1, 3, or 4 channels first) are transposed from CHW to HWC format and logged as `rr.Image`. - 1D NumPy arrays are logged as a series of individual scalars, with each element indexed. - Other multi-dimensional arrays are flattened and logged as individual scalars. Keys are automatically namespaced with \u0026#34;observation.\u0026#34; or \u0026#34;action.\u0026#34; if not already present. å‚æ•° Args: observation: åŒ…å«è§‚æµ‹æ•°æ®çš„å¯é€‰å­—å…¸ / An optional dictionary containing observation data to log. action: åŒ…å«åŠ¨ä½œæ•°æ®çš„å¯é€‰å­—å…¸ / An optional dictionary containing action data to log. \u0026#34;\u0026#34;\u0026#34; if observation: for k, v in observation.items(): if v is None: continue key = k if str(k).startswith(OBS_PREFIX) else f\u0026#34;{OBS_STR}.{k}\u0026#34; if _is_scalar(v): rr.log(key, rr.Scalar(float(v))) elif isinstance(v, np.ndarray): arr = v # Convert CHW -\u0026gt; HWC when needed if arr.ndim == 3 and arr.shape[0] in (1, 3, 4) and arr.shape[-1] not in (1, 3, 4): arr = np.transpose(arr, (1, 2, 0)) if arr.ndim == 1: for i, vi in enumerate(arr): rr.log(f\u0026#34;{key}_{i}\u0026#34;, rr.Scalar(float(vi))) else: rr.log(key, rr.Image(arr), static=True) if action: for k, v in action.items(): if v is None: continue key = k if str(k).startswith(\u0026#34;action.\u0026#34;) else f\u0026#34;action.{k}\u0026#34; if _is_scalar(v): rr.log(key, rr.Scalar(float(v))) elif isinstance(v, np.ndarray): if v.ndim == 1: for i, vi in enumerate(v): rr.log(f\u0026#34;{key}_{i}\u0026#34;, rr.Scalar(float(vi))) else: # Fall back to flattening higher-dimensional arrays flat = v.flatten() for i, vi in enumerate(flat): rr.log(f\u0026#34;{key}_{i}\u0026#34;, rr.Scalar(float(vi))) lerobot_teleoperate_web.pyï¼š\n#!/usr/bin/env python3 # Copyright 2024 The HuggingFace Inc. team. All rights reserved. # # Licensed under the Apache License, Version 2.0 (the \u0026#34;License\u0026#34;); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an \u0026#34;AS IS\u0026#34; BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. \u0026#34;\u0026#34;\u0026#34; é€šè¿‡é¥æ“ä½œæ§åˆ¶æœºå™¨äººçš„è„šæœ¬ (ä½¿ç”¨ Web å¯è§†åŒ–)ã€‚ Simple script to control a robot from teleoperation (with Web visualization). \u0026#34;\u0026#34;\u0026#34; import logging import time from dataclasses import asdict, dataclass from pprint import pformat import rerun as rr from lerobot.cameras.opencv.configuration_opencv import OpenCVCameraConfig from lerobot.cameras.realsense.configuration_realsense import RealSenseCameraConfig from lerobot.configs import parser from lerobot.processor import ( RobotAction, RobotObservation, RobotProcessorPipeline, make_default_processors, ) from lerobot.robots import ( Robot, RobotConfig, bi_so100_follower, hope_jr, koch_follower, make_robot_from_config, so100_follower, so101_follower, ) from lerobot.teleoperators import ( Teleoperator, TeleoperatorConfig, bi_so100_leader, gamepad, homunculus, koch_leader, make_teleoperator_from_config, so100_leader, so101_leader, ) from lerobot.utils.robot_utils import busy_wait from lerobot.utils.utils import init_logging, move_cursor_up from .web_visualization_utils import init_rerun_web, log_rerun_data @dataclass class TeleoperateWebConfig: teleop: TeleoperatorConfig robot: RobotConfig # Limit the maximum frames per second. # é™åˆ¶æœ€å¤§å¸§ç‡ fps: int = 60 teleop_time_s: float | None = None # Display all cameras on screen # åœ¨å±å¹•ä¸Šæ˜¾ç¤ºæ‰€æœ‰æ‘„åƒå¤´ display_data: bool = False # Web viewer port # Web æŸ¥çœ‹å™¨ç«¯å£ web_port: int = 9090 # Auto open browser # è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ open_browser: bool = True def teleop_loop( teleop: Teleoperator, robot: Robot, fps: int, teleop_action_processor: RobotProcessorPipeline[tuple[RobotAction, RobotObservation], RobotAction], robot_action_processor: RobotProcessorPipeline[tuple[RobotAction, RobotObservation], RobotAction], robot_observation_processor: RobotProcessorPipeline[RobotObservation, RobotObservation], display_data: bool = False, duration: float | None = None, ): \u0026#34;\u0026#34;\u0026#34; This function continuously reads actions from a teleoperation device, processes them through optional pipelines, sends them to a robot, and optionally displays the robot\u0026#39;s state. The loop runs at a specified frequency until a set duration is reached or it is manually interrupted. Args: teleop: The teleoperator device instance providing control actions. robot: The robot instance being controlled. fps: The target frequency for the control loop in frames per second. display_data: If True, fetches robot observations and displays them in the console and Rerun. duration: The maximum duration of the teleoperation loop in seconds. If None, the loop runs indefinitely. teleop_action_processor: An optional pipeline to process raw actions from the teleoperator. robot_action_processor: An optional pipeline to process actions before they are sent to the robot. robot_observation_processor: An optional pipeline to process raw observations from the robot. \u0026#34;\u0026#34;\u0026#34; display_len = max(len(key) for key in robot.action_features) start = time.perf_counter() while True: loop_start = time.perf_counter() # Get robot observation # è·å–æœºå™¨äººè§‚æµ‹ obs = robot.get_observation() # Get teleop action # è·å–é¥æ“ä½œåŠ¨ä½œ raw_action = teleop.get_action() # Process teleop action through pipeline # é€šè¿‡å¤„ç†æµæ°´çº¿å¤„ç†é¥æ“ä½œåŠ¨ä½œ teleop_action = teleop_action_processor((raw_action, obs)) # Process action for robot through pipeline # é€šè¿‡å¤„ç†æµæ°´çº¿ç”Ÿæˆå‘é€ç»™æœºå™¨äººçš„åŠ¨ä½œ robot_action_to_send = robot_action_processor((teleop_action, obs)) # Send processed action to robot # å‘é€å¤„ç†åçš„åŠ¨ä½œç»™æœºå™¨äºº _ = robot.send_action(robot_action_to_send) if display_data: # Process robot observation through pipeline # é€šè¿‡å¤„ç†æµæ°´çº¿å¤„ç†æœºå™¨äººè§‚æµ‹ obs_transition = robot_observation_processor(obs) log_rerun_data( observation=obs_transition, action=teleop_action, ) print(\u0026#34;\\n\u0026#34; + \u0026#34;-\u0026#34; * (display_len + 10)) # åˆ†éš”çº¿ print(f\u0026#34;{\u0026#39;NAME\u0026#39;:\u0026lt;{display_len}} | {\u0026#39;NORM\u0026#39;:\u0026gt;7}\u0026#34;) # æ ‡é¢˜ï¼šåç§°ä¸å½’ä¸€åŒ–å€¼ # Display the final robot action that was sent # æ˜¾ç¤ºå·²å‘é€ç»™æœºå™¨äººçš„æœ€ç»ˆåŠ¨ä½œ for motor, value in robot_action_to_send.items(): print(f\u0026#34;{motor:\u0026lt;{display_len}} | {value:\u0026gt;7.2f}\u0026#34;) # æ¯ä¸ªç”µæœºçš„åŠ¨ä½œå€¼ï¼ˆä¿ç•™ 2 ä½å°æ•°ï¼‰ move_cursor_up(len(robot_action_to_send) + 5) # ä¸Šç§»å…‰æ ‡ä»¥è¦†ç›–åˆ·æ–° dt_s = time.perf_counter() - loop_start busy_wait(1 / fps - dt_s) # å¿™ç­‰å¾…ä»¥ç»´æŒç›®æ ‡å¸§ç‡ï¼ˆè‹¥å‰©ä½™æ—¶é—´ä¸ºæ­£ï¼‰ loop_s = time.perf_counter() - loop_start print(f\u0026#34;\\ntime: {loop_s * 1e3:.2f}ms ({1 / loop_s:.0f} Hz)\u0026#34;) # æ‰“å°å•æ¬¡å¾ªç¯è€—æ—¶ä¸é¢‘ç‡ if duration is not None and time.perf_counter() - start \u0026gt;= duration: return @parser.wrap() def teleoperate_web(cfg: TeleoperateWebConfig): init_logging() # åˆå§‹åŒ–æ—¥å¿— logging.info(pformat(asdict(cfg))) # è®°å½•å½“å‰é…ç½® if cfg.display_data: # ä½¿ç”¨ Web å¯è§†åŒ– init_rerun_web( session_name=\u0026#34;teleoperation_web\u0026#34;, port=cfg.web_port, open_browser=cfg.open_browser, ) teleop = make_teleoperator_from_config(cfg.teleop) robot = make_robot_from_config(cfg.robot) teleop_action_processor, robot_action_processor, robot_observation_processor = make_default_processors() teleop.connect() # è¿æ¥é¥æ“ä½œè®¾å¤‡ robot.connect() # è¿æ¥æœºå™¨äºº try: teleop_loop( teleop=teleop, robot=robot, fps=cfg.fps, display_data=cfg.display_data, duration=cfg.teleop_time_s, teleop_action_processor=teleop_action_processor, robot_action_processor=robot_action_processor, robot_observation_processor=robot_observation_processor, ) except KeyboardInterrupt: pass # æ•è· Ctrl+C ä¸­æ–­ï¼Œæ­£å¸¸é€€å‡º finally: if cfg.display_data: rr.rerun_shutdown() # å…³é—­ Rerun ä¼šè¯ teleop.disconnect() # æ–­å¼€é¥æ“ä½œè®¾å¤‡ robot.disconnect() # æ–­å¼€æœºå™¨äºº def main(): teleoperate_web() if __name__ == \u0026#34;__main__\u0026#34;: main() æ‰§è¡Œé¥æ“ä½œï¼š\npython -m lerobot.extra.lerobot_teleoperate_web \\ --robot.type=so101_follower \\ --robot.port=/dev/follower_arm \\ --robot.id=my_follower_arm \\ --robot.calibration_dir=./data/calibration \\ --robot.cameras=\u0026#34;{ wrist_left: {type: opencv, index_or_path: 2, width: 640, height: 480, fps: 30}, front_rgb: {type: opencv, index_or_path: 8, width: 640, height: 480, fps: 30}}\u0026#34; \\ --teleop.type=so101_leader \\ --teleop.port=/dev/leader_arm \\ --teleop.id=my_leader_arm \\ --teleop.calibration_dir=./data/calibration \\ --display_data=true \\ --web_port=9090 è¿è¡Œåé»˜è®¤æƒ…å†µä¸‹ä¼šåœ¨æµè§ˆå™¨æ‰“å¼€http://localhost:9090/?url=ws://localhost:9877ï¼Œå¯ä»¥æŸ¥çœ‹æœºæ¢°è‡‚å’Œæ‘„åƒå¤´ç”»é¢\næ‘†åŠ¨ä¸»è‡‚ï¼Œä»è‡‚ä¼šè·Ÿéšè¿åŠ¨ï¼ŒæŒ‰Ctrl+Cé€€å‡º\nå½•åˆ¶æ•°æ®é›† # LeRobot å…·èº«æ™ºèƒ½æœºæ¢°è‡‚å®æ“å…¥é—¨è¯¾ç¨‹-03ï¼šæœºæ¢°è‡‚çš„æ•°æ®é›†å½•åˆ¶ä¸æ¨¡å‹è®­ç»ƒ\nå®˜æ–¹-ä¼˜è´¨æ•°æ®é›†è¦æ±‚\nå®˜æ–¹-å½•åˆ¶æ•°æ®é›†æ•™ç¨‹\næ¯ä¸ªå›åˆå½•åˆ¶æµç¨‹ï¼šç­‰å¾…ç¨‹åºæç¤ºå½•åˆ¶å½“å‰å›åˆï¼Œé€šè¿‡ä¸»è‡‚é¥æ“ä½œæœºæ¢°è‡‚è¿›è¡ŒæŠ“å–ï¼ŒæŠ“å–ç»“æŸåï¼Œå°†æœºæ¢°è‡‚æ¢å¤åˆ°ä¼‘æ¯ä½å†ç»“æŸå½“å‰å›åˆï¼Œç­‰å¾…ç¨‹åºè®°å½•æ•°æ®çš„åŒæ—¶é‡ç½®æŠ“å–ç¯å¢ƒï¼Œç­‰å¾…ç¨‹åºæç¤ºå½•åˆ¶ä¸‹ä¸€ä¸ªå›åˆã€‚\né”®ç›˜æ§åˆ¶è¯´æ˜ï¼š\næŒ‰é”® ä½•æ—¶ä½¿ç”¨ ä½œç”¨ å³ç®­å¤´ (â†’) åœ¨å½“å‰å›åˆé‡‡é›†æœŸé—´ï¼Œå¹¶ä¸”ä½ å·²æˆåŠŸå®Œæˆä»»åŠ¡ æˆåŠŸå¹¶æå‰ç»“æŸ å½“å‰ å›åˆï¼Œä¿å­˜æ•°æ®ï¼Œç„¶åè¿›å…¥é‡ç½®é˜¶æ®µã€‚ å·¦ç®­å¤´ (â†) åœ¨å½“å‰å›åˆé‡‡é›†æœŸé—´ï¼Œä½†ä½ çŠ¯äº†ä¸ªé”™è¯¯ ä½œåºŸå¹¶é‡æ–°å¼€å§‹ å½“å‰ å›åˆã€‚è¿™æ¬¡çš„å½•åˆ¶æ•°æ®ä¼šè¢«ä¸¢å¼ƒã€‚ ESC é”® ä»»ä½•æ—¶å€™ å®Œå…¨ç»ˆæ­¢ æ•´ä¸ªé‡‡é›†ä¼šè¯ã€‚ç¨‹åºä¼šä¿å­˜å·²å®Œæˆçš„æ•°æ®å¹¶é€€å‡ºã€‚ å½•åˆ¶æµ‹è¯•æ•°æ®é›† # é‡‡é›†æ¬¡æ•°ï¼š5 æ¬¡ é‡‡é›†ä»»åŠ¡ï¼ˆè¯·è‡ªå®šä¹‰ä¿®æ”¹ï¼‰ï¼šPut the red pepper toy in the cardboard box é‡‡é›†æ•°æ®ä¿å­˜è·¯å¾„ï¼š./data/datasets/xiadengma/record-test-so101 lerobot-record \\ --robot.type=so101_follower \\ --robot.port=/dev/follower_arm \\ --robot.id=my_follower_arm \\ --robot.calibration_dir=./data/calibration \\ --robot.cameras=\u0026#34;{ wrist_left: {type: opencv, index_or_path: 2, width: 640, height: 480, fps: 30}, front_rgb: {type: opencv, index_or_path: 8, width: 640, height: 480, fps: 30}}\u0026#34; \\ --teleop.type=so101_leader \\ --teleop.port=/dev/leader_arm \\ --teleop.id=my_leader_arm \\ --teleop.calibration_dir=./data/calibration \\ --display_data=true \\ --dataset.repo_id=xiadengma/record-test-so101 \\ --dataset.num_episodes=5 \\ --dataset.single_task=\u0026#34;Put the red pepper toy in the cardboard box\u0026#34; \\ --dataset.push_to_hub=false \\ --dataset.root=./data/datasets/xiadengma/record-test-so101 ReRun Web å¯è§†åŒ– åœ¨src/lerobotä¸‹çš„extraæ–‡ä»¶å¤¹ä¸­æ·»åŠ web_visualization_utils.pyå’Œlerobot_record_web.pyä¸¤ä¸ªæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\nweb_visualization_utils.pyï¼š åœ¨### ä½¿ç”¨æ‘„åƒå¤´è¿›è¡Œé¥æ“ä½œä¸­æœ‰ï¼ŒæŒ‰æ­¥éª¤æ¥è¿™é‡Œä¸éœ€è¦å†åšã€‚\nlerobot_record_web.pyï¼š\n#!/usr/bin/env python3 # Copyright 2024 The HuggingFace Inc. team. All rights reserved. # # Licensed under the Apache License, Version 2.0 (the \u0026#34;License\u0026#34;); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an \u0026#34;AS IS\u0026#34; BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. \u0026#34;\u0026#34;\u0026#34; å½•åˆ¶æ•°æ®é›† (ä½¿ç”¨ Web å¯è§†åŒ–)ã€‚æœºå™¨äººåŠ¨ä½œå¯ç”±é¥æ“ä½œæˆ–ç­–ç•¥ç”Ÿæˆã€‚ Records a dataset (with Web visualization). Actions for the robot can be either generated by teleoperation or by a policy. ä½¿ç”¨ç¤ºä¾‹ Example: ```shell python -m lerobot.extra.lerobot_record_web \\ --robot.type=so101_follower \\ --robot.port=/dev/ttyACM0 \\ --robot.cameras=\u0026#34;{front: {type: opencv, index_or_path: 2, width: 640, height: 480, fps: 30}}\u0026#34; \\ --robot.id=my_follower_arm \\ --teleop.type=so101_leader \\ --teleop.port=/dev/ttyACM1 \\ --teleop.id=my_leader_arm \\ --dataset.repo_id=\u0026lt;my_username\u0026gt;/\u0026lt;my_dataset_name\u0026gt; \\ --dataset.num_episodes=50 \\ --dataset.single_task=\u0026#34;Grab the black cube\u0026#34; \\ --display_data=true \\ --web_port=9090 ç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ / Then open in browser: http://localhost:9090 \u0026quot;\u0026quot;\u0026quot;\nimport logging import time from dataclasses import asdict, dataclass, field from pathlib import Path from pprint import pformat from typing import Any\nfrom lerobot.cameras import ( # noqa: F401 CameraConfig, # noqa: F401 ) from lerobot.cameras.opencv.configuration_opencv import OpenCVCameraConfig # noqa: F401 from lerobot.cameras.realsense.configuration_realsense import RealSenseCameraConfig # noqa: F401 from lerobot.configs import parser from lerobot.configs.policies import PreTrainedConfig from lerobot.datasets.image_writer import safe_stop_image_writer from lerobot.datasets.lerobot_dataset import LeRobotDataset from lerobot.datasets.pipeline_features import aggregate_pipeline_dataset_features, create_initial_features from lerobot.datasets.utils import build_dataset_frame, combine_feature_dicts from lerobot.datasets.video_utils import VideoEncodingManager from lerobot.policies.factory import make_policy, make_pre_post_processors from lerobot.policies.pretrained import PreTrainedPolicy from lerobot.policies.utils import make_robot_action from lerobot.processor import ( PolicyAction, PolicyProcessorPipeline, RobotAction, RobotObservation, RobotProcessorPipeline, make_default_processors, ) from lerobot.processor.rename_processor import rename_stats from lerobot.robots import ( # noqa: F401 Robot, RobotConfig, bi_so100_follower, # noqa: F401 hope_jr, # noqa: F401 koch_follower, # noqa: F401 make_robot_from_config, so100_follower, # noqa: F401 so101_follower, # noqa: F401 ) from lerobot.teleoperators import ( # noqa: F401 Teleoperator, TeleoperatorConfig, bi_so100_leader, # noqa: F401 homunculus, # noqa: F401 koch_leader, make_teleoperator_from_config, so100_leader, so101_leader, ) from lerobot.teleoperators.keyboard.teleop_keyboard import KeyboardTeleop from lerobot.utils.constants import ACTION, OBS_STR from lerobot.utils.control_utils import ( init_keyboard_listener, is_headless, predict_action, sanity_check_dataset_name, sanity_check_dataset_robot_compatibility, ) from lerobot.utils.import_utils import register_third_party_devices from lerobot.utils.robot_utils import busy_wait from lerobot.utils.utils import ( get_safe_torch_device, init_logging, log_say, )\nå¯¼å…¥ Web å¯è§†åŒ–å·¥å…· / Import web visualization utilities # from .web_visualization_utils import init_rerun_web, log_rerun_data\n@dataclass class DatasetRecordConfig: # Dataset identifier. By convention it should match \u0026lsquo;{hf_username}/{dataset_name}\u0026rsquo; (e.g. lerobot/test). # æ•°æ®é›†æ ‡è¯†ç¬¦ï¼ŒæŒ‰çº¦å®šä¸º\u0026quot;ç”¨æˆ·å/æ•°æ®é›†å\u0026quot; repo_id: str # A short but accurate description of the task performed during the recording (e.g. \u0026ldquo;Pick the Lego block and drop it in the box on the right.\u0026rdquo;) # å¯¹å½•åˆ¶ä»»åŠ¡çš„ç®€çŸ­å‡†ç¡®æè¿° single_task: str # Root directory where the dataset will be stored (e.g. \u0026lsquo;dataset/path\u0026rsquo;). # æ•°æ®é›†ä¿å­˜çš„æ ¹ç›®å½• root: str | Path | None = None # Limit the frames per second. # é™åˆ¶å¸§ç‡ fps: int = 30 # Number of seconds for data recording for each episode. # æ¯ä¸ª episode çš„å½•åˆ¶æ—¶é•¿ï¼ˆç§’ï¼‰ episode_time_s: int | float = 60 # Number of seconds for resetting the environment after each episode. # æ¯ä¸ª episode åé‡ç½®ç¯å¢ƒçš„æ—¶é•¿ï¼ˆç§’ï¼‰ reset_time_s: int | float = 60 # Number of episodes to record. # å½•åˆ¶çš„ episode æ•°é‡ num_episodes: int = 50 # Encode frames in the dataset into video # æ˜¯å¦å°†å¸§ç¼–ç ä¸ºè§†é¢‘ video: bool = True # Upload dataset to Hugging Face hub. # æ˜¯å¦ä¸Šä¼ åˆ° Hugging Face Hub push_to_hub: bool = True # Upload on private repository on the Hugging Face hub. # æ˜¯å¦ä¸Šä¼ åˆ°ç§æœ‰ä»“åº“ private: bool = False # Add tags to your dataset on the hub. # ä¸ºæ•°æ®é›†æ·»åŠ æ ‡ç­¾ tags: list[str] | None = None # Number of subprocesses handling the saving of frames as PNG. Set to 0 to use threads only; # è´Ÿè´£ä¿å­˜ PNG å¸§çš„å­è¿›ç¨‹æ•°ï¼›è®¾ä¸º 0 ä»…ç”¨çº¿ç¨‹ # set to â‰¥1 to use subprocesses, each using threads to write images. The best number of processes # è®¾ä¸º â‰¥1 æ—¶ä½¿ç”¨å­è¿›ç¨‹ï¼Œæ¯ä¸ªå­è¿›ç¨‹å†…ä½¿ç”¨çº¿ç¨‹ # and threads depends on your system. We recommend 4 threads per camera with 0 processes. # è¿›ç¨‹ä¸çº¿ç¨‹æ•°å–å†³äºç³»ç»Ÿï¼Œå»ºè®®æ¯ä¸ªç›¸æœº 4 çº¿ç¨‹ã€0 å­è¿›ç¨‹ # If fps is unstable, adjust the thread count. If still unstable, try using 1 or more subprocesses. # fps ä¸ç¨³å…ˆè°ƒçº¿ç¨‹æ•°ï¼›è‹¥ä»ä¸ç¨³å°è¯•å¢åŠ å­è¿›ç¨‹ num_image_writer_processes: int = 0 # Number of threads writing the frames as png images on disk, per camera. # æ¯ä¸ªç›¸æœºå†™ PNG çš„çº¿ç¨‹æ•° # Too many threads might cause unstable teleoperation fps due to main thread being blocked. # çº¿ç¨‹è¿‡å¤šå¯èƒ½é˜»å¡ä¸»çº¿ç¨‹å¯¼è‡´é¥æ“ä½œ fps ä¸ç¨³ # Not enough threads might cause low camera fps. # çº¿ç¨‹è¿‡å°‘å¯èƒ½å¯¼è‡´ç›¸æœº fps ä½ num_image_writer_threads_per_camera: int = 4 # Number of episodes to record before batch encoding videos # æ‰¹é‡ç¼–ç è§†é¢‘å‰è¦ç´¯è®¡çš„ episode æ•° # Set to 1 for immediate encoding (default behavior), or higher for batched encoding # 1 è¡¨ç¤ºç«‹å³ç¼–ç ï¼ˆé»˜è®¤ï¼‰ï¼Œæ›´å¤§è¡¨ç¤ºæ‰¹é‡ video_encoding_batch_size: int = 1 # Rename map for the observation to override the image and state keys # è¦†ç›–å›¾åƒä¸çŠ¶æ€é”®åçš„é‡å‘½åæ˜ å°„ rename_map: dict[str, str] = field(default_factory=dict)\ndef __post_init__(self): if self.single_task is None: raise ValueError(\u0026quot;You need to provide a task as argument in `single_task`.\u0026quot;) @dataclass class RecordWebConfig: robot: RobotConfig dataset: DatasetRecordConfig # Whether to control the robot with a teleoperator # æ˜¯å¦ä½¿ç”¨é¥æ“ä½œæ§åˆ¶æœºå™¨äºº teleop: TeleoperatorConfig | None = None # Whether to control the robot with a policy # æ˜¯å¦ä½¿ç”¨ç­–ç•¥æ§åˆ¶æœºå™¨äºº policy: PreTrainedConfig | None = None # Display all cameras on screen # æ˜¯å¦åœ¨å±å¹•æ˜¾ç¤ºæ‰€æœ‰æ‘„åƒå¤´ display_data: bool = False # Use vocal synthesis to read events. # æ˜¯å¦ç”¨è¯­éŸ³æ’­æŠ¥äº‹ä»¶ play_sounds: bool = True # Resume recording on an existing dataset. # ç»§ç»­å½•åˆ¶å·²æœ‰æ•°æ®é›† resume: bool = False # Web viewer port # Web æŸ¥çœ‹å™¨ç«¯å£ web_port: int = 9090 # Auto open browser # è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ open_browser: bool = True\ndef __post_init__(self): # HACK: We parse again the cli args here to get the pretrained path if there was one. # å†æ¬¡è§£æ CLI ä»¥è·å–é¢„è®­ç»ƒè·¯å¾„ï¼ˆè‹¥å­˜åœ¨ï¼‰ policy_path = parser.get_path_arg(\u0026quot;policy\u0026quot;) if policy_path: cli_overrides = parser.get_cli_overrides(\u0026quot;policy\u0026quot;) self.policy = PreTrainedConfig.from_pretrained(policy_path, cli_overrides=cli_overrides) self.policy.pretrained_path = policy_path if self.teleop is None and self.policy is None: raise ValueError(\u0026quot;Choose a policy, a teleoperator or both to control the robot\u0026quot;) @classmethod def __get_path_fields__(cls) -\u0026gt; list[str]: \u0026quot;\u0026quot;\u0026quot;This enables the parser to load config from the policy using `--policy.path=local/dir`\u0026quot;\u0026quot;\u0026quot; # å…è®¸è§£æå™¨é€šè¿‡ --policy.path åŠ è½½é…ç½® return [\u0026quot;policy\u0026quot;] \u0026quot;\u0026quot;\u0026quot; \u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash; record_loop() data flow \u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash; [ Robot ] V [ robot.get_observation() ] \u0026mdash;\u0026gt; raw_obs V [ robot_observation_processor ] \u0026mdash;\u0026gt; processed_obs V .\u0026mdash;\u0026ndash;( ACTION LOGIC )\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;. V V [ From Teleoperator ] [ From Policy ] | | | [teleop.get_action] -\u0026gt; raw_action | [predict_action] | | | | | V | V | [teleop_action_processor] | | | | | | \u0026lsquo;\u0026mdash;\u0026gt; processed_teleop_action \u0026lsquo;\u0026mdash;\u0026gt; processed_policy_action | | \u0026lsquo;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-.\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-\u0026rsquo; V [ robot_action_processor ] \u0026ndash;\u0026gt; robot_action_to_send V [ robot.send_action() ] \u0026ndash; (Robot Executes) V ( Save to Dataset ) V ( Rerun Log / Loop Wait ) \u0026quot;\u0026quot;\u0026quot;\n@safe_stop_image_writer def record_loop( robot: Robot, events: dict, fps: int, teleop_action_processor: RobotProcessorPipeline[ tuple[RobotAction, RobotObservation], RobotAction ], # runs after teleop # åœ¨é¥æ“ä½œä¹‹åè¿è¡Œ robot_action_processor: RobotProcessorPipeline[ tuple[RobotAction, RobotObservation], RobotAction ], # runs before robot # åœ¨å‘é€åˆ°æœºå™¨äººä¹‹å‰è¿è¡Œ robot_observation_processor: RobotProcessorPipeline[ RobotObservation, RobotObservation ], # runs after robot # åœ¨æœºå™¨äººè§‚æµ‹ä¹‹åè¿è¡Œ dataset: LeRobotDataset | None = None, teleop: Teleoperator | list[Teleoperator] | None = None, policy: PreTrainedPolicy | None = None, preprocessor: PolicyProcessorPipeline[dict[str, Any], dict[str, Any]] | None = None, postprocessor: PolicyProcessorPipeline[PolicyAction, PolicyAction] | None = None, control_time_s: int | None = None, single_task: str | None = None, display_data: bool = False, ): if dataset is not None and dataset.fps != fps: raise ValueError(f\u0026quot;The dataset fps should be equal to requested fps ({dataset.fps} != {fps}).\u0026quot;)\nteleop_arm = teleop_keyboard = None if isinstance(teleop, list): teleop_keyboard = next((t for t in teleop if isinstance(t, KeyboardTeleop)), None) teleop_arm = next( ( t for t in teleop if isinstance( t, (so100_leader.SO100Leader | so101_leader.SO101Leader | koch_leader.KochLeader), ) ), None, ) if not (teleop_arm and teleop_keyboard and len(teleop) == 2 and robot.name == \u0026quot;lekiwi_client\u0026quot;): raise ValueError( \u0026quot;For multi-teleop, the list must contain exactly one KeyboardTeleop and one arm teleoperator. Currently only supported for LeKiwi robot.\u0026quot; ) # Reset policy and processor if they are provided if policy is not None and preprocessor is not None and postprocessor is not None: policy.reset() preprocessor.reset() postprocessor.reset() timestamp = 0 start_episode_t = time.perf_counter() while timestamp \u0026lt; control_time_s: start_loop_t = time.perf_counter() if events[\u0026quot;exit_early\u0026quot;]: events[\u0026quot;exit_early\u0026quot;] = False break # Get robot observation # è·å–æœºå™¨äººè§‚æµ‹ obs = robot.get_observation() # Applies a pipeline to the raw robot observation, default is IdentityProcessor # å¯¹è§‚æµ‹åº”ç”¨å¤„ç†æµæ°´çº¿ï¼ˆé»˜è®¤æ’ç­‰ï¼‰ obs_processed = robot_observation_processor(obs) if policy is not None or dataset is not None: observation_frame = build_dataset_frame(dataset.features, obs_processed, prefix=OBS_STR) # Get action from either policy or teleop # ä»ç­–ç•¥æˆ–é¥æ“ä½œè·å–åŠ¨ä½œ if policy is not None and preprocessor is not None and postprocessor is not None: action_values = predict_action( observation=observation_frame, policy=policy, device=get_safe_torch_device(policy.config.device), preprocessor=preprocessor, postprocessor=postprocessor, use_amp=policy.config.use_amp, task=single_task, robot_type=robot.robot_type, ) act_processed_policy: RobotAction = make_robot_action(action_values, dataset.features) elif policy is None and isinstance(teleop, Teleoperator): act = teleop.get_action() # Applies a pipeline to the raw teleop action, default is IdentityProcessor # å¯¹é¥æ“ä½œåŠ¨ä½œåº”ç”¨å¤„ç†æµæ°´çº¿ï¼ˆé»˜è®¤æ’ç­‰ï¼‰ act_processed_teleop = teleop_action_processor((act, obs)) elif policy is None and isinstance(teleop, list): arm_action = teleop_arm.get_action() arm_action = {f\u0026quot;arm_{k}\u0026quot;: v for k, v in arm_action.items()} keyboard_action = teleop_keyboard.get_action() base_action = robot._from_keyboard_to_base_action(keyboard_action) act = {**arm_action, **base_action} if len(base_action) \u0026gt; 0 else arm_action act_processed_teleop = teleop_action_processor((act, obs)) else: logging.info( \u0026quot;No policy or teleoperator provided, skipping action generation.\u0026quot; \u0026quot;This is likely to happen when resetting the environment without a teleop device.\u0026quot; \u0026quot;The robot won't be at its rest position at the start of the next episode.\u0026quot; ) continue # Applies a pipeline to the action, default is IdentityProcessor # å¯¹åŠ¨ä½œåº”ç”¨å¤„ç†æµæ°´çº¿ï¼ˆé»˜è®¤æ’ç­‰ï¼‰ if policy is not None and act_processed_policy is not None: action_values = act_processed_policy robot_action_to_send = robot_action_processor((act_processed_policy, obs)) else: action_values = act_processed_teleop robot_action_to_send = robot_action_processor((act_processed_teleop, obs)) # Send action to robot # å‘é€åŠ¨ä½œåˆ°æœºå™¨äºº # Action can eventually be clipped using `max_relative_target`, # åŠ¨ä½œå¯èƒ½è¢«è£å‰ªï¼ˆmax_relative_targetï¼‰ # so action actually sent is saved in the dataset. action = postprocessor.process(action) # å®é™…å‘é€çš„åŠ¨ä½œä¼šå­˜å…¥æ•°æ®é›† # TODO(steven, pepijn, adil): we should use a pipeline step to clip the action, so the sent action is the action that we input to the robot. # å»ºè®®åœ¨æµæ°´çº¿ä¸­è£å‰ªï¼Œä¿æŒä¸€è‡´ _sent_action = robot.send_action(robot_action_to_send) # Write to dataset # å†™å…¥æ•°æ®é›† if dataset is not None: action_frame = build_dataset_frame(dataset.features, action_values, prefix=ACTION) frame = {**observation_frame, **action_frame, \u0026quot;task\u0026quot;: single_task} dataset.add_frame(frame) if display_data: log_rerun_data(observation=obs_processed, action=action_values) dt_s = time.perf_counter() - start_loop_t busy_wait(1 / fps - dt_s) timestamp = time.perf_counter() - start_episode_t @parser.wrap() def record_web(cfg: RecordWebConfig) -\u0026gt; LeRobotDataset: init_logging() logging.info(pformat(asdict(cfg)))\nif cfg.display_data: # ä½¿ç”¨ Web å¯è§†åŒ– / Use web visualization init_rerun_web( session_name=\u0026quot;recording_web\u0026quot;, port=cfg.web_port, open_browser=cfg.open_browser, ) robot = make_robot_from_config(cfg.robot) teleop = make_teleoperator_from_config(cfg.teleop) if cfg.teleop is not None else None teleop_action_processor, robot_action_processor, robot_observation_processor = make_default_processors() dataset_features = combine_feature_dicts( aggregate_pipeline_dataset_features( pipeline=teleop_action_processor, initial_features=create_initial_features( action=robot.action_features ), # TODO(steven, pepijn): in future this should be come from teleop or policy use_videos=cfg.dataset.video, ), aggregate_pipeline_dataset_features( pipeline=robot_observation_processor, initial_features=create_initial_features(observation=robot.observation_features), use_videos=cfg.dataset.video, ), ) if cfg.resume: dataset = LeRobotDataset( cfg.dataset.repo_id, root=cfg.dataset.root, batch_encoding_size=cfg.dataset.video_encoding_batch_size, ) if hasattr(robot, \u0026quot;cameras\u0026quot;) and len(robot.cameras) \u0026gt; 0: dataset.start_image_writer( num_processes=cfg.dataset.num_image_writer_processes, num_threads=cfg.dataset.num_image_writer_threads_per_camera * len(robot.cameras), ) sanity_check_dataset_robot_compatibility(dataset, robot, cfg.dataset.fps, dataset_features) else: # Create empty dataset or load existing saved episodes sanity_check_dataset_name(cfg.dataset.repo_id, cfg.policy) dataset = LeRobotDataset.create( cfg.dataset.repo_id, cfg.dataset.fps, root=cfg.dataset.root, robot_type=robot.name, features=dataset_features, use_videos=cfg.dataset.video, image_writer_processes=cfg.dataset.num_image_writer_processes, image_writer_threads=cfg.dataset.num_image_writer_threads_per_camera * len(robot.cameras), batch_encoding_size=cfg.dataset.video_encoding_batch_size, ) # Load pretrained policy policy = None if cfg.policy is None else make_policy(cfg.policy, ds_meta=dataset.meta) preprocessor = None postprocessor = None if cfg.policy is not None: preprocessor, postprocessor = make_pre_post_processors( policy_cfg=cfg.policy, pretrained_path=cfg.policy.pretrained_path, dataset_stats=rename_stats(dataset.meta.stats, cfg.dataset.rename_map), preprocessor_overrides={ \u0026quot;device_processor\u0026quot;: {\u0026quot;device\u0026quot;: cfg.policy.device}, \u0026quot;rename_observations_processor\u0026quot;: {\u0026quot;rename_map\u0026quot;: cfg.dataset.rename_map}, }, ) robot.connect() if teleop is not None: teleop.connect() listener, events = init_keyboard_listener() with VideoEncodingManager(dataset): recorded_episodes = 0 while recorded_episodes \u0026lt; cfg.dataset.num_episodes and not events[\u0026quot;stop_recording\u0026quot;]: log_say(f\u0026quot;Recording episode {dataset.num_episodes}\u0026quot;, cfg.play_sounds) record_loop( robot=robot, events=events, fps=cfg.dataset.fps, teleop_action_processor=teleop_action_processor, robot_action_processor=robot_action_processor, robot_observation_processor=robot_observation_processor, teleop=teleop, policy=policy, preprocessor=preprocessor, postprocessor=postprocessor, dataset=dataset, control_time_s=cfg.dataset.episode_time_s, single_task=cfg.dataset.single_task, display_data=cfg.display_data, ) # Execute a few seconds without recording to give time to manually reset the environment # æš‚åœå½•åˆ¶ä»¥ä¾¿æ‰‹åŠ¨é‡ç½®ç¯å¢ƒ # Skip reset for the last episode to be recorded # æœ€åä¸€ä¸ª episode å¯è·³è¿‡é‡ç½® if not events[\u0026quot;stop_recording\u0026quot;] and ( (recorded_episodes \u0026lt; cfg.dataset.num_episodes - 1) or events[\u0026quot;rerecord_episode\u0026quot;] ): log_say(\u0026quot;Reset the environment\u0026quot;, cfg.play_sounds) record_loop( robot=robot, events=events, fps=cfg.dataset.fps, teleop_action_processor=teleop_action_processor, robot_action_processor=robot_action_processor, robot_observation_processor=robot_observation_processor, teleop=teleop, control_time_s=cfg.dataset.reset_time_s, single_task=cfg.dataset.single_task, display_data=cfg.display_data, ) if events[\u0026quot;rerecord_episode\u0026quot;]: log_say(\u0026quot;Re-record episode\u0026quot;, cfg.play_sounds) events[\u0026quot;rerecord_episode\u0026quot;] = False events[\u0026quot;exit_early\u0026quot;] = False dataset.clear_episode_buffer() continue dataset.save_episode() recorded_episodes += 1 log_say(\u0026quot;Stop recording\u0026quot;, cfg.play_sounds, blocking=True) robot.disconnect() if teleop is not None: teleop.disconnect() if not is_headless() and listener is not None: listener.stop() if cfg.dataset.push_to_hub: dataset.push_to_hub(tags=cfg.dataset.tags, private=cfg.dataset.private) log_say(\u0026quot;Exiting\u0026quot;, cfg.play_sounds) return dataset def main(): register_third_party_devices() record_web()\nif name == \u0026ldquo;main\u0026rdquo;: main()\næ‰§è¡Œé¥æ“ä½œï¼š\npython -m lerobot.extra.lerobot_record_web \\ --robot.type=so101_follower \\ --robot.port=/dev/follower_arm \\ --robot.id=my_follower_arm \\ --robot.calibration_dir=./data/calibration \\ --robot.cameras=\u0026#34;{ wrist_left: {type: opencv, index_or_path: 2, width: 640, height: 480, fps: 30}, front_rgb: {type: opencv, index_or_path: 8, width: 640, height: 480, fps: 30}}\u0026#34; \\ --teleop.type=so101_leader \\ --teleop.port=/dev/leader_arm \\ --teleop.id=my_leader_arm \\ --teleop.calibration_dir=./data/calibration \\ --display_data=true \\ --dataset.repo_id=xiadengma/record-test-so101 \\ --dataset.num_episodes=3 \\ --dataset.single_task=\u0026#34;Put the red pepper toy in the cardboard box\u0026#34; \\ --web_port=9090 \\ --dataset.push_to_hub=false \\ --dataset.root=./data/datasets/xiadengma/record-test-so101 è¿è¡Œåé»˜è®¤æƒ…å†µä¸‹ä¼šåœ¨æµè§ˆå™¨æ‰“å¼€http://localhost:9090/?url=ws://localhost:9877ï¼Œå¯ä»¥æŸ¥çœ‹æœºæ¢°è‡‚å’Œæ‘„åƒå¤´ç”»é¢\nå¯è§†åŒ–æ•°æ®é›† # æˆ‘ä»¬å¯ä»¥å¯¹å½•åˆ¶çš„æ•°æ®é›†è¿›è¡Œå¯è§†åŒ–ã€‚\næŸ¥çœ‹æŒ‡å®šå›åˆï¼š lerobot-dataset-viz \\ --repo-id xiadengma/record-test-so101 \\ --root ./data/datasets/xiadengma/record-test-so101 \\ --episode-index 0 æŸ¥çœ‹å¤šä¸ªå›åˆï¼š lerobot-dataset-viz \\ --repo-id xiadengma/record-test-so101 \\ --root ./data/datasets/xiadengma/record-test-so101 \\ --episodes 0 1 2 3 4 ReRun Web å¯è§†åŒ– åœ¨src/lerobotä¸‹çš„extraæ–‡ä»¶å¤¹ä¸­æ·»åŠ lerobot_dataset_viz_web.pyæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\nlerobot_dataset_viz_web.pyï¼š #!/usr/bin/env python # Copyright 2024 The HuggingFace Inc. team. All rights reserved. # # Licensed under the Apache License, Version 2.0 (the \u0026#34;License\u0026#34;); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an \u0026#34;AS IS\u0026#34; BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. \u0026#34;\u0026#34;\u0026#34; ä½¿ç”¨ Web æµè§ˆå™¨å¯è§†åŒ– LeRobotDataset ä¸­ä»»æ„ episode çš„æ‰€æœ‰å¸§æ•°æ®ã€‚ Visualize data of **all** frames of any episode of a dataset of type LeRobotDataset in a web browser. æ³¨æ„ Note: - Episode çš„æœ€åä¸€å¸§ä¸ä¸€å®šå¯¹åº”æœ€ç»ˆçŠ¶æ€ / The last frame doesn\u0026#39;t always correspond to a final state - å›¾åƒå¯èƒ½å­˜åœ¨å‹ç¼©ä¼ªå½± / Images may show compression artifacts from mp4 encoding è®¿é—® Access: æµè§ˆå™¨æ‰“å¼€ / Open in browser: http://localhost:PORT \u0026#34;\u0026#34;\u0026#34; import argparse import gc import logging from collections.abc import Iterator from pathlib import Path import numpy as np import rerun as rr import torch import torch.utils.data import tqdm from lerobot.datasets.lerobot_dataset import LeRobotDataset from lerobot.utils.constants import ACTION, DONE, OBS_STATE, REWARD class EpisodeSampler(torch.utils.data.Sampler): \u0026#34;\u0026#34;\u0026#34;ç”¨äºé‡‡æ ·å•ä¸ª episode çš„æ‰€æœ‰å¸§ / Sampler for all frames of a single episode.\u0026#34;\u0026#34;\u0026#34; def __init__(self, dataset: LeRobotDataset, episode_index: int): from_idx = dataset.meta.episodes[\u0026#34;dataset_from_index\u0026#34;][episode_index] to_idx = dataset.meta.episodes[\u0026#34;dataset_to_index\u0026#34;][episode_index] self.frame_ids = range(from_idx, to_idx) def __iter__(self) -\u0026gt; Iterator: return iter(self.frame_ids) def __len__(self) -\u0026gt; int: return len(self.frame_ids) def to_hwc_uint8_numpy(chw_float32_torch: torch.Tensor) -\u0026gt; np.ndarray: \u0026#34;\u0026#34;\u0026#34; å°† PyTorch CHW float32 å›¾åƒè½¬æ¢ä¸º NumPy HWC uint8 æ ¼å¼ã€‚ Convert PyTorch CHW float32 image to NumPy HWC uint8 format. \u0026#34;\u0026#34;\u0026#34; assert chw_float32_torch.dtype == torch.float32 assert chw_float32_torch.ndim == 3 c, h, w = chw_float32_torch.shape assert c \u0026lt; h and c \u0026lt; w, ( f\u0026#34;æœŸæœ›é€šé“ä¼˜å…ˆæ ¼å¼ï¼Œä½†å¾—åˆ° / expect channel first images, but got {chw_float32_torch.shape}\u0026#34; ) hwc_uint8_numpy = (chw_float32_torch * 255).type(torch.uint8).permute(1, 2, 0).numpy() return hwc_uint8_numpy def visualize_episode( dataset: LeRobotDataset, episode_index: int, batch_size: int = 32, num_workers: int = 0, ) -\u0026gt; None: \u0026#34;\u0026#34;\u0026#34; åœ¨ Rerun ä¸­å¯è§†åŒ–å•ä¸ª episode çš„æ‰€æœ‰å¸§ã€‚ Visualize all frames of a single episode in Rerun. Args: dataset: LeRobot æ•°æ®é›† / LeRobot dataset episode_index: Episode ç´¢å¼• / Episode index batch_size: æ‰¹å¤„ç†å¤§å° / Batch size for dataloader num_workers: æ•°æ®åŠ è½½è¿›ç¨‹æ•° / Number of worker processes \u0026#34;\u0026#34;\u0026#34; logging.info( f\u0026#34;ğŸ“Š åŠ è½½ Episode {episode_index} çš„æ•°æ®åŠ è½½å™¨ / Loading dataloader for Episode {episode_index}\u0026#34; ) episode_sampler = EpisodeSampler(dataset, episode_index) dataloader = torch.utils.data.DataLoader( dataset, num_workers=num_workers, batch_size=batch_size, sampler=episode_sampler, ) total_frames = len(episode_sampler) logging.info( f\u0026#34;ğŸ“ˆ Episode {episode_index} å…±æœ‰ {total_frames} å¸§ / Episode {episode_index} has {total_frames} frames\u0026#34; ) # è®°å½•æ•°æ®åˆ° Rerun / Log data to Rerun for batch in tqdm.tqdm(dataloader, total=len(dataloader), desc=f\u0026#34;Episode {episode_index}\u0026#34;): # éå†æ‰¹æ¬¡ä¸­çš„æ¯ä¸€å¸§ / iterate over the batch for i in range(len(batch[\u0026#34;index\u0026#34;])): rr.set_time_sequence(\u0026#34;frame_index\u0026#34;, batch[\u0026#34;frame_index\u0026#34;][i].item()) rr.set_time_seconds(\u0026#34;timestamp\u0026#34;, batch[\u0026#34;timestamp\u0026#34;][i].item()) # æ˜¾ç¤ºç›¸æœºå›¾åƒ / display camera images for key in dataset.meta.camera_keys: rr.log(f\u0026#34;cameras/{key}\u0026#34;, rr.Image(to_hwc_uint8_numpy(batch[key][i]))) # æ˜¾ç¤ºåŠ¨ä½œç©ºé—´çš„æ¯ä¸ªç»´åº¦ / display each dimension of action space if ACTION in batch: for dim_idx, val in enumerate(batch[ACTION][i]): rr.log(f\u0026#34;{ACTION}/dim_{dim_idx}\u0026#34;, rr.Scalar(val.item())) # æ˜¾ç¤ºè§‚æµ‹çŠ¶æ€ç©ºé—´çš„æ¯ä¸ªç»´åº¦ / display each dimension of observed state space if OBS_STATE in batch: for dim_idx, val in enumerate(batch[OBS_STATE][i]): rr.log(f\u0026#34;state/dim_{dim_idx}\u0026#34;, rr.Scalar(val.item())) # æ˜¾ç¤ºå®Œæˆæ ‡å¿— / display done flag if DONE in batch: rr.log(DONE, rr.Scalar(batch[DONE][i].item())) # æ˜¾ç¤ºå¥–åŠ± / display reward if REWARD in batch: rr.log(REWARD, rr.Scalar(batch[REWARD][i].item())) # æ˜¾ç¤ºæˆåŠŸæ ‡å¿— / display success flag if \u0026#34;next.success\u0026#34; in batch: rr.log(\u0026#34;success\u0026#34;, rr.Scalar(batch[\u0026#34;next.success\u0026#34;][i].item())) logging.info(f\u0026#34;âœ… Episode {episode_index} å¯è§†åŒ–å®Œæˆ / Episode {episode_index} visualization complete\u0026#34;) def visualize_dataset_web( dataset: LeRobotDataset, episode_indices: list[int], batch_size: int = 32, num_workers: int = 0, port: int = 9090, open_browser: bool = True, memory_limit: str = \u0026#34;25%\u0026#34;, ) -\u0026gt; None: \u0026#34;\u0026#34;\u0026#34; ä½¿ç”¨ Web ç•Œé¢å¯è§†åŒ–æ•°æ®é›†ã€‚ Visualize dataset using web interface. Args: dataset: LeRobot æ•°æ®é›† / LeRobot dataset episode_indices: è¦å¯è§†åŒ–çš„ episode ç´¢å¼•åˆ—è¡¨ / List of episode indices to visualize batch_size: æ‰¹å¤„ç†å¤§å° / Batch size for dataloader num_workers: æ•°æ®åŠ è½½è¿›ç¨‹æ•° / Number of worker processes port: Web æœåŠ¡å™¨ç«¯å£ / Web server port open_browser: æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ / Whether to automatically open browser memory_limit: Rerun å†…å­˜é™åˆ¶ / Memory limit for Rerun \u0026#34;\u0026#34;\u0026#34; repo_id = dataset.repo_id # åˆå§‹åŒ– Rerun Web ç•Œé¢ / Initialize Rerun web interface logging.info(\u0026#34;ğŸŒ å¯åŠ¨ Rerun Web ç•Œé¢ / Starting Rerun Web interface\u0026#34;) logging.info(f\u0026#34;ğŸ“ è®¿é—®åœ°å€ / Access URL: http://localhost:{port}\u0026#34;) logging.info(f\u0026#34;ğŸ’¾ å†…å­˜é™åˆ¶ / Memory limit: {memory_limit}\u0026#34;) rr.init(f\u0026#34;{repo_id}_web_viz\u0026#34;, spawn=False) # æ‰‹åŠ¨è§¦å‘åƒåœ¾å›æ”¶ï¼Œé¿å…é˜»å¡ / Manually call garbage collector to avoid blocking gc.collect() # å¯åŠ¨ Web æœåŠ¡å™¨ / Start web server rr.serve_web( open_browser=open_browser, web_port=port, server_memory_limit=memory_limit, ) # å¯è§†åŒ–æ¯ä¸ª episode / Visualize each episode for episode_idx in episode_indices: if episode_idx \u0026gt;= len(dataset.meta.episodes): logging.warning( f\u0026#34;âš ï¸ Episode {episode_idx} ä¸å­˜åœ¨ï¼Œè·³è¿‡ / Episode {episode_idx} does not exist, skipping\u0026#34; ) continue # ä¸ºæ¯ä¸ª episode åˆ›å»ºè®°å½•è·¯å¾„ / Create recording path for each episode rr.log(f\u0026#34;episode_{episode_idx}/info\u0026#34;, rr.TextLog(f\u0026#34;Episode {episode_idx}\u0026#34;), static=True) # è®¾ç½®æ—¶é—´åºåˆ—æ ‡è®°å½“å‰ episode / Set time sequence for current episode rr.set_time_sequence(\u0026#34;episode\u0026#34;, episode_idx) visualize_episode( dataset=dataset, episode_index=episode_idx, batch_size=batch_size, num_workers=num_workers, ) logging.info(\u0026#34;âœ¨ æ‰€æœ‰ episode å¯è§†åŒ–å®Œæˆ / All episodes visualization complete\u0026#34;) logging.info(\u0026#34;ğŸŒ Web æœåŠ¡å™¨æŒç»­è¿è¡Œä¸­ï¼ŒæŒ‰ Ctrl+C é€€å‡º / Web server running, press Ctrl+C to exit\u0026#34;) # ä¿æŒæœåŠ¡å™¨è¿è¡Œ / Keep server running try: import time while True: time.sleep(1) except KeyboardInterrupt: logging.info(\u0026#34;ğŸ‘‹ æ”¶åˆ° Ctrl-Cï¼Œæ­£åœ¨é€€å‡º / Ctrl-C received, exiting\u0026#34;) def main(): parser = argparse.ArgumentParser( description=\u0026#34;ä½¿ç”¨ Web æµè§ˆå™¨å¯è§†åŒ– LeRobot æ•°æ®é›† / Visualize LeRobot dataset in web browser\u0026#34;, formatter_class=argparse.RawDescriptionHelpFormatter, ) parser.add_argument( \u0026#34;--repo-id\u0026#34;, type=str, required=True, help=\u0026#34;æ•°æ®é›†ä»“åº“ ID / Dataset repository ID (e.g. `lerobot/pusht` or `xiadengma/record-test-so101`)\u0026#34;, ) # Episode é€‰æ‹©å‚æ•° / Episode selection arguments group = parser.add_mutually_exclusive_group(required=True) group.add_argument( \u0026#34;--episode-index\u0026#34;, type=int, help=\u0026#34;è¦å¯è§†åŒ–çš„å•ä¸ª episode ç´¢å¼• / Single episode index to visualize\u0026#34;, ) group.add_argument( \u0026#34;--episodes\u0026#34;, type=int, nargs=\u0026#34;+\u0026#34;, help=\u0026#34;è¦å¯è§†åŒ–çš„å¤šä¸ª episode ç´¢å¼• / Multiple episode indices to visualize (e.g. 0 1 2 3)\u0026#34;, ) parser.add_argument( \u0026#34;--root\u0026#34;, type=Path, default=None, help=\u0026#34;æœ¬åœ°æ•°æ®é›†æ ¹ç›®å½• / Root directory for local dataset (e.g. `--root ./data/datasets/xiadengma/record-test-so101`)\u0026#34;, ) parser.add_argument( \u0026#34;--batch-size\u0026#34;, type=int, default=32, help=\u0026#34;DataLoader æ‰¹å¤„ç†å¤§å° / Batch size for DataLoader (default: 32)\u0026#34;, ) parser.add_argument( \u0026#34;--num-workers\u0026#34;, type=int, default=4, help=\u0026#34;DataLoader è¿›ç¨‹æ•° / Number of DataLoader worker processes (default: 4)\u0026#34;, ) parser.add_argument( \u0026#34;--port\u0026#34;, type=int, default=9090, help=\u0026#34;Web æœåŠ¡å™¨ç«¯å£ / Web server port (default: 9090)\u0026#34;, ) parser.add_argument( \u0026#34;--open-browser\u0026#34;, type=lambda x: str(x).lower() in (\u0026#34;true\u0026#34;, \u0026#34;1\u0026#34;, \u0026#34;yes\u0026#34;), default=True, help=\u0026#34;æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ / Whether to automatically open browser (default: True)\u0026#34;, ) parser.add_argument( \u0026#34;--memory-limit\u0026#34;, type=str, default=\u0026#34;25%\u0026#34;, help=\u0026#34;Rerun å†…å­˜é™åˆ¶ / Memory limit for Rerun (default: 25%%)\u0026#34;, ) parser.add_argument( \u0026#34;--tolerance-s\u0026#34;, type=float, default=1e-4, help=\u0026#34;æ—¶é—´æˆ³å®¹å·®ï¼ˆç§’ï¼‰/ Tolerance in seconds for timestamps (default: 1e-4)\u0026#34;, ) args = parser.parse_args() # é…ç½®æ—¥å¿— / Configure logging logging.basicConfig( level=logging.INFO, format=\u0026#34;%(asctime)s - %(levelname)s - %(message)s\u0026#34;, datefmt=\u0026#34;%Y-%m-%d %H:%M:%S\u0026#34;, ) # ç¡®å®šè¦å¯è§†åŒ–çš„ episode åˆ—è¡¨ / Determine episode list if args.episode_index is not None: episode_indices = [args.episode_index] else: episode_indices = args.episodes logging.info(\u0026#34;=\u0026#34; * 80) logging.info(\u0026#34;ğŸ¤– LeRobot æ•°æ®é›† Web å¯è§†åŒ–å·¥å…· / LeRobot Dataset Web Visualizer\u0026#34;) logging.info(\u0026#34;=\u0026#34; * 80) logging.info(f\u0026#34;ğŸ“¦ æ•°æ®é›† / Dataset: {args.repo_id}\u0026#34;) logging.info(f\u0026#34;ğŸ“‚ æ ¹ç›®å½• / Root: {args.root if args.root else \u0026#39;HuggingFace Cache\u0026#39;}\u0026#34;) logging.info(f\u0026#34;ğŸ“Š Episodes: {episode_indices}\u0026#34;) logging.info(\u0026#34;=\u0026#34; * 80) # åŠ è½½æ•°æ®é›† / Load dataset logging.info(\u0026#34;ğŸ”„ æ­£åœ¨åŠ è½½æ•°æ®é›† / Loading dataset...\u0026#34;) dataset = LeRobotDataset( repo_id=args.repo_id, episodes=episode_indices, root=args.root, tolerance_s=args.tolerance_s, ) logging.info(\u0026#34;âœ… æ•°æ®é›†åŠ è½½æˆåŠŸ / Dataset loaded successfully\u0026#34;) logging.info(f\u0026#34;ğŸ“ˆ æ•°æ®é›†æ€»å¸§æ•° / Total frames: {len(dataset)}\u0026#34;) logging.info(f\u0026#34;ğŸ“¹ ç›¸æœºæ•°é‡ / Number of cameras: {len(dataset.meta.camera_keys)}\u0026#34;) logging.info(f\u0026#34;ğŸ¥ ç›¸æœºåˆ—è¡¨ / Camera keys: {dataset.meta.camera_keys}\u0026#34;) # å¯åŠ¨ Web å¯è§†åŒ– / Start web visualization visualize_dataset_web( dataset=dataset, episode_indices=episode_indices, batch_size=args.batch_size, num_workers=args.num_workers, port=args.port, open_browser=args.open_browser, memory_limit=args.memory_limit, ) if __name__ == \u0026#34;__main__\u0026#34;: main() æŸ¥çœ‹æ•°æ®é›†ï¼š\næŸ¥çœ‹å•ä¸ªå›åˆï¼š python -m lerobot.extra.lerobot_dataset_viz_web \\ --repo-id xiadengma/record-test-so101 \\ --root ./data/datasets/xiadengma/record-test-so101 \\ --episode-index 0 \\ --port 9090 æŸ¥çœ‹å¤šä¸ªå›åˆï¼š python -m lerobot.extra.lerobot_dataset_viz_web \\ --repo-id xiadengma/record-test-so101 \\ --root ./data/datasets/xiadengma/record-test-so101 \\ --episodes 0 1 2 3 4 \\ --port 9090 å›æ”¾æ•°æ®é›† # ä¸ç¨³å®šï¼Œå¯è·³è¿‡ï¼Œå¯å°è¯•ã€‚ ä½ ä¹Ÿå¯ä»¥è®©æœºæ¢°è‡‚æ ¹æ®æ•°æ®é›†è¿›è¡Œå›æ”¾ï¼š\nå›æ”¾ä¹‹å‰æµ‹è¯•å½•åˆ¶æ•°æ®é›†çš„ç¬¬ä¸€ä¸ªå›åˆï¼š lerobot-replay \\ --robot.type=so101_follower \\ --robot.port=/dev/follower_arm \\ --robot.id=my_follower_arm \\ --dataset.repo_id=xiadengma/record-test-so101 \\ --dataset.root=./data/datasets/xiadengma/record-test-so101 \\ --dataset.episode=0 ä½ åº”è¯¥å¯ä»¥çœ‹åˆ°æœºæ¢°è‡‚æŒ‰ç…§æ•°æ®é›†è¿›è¡Œå›æ”¾ã€‚ å½•åˆ¶å®Œæ•´æ•°æ®é›† # ç°åœ¨ï¼Œæˆ‘ä»¬å¼€å§‹å½•åˆ¶æ•°æ®é›†ï¼Œå¹¶å°†è¿™ä¸ªæ•°æ®é›†è®­ç»ƒåç”¨äºæ¨ç†ã€‚\næ¯ä¸ªå›åˆå½•åˆ¶æµç¨‹ï¼šç­‰å¾…ç¨‹åºæç¤ºå½•åˆ¶å½“å‰å›åˆï¼Œé€šè¿‡ä¸»è‡‚é¥æ“ä½œæœºæ¢°è‡‚è¿›è¡ŒæŠ“å–ï¼ŒæŠ“å–ç»“æŸåï¼Œå°†æœºæ¢°è‡‚æ¢å¤åˆ°ä¼‘æ¯ä½å†ç»“æŸå½“å‰å›åˆï¼Œç­‰å¾…ç¨‹åºè®°å½•æ•°æ®çš„åŒæ—¶é‡ç½®æŠ“å–ç¯å¢ƒï¼Œç­‰å¾…ç¨‹åºæç¤ºå½•åˆ¶ä¸‹ä¸€ä¸ªå›åˆã€‚ å½•åˆ¶è¦æ±‚ï¼š å½•åˆ¶æ•°é‡ï¼šè‡³å°‘ 50 ç»„æ•°æ®ï¼Œç¡®ä¿æ•°æ®å……åˆ†æ€§ å½•åˆ¶é¢‘æ¬¡ï¼šæ¯ä¸ªä½ç½®é‡å¤å½•åˆ¶ 10 æ¬¡ï¼Œä»¥æé«˜æ•°æ®çš„å¤šæ ·æ€§å’Œé²æ£’æ€§ å½•åˆ¶ä½ç½®ï¼šè‡³å°‘é€‰æ‹© 5 ä¸ªä¸åŒçš„ä½ç½®ï¼Œæ¶µç›–æ›´å¤šåŠ¨ä½œåœºæ™¯ é”®ç›˜æ§åˆ¶è¯´æ˜ï¼š æŒ‰é”® ä½•æ—¶ä½¿ç”¨ ä½œç”¨ å³ç®­å¤´ (â†’) åœ¨å½“å‰å›åˆé‡‡é›†æœŸé—´ï¼Œå¹¶ä¸”ä½ å·²æˆåŠŸå®Œæˆä»»åŠ¡ æˆåŠŸå¹¶æå‰ç»“æŸ å½“å‰ å›åˆï¼Œä¿å­˜æ•°æ®ï¼Œç„¶åè¿›å…¥é‡ç½®é˜¶æ®µã€‚ å·¦ç®­å¤´ (â†) åœ¨å½“å‰å›åˆé‡‡é›†æœŸé—´ï¼Œä½†ä½ çŠ¯äº†ä¸ªé”™è¯¯ ä½œåºŸå¹¶é‡æ–°å¼€å§‹ å½“å‰ å›åˆã€‚è¿™æ¬¡çš„å½•åˆ¶æ•°æ®ä¼šè¢«ä¸¢å¼ƒã€‚ ESC é”® ä»»ä½•æ—¶å€™ å®Œå…¨ç»ˆæ­¢ æ•´ä¸ªé‡‡é›†ä¼šè¯ã€‚ç¨‹åºä¼šä¿å­˜å·²å®Œæˆçš„æ•°æ®å¹¶é€€å‡ºã€‚ å½•åˆ¶æ•°æ®é›†ï¼š\né‡‡é›†æ¬¡æ•°ï¼š50 æ¬¡ é‡‡é›†ä»»åŠ¡ï¼ˆè¯·è‡ªå®šä¹‰ä¿®æ”¹ï¼‰ï¼šPut the red pepper toy in the cardboard box é‡‡é›†æ•°æ®ä¿å­˜è·¯å¾„ï¼ˆè¯·è‡ªå®šä¹‰ä¿®æ”¹ï¼‰ï¼š./data/datasets/xiadengma/so101-red-pepper python -m lerobot.extra.lerobot_record_web \\ --robot.type=so101_follower \\ --robot.port=/dev/follower_arm \\ --robot.id=my_follower_arm \\ --robot.calibration_dir=./data/calibration \\ --robot.cameras=\u0026#34;{ wrist_left: {type: opencv, index_or_path: 2, width: 640, height: 480, fps: 30}, front_rgb: {type: opencv, index_or_path: 8, width: 640, height: 480, fps: 30}}\u0026#34; \\ --teleop.type=so101_leader \\ --teleop.port=/dev/leader_arm \\ --teleop.id=my_leader_arm \\ --teleop.calibration_dir=./data/calibration \\ --display_data=true \\ --dataset.repo_id=xiadengma/so101-red-pepper \\ --dataset.num_episodes=50 \\ --dataset.single_task=\u0026#34;Put the red pepper toy in the cardboard box\u0026#34; \\ --web_port=9090 \\ --dataset.push_to_hub=false \\ --dataset.root=./data/datasets/xiadengma/so101-red-pepper æ¢å¤å½•åˆ¶ï¼ˆä»…ä¾›å‚è€ƒï¼‰ï¼š\nRecording episode 15æ—¶ç¨‹åºæŠ¥é”™ï¼šWaiting for image writer to terminate...å’ŒTimeoutError: Timed out waiting for frame from camera OpenCVCamera(8) after 200 ms. Read thread alive: True.\né—®é¢˜åŸå› ï¼šåœ¨æœºæ¢°è‡‚è¿åŠ¨è¿‡ç¨‹ä¸­ï¼Œæ‹‰æ‰¯åˆ°æœºæ¢°è‡‚è…•éƒ¨æ‘„åƒå¤´çš„è¿æ¥å¤„ï¼Œå¯¼è‡´æ‘„åƒå¤´è¿æ¥ä¸ç¨³å®šã€‚\nè§£å†³æ–¹æ³•ï¼šé‡æ–°è¿æ¥æ‘„åƒå¤´ï¼Œå¹¶é¢„ç•™è¶³å¤Ÿé•¿åº¦çš„çº¿ç¼†ï¼Œç¡®ä¿æ‘„åƒå¤´è¿æ¥ç¨³å®šï¼Œæ¥ç€è¿è¡Œä¸‹é¢å‘½ä»¤æ¢å¤å½•åˆ¶ã€‚\npython -m lerobot.extra.lerobot_record_web \\ --robot.type=so101_follower \\ --robot.port=/dev/follower_arm \\ --robot.id=my_follower_arm \\ --robot.calibration_dir=./data/calibration \\ --robot.cameras=\u0026#34;{ wrist_left: {type: opencv, index_or_path: 2, width: 640, height: 480, fps: 30}, front_rgb: {type: opencv, index_or_path: 8, width: 640, height: 480, fps: 30}}\u0026#34; \\ --teleop.type=so101_leader \\ --teleop.port=/dev/leader_arm \\ --teleop.id=my_leader_arm \\ --teleop.calibration_dir=./data/calibration \\ --display_data=true \\ --dataset.repo_id=xiadengma/so101-red-pepper \\ --dataset.num_episodes=35 \\ --dataset.single_task=\u0026#34;Put the red pepper toy in the cardboard box\u0026#34; \\ --web_port=9090 \\ --dataset.push_to_hub=false \\ --dataset.root=./data/datasets/xiadengma/so101-red-pepper \\ --resume=true åœ¨è®°å½•è¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨åˆ›å»ºæ£€æŸ¥ç‚¹ã€‚ å¦‚æœè®°å½•è¿‡ç¨‹ä¸­æ–­ï¼Œå¯ä»¥é€šè¿‡é‡æ–°è¿è¡Œç›¸åŒçš„å‘½ä»¤å¹¶æ·»åŠ  \u0026ndash;resume=true æ¥æ¢å¤è®°å½•ã€‚ âš ï¸ é‡è¦æç¤ºï¼šåœ¨æ¢å¤æ—¶ï¼Œéœ€å°† \u0026ndash;dataset.num_episodes è®¾ç½®ä¸ºè¦é¢å¤–è®°å½•çš„å‰§é›†æ•°é‡ï¼ˆè€Œä¸æ˜¯æ•°æ®é›†ä¸­ç›®æ ‡çš„æ€»å‰§é›†æ•°é‡ï¼‰ å½•åˆ¶ç»“æŸåï¼Œæ•°æ®é›†å¤§å°ä¸º390M\nè®­ç»ƒ # å¦‚æœä½¿ç”¨SwanLabè®­ç»ƒï¼Œå¿…é¡»ä¿®æ”¹ï¼Œå®˜æ–¹æš‚æ—¶æ²¡æœ‰åˆå¹¶åˆ†æ”¯ åœ¨extraæ–‡ä»¶å¤¹æ·»åŠ swanlab_utils.pyã€train_swanlab.pyå’Œlerobot_train_swanlab.pyã€‚\nswanlab_utils.pyï¼š\n#!/usr/bin/env python # Copyright 2024 The HuggingFace Inc. team. All rights reserved. # # Licensed under the Apache License, Version 2.0 (the \u0026#34;License\u0026#34;); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an \u0026#34;AS IS\u0026#34; BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. import logging import re from glob import glob from pathlib import Path from typing import TYPE_CHECKING from huggingface_hub.constants import SAFETENSORS_SINGLE_FILE from termcolor import colored from lerobot.utils.constants import PRETRAINED_MODEL_DIR if TYPE_CHECKING: from lerobot.extra.train_swanlab import TrainPipelineSwanLabConfig def cfg_to_group(cfg: \u0026#34;TrainPipelineSwanLabConfig\u0026#34;, return_list: bool = False) -\u0026gt; list[str] | str: \u0026#34;\u0026#34;\u0026#34;Return a group name for logging. Optionally returns group name as list.\u0026#34;\u0026#34;\u0026#34; lst = [ f\u0026#34;policy:{cfg.policy.type}\u0026#34;, f\u0026#34;seed:{cfg.seed}\u0026#34;, ] if cfg.dataset is not None: lst.append(f\u0026#34;dataset:{cfg.dataset.repo_id}\u0026#34;) if cfg.env is not None: lst.append(f\u0026#34;env:{cfg.env.type}\u0026#34;) return lst if return_list else \u0026#34;-\u0026#34;.join(lst) def get_swanlab_run_id_from_filesystem(log_dir: Path) -\u0026gt; str: # Get the SwanLab run ID. paths = glob(str(log_dir / \u0026#34;swanlab/latest-run/run-*\u0026#34;)) if len(paths) != 1: raise RuntimeError(\u0026#34;Couldn\u0026#39;t get the previous SwanLab run ID for run resumption.\u0026#34;) match = re.search(r\u0026#34;run-([^\\.]+).swanlab\u0026#34;, paths[0].split(\u0026#34;/\u0026#34;)[-1]) if match is None: raise RuntimeError(\u0026#34;Couldn\u0026#39;t get the previous SwanLab run ID for run resumption.\u0026#34;) swanlab_run_id = match.groups(0)[0] return swanlab_run_id def get_safe_swanlab_artifact_name(name: str): \u0026#34;\u0026#34;\u0026#34;SwanLab artifacts don\u0026#39;t accept \u0026#34;:\u0026#34; or \u0026#34;/\u0026#34; in their name.\u0026#34;\u0026#34;\u0026#34; return name.replace(\u0026#34;:\u0026#34;, \u0026#34;_\u0026#34;).replace(\u0026#34;/\u0026#34;, \u0026#34;_\u0026#34;) class SwanLabLogger: \u0026#34;\u0026#34;\u0026#34;A helper class to log object using swanlab.\u0026#34;\u0026#34;\u0026#34; def __init__(self, cfg: \u0026#34;TrainPipelineSwanLabConfig\u0026#34;): self.cfg = cfg.swanlab self.log_dir = cfg.output_dir self.job_name = cfg.job_name self.env_fps = cfg.env.fps if cfg.env else None self._group = cfg_to_group(cfg) import swanlab swanlab_run_id = ( cfg.swanlab.run_id if cfg.swanlab.run_id else get_swanlab_run_id_from_filesystem(self.log_dir) if cfg.resume else None ) self._run = swanlab.init( project=self.cfg.project, experiment_name=swanlab_run_id, description=self.cfg.notes, tags=cfg_to_group(cfg, return_list=True), logdir=str(self.log_dir), config=cfg.to_dict(), save_code=False, resume=cfg.resume, mode=self.cfg.mode if self.cfg.mode in [\u0026#34;cloud\u0026#34;, \u0026#34;offline\u0026#34;, \u0026#34;local\u0026#34;, \u0026#34;disabled\u0026#34;] else \u0026#34;cloud\u0026#34;, ) run_id = self._run.public.run_id # NOTE: We will override the cfg.swanlab.run_id with the swanlab run id. # This is because we want to be able to resume the run from the swanlab run id. cfg.swanlab.run_id = run_id # Handle custom step key for rl asynchronous training. self._swanlab_custom_step_key: set[str] | None = None print(colored(\u0026#34;Logs will be synced with swanlab.\u0026#34;, \u0026#34;blue\u0026#34;, attrs=[\u0026#34;bold\u0026#34;])) logging.info( f\u0026#34;Track this run --\u0026gt; {colored(self._run.public.cloud.experiment_url, \u0026#39;yellow\u0026#39;, attrs=[\u0026#39;bold\u0026#39;])}\u0026#34; ) self._swanlab = swanlab def log_policy(self, checkpoint_dir: Path): \u0026#34;\u0026#34;\u0026#34;Checkpoints the policy to swanlab.\u0026#34;\u0026#34;\u0026#34; if self.cfg.disable_artifact: return step_id = checkpoint_dir.name artifact_name = f\u0026#34;{self._group}-{step_id}\u0026#34; artifact_name = get_safe_swanlab_artifact_name(artifact_name) # SwanLab doesn\u0026#39;t have direct artifact logging like wandb # We\u0026#39;ll log the model file path as a text log for now model_path = str(checkpoint_dir / PRETRAINED_MODEL_DIR / SAFETENSORS_SINGLE_FILE) self._swanlab.log({\u0026#34;model_checkpoint\u0026#34;: self._swanlab.Text(model_path)}, step=step_id) def log_dict( self, d: dict, step: int | None = None, mode: str = \u0026#34;train\u0026#34;, custom_step_key: str | None = None ): if mode not in {\u0026#34;train\u0026#34;, \u0026#34;eval\u0026#34;}: raise ValueError(mode) if step is None and custom_step_key is None: raise ValueError(\u0026#34;Either step or custom_step_key must be provided.\u0026#34;) # NOTE: This is not simple. SwanLab step must always monotonically increase and it # increases with each swanlab.log call, but in the case of asynchronous RL for example, # multiple time steps is possible. For example, the interaction step with the environment, # the training step, the evaluation step, etc. So we need to define a custom step key # to log the correct step for each metric. if custom_step_key is not None: if self._swanlab_custom_step_key is None: self._swanlab_custom_step_key = set() new_custom_key = f\u0026#34;{mode}/{custom_step_key}\u0026#34; if new_custom_key not in self._swanlab_custom_step_key: self._swanlab_custom_step_key.add(new_custom_key) for k, v in d.items(): if not isinstance(v, (int, float, str)): logging.warning( f\u0026#39;SwanLab logging of key \u0026#34;{k}\u0026#34; was ignored as its type \u0026#34;{type(v)}\u0026#34; is not handled by this wrapper.\u0026#39; ) continue # Do not log the custom step key itself. if self._swanlab_custom_step_key is not None and k in self._swanlab_custom_step_key: continue if custom_step_key is not None: value_custom_step = d.get(custom_step_key) if value_custom_step is None: logging.warning( f\u0026#39;Custom step key \u0026#34;{custom_step_key}\u0026#34; not found in the dictionary. Skipping logging for this key.\u0026#39; ) continue data = {f\u0026#34;{mode}/{k}\u0026#34;: v, f\u0026#34;{mode}/{custom_step_key}\u0026#34;: value_custom_step} self._swanlab.log(data) continue self._swanlab.log(data={f\u0026#34;{mode}/{k}\u0026#34;: v}, step=step) def log_video(self, video_path: str, step: int, mode: str = \u0026#34;train\u0026#34;): if mode not in {\u0026#34;train\u0026#34;, \u0026#34;eval\u0026#34;}: raise ValueError(mode) # SwanLab media logging - using Media.Video for video logging swanlab_video = self._swanlab.Video(video_path, fps=self.env_fps) self._swanlab.log({f\u0026#34;{mode}/video\u0026#34;: swanlab_video}, step=step) train_swanlab.pyï¼š\n#!/usr/bin/env python # Copyright 2024 The HuggingFace Inc. team. All rights reserved. # # Licensed under the Apache License, Version 2.0 (the \u0026#34;License\u0026#34;); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an \u0026#34;AS IS\u0026#34; BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. \u0026#34;\u0026#34;\u0026#34; SwanLab è®­ç»ƒé…ç½®æ‰©å±• - æ‰©å±• TrainPipelineConfig ä»¥æ”¯æŒ SwanLab è¿™ä¸ªæ¨¡å—ä¸º LeRobot è®­ç»ƒç®¡é“æä¾› SwanLab æ—¥å¿—è®°å½•æ”¯æŒã€‚ å®ƒç»§æ‰¿äº†åŸå§‹çš„ TrainPipelineConfigï¼Œå¹¶æ·»åŠ äº† tracker å’Œ swanlab é…ç½®å­—æ®µã€‚ \u0026#34;\u0026#34;\u0026#34; from dataclasses import dataclass, field from lerobot.configs.train import TrainPipelineConfig from lerobot.extra.default_swanlab import SwanLabConfig @dataclass class TrainPipelineSwanLabConfig(TrainPipelineConfig): \u0026#34;\u0026#34;\u0026#34;æ”¯æŒ SwanLab çš„è®­ç»ƒç®¡é“é…ç½® ç»§æ‰¿è‡ª TrainPipelineConfigï¼Œæ·»åŠ äº†ä»¥ä¸‹å­—æ®µï¼š tracker: æ—¥å¿—è·Ÿè¸ªå™¨é€‰æ‹©ï¼Œå¯é€‰å€¼: \u0026#39;wandb\u0026#39;, \u0026#39;swanlab\u0026#39;, \u0026#39;both\u0026#39;, \u0026#39;none\u0026#39; swanlab: SwanLab é…ç½®å¯¹è±¡ ä½¿ç”¨ç¤ºä¾‹ï¼š ```python config = TrainPipelineSwanLabConfig( dataset=DatasetConfig(repo_id=\u0026#34;my/dataset\u0026#34;), tracker=\u0026#34;swanlab\u0026#34;, swanlab=SwanLabConfig(project=\u0026#34;my-project\u0026#34;, mode=\u0026#34;cloud\u0026#34;), ) ``` \u0026#34;\u0026#34;\u0026#34; # Tracker selection: \u0026#39;wandb\u0026#39;, \u0026#39;swanlab\u0026#39;, \u0026#39;both\u0026#39;, or \u0026#39;none\u0026#39; # è·Ÿè¸ªå™¨é€‰æ‹©: \u0026#39;wandb\u0026#39;, \u0026#39;swanlab\u0026#39;, \u0026#39;both\u0026#39;, æˆ– \u0026#39;none\u0026#39; tracker: str = \u0026#34;wandb\u0026#34; # SwanLab configuration # SwanLab é…ç½® swanlab: SwanLabConfig = field(default_factory=SwanLabConfig) lerobot_train_swanlab.pyï¼š\n#!/usr/bin/env python # Copyright 2024 The HuggingFace Inc. team. All rights reserved. # # Licensed under the Apache License, Version 2.0 (the \u0026#34;License\u0026#34;); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an \u0026#34;AS IS\u0026#34; BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. # è®­ç»ƒè„šæœ¬ï¼šæ„å»ºæ•°æ®é›†/ç¯å¢ƒ/ç­–ç•¥ä¸ä¼˜åŒ–å™¨ï¼Œæ‰§è¡Œè®­ç»ƒå¾ªç¯å¹¶å®šæœŸè¯„ä¼°ä¸ä¿å­˜ # --tracker=swanlab \\ # --swanlab.project=my_lerobot \\ # --swanlab.mode=cloud import logging import time from contextlib import nullcontext from pprint import pformat from typing import Any import torch from termcolor import colored from torch.amp import GradScaler from torch.optim import Optimizer from lerobot.configs import parser from lerobot.datasets.factory import make_dataset from lerobot.datasets.sampler import EpisodeAwareSampler from lerobot.datasets.utils import cycle from lerobot.envs.factory import make_env from lerobot.envs.utils import close_envs from lerobot.extra.swanlab_utils import SwanLabLogger from lerobot.extra.train_swanlab import TrainPipelineSwanLabConfig from lerobot.optim.factory import make_optimizer_and_scheduler from lerobot.policies.factory import make_policy, make_pre_post_processors from lerobot.policies.pretrained import PreTrainedPolicy from lerobot.policies.utils import get_device_from_parameters from lerobot.rl.wandb_utils import WandBLogger from lerobot.scripts.lerobot_eval import eval_policy_all from lerobot.utils.logging_utils import AverageMeter, MetricsTracker from lerobot.utils.random_utils import set_seed from lerobot.utils.train_utils import ( get_step_checkpoint_dir, get_step_identifier, load_training_state, save_checkpoint, update_last_checkpoint, ) from lerobot.utils.utils import ( format_big_number, get_safe_torch_device, has_method, init_logging, ) def update_policy( train_metrics: MetricsTracker, policy: PreTrainedPolicy, batch: Any, optimizer: Optimizer, grad_clip_norm: float, grad_scaler: GradScaler, lr_scheduler=None, use_amp: bool = False, lock=None, ) -\u0026gt; tuple[MetricsTracker, dict]: \u0026#34;\u0026#34;\u0026#34; Performs a single training step to update the policy\u0026#39;s weights. This function executes the forward and backward passes, clips gradients, and steps the optimizer and learning rate scheduler. It also handles mixed-precision training via a GradScaler. Args: train_metrics: A MetricsTracker instance to record training statistics. policy: The policy model to be trained. batch: A batch of training data. optimizer: The optimizer used to update the policy\u0026#39;s parameters. grad_clip_norm: The maximum norm for gradient clipping. grad_scaler: The GradScaler for automatic mixed-precision training. lr_scheduler: An optional learning rate scheduler. use_amp: A boolean indicating whether to use automatic mixed precision. lock: An optional lock for thread-safe optimizer updates. Returns: A tuple containing: - The updated MetricsTracker with new statistics for this step. - A dictionary of outputs from the policy\u0026#39;s forward pass, for logging purposes. \u0026#34;\u0026#34;\u0026#34; start_time = time.perf_counter() device = get_device_from_parameters(policy) policy.train() with torch.autocast(device_type=device.type) if use_amp else nullcontext(): loss, output_dict = policy.forward(batch) # TODO(rcadene): policy.unnormalize_outputs(out_dict) grad_scaler.scale(loss).backward() # Unscale the gradient of the optimizer\u0026#39;s assigned params in-place **prior to gradient clipping**. # åœ¨è£å‰ªæ¢¯åº¦ä¹‹å‰åç¼©æ”¾ä¼˜åŒ–å™¨å‚æ•°çš„æ¢¯åº¦ grad_scaler.unscale_(optimizer) grad_norm = torch.nn.utils.clip_grad_norm_( policy.parameters(), grad_clip_norm, error_if_nonfinite=False, ) # Optimizer\u0026#39;s gradients are already unscaled, so scaler.step does not unscale them, # ä¼˜åŒ–å™¨æ¢¯åº¦å·²åç¼©æ”¾ï¼Œscaler.step ä¸å†åç¼©æ”¾ # although it still skips optimizer.step() if the gradients contain infs or NaNs. # è‹¥æ¢¯åº¦å« inf/NaNï¼Œä¼šè·³è¿‡ optimizer.step() with lock if lock is not None else nullcontext(): grad_scaler.step(optimizer) # Updates the scale for next iteration. grad_scaler.update() optimizer.zero_grad() # Step through pytorch scheduler at every batch instead of epoch # æ¯ä¸ª batch è°ƒåº¦å­¦ä¹ ç‡è€Œéæ¯ä¸ª epoch if lr_scheduler is not None: lr_scheduler.step() if has_method(policy, \u0026#34;update\u0026#34;): # To possibly update an internal buffer (for instance an Exponential Moving Average like in TDMPC). policy.update() train_metrics.loss = loss.item() train_metrics.grad_norm = grad_norm.item() train_metrics.lr = optimizer.param_groups[0][\u0026#34;lr\u0026#34;] train_metrics.update_s = time.perf_counter() - start_time return train_metrics, output_dict @parser.wrap() def train(cfg: TrainPipelineSwanLabConfig): \u0026#34;\u0026#34;\u0026#34; Main function to train a policy with SwanLab support. This function orchestrates the entire training pipeline, including: - Setting up logging, seeding, and device configuration. - Creating the dataset, evaluation environment (if applicable), policy, and optimizer. - Handling resumption from a checkpoint. - Running the main training loop, which involves fetching data batches and calling `update_policy`. - Periodically logging metrics, saving model checkpoints, and evaluating the policy. - Pushing the final trained model to the Hugging Face Hub if configured. - Supporting both WandB and SwanLab for experiment tracking. Args: cfg: A `TrainPipelineSwanLabConfig` object containing all training configurations. \u0026#34;\u0026#34;\u0026#34; cfg.validate() logging.info(pformat(cfg.to_dict())) # Initialize loggers based on tracker selection wandb_logger = None swanlab_logger = None if cfg.tracker in [\u0026#34;wandb\u0026#34;, \u0026#34;both\u0026#34;] and cfg.wandb.project: wandb_logger = WandBLogger(cfg) if cfg.tracker in [\u0026#34;swanlab\u0026#34;, \u0026#34;both\u0026#34;] and cfg.swanlab.project: swanlab_logger = SwanLabLogger(cfg) if cfg.tracker == \u0026#34;none\u0026#34; or (not wandb_logger and not swanlab_logger): logging.info(colored(\u0026#34;Logs will be saved locally.\u0026#34;, \u0026#34;yellow\u0026#34;, attrs=[\u0026#34;bold\u0026#34;])) if cfg.seed is not None: set_seed(cfg.seed) # Check device is available device = get_safe_torch_device(cfg.policy.device, log=True) torch.backends.cudnn.benchmark = True torch.backends.cuda.matmul.allow_tf32 = True logging.info(\u0026#34;Creating dataset\u0026#34;) # æ­£åœ¨åˆ›å»ºæ•°æ®é›† dataset = make_dataset(cfg) # Create environment used for evaluating checkpoints during training on simulation data. # ç”¨äºåœ¨ä»¿çœŸè®­ç»ƒä¸­è¯„ä¼°æ£€æŸ¥ç‚¹ # On real-world data, no need to create an environment as evaluations are done outside train.py, # çœŸå®æ•°æ®ä¸Šè¯„ä¼°åœ¨ train.py å¤–è¿›è¡Œ # using the eval.py instead, with gym_dora environment and dora-rs. # ä½¿ç”¨ eval.py ä¸ gym_dora/dora-rs eval_env = None if cfg.eval_freq \u0026gt; 0 and cfg.env is not None: logging.info(\u0026#34;Creating env\u0026#34;) # æ­£åœ¨åˆ›å»ºç¯å¢ƒ eval_env = make_env(cfg.env, n_envs=cfg.eval.batch_size, use_async_envs=cfg.eval.use_async_envs) logging.info(\u0026#34;Creating policy\u0026#34;) # æ­£åœ¨åˆ›å»ºç­–ç•¥ policy = make_policy( cfg=cfg.policy, ds_meta=dataset.meta, ) # Create processors - only provide dataset_stats if not resuming from saved processors processor_kwargs = {} postprocessor_kwargs = {} if (cfg.policy.pretrained_path and not cfg.resume) or not cfg.policy.pretrained_path: # Only provide dataset_stats when not resuming from saved processor state processor_kwargs[\u0026#34;dataset_stats\u0026#34;] = dataset.meta.stats if cfg.policy.pretrained_path is not None: processor_kwargs[\u0026#34;preprocessor_overrides\u0026#34;] = { \u0026#34;device_processor\u0026#34;: {\u0026#34;device\u0026#34;: device.type}, \u0026#34;normalizer_processor\u0026#34;: { \u0026#34;stats\u0026#34;: dataset.meta.stats, \u0026#34;features\u0026#34;: {**policy.config.input_features, **policy.config.output_features}, \u0026#34;norm_map\u0026#34;: policy.config.normalization_mapping, }, } postprocessor_kwargs[\u0026#34;postprocessor_overrides\u0026#34;] = { \u0026#34;unnormalizer_processor\u0026#34;: { \u0026#34;stats\u0026#34;: dataset.meta.stats, \u0026#34;features\u0026#34;: policy.config.output_features, \u0026#34;norm_map\u0026#34;: policy.config.normalization_mapping, }, } preprocessor, postprocessor = make_pre_post_processors( policy_cfg=cfg.policy, pretrained_path=cfg.policy.pretrained_path, **processor_kwargs, **postprocessor_kwargs, ) logging.info(\u0026#34;Creating optimizer and scheduler\u0026#34;) # æ­£åœ¨åˆ›å»ºä¼˜åŒ–å™¨ä¸è°ƒåº¦å™¨ optimizer, lr_scheduler = make_optimizer_and_scheduler(cfg, policy) grad_scaler = GradScaler(device.type, enabled=cfg.policy.use_amp) step = 0 # number of policy updates (forward + backward + optim) if cfg.resume: step, optimizer, lr_scheduler = load_training_state(cfg.checkpoint_path, optimizer, lr_scheduler) num_learnable_params = sum(p.numel() for p in policy.parameters() if p.requires_grad) num_total_params = sum(p.numel() for p in policy.parameters()) logging.info(colored(\u0026#34;Output dir:\u0026#34;, \u0026#34;yellow\u0026#34;, attrs=[\u0026#34;bold\u0026#34;]) + f\u0026#34; {cfg.output_dir}\u0026#34;) # è¾“å‡ºç›®å½• if cfg.env is not None: logging.info(f\u0026#34;{cfg.env.task=}\u0026#34;) logging.info(f\u0026#34;{cfg.steps=} ({format_big_number(cfg.steps)})\u0026#34;) logging.info(f\u0026#34;{dataset.num_frames=} ({format_big_number(dataset.num_frames)})\u0026#34;) logging.info(f\u0026#34;{dataset.num_episodes=}\u0026#34;) logging.info(f\u0026#34;{num_learnable_params=} ({format_big_number(num_learnable_params)})\u0026#34;) logging.info(f\u0026#34;{num_total_params=} ({format_big_number(num_total_params)})\u0026#34;) # create dataloader for offline training # ä¸ºç¦»çº¿è®­ç»ƒåˆ›å»ºæ•°æ®åŠ è½½å™¨ if hasattr(cfg.policy, \u0026#34;drop_n_last_frames\u0026#34;): shuffle = False sampler = EpisodeAwareSampler( dataset.meta.episodes[\u0026#34;dataset_from_index\u0026#34;], dataset.meta.episodes[\u0026#34;dataset_to_index\u0026#34;], drop_n_last_frames=cfg.policy.drop_n_last_frames, shuffle=True, ) else: shuffle = True sampler = None dataloader = torch.utils.data.DataLoader( dataset, num_workers=cfg.num_workers, batch_size=cfg.batch_size, shuffle=shuffle and not cfg.dataset.streaming, sampler=sampler, pin_memory=device.type == \u0026#34;cuda\u0026#34;, drop_last=False, prefetch_factor=2, ) dl_iter = cycle(dataloader) policy.train() train_metrics = { \u0026#34;loss\u0026#34;: AverageMeter(\u0026#34;loss\u0026#34;, \u0026#34;:.3f\u0026#34;), \u0026#34;grad_norm\u0026#34;: AverageMeter(\u0026#34;grdn\u0026#34;, \u0026#34;:.3f\u0026#34;), \u0026#34;lr\u0026#34;: AverageMeter(\u0026#34;lr\u0026#34;, \u0026#34;:0.1e\u0026#34;), \u0026#34;update_s\u0026#34;: AverageMeter(\u0026#34;updt_s\u0026#34;, \u0026#34;:.3f\u0026#34;), \u0026#34;dataloading_s\u0026#34;: AverageMeter(\u0026#34;data_s\u0026#34;, \u0026#34;:.3f\u0026#34;), } train_tracker = MetricsTracker( cfg.batch_size, dataset.num_frames, dataset.num_episodes, train_metrics, initial_step=step ) logging.info(\u0026#34;Start offline training on a fixed dataset\u0026#34;) # å¼€å§‹åœ¨å›ºå®šæ•°æ®é›†ä¸Šè¿›è¡Œç¦»çº¿è®­ç»ƒ for _ in range(step, cfg.steps): start_time = time.perf_counter() batch = next(dl_iter) batch = preprocessor(batch) train_tracker.dataloading_s = time.perf_counter() - start_time train_tracker, output_dict = update_policy( train_tracker, policy, batch, optimizer, cfg.optimizer.grad_clip_norm, grad_scaler=grad_scaler, lr_scheduler=lr_scheduler, use_amp=cfg.policy.use_amp, ) # Note: eval and checkpoint happens *after* the `step`th training update has completed, so we # è¯„ä¼°ä¸ä¿å­˜å‘ç”Ÿåœ¨å®Œæˆè¯¥æ­¥æ›´æ–°ä¹‹å # increment `step` here. # å› æ­¤æ­¤å¤„é€’å¢ step step += 1 train_tracker.step() is_log_step = cfg.log_freq \u0026gt; 0 and step % cfg.log_freq == 0 is_saving_step = step % cfg.save_freq == 0 or step == cfg.steps is_eval_step = cfg.eval_freq \u0026gt; 0 and step % cfg.eval_freq == 0 if is_log_step: logging.info(train_tracker) if wandb_logger: wandb_log_dict = train_tracker.to_dict() if output_dict: wandb_log_dict.update(output_dict) wandb_logger.log_dict(wandb_log_dict, step) if swanlab_logger: swanlab_log_dict = train_tracker.to_dict() if output_dict: swanlab_log_dict.update(output_dict) swanlab_logger.log_dict(swanlab_log_dict, step) train_tracker.reset_averages() if cfg.save_checkpoint and is_saving_step: logging.info(f\u0026#34;Checkpoint policy after step {step}\u0026#34;) # ä¿å­˜æ£€æŸ¥ç‚¹ checkpoint_dir = get_step_checkpoint_dir(cfg.output_dir, cfg.steps, step) save_checkpoint( checkpoint_dir, step, cfg, policy, optimizer, lr_scheduler, preprocessor, postprocessor ) update_last_checkpoint(checkpoint_dir) if wandb_logger: wandb_logger.log_policy(checkpoint_dir) if swanlab_logger: swanlab_logger.log_policy(checkpoint_dir) if cfg.env and is_eval_step: step_id = get_step_identifier(step, cfg.steps) logging.info(f\u0026#34;Eval policy at step {step}\u0026#34;) # è¯„ä¼°ç­–ç•¥ with ( torch.no_grad(), torch.autocast(device_type=device.type) if cfg.policy.use_amp else nullcontext(), ): eval_info = eval_policy_all( envs=eval_env, # dict[suite][task_id] -\u0026gt; vec_env policy=policy, preprocessor=preprocessor, postprocessor=postprocessor, n_episodes=cfg.eval.n_episodes, videos_dir=cfg.output_dir / \u0026#34;eval\u0026#34; / f\u0026#34;videos_step_{step_id}\u0026#34;, max_episodes_rendered=4, start_seed=cfg.seed, max_parallel_tasks=cfg.env.max_parallel_tasks, ) # overall metrics (suite-agnostic) aggregated = eval_info[\u0026#34;overall\u0026#34;] # optional: per-suite logging for suite, suite_info in eval_info.items(): logging.info(\u0026#34;Suite %s aggregated: %s\u0026#34;, suite, suite_info) # meters/tracker eval_metrics = { \u0026#34;avg_sum_reward\u0026#34;: AverageMeter(\u0026#34;âˆ‘rwrd\u0026#34;, \u0026#34;:.3f\u0026#34;), \u0026#34;pc_success\u0026#34;: AverageMeter(\u0026#34;success\u0026#34;, \u0026#34;:.1f\u0026#34;), \u0026#34;eval_s\u0026#34;: AverageMeter(\u0026#34;eval_s\u0026#34;, \u0026#34;:.3f\u0026#34;), } eval_tracker = MetricsTracker( cfg.batch_size, dataset.num_frames, dataset.num_episodes, eval_metrics, initial_step=step ) eval_tracker.eval_s = aggregated.pop(\u0026#34;eval_s\u0026#34;) eval_tracker.avg_sum_reward = aggregated.pop(\u0026#34;avg_sum_reward\u0026#34;) eval_tracker.pc_success = aggregated.pop(\u0026#34;pc_success\u0026#34;) if wandb_logger: wandb_log_dict = {**eval_tracker.to_dict(), **eval_info} wandb_logger.log_dict(wandb_log_dict, step, mode=\u0026#34;eval\u0026#34;) wandb_logger.log_video(eval_info[\u0026#34;overall\u0026#34;][\u0026#34;video_paths\u0026#34;][0], step, mode=\u0026#34;eval\u0026#34;) if swanlab_logger: swanlab_log_dict = {**eval_tracker.to_dict(), **eval_info} swanlab_logger.log_dict(swanlab_log_dict, step, mode=\u0026#34;eval\u0026#34;) swanlab_logger.log_video(eval_info[\u0026#34;overall\u0026#34;][\u0026#34;video_paths\u0026#34;][0], step, mode=\u0026#34;eval\u0026#34;) if eval_env: close_envs(eval_env) logging.info(\u0026#34;End of training\u0026#34;) # è®­ç»ƒç»“æŸ if cfg.policy.push_to_hub: policy.push_model_to_hub(cfg) preprocessor.push_to_hub(cfg.policy.repo_id) postprocessor.push_to_hub(cfg.policy.repo_id) def main(): init_logging() train() if __name__ == \u0026#34;__main__\u0026#34;: main() å®‰è£… SwanLabï¼š pip install swanlab åœ¨å®˜ç½‘ç™»å½•åè·å¾—API Keyï¼Œè¿è¡Œ swanlab login ç™»å½• åˆ›å»ºè®­ç»ƒæ—¥å¿—æ–‡ä»¶å¤¹ï¼š mkdir -p ./logs å¼€å§‹è®­ç»ƒï¼ˆ100000 æ­¥ï¼‰ï¼š stdbuf -oL -eL nohup python -m lerobot.extra.lerobot_train_swanlab \\ --dataset.repo_id=xiadengma/so101-red-pepper \\ --dataset.root=./data/datasets/xiadengma/so101-red-pepper \\ --policy.type=act \\ --output_dir=./data/train/act_so101_red_pepper \\ --job_name=act_so101_red_pepper_$(date +%Y%m%d_%H%M%S) \\ --policy.device=cuda \\ --wandb.enable=false \\ --policy.push_to_hub=false \\ --steps=100000 \\ --tracker=swanlab \\ --swanlab.project=so101-red-pepper \\ --swanlab.mode=cloud \\ \u0026gt; ./logs/train_$(date +\u0026#34;%Y-%m-%d-%H-%M-%S\u0026#34;).log 2\u0026gt;\u0026amp;1 \u0026amp; echo $! \u0026gt; ./logs/train.pid æ¢å¤è®­ç»ƒï¼š stdbuf -oL -eL nohup lerobot-train \\ --config_path=./data/train/act_so101_red_pepper/checkpoints/last/pretrained_model/train_config.json \\ --resume=true \\ \u0026gt; ./logs/resume_$(date +\u0026#34;%Y-%m-%d-%H-%M-%S\u0026#34;).log 2\u0026gt;\u0026amp;1 \u0026amp; echo $! \u0026gt; ./logs/train.pid æŸ¥çœ‹æœ€æ–°æ—¥å¿—ï¼š tail -f $(ls -t ./logs/*.log | head -n 1) ä¸­æ–­è®­ç»ƒï¼š kill -TERM $(cat ./logs/train.pid) || kill -KILL $(cat ./logs/train.pid) è¿è¡Œæ¨æ–­å¹¶è¯„ä¼° # è¿è¡Œæ¨æ–­ python -m lerobot.extra.lerobot_record_web \\ --robot.type=so101_follower \\ --robot.port=/dev/follower_arm \\ --robot.cameras=\u0026#34;{ wrist_left: {type: opencv, index_or_path: 2, width: 640, height: 480, fps: 30}, front_rgb: {type: opencv, index_or_path: 8, width: 640, height: 480, fps: 30}}\u0026#34; \\ --robot.id=my_follower_arm \\ --robot.calibration_dir=./data/calibration \\ --display_data=false \\ --dataset.repo_id=xiadengma/eval_so101-red-pepper \\ --dataset.single_task=\u0026#34;Put the red pepper toy in the cardboard box\u0026#34; \\ --policy.path=./data/train/act_so101_red_pepper/checkpoints/last/pretrained_model \\ --policy.device=cuda \\ --dataset.root=./data/datasets/xiadengma/eval_so101-red-pepper \\ --web_port=9090 \\ --dataset.episode_time_s=30 \\ --dataset.reset_time_s=0 \\ --dataset.num_episodes=10 è¯„ä¼° å¯¹äºæ•°æ®é›†è¦æ±‚é«˜ æ³›åŒ–èƒ½åŠ›è¾ƒå·® ACTæ¨ç†æ¼”ç¤ºè§†é¢‘ï¼ˆ3ä¸ªå›åˆï¼ŒæŠ“å–çº¢è¾£æ¤’ç©å¶å¹¶æ”¾å…¥çº¸ç®±ï¼‰ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒ video æ ‡ç­¾ã€‚ 88. å‚è€ƒèµ„æ–™ # ç‚¹å‡»å±•å¼€æŸ¥çœ‹å‚è€ƒèµ„æ–™ LeRobot ä»“åº“ å®˜æ–¹-å®‰è£…æ–‡æ¡£ å®˜æ–¹-so101 æ–‡æ¡£ seeedstudio-åŸºäº LeRobot çš„ SO-ARM100 and SO-ARM101 æœºæ¢°è‡‚å…¥é—¨æ•™ç¨‹ wowrobo-æ‘„åƒå¤´è¿æ¥æ•™ç¨‹ wowrobo-LeRobot å…·èº«æ™ºèƒ½æœºæ¢°è‡‚å®æ“å…¥é—¨è¯¾ç¨‹ ","date":"2025å¹´10æœˆ7æ—¥","externalUrl":null,"permalink":"/posts/lerobot-so-101-%E6%9C%BA%E6%A2%B0%E8%87%82%E5%AE%9E%E8%B7%B5/","section":"æ–‡ç« ","summary":"","title":"LeRobot SO-101 æœºæ¢°è‡‚å®è·µ","type":"posts"},{"content":"","date":"2025å¹´10æœˆ7æ—¥","externalUrl":null,"permalink":"/tags/so-101/","section":"Tags","summary":"","title":"SO-101","type":"tags"},{"content":"","date":"2025å¹´10æœˆ7æ—¥","externalUrl":null,"permalink":"/tags/vla/","section":"Tags","summary":"","title":"VLA","type":"tags"},{"content":"","date":"2025å¹´9æœˆ19æ—¥","externalUrl":null,"permalink":"/tags/algorithm/","section":"Tags","summary":"","title":"Algorithm","type":"tags"},{"content":"","date":"2025å¹´9æœˆ19æ—¥","externalUrl":null,"permalink":"/tags/kalman-filter/","section":"Tags","summary":"","title":"Kalman Filter","type":"tags"},{"content":"","date":"2025å¹´9æœˆ19æ—¥","externalUrl":null,"permalink":"/series/%E5%B8%B8%E8%A7%81%E7%AE%97%E6%B3%95%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA/","section":"Series","summary":"","title":"å¸¸è§ç®—æ³•æ·±å…¥æµ…å‡º","type":"series"},{"content":" 0. å†™åœ¨å¼€å¤´ # ç‚¹è¿›è¿™ç¯‡åšå®¢çš„è¯»è€…åº”è¯¥éƒ½æ˜¯å¯¹å¡å°”æ›¼æ»¤æ³¢æœ‰æ‰€å…´è¶£çš„ï¼Œæˆ–è€…åœ¨å·¥ä½œä¸­é‡åˆ°å¡å°”æ›¼æ»¤æ³¢çš„é—®é¢˜ï¼Œè¿™é‡Œæˆ‘å°±ä¸ä»‹ç»å¡å°”æ›¼æ»¤æ³¢çš„èƒŒæ™¯äº†ï¼Œç›´æ¥ä»‹ç»æœ€åŸºç¡€çš„å¡å°”æ›¼æ»¤æ³¢ï¼ˆKFï¼‰ã€‚\n%%{init: {'theme':'base', 'themeVariables': { 'edgeLabelBackground':'#ffffff', 'lineColor':'#d0d0d0'}}}%% graph TB A[\"å¡å°”æ›¼æ»¤æ³¢å®¶æ—------è´å¶æ–¯é€’æ¨æ¡†æ¶é¢„æµ‹ â†’ æ›´æ–°\"] A -.-\u003e B[\"çº¿æ€§é«˜æ–¯ç³»ç»Ÿ\"] A -.-\u003e C[\"éçº¿æ€§é«˜æ–¯ç³»ç»Ÿ\"] A -.-\u003e D[\"é›†åˆæ–¹æ³•\"] A -.-\u003e E[\"éé«˜æ–¯/ä»»æ„åˆ†å¸ƒ\"] A -.-\u003e F[\"å¤šæ¨¡å‹æ–¹æ³•\"] A -.-\u003e G[\"è‡ªé€‚åº”ä¸é²æ£’æ–¹æ³•\"] B -.-\u003e B1[\"KFæ ‡å‡†å¡å°”æ›¼æ»¤æ³¢\"] B -.-\u003e B2[\"IFä¿¡æ¯æ»¤æ³¢\"] B -.-\u003e B3[\"RTSå›ºå®šé—´éš”å¹³æ»‘å™¨\"] C -.-\u003e C1[\"è¿‘ä¼¼çº¿æ€§åŒ–\"] C -.-\u003e C2[\"æ— è¿¹å˜æ¢\"] C -.-\u003e C3[\"æ•°å€¼ç¨³å®š\"] C1 -.-\u003e C11[\"EKFæ‰©å±•å¡å°”æ›¼ä¸€é˜¶çº¿æ€§åŒ–\"] C1 -.-\u003e C12[\"IEKFè¿­ä»£æ‰©å±•å¡å°”æ›¼\"] C2 -.-\u003e C21[\"UKFæ— è¿¹å¡å°”æ›¼Sigmaç‚¹\"] C2 -.-\u003e C22[\"CKFCubatureå¡å°”æ›¼çƒç§¯è§„åˆ™\"] C3 -.-\u003e C31[\"SR-KFå¹³æ–¹æ ¹å¡å°”æ›¼\"] C3 -.-\u003e C32[\"SR-UKFå¹³æ–¹æ ¹æ— è¿¹å¡å°”æ›¼\"] D -.-\u003e D1[\"EnKFé›†åˆå¡å°”æ›¼æ ·æœ¬åæ–¹å·®\"] D -.-\u003e D2[\"EnKSé›†åˆå¹³æ»‘å™¨\"] D1 -.-\u003e D11[\"éšæœºEnKF\"] D1 -.-\u003e D12[\"ç¡®å®šæ€§EnKF\"] E -.-\u003e E1[\"PFç²’å­æ»¤æ³¢SIS/SIR\"] E -.-\u003e E2[\"RBPFè¾¹ç¼˜åŒ–ç²’å­æ»¤æ³¢\"] E2 -.-\u003e E21[\"çº¿æ€§éƒ¨åˆ†: KF\"] E2 -.-\u003e E22[\"éçº¿æ€§éƒ¨åˆ†: ç²’å­\"] F -.-\u003e F1[\"IMMäº¤äº’å¤šæ¨¡å‹\"] F1 -.-\u003e F11[\"IMM-KF\"] F1 -.-\u003e F12[\"IMM-EKF\"] F1 -.-\u003e F13[\"IMM-UKF\"] G -.-\u003e G1[\"AKFè‡ªé€‚åº”å¡å°”æ›¼åœ¨çº¿ä¼°å‚\"] G -.-\u003e G2[\"Hâˆæ»¤æ³¢æœ€åæƒ…å†µç•Œ\"] G -.-\u003e G3[\"é²æ£’KFM-estimator\"] classDef level0 fill:#4A90E2,stroke:#2E5C8A,stroke-width:2.5px,color:#fff,font-weight:bold classDef level1 fill:#7CB9E8,stroke:#5A8FC7,stroke-width:2px,color:#000 classDef level2 fill:#B3D9F2,stroke:#8AB8E0,stroke-width:1.5px,color:#000 classDef level3 fill:#E6F2FA,stroke:#B8D9EE,stroke-width:1px,color:#333 class A level0 class B,C,D,E,F,G level1 class B1,B2,B3,C1,C2,C3,D1,D2,E1,E2,F1,G1,G2,G3 level2 class C11,C12,C21,C22,C31,C32,D11,D12,E21,E22,F11,F12,F13 level3 å¡å°”æ›¼æ»¤æ³¢ï¼Œç”¨ç›´ç™½çš„è¯æ¥è®²ï¼Œå°±æ˜¯ï¼šå¤šä¸ªä¸ç¡®å®šçš„ç»“æœï¼Œç»è¿‡åˆ†æã€æ¨ç†å’Œè®¡ç®—ï¼Œè·å¾—ç›¸å¯¹å‡†ç¡®çš„ç»“æœã€‚\nå¤šä¸ªæ˜¯æŒ‡æ•°æ®æ¥æºå¯ä»¥æ˜¯æ¨¡å‹æ¨ç†å¾—å‡ºï¼Œä¹Ÿå¯ä»¥æ˜¯é€šè¿‡ä»ªå™¨æµ‹é‡è·å¾—ã€‚ ä¸ç¡®å®šæ˜¯æŒ‡ç”±äºæ¨¡å‹æœ¬èº«æ˜¯ä¸€ç§è¿‘ä¼¼ï¼Œæˆ–è€…æ˜¯æµ‹é‡ä»ªå™¨æœ¬èº«çš„ç²¾åº¦è¯¯å·®ï¼Œæˆ–è€…æµ‹é‡è¿‡ç¨‹ä¸å¯é¿å…åœ°å¼•å…¥äº†å™ªå£°ï¼Œç”šè‡³å› ä¸ºæ‰€éœ€è¦çš„ç‰¹å¾æ— æ³•ç›´æ¥è·å–ï¼Œåªèƒ½é—´æ¥æ¨å¯¼è·å¾—ã€‚ åˆ†æã€æ¨ç†å’Œè®¡ç®—ï¼Œåˆ™æŒ‡çš„æ˜¯å¡å°”æ›¼æ»¤æ³¢ç®—æ³•ï¼Œä¹Ÿæ˜¯æœ¬æ–‡æ¥ä¸‹æ¥å°†ä¼šé‡ç‚¹é˜è¿°çš„éƒ¨åˆ†ã€‚ ç›¸å¯¹å‡†ç¡®ï¼ŒæŒ‡çš„æ˜¯ç»è¿‡å¡å°”æ›¼æ»¤æ³¢ç®—æ³•è·å¾—çš„ç»“æœï¼Œæ¯”åŸæœ‰çš„å¤šä¸ªä¸ç¡®å®šçš„ç»“æœæ›´é€¼è¿‘å®¢è§‚çœŸå®å€¼ï¼Œä½†ä¾ç„¶å­˜åœ¨è¯¯å·®ã€‚ åŸç† # æ•°å­¦åŸºç¡€ä¸ç¬¦å·çº¦å®š # ä¸‹é¢çš„å†…å®¹ä¸éœ€è¦åœ¨äº‹å‰ç†è§£ï¼Œåªéœ€è¦åœ¨é‡åˆ°æ–°å†…å®¹çš„æ—¶å€™æŸ¥è¯¢å³å¯ã€‚\nåŠ ç²—çš„å°å†™å­—æ¯è¡¨ç¤ºå‘é‡ï¼ˆé€šå¸¸ä¸ºåˆ—å‘é‡ï¼‰ï¼Œå¦‚ $\\mathbf{x}_{k}$ã€$\\mathbf{u}_{k}$ã€‚ åŠ ç²—çš„å¤§å†™å­—æ¯è¡¨ç¤ºçŸ©é˜µï¼Œå¦‚ $\\mathbf{F}$ã€$\\mathbf{B}$ã€$\\mathbf{H}$ã€$\\mathbf{Q}$ã€$\\mathbf{R}$ã€‚ å¤´é¡¶ä¸º^çš„å­—æ¯è¡¨ç¤ºä¼°è®¡å€¼ï¼ˆåéªŒä¼°è®¡ï¼‰ï¼Œå¦‚ $\\hat{\\mathbf{x}}_{k}$ã€‚ å³ä¸Šè§’ä¸º-çš„å­—æ¯è¡¨ç¤ºé¢„æµ‹å€¼ï¼ˆå…ˆéªŒä¼°è®¡ï¼‰ï¼Œå¦‚ $\\mathbf{x}_{k}^{-}$ã€‚ æœŸæœ›ï¼ˆè¡¨ç¤ºæ•°æ®åˆ†å¸ƒçš„ä¸­å¿ƒä½ç½®ï¼‰ï¼šå¯¹äºç¦»æ•£éšæœºå‘é‡ $\\mathbf{X}$ï¼Œå…¶æœŸæœ›ä¸º $E[\\mathbf{X}] = \\sum_{i=1}^{n} \\mathbf{X}_{i} P(\\mathbf{X}_{i})$ï¼ˆè¿ç»­æƒ…å½¢ä¸ºç§¯åˆ†å½¢å¼ï¼‰ã€‚ åæ–¹å·®çŸ©é˜µï¼ˆè¡¨ç¤ºæ•°æ®åˆ†å¸ƒçš„ä¸ç¡®å®šæ€§å’Œå½¢çŠ¶ï¼Œåœ¨å¡å°”æ›¼æ»¤æ³¢ä¸­åº¦é‡åéªŒä¼°è®¡å€¼çš„ç²¾ç¡®ç¨‹åº¦ï¼‰ï¼šå¯¹äºéšæœºå‘é‡ $\\mathbf{X}$ï¼Œå…¶åæ–¹å·®çŸ©é˜µä¸º $Cov(\\mathbf{X}) = E[(\\mathbf{X} - E[\\mathbf{X}])(\\mathbf{X} - E[\\mathbf{X}])^{T}]$ã€‚ å…ˆéªŒï¼šæŒ‡åœ¨è·å¾—æ–°è¯æ®ä¹‹å‰ï¼Œå¯¹æœªçŸ¥äº‹ä»¶çš„é¢„å…ˆåˆ¤æ–­ã€ä¿¡å¿µæˆ–æ¦‚ç‡ã€‚ åéªŒï¼šæŒ‡åœ¨è·å¾—æ–°è¯æ®ä¹‹åï¼Œå°†æ–°è¯æ®ä¸å…ˆéªŒåˆ¤æ–­ç»“åˆï¼Œå¾—å‡ºçš„æ›´æ–°åçš„åˆ¤æ–­ã€ä¿¡å¿µæˆ–æ¦‚ç‡ã€‚ è½¬ç½®ï¼šå¯¹äºçŸ©é˜µ $\\mathbf{A}$ï¼Œå…¶è½¬ç½®ä¸º $\\mathbf{A}^{T}$ã€‚ å•ä½çŸ©é˜µï¼š$\\mathbf{I}$ï¼Œæ˜¯æ–¹é˜µï¼Œä¸”å¯¹è§’çº¿ä¸Šçš„å…ƒç´ ä¸º 1ï¼Œå…¶ä½™å…ƒç´ ä¸º 0ã€‚ è¿¹ï¼šå¯¹äºçŸ©é˜µ $\\mathbf{A}$ï¼Œå…¶è¿¹ä¸º $tr(\\mathbf{A}) = \\sum_{i=1}^{n} \\mathbf{A}_{ii}$ã€‚ é€†ï¼šå¯¹äºæ–¹é˜µ $\\mathbf{A}$ï¼Œå…¶é€†çŸ©é˜µè®°ä¸º $\\mathbf{A}^{-1}$ï¼Œæ»¡è¶³ $\\mathbf{A}\\mathbf{A}^{-1} = \\mathbf{A}^{-1}\\mathbf{A} = \\mathbf{I}$ã€‚ åŸºæœ¬æ¨¡å‹ # ï¼ˆçº¿æ€§ï¼‰å¡å°”æ›¼æ»¤æ³¢çš„åº”ç”¨åŸºäºä»¥ä¸‹ä¸‰ä¸ªå‡è®¾å‰æï¼š\né©¬å°”å¯å¤«æ€§ï¼šå½“å‰æ—¶åˆ»çŠ¶æ€åªå’Œä¸Šä¸€æ—¶åˆ»çŠ¶æ€æœ‰å…³ã€‚ çº¿æ€§æ¨¡å‹ï¼šç³»ç»Ÿçš„çŠ¶æ€è½¬ç§»å’Œè§‚æµ‹è¿‡ç¨‹å‡æ»¡è¶³çº¿æ€§å…³ç³»ã€‚ é«˜æ–¯å™ªå£°ï¼šè¿‡ç¨‹å™ªå£°å’Œæµ‹é‡å™ªå£°éƒ½ç¬¦åˆé«˜æ–¯åˆ†å¸ƒã€‚ åŸºäºä¸Šè¿°å‡è®¾ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚ä¸‹ä¸¤ä¸ªå…¬å¼ï¼š\n$$ è¿‡ç¨‹æ¨¡å‹ï¼š \\mathbf{x}_{k} = \\mathbf{F}_{k} \\mathbf{x}_{k-1} + \\mathbf{B}_{k} \\mathbf{u}_{k} + \\mathbf{w}_{k-1} \\quad\\quad â‘  $$$$ è§‚æµ‹æ¨¡å‹ï¼š \\mathbf{z}_{k} = \\mathbf{H}_{k} \\mathbf{x}_{k} + \\mathbf{v}_{k} \\quad\\quad â‘¡ $$å…¶ä¸­ï¼š\n$\\mathbf{x}_{k}$ è¡¨ç¤º $k$ æ—¶åˆ»çš„çœŸå®çŠ¶æ€å€¼ï¼Œæ˜¯å¾…ä¼°è®¡çš„æœªçŸ¥é‡ï¼› $\\mathbf{x}_{k-1}$ è¡¨ç¤º $k-1$ æ—¶åˆ»çš„çœŸå®çŠ¶æ€å€¼ï¼› $\\mathbf{u}_{k}$ è¡¨ç¤º $k$ æ—¶åˆ»çš„æ§åˆ¶è¾“å…¥é‡ï¼ˆä½œç”¨äºåŒºé—´ $(k-1, k]$ï¼‰ï¼Œæè¿°åœ¨ $k-1$ æ—¶åˆ»è‡³ $k$ æ—¶åˆ»è¿™æ®µæ—¶é—´é‡Œç”Ÿæ•ˆçš„è¾“å…¥ï¼› $\\mathbf{w}_{k-1}$ è¡¨ç¤ºè¿‡ç¨‹å™ªå£°ï¼Œå…¶å‡å€¼ä¸º $0$ï¼Œåæ–¹å·®çŸ©é˜µä¸º $\\mathbf{Q}_{k-1}$ï¼Œå³ $\\mathbf{w}_{k-1} \\sim N(0, \\mathbf{Q}_{k-1})$ï¼› $\\mathbf{z}_{k}$ è¡¨ç¤º $k$ æ—¶åˆ»çš„è§‚æµ‹å€¼ï¼Œæ˜¯å·²çŸ¥çš„æµ‹é‡é‡ï¼› $\\mathbf{v}_{k}$ è¡¨ç¤ºè§‚æµ‹å™ªå£°ï¼Œå…¶å‡å€¼ä¸º $0$ï¼Œåæ–¹å·®çŸ©é˜µä¸º $\\mathbf{R}_{k}$ï¼Œå³ $\\mathbf{v}_{k} \\sim N(0, \\mathbf{R}_{k})$ï¼› $\\mathbf{F}_{k}$ è¡¨ç¤ºçŠ¶æ€è½¬ç§»çŸ©é˜µï¼Œæè¿°çŠ¶æ€å¦‚ä½•ä» $k-1$ æ—¶åˆ»æ¼”åŒ–åˆ° $k$ æ—¶åˆ»ï¼› $\\mathbf{B}_{k}$ è¡¨ç¤ºæ§åˆ¶çŸ©é˜µï¼Œæè¿°åŒºé—´ $(k-1, k]$ å†…ç”Ÿæ•ˆçš„æ§åˆ¶è¾“å…¥ $\\mathbf{u}_{k}$ å¦‚ä½•å½±å“ $k$ æ—¶åˆ»çš„çŠ¶æ€ï¼› $\\mathbf{H}_{k}$ è¡¨ç¤ºè§‚æµ‹çŸ©é˜µï¼Œæè¿°ç³»ç»Ÿçš„ $k$ æ—¶åˆ»çœŸå®çŠ¶æ€ $\\mathbf{x}_{k}$ ä¸æˆ‘ä»¬å¾—åˆ°çš„æµ‹é‡å€¼ $\\mathbf{z}_{k}$ ä¹‹é—´çš„å…³ç³»ï¼› ç„¶è€Œç°å®ä¸­ï¼Œæˆ‘ä»¬æ— æ³•å¾—åˆ°çœŸå®çš„å™ªå£° $\\mathbf{w}_{k-1}$ å’Œ $\\mathbf{v}_{k}$ ï¼Œå› æ­¤å³ä¾¿æˆ‘ä»¬å»ºç«‹äº†ç²¾ç¡®çš„æ¨¡å‹ï¼Œä¹Ÿæ— æ³•å¾—åˆ°å‡†ç¡®çš„çœŸå®çŠ¶æ€å€¼ $\\mathbf{x}_{k}$ã€‚æ‰€ä»¥æˆ‘ä»¬å¸Œæœ›æ‰¾åˆ°ä¸€ä¸ªæœ€ä¼˜ä¼°è®¡å€¼ $\\hat{\\mathbf{x}}_{k}$ æ¥å°½å¯èƒ½åœ°é€¼è¿‘ $\\mathbf{x}_{k}$ï¼Œä½¿å¾—ä¼°è®¡è¯¯å·®æœ€å°ã€‚\né¢„æµ‹æ­¥éª¤ï¼šæ¨å¯¼å…ˆéªŒä¼°è®¡å€¼ # æ ¹æ®è¿‡ç¨‹æ¨¡å‹ â‘  $\\mathbf{x}_{k} = \\mathbf{F}_{k} \\mathbf{x}_{k-1} + \\mathbf{B}_{k} \\mathbf{u}_{k} + \\mathbf{w}_{k-1}$ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ $k$ æ—¶åˆ»çš„çŠ¶æ€è¿›è¡Œé¢„æµ‹ã€‚\nç”±äºæˆ‘ä»¬æ— æ³•å¾—çŸ¥ä¸Šä¸€æ—¶åˆ»çš„çœŸå®çŠ¶æ€ $\\mathbf{x}_{k-1}$ å’Œå½“å‰çš„è¿‡ç¨‹å™ªå£° $\\mathbf{w}_{k-1}$ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨ä¸Šä¸€æ—¶åˆ»çš„æœ€ä¼˜ä¼°è®¡å€¼ $\\hat{\\mathbf{x}}_{k-1}$ æ¥ä»£æ›¿ $\\mathbf{x}_{k-1}$ã€‚åŒæ—¶ï¼Œç”±äºè¿‡ç¨‹å™ªå£° $\\mathbf{w}_{k-1}$ çš„æœŸæœ›ä¸ºé›¶ï¼Œåœ¨é¢„æµ‹æ—¶æˆ‘ä»¬å–å…¶æœŸæœ›å€¼ï¼Œå³ $E[\\mathbf{w}_{k-1}]=0$ã€‚\nç”±æ­¤ï¼Œæˆ‘ä»¬å¾—åˆ° $k$ æ—¶åˆ»çŠ¶æ€çš„å…ˆéªŒä¼°è®¡å€¼ï¼ˆé¢„æµ‹å€¼ï¼‰ $\\mathbf{x}_{k}^{-}$ çš„è®¡ç®—å…¬å¼ï¼š\n$$ \\mathbf{x}_{k}^{-} = \\mathbf{F}_{k} \\hat{\\mathbf{x}}_{k-1} + \\mathbf{B}_{k} \\mathbf{u}_{k} $$å…¶ä¸­ï¼š\n$\\mathbf{x}_{k}^{-}$ è¡¨ç¤º $k$ æ—¶åˆ»çŠ¶æ€çš„é¢„æµ‹å€¼ï¼Œä¹Ÿå«å…ˆéªŒä¼°è®¡å€¼ï¼ˆå› ä¸ºå®ƒæ˜¯åœ¨è·å¾— $k$ æ—¶åˆ»æµ‹é‡å€¼ä¹‹å‰è®¡ç®—çš„ï¼‰ï¼› $\\hat{\\mathbf{x}}_{k-1}$ è¡¨ç¤º $k-1$ æ—¶åˆ»çš„æœ€ä¼˜ä¼°è®¡å€¼ï¼ˆåéªŒä¼°è®¡å€¼ï¼‰ï¼› $\\mathbf{u}_{k}$ è¡¨ç¤º $k$ æ—¶åˆ»çš„æ§åˆ¶è¾“å…¥é‡ï¼ˆä½œç”¨äºåŒºé—´ $(k-1, k]$ï¼‰ï¼› $\\mathbf{F}_{k}$ è¡¨ç¤ºçŠ¶æ€è½¬ç§»çŸ©é˜µï¼Œæè¿°çœŸå®çŠ¶æ€ $\\mathbf{x}$ å¦‚ä½•ä» $k-1$ æ—¶åˆ»æ¼”åŒ–åˆ° $k$ æ—¶åˆ»ï¼› $\\mathbf{B}_{k}$ è¡¨ç¤ºæ§åˆ¶çŸ©é˜µï¼Œæè¿°åœ¨åŒºé—´ $(k-1, k]$ ç”Ÿæ•ˆçš„æ§åˆ¶è¾“å…¥ $\\mathbf{u}_{k}$ å¦‚ä½•å½±å“ $k$ æ—¶åˆ»çš„çŠ¶æ€ $\\mathbf{x}$ï¼› è¿™ä¸ªé¢„æµ‹å€¼ $\\mathbf{x}_{k}^{-}$ ä»…ä»…åŸºäºç³»ç»Ÿçš„åŠ¨æ€æ¨¡å‹å’Œä¸Šä¸€æ—¶åˆ»çš„çŠ¶æ€ä¼°è®¡ï¼Œå®ƒæ²¡æœ‰åŒ…å«å½“å‰ $k$ æ—¶åˆ»çš„ä»»ä½•æµ‹é‡ä¿¡æ¯ã€‚å› æ­¤ï¼Œå®ƒæ˜¯ä¸€ä¸ªæœ‰å¾…ä¿®æ­£çš„åˆæ­¥ä¼°è®¡ã€‚ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†åˆ©ç”¨ $k$ æ—¶åˆ»çš„æµ‹é‡å€¼ $\\mathbf{z}_{k}$ æ¥ä¿®æ­£è¿™ä¸ªé¢„æµ‹å€¼ï¼Œä»¥è·å¾—æ›´ç²¾ç¡®çš„åéªŒä¼°è®¡å€¼ $\\hat{\\mathbf{x}}_{k}$ã€‚\næ›´æ–°æ­¥éª¤ï¼šèåˆæµ‹é‡å€¼ä¿®æ­£é¢„æµ‹ # åœ¨é¢„æµ‹æ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ª $k$ æ—¶åˆ»çš„å…ˆéªŒé¢„æµ‹å€¼ $\\mathbf{x}_{k}^{-}$ã€‚è¿™ä¸ªå€¼ä»…åŸºäºç³»ç»Ÿæ¨¡å‹å’Œä¸Šä¸€æ—¶åˆ»çš„çŠ¶æ€ï¼Œå°šæœªåˆ©ç”¨ $k$ æ—¶åˆ»çš„æµ‹é‡æ•°æ®ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬çš„ä»»åŠ¡æ˜¯åˆ©ç”¨ $k$ æ—¶åˆ»çš„å®é™…æµ‹é‡å€¼ $\\mathbf{z}_{k}$ æ¥ä¿®æ­£è¿™ä¸ªé¢„æµ‹ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªæ›´å‡†ç¡®çš„åéªŒä¼°è®¡å€¼ $\\hat{\\mathbf{x}}_{k}$ã€‚\nä¿®æ­£çš„æ ¸å¿ƒæ€è·¯æ˜¯æ¯”è¾ƒâ€œå®é™…æµ‹é‡â€ä¸â€œé¢„æµ‹çš„æµ‹é‡â€ä¹‹é—´çš„å·®è·ã€‚\n$k$ æ—¶åˆ»çš„å®é™…æµ‹é‡å€¼ï¼š$\\mathbf{z}_{k}$ $k$ æ—¶åˆ»çš„é¢„æµ‹æµ‹é‡å€¼ï¼š$\\mathbf{H}_{k}\\mathbf{x}_{k}^{-}$ï¼ˆè¿™æ˜¯å°†çŠ¶æ€é¢„æµ‹å€¼ $\\mathbf{x}_{k}^{-}$ é€šè¿‡è§‚æµ‹æ¨¡å‹ $\\mathbf{H}_{k}$ æ˜ å°„åˆ°æµ‹é‡ç©ºé—´å¾—åˆ°çš„å€¼ï¼‰ $k$ æ—¶åˆ»çš„å®é™…æµ‹é‡å€¼ $\\mathbf{z}_{k}$ ä¸ $k$ æ—¶åˆ»çš„é¢„æµ‹æµ‹é‡å€¼ $\\mathbf{H}_{k}\\mathbf{x}_{k}^{-}$ ä¹‹å·®ï¼Œè¢«ç§°ä¸ºæµ‹é‡æ®‹å·®ï¼ˆInnovationï¼‰ $Y_{k}$ï¼š\n$$ Y_{k} = \\mathbf{z}_{k} - \\mathbf{H}_{k}\\mathbf{x}_{k}^{-} $$è¿™ä¸ªæµ‹é‡æ®‹å·® $Y_{k}$ åæ˜ äº†æˆ‘ä»¬çš„é¢„æµ‹ä¸ç°å®çš„å·®è·ã€‚å¦‚æœæ®‹å·®å¾ˆå°ï¼Œè¯´æ˜é¢„æµ‹å‡†ç¡®ï¼›å¦‚æœæ®‹å·®å¾ˆå¤§ï¼Œåˆ™è¯´æ˜é¢„æµ‹å­˜åœ¨è¾ƒå¤§åå·®ï¼Œéœ€è¦è¿›è¡Œæ˜¾è‘—ä¿®æ­£ã€‚\nå¡å°”æ›¼æ»¤æ³¢é€šè¿‡ä¸€ä¸ªæ ¸å¿ƒçš„çŠ¶æ€æ›´æ–°æ–¹ç¨‹æ¥å®Œæˆä¿®æ­£ï¼Œè¯¥æ–¹ç¨‹å°†æœ€ç»ˆçš„åéªŒä¼°è®¡å€¼è¡¨ç¤ºä¸ºå…ˆéªŒé¢„æµ‹å€¼ä¸åŠ æƒåçš„æµ‹é‡æ®‹å·®ä¹‹å’Œï¼š\n$$ çŠ¶æ€æ›´æ–°æ–¹ç¨‹ï¼š \\hat{\\mathbf{x}}_{k} = \\mathbf{x}_{k}^{-} + \\mathbf{K}_{k}(\\mathbf{z}_{k} - \\mathbf{H}_{k}\\mathbf{x}_{k}^{-}) \\quad\\quad â‘¢ $$å…¶ä¸­ï¼š\n$\\hat{\\mathbf{x}}_{k}$ æ˜¯ $k$ æ—¶åˆ»çš„æœ€ä¼˜ä¼°è®¡å€¼ï¼ˆæˆ–ç§°åéªŒä¼°è®¡å€¼ï¼‰ï¼Œå› ä¸ºå®ƒèåˆäº† $k$ æ—¶åˆ»çš„æµ‹é‡ä¿¡æ¯ã€‚ $\\mathbf{K}_{k}$ æ˜¯å¡å°”æ›¼å¢ç›Šã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯ä¸€ä¸ªæƒé‡çŸ©é˜µï¼Œç”¨äºæƒè¡¡æˆ‘ä»¬åº”è¯¥åœ¨å¤šå¤§ç¨‹åº¦ä¸Šç›¸ä¿¡â€œé¢„æµ‹å€¼â€å’Œâ€œæµ‹é‡å€¼â€ã€‚ å¦‚æœæµ‹é‡å™ªå£°å¾ˆå¤§ï¼ˆå³æˆ‘ä»¬ä¸ä¿¡ä»»æµ‹é‡å€¼ï¼‰ï¼Œ$\\mathbf{K}_{k}$ çš„å€¼ä¼šå˜å°ï¼Œæˆ‘ä»¬å°±æ›´å€¾å‘äºç›¸ä¿¡é¢„æµ‹å€¼ $\\mathbf{x}_{k}^{-}$ã€‚ å¦‚æœé¢„æµ‹æœ¬èº«å¾ˆä¸ç¡®å®šï¼ˆå³æˆ‘ä»¬ä¸ä¿¡ä»»é¢„æµ‹å€¼ï¼‰ï¼Œ$\\mathbf{K}_{k}$ çš„å€¼ä¼šå˜å¤§ï¼Œæˆ‘ä»¬å°±æ›´å€¾å‘äºåˆ©ç”¨æµ‹é‡ä¿¡æ¯è¿›è¡Œå¤§å¹…ä¿®æ­£ã€‚ è‡³æ­¤ï¼ŒçŠ¶æ€æ›´æ–°çš„é€»è¾‘å·²ç»å»ºç«‹ã€‚å³ä» $k-1$ æ—¶åˆ»çš„åéªŒä¼°è®¡å€¼ $\\hat{\\mathbf{x}}_{k-1}$ ç»è¿‡ $k$ æ—¶åˆ»çŠ¶æ€çš„å…ˆéªŒä¼°è®¡å€¼ï¼ˆé¢„æµ‹å€¼ï¼‰ $\\mathbf{x}_{k}^{-}$ åˆ° $k$ æ—¶åˆ»çš„æœ€ä¼˜ä¼°è®¡å€¼ $\\hat{\\mathbf{x}}_{k}$ çš„æ›´æ–°è¿‡ç¨‹å·²ç»å®Œæˆã€‚\nä½†å¡å°”æ›¼å¢ç›Š $\\mathbf{K}_{k}$ è¿˜æ˜¯æœªçŸ¥çš„ï¼Œåç»­çš„æ¨å¯¼å°†è‡´åŠ›äºå¦‚ä½•è®¡ç®—è¿™ä¸ªä½¿ä¼°è®¡è¯¯å·®æœ€å°çš„æœ€ä¼˜å¡å°”æ›¼å¢ç›Š $\\mathbf{K}_{k}$ã€‚\nç›®æ ‡å‡½æ•°çš„å»ºç«‹ä¸è½¬åŒ– # å°†ä¸Šè¿°æ€è·¯è½¬åŒ–ä¸ºæ•°å­¦è¯­è¨€ï¼Œæˆ‘ä»¬é¦–å…ˆå®šä¹‰åéªŒä¼°è®¡è¯¯å·® $\\mathbf{e}_{k} = \\mathbf{x}_{k} - \\hat{\\mathbf{x}}_{k}$ï¼Œå³ $k$ æ—¶åˆ»çœŸå®çŠ¶æ€å€¼ä¸åéªŒä¼°è®¡å€¼çš„å·®ã€‚å¡å°”æ›¼æ»¤æ³¢çš„ç›®æ ‡æ˜¯å¯»æ‰¾ä¸€ä¸ªæœ€ä¼˜çš„å¢ç›ŠçŸ©é˜µ $\\mathbf{K}_k$ æ¥æœ€å°åŒ–è¯¥è¯¯å·®çš„å‡æ–¹å€¼ $E[||\\mathbf{e}_k||^2]$ã€‚\nè¿™ä¸ªå‡æ–¹è¯¯å·®å¯ä»¥é€šè¿‡åéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µ $\\mathbf{P}_{k}$ çš„è¿¹æ¥è¡¨ç¤ºï¼Œå…¶ä¸­ $\\mathbf{P}_{k}$ å®šä¹‰ä¸ºï¼š\n$$ \\mathbf{P}_{k} = E[\\mathbf{e}_{k}\\mathbf{e}_{k}^{T}] $$å®ƒä»¬ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹ï¼š\n$$ E[||\\mathbf{e}_k||^2] = E[\\mathbf{e}_k^T \\mathbf{e}_k] = \\text{tr}(E[\\mathbf{e}_k \\mathbf{e}_k^T]) = \\text{tr}(\\mathbf{P}_k) $$å› æ­¤ï¼Œä¼˜åŒ–ç›®æ ‡å‡½æ•°å¯ä»¥æ˜ç¡®åœ°è¡¨ç¤ºä¸ºï¼š\n$$ \\min_{\\mathbf{K}_k}{\\text{tr}(\\mathbf{P}_{k})} $$ä¸ºäº†æ±‚è§£è¿™ä¸ªæœ€å°åŒ–é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æ¨å¯¼å‡º $\\mathbf{P}_{k}$ å…³äº $\\mathbf{K}_{k}$ çš„å…·ä½“è¡¨è¾¾å¼ã€‚è¿™éœ€è¦æˆ‘ä»¬å…ˆä» $\\mathbf{e}_{k}$ çš„è¡¨è¾¾å¼å…¥æ‰‹ã€‚æ ¹æ®çŠ¶æ€æ›´æ–°æ–¹ç¨‹ â‘¢ $\\hat{\\mathbf{x}}_{k} = \\mathbf{x}_{k}^{-} + \\mathbf{K}_{k}(\\mathbf{z}_{k} - \\mathbf{H}_{k}\\mathbf{x}_{k}^{-})$ å’Œè§‚æµ‹æ¨¡å‹ â‘¡ $\\mathbf{z}_{k} = \\mathbf{H}_{k} \\mathbf{x}_{k} + \\mathbf{v}_{k}$ï¼Œæˆ‘ä»¬æœ‰ï¼š\n$$ \\begin{aligned} \\mathbf{e}_{k} \u0026= \\mathbf{x}_{k} - \\hat{\\mathbf{x}}_{k} \\\\ \u0026= \\mathbf{x}_{k} - \\left( \\mathbf{x}_{k}^{-} + \\mathbf{K}_{k}(\\mathbf{z}_{k} - \\mathbf{H}_{k}\\mathbf{x}_{k}^{-}) \\right) \\\\ \u0026= (\\mathbf{x}_{k} - \\mathbf{x}_{k}^{-}) - \\mathbf{K}_{k}(\\mathbf{H}_{k}\\mathbf{x}_{k} + \\mathbf{v}_{k}-\\mathbf{H}_{k}\\mathbf{x}_{k}^{-} ) \\\\ \u0026= (\\mathbf{x}_{k} - \\mathbf{x}_{k}^{-}) - \\mathbf{K}_{k}\\mathbf{H}_{k}(\\mathbf{x}_{k} - \\mathbf{x}_{k}^{-}) - \\mathbf{K}_{k}\\mathbf{v}_{k} \\\\ \u0026= (\\mathbf{I} - \\mathbf{K}_{k}\\mathbf{H}_{k})(\\mathbf{x}_{k} - \\mathbf{x}_{k}^{-} ) - \\mathbf{K}_{k}\\mathbf{v}_{k} \\end{aligned} $$ä¸ºç®€åŒ–è¡¨ç¤ºï¼Œæˆ‘ä»¬å¼•å…¥å…ˆéªŒä¼°è®¡è¯¯å·® $\\mathbf{e}_{k}^{-} = \\mathbf{x}_{k} - \\mathbf{x}_{k}^{-}$ï¼ˆ$k$ æ—¶åˆ»çœŸå®çŠ¶æ€å€¼ä¸å…ˆéªŒä¼°è®¡å€¼çš„å·®ï¼‰ï¼Œåˆ™ä¸Šå¼å˜ä¸ºï¼š\n$$ \\mathbf{e}_{k} = (\\mathbf{I} - \\mathbf{K}_{k}\\mathbf{H}_{k})\\mathbf{e}_{k}^{-} - \\mathbf{K}_{k}\\mathbf{v}_{k} \\quad\\quad â‘£ $$ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å…¬å¼ â‘£ æ¥è®¡ç®—åéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µ $\\mathbf{P}_{k}$ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç”¨åˆ°å…ˆéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µ $\\mathbf{P}_{k}^{-}$ï¼Œå…¶å®šä¹‰ä¸ºï¼š\n$$ \\mathbf{P}_{k}^{-} = E[\\mathbf{e}_{k}^{-}\\mathbf{e}_{k}^{-T}] $$æ ¹æ®åæ–¹å·®çŸ©é˜µçš„å®šä¹‰ï¼Œ$\\mathbf{P}_{k}$ å’Œ $\\mathbf{P}_{k}^{-}$ éƒ½æ˜¯å¯¹ç§°çŸ©é˜µã€‚å¯¹å…¬å¼ â‘£ ä¸¤è¾¹ä¹˜ä»¥å…¶è‡ªèº«çš„è½¬ç½®ï¼Œå¹¶å–æœŸæœ›ï¼Œå¯å¾—ï¼š\n$$ \\begin{aligned} \\mathbf{P}_{k} \u0026= E[\\mathbf{e}_{k} \\mathbf{e}_{k}^{T}] \\\\ \u0026= E\\!\\left[ \\big((\\mathbf{I} - \\mathbf{K}_{k}\\mathbf{H}_{k})\\mathbf{e}_{k}^{-} - \\mathbf{K}_{k}\\mathbf{v}_{k}\\big) \\big((\\mathbf{I} - \\mathbf{K}_{k}\\mathbf{H}_{k})\\mathbf{e}_{k}^{-} - \\mathbf{K}_{k}\\mathbf{v}_{k}\\big)^{T} \\right] \\\\ \u0026= (\\mathbf{I} - \\mathbf{K}_{k}\\mathbf{H}_{k})\\mathbf{P}_{k}^{-}(\\mathbf{I} - \\mathbf{K}_{k}\\mathbf{H}_{k})^{T} + \\mathbf{K}_{k}\\mathbf{R}_{k}\\mathbf{K}_{k}^{T} \\\\ \u0026= \\mathbf{P}_{k}^{-} - \\mathbf{K}_{k}\\mathbf{H}_{k}\\mathbf{P}_{k}^{-} - \\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}\\mathbf{K}_{k}^{T} + \\mathbf{K}_{k}(\\mathbf{H}_{k}\\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}+\\mathbf{R}_{k})\\mathbf{K}_{k}^{T} \\quad\\quad â‘¤ \\end{aligned} $$å…¶ä¸­ï¼Œ$\\mathbf{R}_{k}$ æ˜¯æµ‹é‡å™ªå£°åæ–¹å·®ã€‚\nè‡³æ­¤ï¼Œæˆ‘ä»¬å°†éšæœºå˜é‡çš„æœ€ä¼˜åŒ–é—®é¢˜è½¬åŒ–æˆä¸ºäº†å…³äºçŸ©é˜µ $\\mathbf{K}_k$ çš„å‡½æ•°æœ€å°åŒ–é—®é¢˜ã€‚å¾ˆå¤šæ–‡ç« åœ¨æ­¤ç›´æ¥å¯¹åéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µ $\\mathbf{P}_{k}$ å–è¿¹ï¼Œç„¶åå¯¹å¡å°”æ›¼å¢ç›Š $\\mathbf{K}_k$ æ±‚å¯¼ï¼Œå¹¶ä»¤å…¶ä¸ºé›¶ï¼Œä»¥è·å¾—ä½¿ $\\text{tr}(\\mathbf{P}_{k})$ æœ€å°çš„ $\\mathbf{K}_k$ å€¼ã€‚å¦‚æ­¤åšçš„ç†ç”±æœ‰ä»¥ä¸‹ä¸‰ç‚¹ï¼š\n$\\text{tr}(\\mathbf{P}_{k})$ åœ¨ç‰©ç†ä¸Šè¡¨ç¤ºç³»ç»ŸçŠ¶æ€ä¼°è®¡è¯¯å·®çš„æ€»æ–¹å·®ï¼Œå³å‡æ–¹è¯¯å·® $E[||\\mathbf{e}_k||^2]$ã€‚æœ€å°åŒ–è¿¹å°±æ˜¯æœ€å°åŒ–æ•´ä½“çš„ä¼°è®¡è¯¯å·®èƒ½é‡ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸ç›´è§‚ä¸”åˆç†çš„ä¼˜åŒ–ç›®æ ‡ã€‚ $\\text{tr}(\\mathbf{P}_{k})$ æ˜¯å…³äº $\\mathbf{K}_k$ çš„ä¸€ä¸ªæ ‡é‡å‡½æ•°ï¼Œå¹¶ä¸”å¯ä»¥è¯æ˜å®ƒæ˜¯ä¸€ä¸ªäºŒæ¬¡å‡½æ•°ï¼Œå› æ­¤æ˜¯å‡¸å‡½æ•°ï¼Œå­˜åœ¨å”¯ä¸€çš„å…¨å±€æœ€å°å€¼ã€‚ å¯¹æ ‡é‡å‡½æ•° $\\text{tr}(\\mathbf{P}_{k})$ è¿›è¡ŒçŸ©é˜µæ±‚å¯¼ï¼ˆ$\\frac{\\partial \\text{tr}(\\mathbf{P}_{k})}{\\partial \\mathbf{K}_k}$ï¼‰æ¯”ç›´æ¥å¯¹çŸ©é˜µ $\\mathbf{P}_{k}$ æ±‚å¯¼è¦ç®€å•å¾—å¤šï¼Œå¹¶ä¸”æœ‰æˆç†Ÿçš„çŸ©é˜µè¿¹æ±‚å¯¼æ³•åˆ™ï¼ˆå¦‚ $\\frac{\\partial \\text{tr}(AB)}{\\partial A} = B^T$ï¼‰å¯ä»¥ä½¿ç”¨ã€‚ ä¸Šè¿°ä¸‰ç‚¹çš„æ‰©å±•è¯æ˜ $ \\text{tr}(\\mathbf{P}_{k}) = \\sum_{i=1}^{n} E[(x_{ik}-\\hat{x}_{ik})^{2}] $\n$\\text{tr}(\\mathbf{P}_{k})$ è¡¨ç¤ºçš„æ˜¯åéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µ $\\mathbf{P}_{k}$ ä¸»å¯¹è§’çº¿å…ƒç´ ä¹‹å’Œï¼Œåœ¨ä¼°è®¡æ— åæ—¶ï¼Œæ°å¥½æ˜¯çŠ¶æ€å‘é‡æ‰€æœ‰åˆ†é‡ä¼°è®¡è¯¯å·®çš„å‡æ–¹è¯¯å·®ï¼ˆMean Squared Errorï¼‰ä¹‹å’Œã€‚åœ¨å¡å°”æ›¼æ»¤æ³¢ä¸­ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ‰¾åˆ°æœ€ä¼˜çš„å¢ç›Š $K_k$ï¼Œä½¿å¾—è¿™ä¸ªå‡æ–¹è¯¯å·®æ€»å’Œæœ€å°ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„æœ€å°å‡æ–¹è¯¯å·®ï¼ˆMMSEï¼‰ä¼˜åŒ–é—®é¢˜ã€‚\nä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£ï¼Œæˆ‘ä»¬å°† $\\mathbf{P}_{k}$ ä»¥çŸ©é˜µå½¢å¼å±•å¼€ï¼ˆå‡è®¾çŠ¶æ€å‘é‡ç»´åº¦ä¸º $n$ï¼‰ï¼š\n$$ \\mathbf{P}_{k}=\\begin{pmatrix} E[(x_{1k}-\\hat{x}_{1k} )^{2}] \u0026 E[(x_{1k}-\\hat{x}_{1k} )(x_{2k}-\\hat{x}_{2k} )] \u0026 \\cdots \u0026 E[(x_{1k}-\\hat{x}_{1k} )(x_{nk}-\\hat{x}_{nk} )] \\\\ E[(x_{2k}-\\hat{x}_{2k} )(x_{1k}-\\hat{x}_{1k} )] \u0026 E[(x_{2k}-\\hat{x}_{2k} )^{2}] \u0026 \\cdots \u0026 E[(x_{2k}-\\hat{x}_{2k} )(x_{nk}-\\hat{x}_{nk} )] \\\\ \\vdots \u0026 \\vdots \u0026 \\ddots \u0026 \\vdots \\\\ E[(x_{nk}-\\hat{x}_{nk} )(x_{1k}-\\hat{x}_{1k} )] \u0026 E[(x_{nk}-\\hat{x}_{nk} )(x_{2k}-\\hat{x}_{2k} )] \u0026 \\cdots \u0026 E[(x_{nk}-\\hat{x}_{nk} )^{2}]\\end{pmatrix} $$ æ ‡é‡å‡½æ•°ï¼ˆè¿¹ï¼‰å¯¹çŸ©é˜µæ±‚å¯¼çš„åŸºç¡€çŸ¥è¯†\næˆ‘ä»¬æ¥æ¨å¯¼ $\\frac{\\partial \\text{tr}(\\mathbf{A}\\mathbf{X})}{\\partial \\mathbf{X}} = \\mathbf{A}^{T}$ã€‚è®¾ $\\mathbf{A}$ã€$\\mathbf{X}$ å‡ä¸º $n \\times n$ çš„æ–¹é˜µï¼Œä¸” $\\mathbf{A}$ ä¸ $\\mathbf{X}$ æ— å…³ã€‚\næ ¹æ®çŸ©é˜µä¹˜æ³•å’Œè¿¹çš„å®šä¹‰ï¼Œæˆ‘ä»¬æœ‰ï¼š\n$$ \\text{tr}(\\mathbf{A}\\mathbf{X}) = \\sum_{i=1}^{n} (\\mathbf{A}\\mathbf{X})_{ii} = \\sum_{i=1}^{n} \\sum_{j=1}^{n} a_{ij}x_{ji} $$æ ‡é‡å‡½æ•° $f(\\mathbf{X})$ å¯¹çŸ©é˜µ $\\mathbf{X}$ çš„å¯¼æ•°å®šä¹‰å¦‚ä¸‹ï¼ˆæŒ‰åˆ†æ¯å¸ƒå±€ï¼‰ï¼š\n$$ \\frac{\\partial f(\\mathbf{X})}{\\partial \\mathbf{X} } =\\begin{pmatrix} \\frac{\\partial f}{\\partial x_{11}} \u0026\\frac{\\partial f}{\\partial x_{12}} \u0026\\cdots \u0026\\frac{\\partial f}{\\partial x_{1n}} \\\\ \\frac{\\partial f}{\\partial x_{21}} \u0026 \\frac{\\partial f}{\\partial x_{22}}\u0026 \\cdots \u0026\\frac{\\partial f}{\\partial x_{2n}} \\\\ \\vdots \u0026 \\vdots \u0026 \\ddots \u0026 \\vdots \\\\ \\frac{\\partial f}{\\partial x_{n1}} \u0026 \\frac{\\partial f}{\\partial x_{n2}} \u0026\\cdots \u0026 \\frac{\\partial f}{\\partial x_{nn}} \\end{pmatrix} $$ç°åœ¨ï¼Œæˆ‘ä»¬æ±‚è¿¹ $\\text{tr}(\\mathbf{A}\\mathbf{X})$ å¯¹ $\\mathbf{X}$ çš„ä»»æ„ä¸€ä¸ªå…ƒç´  $x_{kl}$ çš„åå¯¼æ•°ï¼š\n$$ \\frac{\\partial \\text{tr}(\\mathbf{A}\\mathbf{X})}{\\partial x_{kl}} = \\frac{\\partial}{\\partial x_{kl}} \\left( \\sum_{i=1}^{n} \\sum_{j=1}^{n} a_{ij}x_{ji} \\right) $$åœ¨è¿™ä¸ªåŒé‡æ±‚å’Œä¸­ï¼Œå˜é‡ $x_{kl}$ åªåœ¨ $j=k$ ä¸” $i=l$ è¿™ä¸€é¡¹ä¸­å‡ºç°ï¼Œè¯¥é¡¹ä¸º $a_{lk}x_{kl}$ã€‚å› æ­¤ï¼Œå¯¹ $x_{kl}$ æ±‚å¯¼çš„ç»“æœå°±æ˜¯å®ƒçš„ç³»æ•° $a_{lk}$ã€‚\næ‰€ä»¥ï¼Œå¯¼æ•°çŸ©é˜µçš„ç¬¬ $k$ è¡Œç¬¬ $l$ åˆ—çš„å…ƒç´ ä¸ºï¼š\n$$ \\left(\\frac{\\partial \\text{tr}(\\mathbf{A}\\mathbf{X})}{\\partial \\mathbf{X}}\\right)_{kl} = a_{lk} = (\\mathbf{A}^T)_{kl} $$ç”±äºè¿™å¯¹æ‰€æœ‰çš„ $k, l$ éƒ½æˆç«‹ï¼Œæˆ‘ä»¬å¾—åˆ°ï¼š\n$$ \\frac{\\partial \\text{tr}(\\mathbf{A}\\mathbf{X})}{\\partial \\mathbf{X}} = \\mathbf{A}^{T} $$ ç±»æ¯” 2 çš„æ¨å¯¼è¿‡ç¨‹ï¼Œæˆ‘ä»¬ä¸åŠ è¯æ˜åœ°ç»™å‡ºä»¥ä¸‹å…³äºè¿¹çš„æ±‚å¯¼ç»“è®ºï¼š\nç»“è®º 1ï¼š $\\frac{\\partial \\text{tr}(\\mathbf{A}\\mathbf{X})}{\\partial \\mathbf{X}} = \\mathbf{A}^{T}$ ç»“è®º 2ï¼š $\\frac{\\partial \\text{tr}(\\mathbf{X}\\mathbf{A})}{\\partial \\mathbf{X}} = \\mathbf{A}^{T}$ï¼ˆåˆ©ç”¨ $\\text{tr}(\\mathbf{X}\\mathbf{A})=\\text{tr}(\\mathbf{A}\\mathbf{X})$ï¼‰ ç»“è®º 3ï¼š $\\frac{\\partial \\text{tr}(\\mathbf{X}\\mathbf{A}\\mathbf{X}^{T})}{\\partial \\mathbf{X}} = \\mathbf{X}(\\mathbf{A}+\\mathbf{A}^{T})$ ç»“è®º 4ï¼š $\\frac{\\partial \\text{tr}(\\mathbf{X}^{T}\\mathbf{A}\\mathbf{X})}{\\partial \\mathbf{X}} = (\\mathbf{A}+\\mathbf{A}^{T})\\mathbf{X}$ ç»“è®º 5ï¼š å¯¹äºä»»ä½•ä¸€ä¸ªä½œä¸º $\\mathbf{X}$ å‡½æ•°çš„çŸ©é˜µ $\\mathbf{P}(\\mathbf{X})$ï¼Œæ’æœ‰ $\\frac{\\partial \\text{tr}(\\mathbf{P})}{\\partial \\mathbf{X}} = \\frac{\\partial \\text{tr}(\\mathbf{P}^{T})}{\\partial \\mathbf{X}}$ï¼Œå› ä¸ºçŸ©é˜µçš„è¿¹ç­‰äºå…¶è½¬ç½®çš„è¿¹ã€‚ å¡å°”æ›¼å¢ç›Šæ±‚è§£å’Œåæ–¹å·®çŸ©é˜µåŒ–ç®€ # æ ¹æ®ä¸Šè¿°æ‰©å±•çŸ¥è¯†ï¼Œæˆ‘ä»¬æ±‚è§£æœ€ä¼˜å¡å°”æ›¼å¢ç›Š $\\mathbf{K}_{k}$ï¼Œ\n$$ \\begin{align} ä»¤ \\frac{\\partial \\text{tr}(\\mathbf{P}_{k})}{\\partial \\mathbf{K}_{k}} \u0026= \\frac{\\partial \\text{tr}(\\mathbf{P}_{k}^{-}) }{\\partial \\mathbf{K}_{k}} -\\frac{\\partial \\text{tr}(\\mathbf{K}_{k}\\mathbf{H}_{k}\\mathbf{P}_{k}^{-})}{\\partial \\mathbf{K}_{k}}-\\frac{\\partial \\text{tr}(\\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}\\mathbf{K}_{k}^{T})}{\\partial \\mathbf{K}_{k}}+\\frac{\\partial \\text{tr}(\\mathbf{K}_{k}(\\mathbf{H}_{k}\\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}+\\mathbf{R}_{k})\\mathbf{K}_{k}^{T})}{\\partial \\mathbf{K}_{k}} \\\\ \u0026= 0 - (\\mathbf{H}_{k}\\mathbf{P}_{k}^{-})^{T} - (\\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}) + 2\\mathbf{K}_{k}(\\mathbf{H}_{k}\\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}+\\mathbf{R}_{k}) \\\\ \u0026= -2\\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T} + 2\\mathbf{K}_{k}(\\mathbf{H}_{k}\\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}+\\mathbf{R}_{k}) \\\\ \u0026= 0 \\end{align} $$æˆ‘ä»¬å¾—åˆ°\n$$ \\mathbf{K}_{k} = \\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}(\\mathbf{H}_{k}\\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}+\\mathbf{R}_{k})^{-1} \\quad\\quad â‘¥ $$å…¶ä¸­ï¼Œ $\\mathbf{R}_{k}$ æ˜¯æµ‹é‡å™ªå£°åæ–¹å·®ã€‚\nä»£å…¥åˆ°åéªŒè¯¯å·®åæ–¹å·®å…¬å¼ $\\mathbf{P}_{k} = (\\mathbf{I}-\\mathbf{K}_{k}\\mathbf{H}_{k})\\mathbf{P}_{k}^{-}(\\mathbf{I}-\\mathbf{K}_{k}\\mathbf{H}_{k})^T + \\mathbf{K}_{k}\\mathbf{R}_{k}\\mathbf{K}_{k}^T$ ä¸­ï¼Œå±•å¼€åå¯å¾—ï¼š$\\mathbf{P}_{k} = \\mathbf{P}_{k}^{-} - \\mathbf{K}_{k}\\mathbf{H}_{k}\\mathbf{P}_{k}^{-} - \\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}\\mathbf{K}_{k}^{T} + \\mathbf{K}_{k}(\\mathbf{H}_{k}\\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}+\\mathbf{R}_{k})\\mathbf{K}_{k}^{T}$ã€‚\nåˆ©ç”¨å…¬å¼ â‘¥ çš„ç»“è®º $\\mathbf{K}_{k}(\\mathbf{H}_{k}\\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}+\\mathbf{R}_{k}) = \\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}$ï¼Œå¯¹ä¸Šå¼è¿›è¡ŒåŒ–ç®€ï¼Œåˆ™æœ‰åéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µï¼š\n$$ \\begin{align} \\mathbf{P}_{k} \u0026= \\mathbf{P}_{k}^{-} - \\mathbf{K}_{k}\\mathbf{H}_{k}\\mathbf{P}_{k}^{-} - \\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}\\mathbf{K}_{k}^{T} + (\\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T})\\mathbf{K}_{k}^{T} \\\\ \u0026= \\mathbf{P}_{k}^{-} - \\mathbf{K}_{k}\\mathbf{H}_{k}\\mathbf{P}_{k}^{-} \\\\ \u0026= (\\mathbf{I}-\\mathbf{K}_{k}\\mathbf{H}_{k})\\mathbf{P}_{k}^{-} \\quad\\quad â‘¦ \\end{align} $$å€Ÿé‰´ä¸Šè¿°æ•´ä¸ªæ¨å¯¼è¿‡ç¨‹ï¼Œå¯¹äºç”±è¿åŠ¨æ¨¡å‹å¾—åˆ°çš„ $k$ æ—¶åˆ»çŠ¶æ€çš„å…ˆéªŒä¼°è®¡å€¼ï¼ˆé¢„æµ‹å€¼ï¼‰å…¬å¼ $\\mathbf{x}_{k}^{-} = \\mathbf{F}_{k} \\hat{\\mathbf{x}}_{k-1} + \\mathbf{B}_{k}\\mathbf{u}_{k}$ã€‚\nä¸ºäº†æ„å»ºå…ˆéªŒè¯¯å·® $\\mathbf{e}_{k}^{-}$ï¼ŒæŒ‰å®šä¹‰ä¸¤å¼ç›¸å‡ï¼š\n$$ \\begin{align} \\mathbf{e}_{k}^{-} \u0026= \\mathbf{x}_{k}-\\mathbf{x}_{k}^{-} \\\\ \u0026= \\mathbf{x}_{k}-\\mathbf{F}_{k} \\hat{\\mathbf{x}}_{k-1} - \\mathbf{B}_{k}\\mathbf{u}_{k} \\\\ \u0026= \\mathbf{F}_{k} \\mathbf{x}_{k-1} + \\mathbf{B}_{k}\\mathbf{u}_{k} +\\mathbf{w}_{k-1}-\\mathbf{F}_{k} \\hat{\\mathbf{x}}_{k-1} - \\mathbf{B}_{k}\\mathbf{u}_{k} \\\\ \u0026= \\mathbf{F}_{k}( \\mathbf{x}_{k-1}-\\hat{\\mathbf{x}}_{k-1})+\\mathbf{w}_{k-1} \\end{align} $$å³\n$$ \\mathbf{e}_{k}^{-} = \\mathbf{F}_{k}\\mathbf{e}_{k-1}+\\mathbf{w}_{k-1} $$ç±»ä¼¼æ„å»ºåéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µ $\\mathbf{P}_{k}$ çš„æ–¹å¼ï¼ŒåŒæ ·æ„å»ºå…ˆéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µ $\\mathbf{P}_{k}^{-}$ï¼Œä¸¤è¾¹åŒæ—¶ä¹˜ä»¥è‡ªèº«çš„è½¬ç½®å¹¶å–æœŸæœ›ï¼Œå†è€ƒè™‘åˆ° $\\mathbf{w}_{k-1}$ å’Œ $\\mathbf{e}_{k-1}$ äº’ç›¸ç‹¬ç«‹ï¼ˆå³ $E[\\mathbf{F}_{k}\\mathbf{e}_{k-1}\\mathbf{w}_{k-1}^T]=0$ï¼‰ï¼Œæœ‰\n$$ \\begin{aligned} E[\\mathbf{e}_{k}^{-}\\mathbf{e}_{k}^{-T}] \u0026= E\\!\\left[(\\mathbf{F}_{k}\\mathbf{e}_{k-1}+\\mathbf{w}_{k-1})(\\mathbf{F}_{k}\\mathbf{e}_{k-1}+\\mathbf{w}_{k-1})^{T}\\right] \\\\ \u0026= \\mathbf{F}_{k}\\,E[\\mathbf{e}_{k-1}\\mathbf{e}_{k-1}^{T}]\\,\\mathbf{F}_{k}^{T}+E[\\mathbf{w}_{k-1}\\mathbf{w}_{k-1}^{T}] \\end{aligned} $$åˆ™æœ‰å…ˆéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µï¼š\n$$ \\mathbf{P}_{k}^{-}= \\mathbf{F}_{k}\\mathbf{P}_{k-1}\\mathbf{F}_{k}^{T}+\\mathbf{Q}_{k-1} \\quad\\quad â‘§ $$å…¶ä¸­ï¼Œ $\\mathbf{Q}_{k-1}$ ä¸ºè¿‡ç¨‹å™ªå£°åæ–¹å·®ã€‚\nè‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»è·å¾—äº†å®Œæ•´çš„å¡å°”æ›¼æ»¤æ³¢é¢„æµ‹ã€æ›´æ–°çš„å…¬å¼ã€‚\næ¢³ç† # æˆ‘ä»¬å¯¹ä¸Šæ–‡åšä¸€ä¸ªç³»ç»Ÿæ€§çš„æ€»ç»“ã€‚\né¦–å…ˆï¼Œæˆ‘ä»¬å¯¹å®é™…é—®é¢˜è¿›è¡Œå»ºæ¨¡ï¼Œè·å¾—è¿åŠ¨æ¨¡å‹å’Œè§‚æµ‹æ¨¡å‹ï¼š\nè¿åŠ¨æ¨¡å‹ï¼š $\\mathbf{x}_{k} = \\mathbf{F}_{k} \\mathbf{x}_{k-1} + \\mathbf{B}_{k}\\mathbf{u}_{k} +\\mathbf{w}_{k-1} \\quad\\quad â‘ $\nè§‚æµ‹æ¨¡å‹ï¼š $\\mathbf{z}_{k} = \\mathbf{H}_{k} \\mathbf{x}_{k} +\\mathbf{v}_{k} \\quad\\quad â‘¡$\nå…¶ä¸­ï¼Œ$\\mathbf{w}_{k-1}$ å’Œ $\\mathbf{v}_{k}$ åˆ†åˆ«æ˜¯è¿‡ç¨‹å™ªå£°å’Œè§‚æµ‹å™ªå£°ï¼Œå®ƒä»¬æ˜¯äº’ä¸ç›¸å…³çš„é«˜æ–¯ç™½å™ªå£°ï¼Œå…¶åæ–¹å·®çŸ©é˜µåˆ†åˆ«ä¸º $\\mathbf{Q}_{k-1}$ å’Œ $\\mathbf{R}_{k}$ã€‚\nå…¶æ¬¡ï¼Œæˆ‘ä»¬é€šè¿‡æ— åä¼°è®¡çš„å‡è®¾å’Œè¯¯å·®å®šä¹‰ï¼Œè·å¾—æœ€ä¼˜ä¼°è®¡å€¼å’Œåæ–¹å·®çŸ©é˜µçš„è¡¨è¾¾å¼ï¼ˆæ›´æ–°æ­¥éª¤ï¼‰ï¼š\nçŠ¶æ€æ›´æ–°ï¼š $\\hat{\\mathbf{x}}_{k} = \\mathbf{x}_{k}^{-} + \\mathbf{K}_{k}(\\mathbf{z}_{k}-\\mathbf{H}_{k}\\mathbf{x}_{k}^{-} ) \\quad\\quad â‘¢$\nåéªŒè¯¯å·®ï¼š $\\mathbf{e}_{k} = (\\mathbf{I} -\\mathbf{K}_{k}\\mathbf{H}_{k})\\mathbf{e}_{k}^{-} - \\mathbf{K}_{k}\\mathbf{v}_{k} \\quad\\quad â‘£$\nåéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µï¼ˆå±•å¼€å½¢å¼ï¼‰ï¼š $\\mathbf{P}_{k} = E[\\mathbf{e}_{k}\\mathbf{e}_{k}^{T}]= \\mathbf{P}_{k}^{-} - \\mathbf{K}_{k}\\mathbf{H}_{k}\\mathbf{P}_{k}^{-}-\\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}\\mathbf{K}_{k}^{T} + \\mathbf{K}_{k}(\\mathbf{H}_{k}\\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}+\\mathbf{R}_{k})\\mathbf{K}_{k}^{T} \\quad\\quad â‘¤$\nå†æ¬¡ï¼Œæˆ‘ä»¬é€šè¿‡æœ€å°åŒ–åéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µ $\\mathbf{P}_{k}$ çš„è¿¹ï¼Œæ¨å¯¼å‡ºå¡å°”æ›¼å¢ç›Šï¼š\nå¡å°”æ›¼å¢ç›Šï¼š $\\mathbf{K}_{k}=\\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}(\\mathbf{H}_{k}\\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}+\\mathbf{R}_{k})^{-1} \\quad\\quad â‘¥$\nå°†ä¸Šå¼ä»£å…¥ â‘¤ å¹¶åŒ–ç®€ï¼Œå¯å¾—åéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µçš„æ›´ç®€æ´å½¢å¼ï¼š\nåéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µï¼ˆå¸¸ç”¨å½¢å¼ï¼‰ï¼š $\\mathbf{P}_{k} = (\\mathbf{I}-\\mathbf{K}_{k}\\mathbf{H}_{k})\\mathbf{P}_{k}^{-} \\quad\\quad â‘¦$\næœ€åï¼Œæˆ‘ä»¬è¿›è¡Œé¢„æµ‹æ­¥éª¤ï¼Œè®¡ç®—ä¸‹ä¸€æ—¶åˆ»çš„å…ˆéªŒé‡ï¼š\nå…ˆéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µï¼š $\\mathbf{P}_{k}^{-}= \\mathbf{F}_{k}\\mathbf{P}_{k-1}\\mathbf{F}_{k}^{T}+\\mathbf{Q}_{k-1} \\quad\\quad â‘§$\nçŠ¶æ€é¢„æµ‹ï¼š $\\mathbf{x}_{k}^{-} = \\mathbf{F}_{k} \\hat{\\mathbf{x}}_{k-1} + \\mathbf{B}_{k}\\mathbf{u}_{k} \\quad\\quad â‘¨$\nå…ˆéªŒè¯¯å·®ï¼š $\\mathbf{e}_{k}^{-} = \\mathbf{F}_{k}\\mathbf{e}_{k-1}+\\mathbf{w}_{k-1}$\næ€»ç»“ # é‚£ä¹ˆï¼Œå¡å°”æ›¼æ»¤æ³¢å°±å¯ä»¥æŒ‰ä¸‹é¢çš„ 5 ä¸ªå…¬å¼ç†è§£å¹¶è¯´æ˜ï¼š\nå®ç°è¿‡ç¨‹ï¼šä½¿ç”¨ä¸Šä¸€æ¬¡çš„æœ€ä¼˜ç»“æœé¢„æµ‹å‡ºå½“å‰å€¼ï¼ŒåŒæ—¶ä½¿ç”¨å½“å‰è§‚æµ‹å€¼ä¿®æ­£ï¼Œå¾—åˆ°å½“å‰æœ€ä¼˜ç»“æœã€‚\næˆ‘ä»¬å°†å¡å°”æ›¼æ»¤æ³¢çš„å®Œæ•´æµç¨‹æ€»ç»“ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šé¢„æµ‹å’Œæ›´æ–°ã€‚\né¢„æµ‹\né¢„æµ‹çŠ¶æ€ $$ \\mathbf{x}_{k}^{-} = \\mathbf{F}_{k} \\hat{\\mathbf{x}}_{k-1} + \\mathbf{B}_{k} \\mathbf{u}_{k} \\quad\\quad (1) $$ é¢„æµ‹å…ˆéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µ $$ \\mathbf{P}_{k}^{-} = \\mathbf{F}_{k}\\mathbf{P}_{k-1}\\mathbf{F}_{k}^{T} + \\mathbf{Q}_{k-1} \\quad\\quad (2) $$ æ›´æ–°\nè®¡ç®—å¡å°”æ›¼å¢ç›Š $$ \\mathbf{K}_{k} = \\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}(\\mathbf{H}_{k}\\mathbf{P}_{k}^{-}\\mathbf{H}_{k}^{T}+\\mathbf{R}_{k})^{-1} \\quad\\quad (3) $$ æ›´æ–°çŠ¶æ€ä¼°è®¡ $$ \\hat{\\mathbf{x}}_{k} = \\mathbf{x}_{k}^{-} + \\mathbf{K}_{k}(\\mathbf{z}_{k} - \\mathbf{H}_{k}\\mathbf{x}_{k}^{-}) \\quad\\quad (4) $$ æ›´æ–°åéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µ $$ \\mathbf{P}_{k} = (\\mathbf{I}-\\mathbf{K}_{k}\\mathbf{H}_{k})\\mathbf{P}_{k}^{-} \\quad\\quad (5) $$ åœ¨è®¾å®šå¥½ç³»ç»Ÿçš„æ¨¡å‹å‚æ•°ï¼ˆçŠ¶æ€è½¬ç§»çŸ©é˜µï¼š$\\mathbf{F}_k$ã€æ§åˆ¶çŸ©é˜µï¼š$\\mathbf{B}_k$ã€è§‚æµ‹çŸ©é˜µï¼š$\\mathbf{H}_k$ï¼‰å’Œå™ªå£°åæ–¹å·®ï¼ˆè¿‡ç¨‹å™ªå£°åæ–¹å·®ï¼š$\\mathbf{Q}_k$ï¼Œæµ‹é‡å™ªå£°åæ–¹å·®ï¼š$\\mathbf{R}_k$ï¼‰åï¼Œè¿™ä¸ªé¢„æµ‹-æ›´æ–°çš„å¾ªç¯ä»åˆå§‹çŠ¶æ€ $\\hat{\\mathbf{x}}_0$ å’Œåˆå§‹è¯¯å·®åæ–¹å·®çŸ©é˜µ $\\mathbf{P}_0$ å¼€å§‹ï¼Œä¸æ–­è¿­ä»£ï¼Œå®ç°å¯¹ç³»ç»ŸçŠ¶æ€çš„å®æ—¶æœ€ä¼˜ä¼°è®¡ã€‚\nå®è·µ # è°ƒèŠ‚è¶…å‚æ•° # è¿‡ç¨‹å™ªå£°åæ–¹å·®ï¼š$\\mathbf{Q}_k$ å’Œæµ‹é‡å™ªå£°åæ–¹å·®ï¼š$\\mathbf{R}_k$\nåˆå§‹çŠ¶æ€ $\\hat{\\mathbf{x}}_0$ å’Œåˆå§‹è¯¯å·®åæ–¹å·®çŸ©é˜µ $\\mathbf{P}_0$\nå¡å°”æ›¼æ»¤æ³¢çš„ä½¿ç”¨æ­¥éª¤ # é€‰æ‹©çŠ¶æ€é‡ã€è§‚æµ‹é‡ æ„å»ºæ–¹ç¨‹ åˆå§‹åŒ–å‚æ•°ï¼ˆ$\\mathbf{Q}_k$ã€$\\mathbf{R}_k$ã€$\\hat{\\mathbf{x}}_0$ï¼ˆä¸€èˆ¬å– 0ï¼‰ã€$\\mathbf{P}_0$ï¼ˆä¸€èˆ¬å– 1ï¼Œä¸å¯ä¸º 0ï¼‰ï¼‰ ä»£å…¥å…¬å¼è¿­ä»£ è°ƒèŠ‚è¶…å‚æ•°ï¼ˆ$\\mathbf{Q}_k$ã€$\\mathbf{R}_k$ï¼‰ æ¡ˆä¾‹åˆ†æä¸€ï¼šä¸€ç»´æ—¶åºä¿¡å·çš„è¿½è¸ªä¸æ»¤æ³¢ # æœ¬èŠ‚å°†ä»¥ä¸€ä¸ªå¸¸è§çš„å·¥ç¨‹é—®é¢˜â€”â€”ä»å¸¦å™ªå£°çš„è§‚æµ‹ä¸­æ¢å¤çº¯å‡€çš„æ­£å¼¦ä¿¡å·â€”â€”ä¸ºä¾‹ï¼Œè¯¦ç»†æ¼”ç¤ºå¦‚ä½•ä¸ºç‰¹å®šé—®é¢˜æ„å»ºå¡å°”æ›¼æ»¤æ³¢æ¨¡å‹ã€‚æ ¸å¿ƒæŒ‘æˆ˜åœ¨äºï¼Œæ­£å¼¦æ³¢æœ¬èº«å¹¶éä¸€ä¸ªç®€å•çš„åŠ¨æ€ç³»ç»Ÿï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡æ•°å­¦æ¨å¯¼ï¼Œå°†å…¶è½¬æ¢ä¸ºå¡å°”æ›¼æ»¤æ³¢æ¡†æ¶æ‰€è¦æ±‚çš„çº¿æ€§çŠ¶æ€ç©ºé—´å½¢å¼ã€‚\nå¯¹åº”ä»£ç å’Œæ¼”ç¤ºè§†é¢‘ # è¯·ç›´æ¥ä¸‹è½½ï¼š 01_kalman_filter_sine_wave.ipynb\nå¡å°”æ›¼æ»¤æ³¢æ­£å¼¦æ³¢è·Ÿè¸ªæ¼”ç¤ºï¼ˆQ=1.0e-05, R=0.16ï¼‰ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒ video æ ‡ç­¾ã€‚ ç¬¬ä¸€æ­¥ï¼šå»ºç«‹ä¿¡å·çš„åŠ¨æ€æ¨¡å‹ # å¡å°”æ›¼æ»¤æ³¢è¦æ±‚ç³»ç»Ÿæ»¡è¶³é©¬å°”å¯å¤«æ€§ï¼Œå³å½“å‰çŠ¶æ€ä»…ä¸ä¸Šä¸€çŠ¶æ€æœ‰å…³ã€‚å¹¸è¿çš„æ˜¯ï¼Œä¸€ä¸ªçº¯å‡€çš„ã€ç¦»æ•£é‡‡æ ·çš„æ­£å¼¦æ³¢ï¼Œå…¶æœªæ¥å€¼ $y_{t+1}$ å¯ä»¥ç”±å®ƒå½“å‰å’Œè¿‡å»çš„å€¼ $y_t$, $y_{t-1}$ ç²¾ç¡®åœ°çº¿æ€§è¡¨ç¤ºã€‚æˆ‘ä»¬çš„é¦–è¦ä»»åŠ¡å°±æ˜¯æ‰¾åˆ°è¿™ä¸ªçº¿æ€§é€’æ¨å…³ç³»ã€‚\næˆ‘ä»¬ä»ç¦»æ•£æ­£å¼¦æ³¢çš„å®šä¹‰å‡ºå‘ï¼š\n$$ y_t = A \\sin(\\omega t + \\phi) $$å…¶ä¸­ $\\omega$ æ˜¯æ•°å­—è§’é¢‘ç‡ï¼ˆ $\\omega = 2\\pi f / f_s$ ï¼Œf æ˜¯ä¿¡å·é¢‘ç‡ï¼Œ $f_s$ æ˜¯é‡‡æ ·é¢‘ç‡ï¼‰ã€‚\næˆ‘ä»¬å†™å‡º $t+1$ å’Œ $t-1$ æ—¶åˆ»çš„è¡¨è¾¾å¼ï¼š\n$y_{t+1} = A \\sin(\\omega(t+1) + \\phi) = A \\sin((\\omega t+\\phi) + \\omega)$ $y_{t-1} = A \\sin(\\omega(t-1) + \\phi) = A \\sin((\\omega t+\\phi) - \\omega)$ ä½¿ç”¨ä¸‰è§’å‡½æ•°çš„å’Œè§’å…¬å¼ $\\sin(\\alpha \\pm \\beta) = \\sin(\\alpha)\\cos(\\beta) \\pm \\cos(\\alpha)\\sin(\\beta)$ å±•å¼€ä¸Šè¿°ä¸¤å¼ï¼š\n$y_{t+1} = A [\\sin(\\omega t+\\phi)\\cos(\\omega) + \\cos(\\omega t+\\phi)\\sin(\\omega)]$ $y_{t-1} = A [\\sin(\\omega t+\\phi)\\cos(\\omega) - \\cos(\\omega t+\\phi)\\sin(\\omega)]$ å°†è¿™ä¸¤ä¸ªå¼å­ç›¸åŠ ï¼Œ$\\cos(\\omega t+\\phi)\\sin(\\omega)$ é¡¹ä¼šæ­£è´ŸæŠµæ¶ˆï¼š\n$$ y_{t+1} + y_{t-1} = 2 A \\sin(\\omega t+\\phi) \\cos(\\omega) $$æ³¨æ„åˆ° $A \\sin(\\omega t+\\phi)$ æ­£å¥½å°±æ˜¯ $y_t$ï¼Œå°†å…¶ä»£å…¥ä¸Šå¼ï¼š\n$$ y_{t+1} + y_{t-1} = 2 y_t \\cos(\\omega) $$æ•´ç†å¾—åˆ° $y_{t+1}$ çš„è¡¨è¾¾å¼ï¼Œè¿™ä¾¿æ˜¯æˆ‘ä»¬éœ€è¦çš„çº¿æ€§é€’æ¨å…³ç³»ï¼š\n$$ y_{t+1} = 2\\cos(\\omega) y_t - y_{t-1} $$è¿™ä¸ªå…¬å¼æ˜¯å»ºæ¨¡çš„å…³é”®ã€‚å®ƒæ­ç¤ºäº†æ­£å¼¦ä¿¡å·å†…åœ¨çš„ã€äºŒé˜¶çš„çº¿æ€§åŠ¨æ€ç‰¹æ€§ï¼Œä¸ºæˆ‘ä»¬æ„å»ºçŠ¶æ€è½¬ç§»æ¨¡å‹é“ºå¹³äº†é“è·¯ã€‚\nç¬¬äºŒæ­¥ï¼šæ„å»ºçŠ¶æ€ç©ºé—´æ–¹ç¨‹ # æˆ‘ä»¬å¾—åˆ°çš„é€’æ¨å…³ç³»æ˜¯äºŒé˜¶çš„ï¼ˆä¾èµ–äº $y_t$ å’Œ $y_{t-1}$ ï¼‰ï¼Œè€Œæ ‡å‡†å¡å°”æ›¼æ»¤æ³¢çš„çŠ¶æ€è½¬ç§»æ˜¯ä¸€é˜¶çš„ï¼ˆ$\\mathbf{x}_k = \\mathbf{F}_k \\mathbf{x}_{k-1} + \\dots$ï¼‰ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„ç»å…¸æ–¹æ³•æ˜¯â€œçŠ¶æ€å¢å¹¿â€ï¼šé€šè¿‡å¢åŠ çŠ¶æ€å‘é‡çš„ç»´åº¦ï¼Œå°†é«˜é˜¶ç³»ç»Ÿè½¬åŒ–ä¸ºä¸€é˜¶ç³»ç»Ÿã€‚\nå®šä¹‰çŠ¶æ€å‘é‡ $\\mathbf{x}_t$ ä¸ºå®ç°ä¸€é˜¶é€’æ¨ï¼ŒçŠ¶æ€å‘é‡å¿…é¡»åŒ…å«è®¡ç®— $y_{t+1}$ æ‰€éœ€çš„æ‰€æœ‰å†å²ä¿¡æ¯ï¼Œå³ $y_t$ å’Œ $y_{t-1}$ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å®šä¹‰ $t$ æ—¶åˆ»çš„çŠ¶æ€å‘é‡ä¸ºï¼š\n$$ \\mathbf{x}_t = \\begin{bmatrix} y_t \\\\ y_{t-1} \\end{bmatrix} $$ æ„å»ºçŠ¶æ€è½¬ç§»çŸ©é˜µ $\\mathbf{F}$ æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€ä¸ª 2x2 çŸ©é˜µ $\\mathbf{F}$ï¼Œä½¿å¾— $\\mathbf{x}_{t+1} = \\mathbf{F} \\mathbf{x}_t$ æˆç«‹ã€‚é¦–å…ˆå†™å‡º $\\mathbf{x}_{t+1}$ çš„å®šä¹‰ï¼š\n$$ \\mathbf{x}_{t+1} = \\begin{bmatrix} y_{t+1} \\\\ y_t \\end{bmatrix} $$ç°åœ¨ï¼Œå°†çŠ¶æ€æ–¹ç¨‹å±•å¼€ï¼š\n$$ \\begin{bmatrix} y_{t+1} \\\\ y_t \\end{bmatrix} = \\begin{bmatrix} F_{11} \u0026 F_{12} \\\\ F_{21} \u0026 F_{22} \\end{bmatrix} \\begin{bmatrix} y_t \\\\ y_{t-1} \\end{bmatrix} $$æˆ‘ä»¬é€è¡Œç¡®å®š $\\mathbf{F}$ çš„å…ƒç´ ï¼š\nç¬¬ä¸€è¡Œï¼š$y_{t+1} = F_{11} y_t + F_{12} y_{t-1}$ æ ¹æ®ç¬¬ä¸€æ­¥çš„é€’æ¨å…³ç³» $y_{t+1} = (2\\cos(\\omega)) y_t + (-1) y_{t-1}$ï¼Œå¯å¾—ï¼š $F_{11} = 2\\cos(\\omega)$ å’Œ $F_{12} = -1$ ç¬¬äºŒè¡Œï¼š$y_t = F_{21} y_t + F_{22} y_{t-1}$ è¿™æ˜¯ä¸€ä¸ªæ’ç­‰å…³ç³»ï¼š$t+1$ æ—¶åˆ»çŠ¶æ€çš„ç¬¬äºŒä¸ªå…ƒç´ ï¼ˆ$y_t$ï¼‰å°±æ˜¯ $t$ æ—¶åˆ»çŠ¶æ€çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚æ‰€ä»¥ï¼š $y_t = (1) y_t + (0) y_{t-1}$ å¯å¾—ï¼š$F_{21} = 1$ å’Œ $F_{22} = 0$ ç»„åˆèµ·æ¥ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†çŠ¶æ€è½¬ç§»çŸ©é˜µ $\\mathbf{F}$ï¼š $$ \\mathbf{F} = \\begin{bmatrix} 2\\cos(\\omega) \u0026 -1 \\\\ 1 \u0026 0 \\end{bmatrix} $$ ç¬¬ä¸‰æ­¥ï¼šå®šä¹‰è§‚æµ‹æ¨¡å‹ # æ¨¡å‹å»ºç«‹çš„æœ€åä¸€æ­¥æ˜¯å…³è”æˆ‘ä»¬å®šä¹‰çš„å†…éƒ¨çŠ¶æ€ä¸å¤–éƒ¨çš„å®é™…æµ‹é‡å€¼ã€‚\nå®šä¹‰è§‚æµ‹é‡ $\\mathbf{z}_t$ åœ¨æˆ‘ä»¬çš„é—®é¢˜ä¸­ï¼Œæ¯æ¬¡çš„æµ‹é‡å€¼ $\\mathbf{z}_t$ å°±æ˜¯å¸¦æœ‰å™ªå£°çš„ã€å½“å‰æ—¶åˆ»çš„æ­£å¼¦æ³¢å¹…å€¼ã€‚\næ„å»ºè§‚æµ‹çŸ©é˜µ $\\mathbf{H}$ æˆ‘ä»¬éœ€è¦ä¸€ä¸ªçŸ©é˜µ $\\mathbf{H}$ï¼Œå®ƒèƒ½ä»çŠ¶æ€å‘é‡ $\\mathbf{x}_t = \\begin{bmatrix} y_t \\\\ y_{t-1} \\end{bmatrix}$ ä¸­â€œæå–â€å‡ºæˆ‘ä»¬ç†è®ºä¸Šè¦æµ‹é‡çš„å€¼ $y_t$ã€‚\n$$ \\mathbf{z}_t \\approx \\mathbf{H} \\mathbf{x}\\_t = \\begin{bmatrix} H_1 \u0026 H_2 \\end{bmatrix} \\begin{bmatrix} y_t \\\\ y_{t-1} \\end{bmatrix} = H_1 y_t + H_2 y_{t-1} $$ä¸ºäº†è®© $\\mathbf{H} \\mathbf{x}_t$ ç­‰äº $y_t$ï¼Œæˆ‘ä»¬åªéœ€ä»¤ $H_1 = 1$ å’Œ $H_2 = 0$ã€‚å› æ­¤ï¼Œè§‚æµ‹çŸ©é˜µ $\\mathbf{H}$ æ˜¯ï¼š\n$$ \\mathbf{H} = \\begin{bmatrix} 1 \u0026 0 \\end{bmatrix} $$ æ¨¡å‹æ€»ç»“ # è‡³æ­¤ï¼Œæˆ‘ä»¬æˆåŠŸåœ°å°†ä¸€ä¸ªçœ‹ä¼¼å¤æ‚çš„æ­£å¼¦æ³¢ä¿¡å·ï¼Œè½¬åŒ–ä¸ºäº†æ ‡å‡†çš„çº¿æ€§é«˜æ–¯ç³»ç»Ÿæ¨¡å‹ï¼Œå¯ä»¥å®Œç¾åœ°å¥—ç”¨å¡å°”æ›¼æ»¤æ³¢çš„äº”ä¸ªæ ¸å¿ƒå…¬å¼ã€‚\nè¿‡ç¨‹æ¨¡å‹ï¼š$\\mathbf{x}_{k} = \\mathbf{F} \\mathbf{x}_{k-1} + \\mathbf{w}_{k-1}$\nçŠ¶æ€å‘é‡ $\\mathbf{x}_{k} = \\begin{bmatrix} y_k \\\\ y_{k-1} \\end{bmatrix}$ï¼Œä»£è¡¨ä¿¡å·å½“å‰å’Œä¸Šä¸€æ—¶åˆ»çš„çœŸå®å€¼ã€‚ çŠ¶æ€è½¬ç§»çŸ©é˜µ $\\mathbf{F} = \\begin{bmatrix} 2\\cos(\\omega) \u0026 -1 \\\\ 1 \u0026 0 \\end{bmatrix}$ï¼Œæè¿°äº†æ­£å¼¦æ³¢çš„å†…åœ¨æ¼”åŒ–è§„å¾‹ã€‚ è¿‡ç¨‹å™ªå£° $\\mathbf{w}_{k-1}$ ä»£è¡¨äº†æ¨¡å‹çš„ä¸ç¡®å®šæ€§ï¼ˆä¾‹å¦‚é¢‘ç‡çš„å¾®å°æ¼‚ç§»ï¼‰ï¼Œå…¶åæ–¹å·®ä¸º $\\mathbf{Q}$ã€‚ è§‚æµ‹æ¨¡å‹ï¼š$\\mathbf{z}_{k} = \\mathbf{H} \\mathbf{x}_{k} + \\mathbf{v}_{k}$\nè§‚æµ‹çŸ©é˜µ $\\mathbf{H} = \\begin{bmatrix} 1 \u0026 0 \\end{bmatrix}$ï¼Œè¡¨ç¤ºæˆ‘ä»¬åªèƒ½ç›´æ¥æµ‹é‡åˆ°ä¿¡å·çš„å½“å‰å€¼ã€‚ è§‚æµ‹å™ªå£° $\\mathbf{v}_{k}$ ä»£è¡¨äº†ä¼ æ„Ÿå™¨çš„æµ‹é‡è¯¯å·®ï¼Œå…¶åæ–¹å·®ä¸º $\\mathbf{R}$ã€‚ åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬åªéœ€æ ¹æ®ä¿¡å·çš„é¢‘ç‡ç¡®å®š $\\omega$ å¹¶è®¾ç½®å¥½ $\\mathbf{F}$ çŸ©é˜µï¼Œå†æ ¹æ®ç»éªŒè°ƒèŠ‚å™ªå£°åæ–¹å·® $\\mathbf{Q}$ å’Œ $\\mathbf{R}$ï¼Œå°±å¯ä»¥å®ç°å¯¹å¸¦å™ªæ­£å¼¦æ³¢çš„é«˜æ•ˆæ»¤æ³¢ã€‚\næ¡ˆä¾‹åˆ†æäºŒï¼šäºŒç»´å¹³é¢è¿åŠ¨è½¨è¿¹çš„ä¼°è®¡ä¸é¢„æµ‹ # åœ¨è®¸å¤šå®é™…åº”ç”¨ä¸­ï¼Œå¦‚é›·è¾¾è·Ÿè¸ªã€è§†é¢‘ç›‘æ§æˆ–æœºå™¨äººå¯¼èˆªï¼Œæˆ‘ä»¬éƒ½éœ€è¦æ ¹æ®ä¸€ç³»åˆ—ä¸ç²¾ç¡®çš„è§‚æµ‹ç‚¹æ¥ä¼°è®¡ç›®æ ‡çš„çœŸå®è¿åŠ¨è½¨è¿¹ã€‚æœ¬èŠ‚å°†ä»¥ä¸€ä¸ªåœ¨äºŒç»´å¹³é¢ä¸Šåšè¿‘ä¼¼åŒ€åŠ é€Ÿè¿åŠ¨çš„ç›®æ ‡ä¸ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•æ„å»ºå¡å°”æ›¼æ»¤æ³¢å™¨æ¥å®æ—¶ä¼°è®¡å…¶ç²¾ç¡®çš„ä½ç½®å’Œé€Ÿåº¦ï¼Œå¹¶å¯¹æœªæ¥ä½ç½®è¿›è¡Œé¢„æµ‹ã€‚\nå¯¹åº”ä»£ç  # è¯·ç›´æ¥ä¸‹è½½ï¼š 02_kalman_filter_2d_tracking.ipynb\nç¬¬ä¸€æ­¥ï¼šå»ºç«‹ç›®æ ‡çš„åŠ¨æ€æ¨¡å‹ # æˆ‘ä»¬å‡è®¾ç›®æ ‡åœ¨æ¯ä¸ªé‡‡æ ·æ—¶é—´é—´éš” $\\Delta t$ å†…ï¼Œå…¶åŠ é€Ÿåº¦æ˜¯è¿‘ä¼¼æ’å®šçš„ï¼Œä½†ä¼šå—åˆ°ä¸€äº›éšæœºæ‰°åŠ¨ï¼ˆä¾‹å¦‚ï¼Œè½»å¾®çš„æœºåŠ¨ã€ç©ºæ°”é˜»åŠ›å˜åŒ–ç­‰ï¼‰ã€‚åŸºäºç‰›é¡¿è¿åŠ¨å­¦å®šå¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹ç›®æ ‡çš„çŠ¶æ€æ¨¡å‹ã€‚\nå®šä¹‰çŠ¶æ€å‘é‡ $\\mathbf{x}_k$ ä¸ºäº†å®Œæ•´æè¿°ç›®æ ‡åœ¨äºŒç»´å¹³é¢ä¸Šçš„è¿åŠ¨çŠ¶æ€ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å®ƒçš„ä½ç½®å’Œé€Ÿåº¦ã€‚å› æ­¤ï¼ŒçŠ¶æ€å‘é‡åº”åŒ…å« $x$ å’Œ $y$ ä¸¤ä¸ªæ–¹å‘ä¸Šçš„ä½ç½®å’Œé€Ÿåº¦åˆ†é‡ï¼š\n$$ \\mathbf{x}_k = \\begin{bmatrix} p_{x,k} \\\\ p_{y,k} \\\\ v_{x,k} \\\\ v_{y,k} \\end{bmatrix} $$å…¶ä¸­ï¼Œ$p$ ä»£è¡¨ä½ç½® (position)ï¼Œ$v$ ä»£è¡¨é€Ÿåº¦ (velocity)ã€‚\næ„å»ºçŠ¶æ€è½¬ç§»çŸ©é˜µ $\\mathbf{F}$ çŠ¶æ€è½¬ç§»çŸ©é˜µ $\\mathbf{F}$ æè¿°äº†åœ¨æ²¡æœ‰å™ªå£°çš„æƒ…å†µä¸‹ï¼ŒçŠ¶æ€å¦‚ä½•ä» $k-1$ æ—¶åˆ»æ¼”åŒ–åˆ° $k$ æ—¶åˆ»ã€‚æ ¹æ®åŒ€åŠ é€Ÿè¿åŠ¨å…¬å¼ï¼š\n$p_k = p_{k-1} + v_{k-1}\\Delta t + \\frac{1}{2}a_{k-1}\\Delta t^2$ $v_k = v_{k-1} + a_{k-1}\\Delta t$ ä¸ºç®€åŒ–æ¨¡å‹ï¼Œæˆ‘ä»¬é€šå¸¸å°†åŠ é€Ÿåº¦ä½œä¸ºè¿‡ç¨‹å™ªå£°çš„ä¸€éƒ¨åˆ†æ¥å¤„ç†ï¼Œè€Œä¸æ˜¯ç›´æ¥æ”¾å…¥çŠ¶æ€å‘é‡ã€‚è¿™è¢«ç§°ä¸ºæ’é€Ÿæ¨¡å‹ (Constant Velocity, CV)ï¼Œå®ƒå‡è®¾åœ¨æ¯ä¸ª $\\Delta t$ å†…é€Ÿåº¦æ’å®šã€‚è¿™ä¸ªæ¨¡å‹è¶³ä»¥åº”å¯¹å¤§å¤šæ•°æœºåŠ¨æ€§ä¸å¼ºçš„ç›®æ ‡ã€‚\n$p_{x,k} = p_{x,k-1} + v_{x,k-1}\\Delta t$ $p_{y,k} = p_{y,k-1} + v_{y,k-1}\\Delta t$ $v_{x,k} = v_{x,k-1}$ $v_{y,k} = v_{y,k-1}$ å°†ä¸Šè¿°å…³ç³»å†™æˆçŸ©é˜µå½¢å¼ $\\mathbf{x}_k = \\mathbf{F} \\mathbf{x}_{k-1}$ï¼š\n$$ \\begin{bmatrix} p_{x,k} \\\\ p_{y,k} \\\\ v_{x,k} \\\\ v_{y,k} \\end{bmatrix} = \\begin{bmatrix} 1 \u0026 0 \u0026 \\Delta t \u0026 0 \\\\ 0 \u0026 1 \u0026 0 \u0026 \\Delta t \\\\ 0 \u0026 0 \u0026 1 \u0026 0 \\\\ 0 \u0026 0 \u0026 0 \u0026 1 \\end{bmatrix} \\begin{bmatrix} p_{x,k-1} \\\\ p_{y,k-1} \\\\ v_{x,k-1} \\\\ v_{y,k-1} \\end{bmatrix} $$å› æ­¤ï¼ŒçŠ¶æ€è½¬ç§»çŸ©é˜µä¸ºï¼š\n$$ \\mathbf{F} = \\begin{bmatrix} 1 \u0026 0 \u0026 \\Delta t \u0026 0 \\\\ 0 \u0026 1 \u0026 0 \u0026 \\Delta t \\\\ 0 \u0026 0 \u0026 1 \u0026 0 \\\\ 0 \u0026 0 \u0026 0 \u0026 1 \\end{bmatrix} $$ å®šä¹‰è¿‡ç¨‹å™ªå£°åæ–¹å·®çŸ©é˜µ $\\mathbf{Q}$ æ’é€Ÿæ¨¡å‹æ˜¯ä¸€ä¸ªè¿‘ä¼¼ã€‚ç›®æ ‡çš„å®é™…è¿åŠ¨ä¼šå› ä¸ºæœªå»ºæ¨¡çš„åŠ é€Ÿåº¦ï¼ˆéšæœºæ‰°åŠ¨ï¼‰è€Œåç¦»è¯¥æ¨¡å‹ã€‚è¿‡ç¨‹å™ªå£° $\\mathbf{w}_{k-1}$ æ­£æ˜¯ç”¨æ¥æè¿°è¿™ç§ä¸ç¡®å®šæ€§ã€‚\nä¸€ä¸ªå¸¸ç”¨çš„æ–¹æ³•æ˜¯å‡è®¾åŠ é€Ÿåº¦æ˜¯ä¸€ä¸ªé›¶å‡å€¼ã€æ–¹å·®ä¸º $\\sigma_a^2$ çš„éšæœºè¿‡ç¨‹ã€‚åŠ é€Ÿåº¦åœ¨ $\\Delta t$ æ—¶é—´å†…å¯¹ä½ç½®å’Œé€Ÿåº¦çš„å½±å“åˆ†åˆ«æ˜¯ $\\frac{1}{2}a\\Delta t^2$ å’Œ $a\\Delta t$ã€‚ç»è¿‡æ¨å¯¼ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªé€‚ç”¨äºç¦»æ•£æ—¶é—´ç³»ç»Ÿçš„è¿‡ç¨‹å™ªå£°åæ–¹å·®çŸ©é˜µ $\\mathbf{Q}$ï¼š\n$$ \\mathbf{Q} = \\begin{bmatrix} \\frac{\\Delta t^4}{4} \u0026 0 \u0026 \\frac{\\Delta t^3}{2} \u0026 0 \\\\ 0 \u0026 \\frac{\\Delta t^4}{4} \u0026 0 \u0026 \\frac{\\Delta t^3}{2} \\\\ \\frac{\\Delta t^3}{2} \u0026 0 \u0026 \\Delta t^2 \u0026 0 \\\\ 0 \u0026 \\frac{\\Delta t^3}{2} \u0026 0 \u0026 \\Delta t^2 \\end{bmatrix} \\sigma_a^2 $$å…¶ä¸­ $\\sigma_a^2$ æ˜¯ä¸€ä¸ªå¯è°ƒèŠ‚çš„è¶…å‚æ•°ï¼Œä»£è¡¨äº†æˆ‘ä»¬å¯¹ç›®æ ‡æœºåŠ¨èƒ½åŠ›ï¼ˆå³åŠ é€Ÿåº¦å˜åŒ–å‰§çƒˆç¨‹åº¦ï¼‰çš„é¢„ä¼°ã€‚$\\sigma_a^2$ è¶Šå¤§ï¼Œæ»¤æ³¢å™¨å¯¹æ¨¡å‹é¢„æµ‹çš„ä¿¡ä»»åº¦å°±è¶Šä½ï¼Œä»è€Œæ›´ä¾èµ–äºæµ‹é‡å€¼ã€‚\nç¬¬äºŒæ­¥ï¼šå®šä¹‰è§‚æµ‹æ¨¡å‹ # æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹å†…éƒ¨çŠ¶æ€ä¸å¤–éƒ¨æµ‹é‡ä¹‹é—´çš„å…³ç³»ã€‚\nå®šä¹‰è§‚æµ‹é‡ $\\mathbf{z}_k$ å‡è®¾æˆ‘ä»¬çš„ä¼ æ„Ÿå™¨ï¼ˆå¦‚ GPS æˆ–æ‘„åƒå¤´ï¼‰åªèƒ½ç›´æ¥æµ‹é‡ç›®æ ‡çš„ä½ç½®ï¼Œè€Œæ— æ³•ç›´æ¥æµ‹é‡å…¶é€Ÿåº¦ã€‚å› æ­¤ï¼Œè§‚æµ‹å‘é‡ä¸ºï¼š\n$$ \\mathbf{z}_k = \\begin{bmatrix} p_{x, measured} \\\\ p_{y, measured} \\end{bmatrix} $$ æ„å»ºè§‚æµ‹çŸ©é˜µ $\\mathbf{H}$ è§‚æµ‹çŸ©é˜µ $\\mathbf{H}$ çš„ä½œç”¨æ˜¯ä»çŠ¶æ€å‘é‡ $\\mathbf{x}_k$ ä¸­æå–å‡ºä¸è§‚æµ‹é‡ç›¸å¯¹åº”çš„éƒ¨åˆ†ã€‚\n$$ \\mathbf{z}_k \\approx \\mathbf{H} \\mathbf{x}_k = \\mathbf{H} \\begin{bmatrix} p_{x,k} \\\\ p_{y,k} \\\\ v_{x,k} \\\\ v_{y,k} \\end{bmatrix} $$ä¸ºäº†æå–å‡ºä½ç½®ä¿¡æ¯ $(p_{x,k}, p_{y,k})$ï¼Œ$\\mathbf{H}$ çŸ©é˜µåº”ä¸ºï¼š\n$$ \\mathbf{H} = \\begin{bmatrix} 1 \u0026 0 \u0026 0 \u0026 0 \\\\ 0 \u0026 1 \u0026 0 \u0026 0 \\end{bmatrix} $$ å®šä¹‰æµ‹é‡å™ªå£°åæ–¹å·®çŸ©é˜µ $\\mathbf{R}$ ä»»ä½•ä¼ æ„Ÿå™¨éƒ½å­˜åœ¨æµ‹é‡è¯¯å·®ã€‚æˆ‘ä»¬å‡è®¾ $x$ å’Œ $y$ æ–¹å‘çš„æµ‹é‡å™ªå£°æ˜¯ç‹¬ç«‹çš„ï¼Œå¹¶ä¸”éƒ½æœä»é«˜æ–¯åˆ†å¸ƒï¼Œå…¶æ–¹å·®åˆ†åˆ«ä¸º $\\sigma_x^2$ å’Œ $\\sigma_y^2$ã€‚è¿™äº›å€¼é€šå¸¸å¯ä»¥ä»ä¼ æ„Ÿå™¨çš„è§„æ ¼æ‰‹å†Œä¸­è·å¾—ã€‚\n$$ \\mathbf{R} = \\begin{bmatrix} \\sigma_x^2 \u0026 0 \\\\ 0 \u0026 \\sigma_y^2 \\end{bmatrix} $$ æ¨¡å‹æ€»ç»“ # é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬ä¸ºäºŒç»´ç›®æ ‡è·Ÿè¸ªé—®é¢˜æ„å»ºäº†å®Œæ•´çš„å¡å°”æ›¼æ»¤æ³¢æ¨¡å‹ï¼š\nè¿‡ç¨‹æ¨¡å‹ï¼š$\\mathbf{x}_{k} = \\mathbf{F} \\mathbf{x}_{k-1} + \\mathbf{w}_{k-1}$\nçŠ¶æ€å‘é‡ $\\mathbf{x}_{k}$ åŒ…å«äº†ä½ç½®å’Œé€Ÿåº¦ä¿¡æ¯ã€‚ çŠ¶æ€è½¬ç§»çŸ©é˜µ $\\mathbf{F}$ åŸºäºæ’é€Ÿè¿åŠ¨æ¨¡å‹ã€‚ è¿‡ç¨‹å™ªå£°åæ–¹å·® $\\mathbf{Q}$ åæ˜ äº†ç›®æ ‡éšæœºæœºåŠ¨çš„å¯èƒ½æ€§ã€‚ è§‚æµ‹æ¨¡å‹ï¼š$\\mathbf{z}_{k} = \\mathbf{H} \\mathbf{x}_{k} + \\mathbf{v}_{k}$\nè§‚æµ‹çŸ©é˜µ $\\mathbf{H}$ è¡¨æ˜æˆ‘ä»¬åªèƒ½æµ‹é‡åˆ°ä½ç½®ã€‚ æµ‹é‡å™ªå£°åæ–¹å·® $\\mathbf{R}$ ä»£è¡¨äº†ä¼ æ„Ÿå™¨çš„ç²¾åº¦ã€‚ å°†è¿™äº›çŸ©é˜µä»£å…¥å¡å°”æ›¼æ»¤æ³¢çš„äº”ä¸ªæ ¸å¿ƒå…¬å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¿­ä»£ï¼Œä»ä¸€ç³»åˆ—å¸¦å™ªå£°çš„ä½ç½®è§‚æµ‹ä¸­ï¼Œå¾—åˆ°å¹³æ»‘çš„ã€åŒ…å«é€Ÿåº¦ä¿¡æ¯çš„çŠ¶æ€ä¼°è®¡ï¼Œä»è€Œå®ç°å¯¹ç›®æ ‡è½¨è¿¹çš„ç²¾ç¡®è·Ÿè¸ªå’Œæœªæ¥ä½ç½®çš„çŸ­æœŸé¢„æµ‹ã€‚\næ¡ˆä¾‹åˆ†æä¸‰ï¼šä¸‰ç»´ç©ºé—´ä¸­çš„åˆšä½“å§¿æ€è·Ÿè¸ªé—®é¢˜ # å‰é¢ä¸¤ä¸ªæ¡ˆä¾‹å±•ç¤ºäº†å¡å°”æ›¼æ»¤æ³¢åœ¨çº¿æ€§ç³»ç»Ÿä¸­çš„å¼ºå¤§å¨åŠ›ã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬å°†ç›®å…‰æŠ•å‘æ›´å¤æ‚çš„ç°å®ä¸–ç•Œé—®é¢˜ï¼Œå¦‚æ— äººæœºé£è¡Œå§¿æ€ã€æœºå™¨äººæ‰‹è‡‚æœ«ç«¯æœå‘æˆ–å«æ˜Ÿåœ¨è½¨å§¿æ€çš„ä¼°è®¡æ—¶ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°ä¸€ä¸ªæ ¹æœ¬æ€§çš„æŒ‘æˆ˜ï¼š æ—‹è½¬è¿åŠ¨æœ¬è´¨ä¸Šæ˜¯éçº¿æ€§çš„ã€‚\næœ¬èŠ‚å°†æ¢è®¨ä¸ºä»€ä¹ˆä¸‰ç»´å§¿æ€è·Ÿè¸ªé—®é¢˜æ— æ³•ç›´æ¥å¥—ç”¨æ ‡å‡†å¡å°”æ›¼æ»¤æ³¢ï¼Œå¹¶ç®€è¿°è§£å†³æ­¤ç±»é—®é¢˜çš„åŸºæœ¬æ€è·¯ï¼Œä»¥æ­¤å±•ç¤ºæ ‡å‡† KF çš„å±€é™æ€§ï¼Œå¹¶å¼•å‡ºå¡å°”æ›¼æ»¤æ³¢å®¶æ—ä¸­çš„éçº¿æ€§åˆ†æ”¯ã€‚\nç¬¬ä¸€æ­¥ï¼šå§¿æ€çš„æ•°å­¦è¡¨ç¤º # ä¸ä½ç½®å¯ä»¥ç”¨ç®€å•çš„å‘é‡ $(x, y, z)$ è¡¨ç¤ºä¸åŒï¼Œæè¿°ä¸‰ç»´ç©ºé—´ä¸­çš„å§¿æ€ï¼ˆæ—‹è½¬ï¼‰è¦å¤æ‚å¾—å¤šã€‚å¸¸ç”¨çš„è¡¨ç¤ºæ–¹æ³•æœ‰ï¼š\næ¬§æ‹‰è§’ï¼ˆEuler Anglesï¼‰ï¼šå¦‚æ»šè½¬-ä¿¯ä»°-åèˆªè§’ $(\\phi, \\theta, \\psi)$ã€‚è¿™ç§è¡¨ç¤ºç›´è§‚ï¼Œä½†åœ¨ç‰¹å®šå§¿æ€ï¼ˆå¦‚ä¿¯ä»°è§’ä¸º Â±90Â°ï¼‰æ—¶ä¼šå‡ºç°ä¸‡å‘èŠ‚æ­»é”ï¼ˆGimbal Lockï¼‰é—®é¢˜ï¼Œå¯¼è‡´å¥‡å¼‚æ€§ï¼Œæ— æ³•æ­£ç¡®è¡¨ç¤ºæ—‹è½¬ã€‚ æ—‹è½¬çŸ©é˜µï¼ˆRotation Matrixï¼‰ï¼šä¸€ä¸ª 3x3 çš„æ­£äº¤çŸ©é˜µ $\\mathbf{C}$ã€‚å®ƒæ²¡æœ‰å¥‡å¼‚æ€§ï¼Œä½†æœ‰ 9 ä¸ªå‚æ•°ï¼Œè€Œå§¿æ€åªæœ‰ 3 ä¸ªè‡ªç”±åº¦ï¼Œè¿™å¸¦æ¥äº†å†—ä½™å’Œçº¦æŸï¼ˆ$\\mathbf{C}^T\\mathbf{C} = \\mathbf{I}, \\det(\\mathbf{C})=1$ï¼‰ï¼Œè®¡ç®—å¤æ‚ã€‚ å››å…ƒæ•°ï¼ˆQuaternionï¼‰ï¼šä¸€ä¸ªå››ç»´å‘é‡ $\\mathbf{q} = [q_w, q_x, q_y, q_z]^T$ï¼Œæ»¡è¶³èŒƒæ•°ä¸º 1 çš„çº¦æŸï¼ˆ$||\\mathbf{q}||=1$ï¼‰ã€‚å®ƒæ—¢æ²¡æœ‰å¥‡å¼‚æ€§ï¼Œä¹Ÿæ¯”æ—‹è½¬çŸ©é˜µæ›´ç´§å‡‘ï¼Œè®¡ç®—æ•ˆç‡é«˜ï¼Œæ˜¯å§¿æ€åŠ¨åŠ›å­¦ä¸­æœ€å¸¸ç”¨çš„è¡¨ç¤ºæ–¹æ³•ã€‚ æ— è®ºé€‰æ‹©å“ªç§è¡¨ç¤ºï¼Œå§¿æ€çš„æ¼”åŒ–è§„å¾‹éƒ½æ— æ³•ç”¨ä¸€ä¸ªç®€å•çš„çº¿æ€§æ–¹ç¨‹ $\\mathbf{x}_k = \\mathbf{F}\\mathbf{x}_{k-1}$ æ¥æè¿°ã€‚\nç¬¬äºŒæ­¥ï¼šéçº¿æ€§çš„æ ¹æºâ€”â€”å§¿æ€è¿åŠ¨å­¦ # åˆšä½“çš„å§¿æ€å˜åŒ–ç‡ï¼ˆè§’é€Ÿåº¦ï¼‰ä¸å§¿æ€æœ¬èº«çš„å…³ç³»æ˜¯éçº¿æ€§çš„ã€‚ä»¥å››å…ƒæ•°ä¸ºä¾‹ï¼Œå…¶éšæ—¶é—´å˜åŒ–çš„å¾®åˆ†æ–¹ç¨‹ä¸ºï¼š\n$$ \\dot{\\mathbf{q}}(t) = \\frac{1}{2} \\mathbf{\\Omega}(\\boldsymbol{\\omega}(t)) \\mathbf{q}(t) $$å…¶ä¸­ï¼Œ$\\mathbf{q}(t)$ æ˜¯å§¿æ€å››å…ƒæ•°ï¼Œ$\\boldsymbol{\\omega}(t) = [\\omega_x, \\omega_y, \\omega_z]^T$ æ˜¯æœºä½“åæ ‡ç³»ä¸‹çš„è§’é€Ÿåº¦å‘é‡ï¼Œè€Œ $\\mathbf{\\Omega}(\\boldsymbol{\\omega})$ æ˜¯ä¸€ä¸ªä¸è§’é€Ÿåº¦ç›¸å…³çš„æ–œå¯¹ç§°çŸ©é˜µï¼š\n$$ \\mathbf{\\Omega}(\\boldsymbol{\\omega}) = \\begin{bmatrix} 0 \u0026 -\\omega_x \u0026 -\\omega_y \u0026 -\\omega_z \\\\ \\omega_x \u0026 0 \u0026 \\omega_z \u0026 -\\omega_y \\\\ \\omega_y \u0026 -\\omega_z \u0026 0 \u0026 \\omega_x \\\\ \\omega_z \u0026 \\omega_y \u0026 -\\omega_x \u0026 0 \\end{bmatrix} $$è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„éçº¿æ€§å¾®åˆ†æ–¹ç¨‹ï¼Œå› ä¸ºçŠ¶æ€çš„å¯¼æ•° $\\dot{\\mathbf{q}}$ æ˜¯çŠ¶æ€ $\\mathbf{q}$ å’Œè¾“å…¥ $\\boldsymbol{\\omega}$ çš„ä¹˜ç§¯ã€‚å°†å…¶ç¦»æ•£åŒ–åï¼Œå¾—åˆ°çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ $\\mathbf{q}_k = f(\\mathbf{q}_{k-1}, \\boldsymbol{\\omega}_{k-1})$ ä¹Ÿæ˜¯ä¸€ä¸ªå¤æ‚çš„éçº¿æ€§å‡½æ•°ï¼Œæ— æ³•è¡¨ç¤ºä¸º $\\mathbf{F}\\mathbf{q}_{k-1}$ çš„å½¢å¼ã€‚\nç¬¬ä¸‰æ­¥ï¼šéçº¿æ€§çš„è§‚æµ‹æ¨¡å‹ # å§¿æ€çš„è§‚æµ‹é€šå¸¸ä¹Ÿå‘ˆéçº¿æ€§ã€‚ä¾‹å¦‚ï¼Œæ— äººæœºé€šè¿‡åŠ é€Ÿåº¦è®¡å’Œç£åŠ›è®¡æ¥ç¡®å®šå§¿æ€ï¼š\nåŠ é€Ÿåº¦è®¡ï¼šåœ¨é™æ­¢æ—¶æµ‹é‡é‡åŠ›å‘é‡ $\\mathbf{g}$ çš„æ–¹å‘ã€‚ ç£åŠ›è®¡ï¼šæµ‹é‡åœ°çƒç£åœºå‘é‡ $\\mathbf{m}$ çš„æ–¹å‘ã€‚ å½“æ— äººæœºå§¿æ€ä¸º $\\mathbf{q}$ æ—¶ï¼Œå®ƒåœ¨æœºä½“åæ ‡ç³»ä¸‹è§‚æµ‹åˆ°çš„é‡åŠ›å‘é‡ $\\mathbf{a}_{body}$ å’Œç£åœºå‘é‡ $\\mathbf{m}_{body}$ æ˜¯é€šè¿‡å§¿æ€å°†ä¸–ç•Œåæ ‡ç³»ä¸‹çš„å‚è€ƒå‘é‡ $\\mathbf{g}_{world}$ å’Œ $\\mathbf{m}_{world}$ æ—‹è½¬å¾—åˆ°çš„ã€‚è¿™ä¸ªæ—‹è½¬æ“ä½œæœ¬èº«å°±æ˜¯éçº¿æ€§çš„ã€‚è§‚æµ‹æ¨¡å‹å¯ä»¥å†™ä¸ºï¼š\n$$ \\mathbf{z}_k = \\begin{bmatrix} \\mathbf{a}_{body} \\\\ \\mathbf{m}_{body} \\end{bmatrix} = h(\\mathbf{q}_k) + \\mathbf{v}_k = \\begin{bmatrix} \\mathbf{C}(\\mathbf{q}_k)^T \\mathbf{g}_{world} \\\\ \\mathbf{C}(\\mathbf{q}_k)^T \\mathbf{m}_{world} \\end{bmatrix} + \\mathbf{v}_k $$å…¶ä¸­ $\\mathbf{C}(\\mathbf{q}_k)$ æ˜¯ä»å››å…ƒæ•° $\\mathbf{q}_k$ è½¬æ¢å¾—åˆ°çš„æ—‹è½¬çŸ©é˜µã€‚æ˜¾ç„¶ï¼Œè¿™é‡Œçš„è§‚æµ‹å‡½æ•° $h(\\cdot)$ æ˜¯ä¸€ä¸ªå¤æ‚çš„éçº¿æ€§å‡½æ•°ï¼Œæ— æ³•ç”¨ä¸€ä¸ªå›ºå®šçš„è§‚æµ‹çŸ©é˜µ $\\mathbf{H}$ æ¥è¡¨ç¤ºã€‚\næŒ‘æˆ˜ä¸è§£å†³æ€è·¯ # ç”±äºè¿‡ç¨‹æ¨¡å‹ $f(\\cdot)$ å’Œè§‚æµ‹æ¨¡å‹ $h(\\cdot)$ éƒ½æ˜¯éçº¿æ€§çš„ï¼Œæ ‡å‡†å¡å°”æ›¼æ»¤æ³¢çš„åŸºçŸ³â€”â€”çº¿æ€§å‡è®¾â€”â€”è¢«æ‰“ç ´äº†ã€‚é«˜æ–¯åˆ†å¸ƒç»è¿‡éçº¿æ€§å˜æ¢åä¸å†æ˜¯é«˜æ–¯åˆ†å¸ƒï¼Œè¿™ä½¿å¾—åæ–¹å·®çŸ©é˜µçš„ä¼ æ’­å’Œæ›´æ–°å…¬å¼å¤±æ•ˆã€‚\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå·¥ç¨‹å¸ˆå’Œæ•°å­¦å®¶ä»¬å‘å±•å‡ºäº†å¡å°”æ›¼æ»¤æ³¢çš„éçº¿æ€§æ‰©å±•ç‰ˆæœ¬ï¼š\næ‰©å±•å¡å°”æ›¼æ»¤æ³¢ (Extended Kalman Filter, EKF)\næ ¸å¿ƒæ€æƒ³ï¼šåœ¨å½“å‰çŠ¶æ€çš„ä¼°è®¡å€¼é™„è¿‘ï¼Œä½¿ç”¨æ³°å‹’çº§æ•°å±•å¼€å°†éçº¿æ€§å‡½æ•° $f(\\cdot)$ å’Œ $h(\\cdot)$ çº¿æ€§åŒ–ã€‚å…·ä½“æ¥è¯´ï¼Œæ˜¯ç”¨å®ƒä»¬çš„é›…å¯æ¯”çŸ©é˜µ (Jacobian Matrix) æ¥ä»£æ›¿æ ‡å‡† KF ä¸­çš„ $\\mathbf{F}$ å’Œ $\\mathbf{H}$ çŸ©é˜µã€‚ ä¼˜ç‚¹ï¼šå®ç°ç›¸å¯¹ç®€å•ï¼Œè®¡ç®—é‡é€‚ä¸­ã€‚ ç¼ºç‚¹ï¼šçº¿æ€§åŒ–ä¼šå¼•å…¥æˆªæ–­è¯¯å·®ï¼Œä»…åœ¨ç³»ç»Ÿâ€œè¿‘ä¼¼çº¿æ€§â€æ—¶æ•ˆæœè¾ƒå¥½ã€‚å¯¹äºå¼ºéçº¿æ€§ç³»ç»Ÿï¼Œå¯èƒ½ä¼šå¯¼è‡´æ»¤æ³¢å‘æ•£ã€‚ æ— è¿¹å¡å°”æ›¼æ»¤æ³¢ (Unscented Kalman Filter, UKF)\næ ¸å¿ƒæ€æƒ³ï¼šæ”¾å¼ƒç›´æ¥å¯¹éçº¿æ€§å‡½æ•°è¿›è¡Œçº¿æ€§åŒ–ï¼Œè€Œæ˜¯é‡‡ç”¨ä¸€ç§æ›´å·§å¦™çš„æ–¹æ³•â€”â€”æ— è¿¹å˜æ¢ (Unscented Transform)ã€‚å®ƒé€šè¿‡ä¸€ç»„ç²¾å¿ƒé€‰æ‹©çš„â€œSigma ç‚¹â€æ¥è¿‘ä¼¼çŠ¶æ€çš„æ¦‚ç‡åˆ†å¸ƒï¼Œå°†è¿™äº›ç‚¹é€šè¿‡çœŸå®çš„éçº¿æ€§å‡½æ•°ä¼ é€’ï¼Œç„¶åé‡æ–°è®¡ç®—å˜æ¢åçš„å‡å€¼å’Œåæ–¹å·®ã€‚ ä¼˜ç‚¹ï¼šç²¾åº¦é€šå¸¸æ¯” EKF é«˜ï¼ˆè‡³å°‘åˆ°äºŒé˜¶ï¼‰ï¼Œæ— éœ€è®¡ç®—å¤æ‚çš„é›…å¯æ¯”çŸ©é˜µï¼Œå¯¹å¼ºéçº¿æ€§ç³»ç»Ÿæ›´é²æ£’ã€‚ ç¼ºç‚¹ï¼šè®¡ç®—é‡æ¯” EKF ç¨å¤§ï¼Œå‚æ•°é€‰æ‹©ï¼ˆå¦‚ Sigma ç‚¹çš„åˆ†å¸ƒå‚æ•°ï¼‰éœ€è¦ä¸€äº›ç»éªŒã€‚ æ€»ç»“ # ä¸‰ç»´å§¿æ€è·Ÿè¸ªé—®é¢˜æ˜¯é€šå‘é«˜çº§æ»¤æ³¢ç®—æ³•çš„é—¨æˆ·ã€‚å®ƒæ·±åˆ»åœ°æ­ç¤ºäº†æ ‡å‡†å¡å°”æ›¼æ»¤æ³¢çš„é€‚ç”¨è¾¹ç•Œï¼Œå¹¶æ¸…æ™°åœ°æŒ‡æ˜äº†å­¦ä¹ è·¯å¾„ï¼šå½“é¢ä¸´éçº¿æ€§ç³»ç»Ÿæ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä» EKF å’Œ UKF ç­‰å·¥å…·ç®±ä¸­å¯»æ‰¾è§£å†³æ–¹æ¡ˆã€‚è¿™æ­£æ˜¯å¡å°”æ›¼æ»¤æ³¢å®¶æ—å¦‚æ­¤åºå¤§ä¸”å……æ»¡æ´»åŠ›çš„åŸå› æ‰€åœ¨ã€‚\nç»“è¯­ # è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œæ•´åœ°èµ°è¿‡äº†æ ‡å‡†å¡å°”æ›¼æ»¤æ³¢ï¼ˆKFï¼‰çš„â€œæ·±å…¥æµ…å‡ºâ€ä¹‹æ—…ã€‚ä»å…¶ä½œä¸ºè´å¶æ–¯æ»¤æ³¢åœ¨çº¿æ€§é«˜æ–¯ç³»ç»Ÿä¸‹çš„ç‰¹ä¾‹å‡ºå‘ï¼Œæˆ‘ä»¬è¯¦ç»†æ¨å¯¼äº†é¢„æµ‹ä¸æ›´æ–°ä¸¤å¤§é˜¶æ®µçš„äº”ä¸ªæ ¸å¿ƒå…¬å¼ã€‚é€šè¿‡ä¸€ç»´æ­£å¼¦æ³¢è¿½è¸ªå’ŒäºŒç»´å¹³é¢è¿åŠ¨è·Ÿè¸ªè¿™ä¸¤ä¸ªç»å…¸æ¡ˆä¾‹ï¼Œæˆ‘ä»¬ä¸ä»…å·©å›ºäº†ç†è®ºçŸ¥è¯†ï¼Œæ›´å­¦ä¼šäº†å¦‚ä½•å°†å®é™…é—®é¢˜æŠ½è±¡ã€å»ºæ¨¡ä¸ºå¡å°”æ›¼æ»¤æ³¢èƒ½å¤Ÿå¤„ç†çš„çŠ¶æ€ç©ºé—´å½¢å¼ã€‚\nç„¶è€Œï¼Œæ­£å¦‚ç¬¬ä¸‰ä¸ªæ¡ˆä¾‹â€œä¸‰ç»´ç©ºé—´å§¿æ€è·Ÿè¸ªâ€æ‰€æ­ç¤ºçš„ï¼Œç°å®ä¸–ç•Œä¸­å……æ»¡äº†éçº¿æ€§é—®é¢˜ã€‚å½“ç³»ç»Ÿçš„çŠ¶æ€è½¬ç§»æˆ–è§‚æµ‹è¿‡ç¨‹æ— æ³•ç”¨ç®€å•çš„çŸ©é˜µä¹˜æ³•æ¥æè¿°æ—¶ï¼Œæ ‡å‡†å¡å°”æ›¼æ»¤æ³¢çš„çº¿æ€§å‡è®¾ä¾¿ä¸å†æˆç«‹ï¼Œå…¶æ€§èƒ½ä¹Ÿä¼šæ€¥å‰§ä¸‹é™ç”šè‡³å‘æ•£ã€‚\nè¿™æ°æ°æ˜¯å¡å°”æ›¼æ»¤æ³¢å®¶æ—ç²¾å½©çš„å»¶ä¼¸æ‰€åœ¨ã€‚ä¸ºäº†åº”å¯¹éçº¿æ€§æŒ‘æˆ˜ï¼Œç ”ç©¶è€…ä»¬æå‡ºäº†å¤šç§è¿‘ä¼¼æœ€ä¼˜çš„è§£å†³æ–¹æ¡ˆï¼Œå…¶ä¸­æœ€è´Ÿç››åçš„ä¾¿æ˜¯æ‰©å±•å¡å°”æ›¼æ»¤æ³¢ (Extended Kalman Filter, EKF) å’Œæ— è¿¹å¡å°”æ›¼æ»¤æ³¢ (Unscented Kalman Filter, UKF) ã€‚\nå¸Œæœ›æœ¬æ–‡ä¸ºä½ æ‰“å¼€äº†é€šå¾€çŠ¶æ€ä¼°è®¡ç†è®ºçš„å¤§é—¨ã€‚åœ¨â€œå¸¸è§ç®—æ³•æ·±å…¥æµ…å‡ºâ€ç³»åˆ—çš„ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†ç»§ç»­æ·±å…¥æ¢ç´¢ EKF ä¸ UKF çš„ä¸–ç•Œï¼Œè§£å¼€å®ƒä»¬åœ¨éçº¿æ€§ç³»ç»Ÿä¸­çš„æ»¤æ³¢ä¹‹è°œã€‚\nå‚è€ƒèµ„æ–™ # ç‚¹å‡»å±•å¼€æŸ¥çœ‹å‚è€ƒèµ„æ–™ æ·±å…¥æµ…å‡ºç†è§£å¡å°”æ›¼æ»¤æ³¢ã€å®ä¾‹ã€å…¬å¼ã€ä»£ç å’Œå›¾ã€‘ wikipedia-zh-å¡å°”æ›¼æ»¤æ³¢ ä»æ”¾å¼ƒåˆ°ç²¾é€šï¼å¡å°”æ›¼æ»¤æ³¢ä»ç†è®ºåˆ°å®è·µ~ GitHub-pykalman è§£å¯†å¡å°”æ›¼æ»¤æ³¢(Kalman Filter)ç®—æ³•ï¼šæ·±å…¥è§£æå¡å°”æ›¼æ»¤æ³¢ç®—æ³•åŸç†ä¸åœ¨çº¿å¯è§†åŒ–å®ä¾‹ DR_CAN å¡å°”æ›¼æ»¤æ³¢å™¨ç³»åˆ—è§†é¢‘ ","date":"2025å¹´9æœˆ19æ—¥","externalUrl":null,"permalink":"/posts/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E5%8D%A1%E5%B0%94%E6%9B%BC%E6%BB%A4%E6%B3%A2/","section":"æ–‡ç« ","summary":"","title":"æ·±å…¥æµ…å‡ºå¡å°”æ›¼æ»¤æ³¢","type":"posts"},{"content":" ä¸€ã€æ±‚æé™å…¥é—¨ # 1. é«˜ä¸­å¸¸ç”¨æ•°åˆ—å…¬å¼ # ç­‰å·®æ•°åˆ—å‰ $n$ é¡¹å’Œ: $1+2+3+\\cdots+n=\\frac{n(n+1)}{2}$ ç­‰æ¯”æ•°åˆ—å‰ $n$ é¡¹å’Œ: $a_1+a_1q+\\cdots+a_1q^{n-1}=\\frac{a_1(1-q^n)}{1-q}$ ç­‰æ¯”æ•°åˆ—å‰ $n$ é¡¹å’Œçš„æé™ $(|q|\u003c1)$: $$\\lim_{n \\to \\infty}(a_1+a_1q+\\cdots+a_1q^{n-1})=\\lim_{n \\to \\infty}\\frac{a_1(1-q^n)}{1-q}=\\frac{a_1}{1-q}\\quad(|q|\u003c1)$$ 2. æ— ç©·å°é‡ # è‹¥ $\\lim_{x \\to x_0}f(x)=0$ï¼Œåˆ™ç§° $f(x)$ æ˜¯ $x \\to x_0$ æ—¶çš„æ— ç©·å°ã€‚\n3. æ¶‰åŠæ— ç©·å¤§ã€æ— ç©·å°çš„è¿ç®— # æ¶‰åŠæ— ç©·å¤§ï¼Œä»…â€œæ— ç©·å¤§ä¹˜æ— ç©·å¤§â€ç¡®å®šä¸ºæ— ç©·å¤§ï¼› å…¶ä»–æƒ…å†µæ­£å¸¸ç®—\né¢å¤–è¯´æ˜ï¼šæ•°å­—0å’Œæé™0(æ— ç©·å°é‡) $\\lim_{x \\to \\infty} (0 \\cdot x) = 0$ï¼Œå…¶ä¸­$(0 \\cdot x)$ä¸­çš„ 0 æ˜¯æ•°å­— 0 è€Œ$\\lim_{x \\to 0}(x \\cdot \\ln x) = 0$ï¼Œå…¶ä¸­$x$æ˜¯æé™ 0(æ— ç©·å°é‡)ï¼Œæ•´ä¸ªæé™ä¸ºâ€œ$0 \\cdot \\infty$â€æœªå®šå‹ï¼Œéœ€è¦é¢å¤–è®¡ç®— 4. è§£æé™æ¯ä¸€æ­¥å‰å…ˆâ€œåˆ¤æ–­æé™ç±»å‹â€ # 7 ç§æœªå®šå‹ï¼š $\\frac{0}{0}$ $\\frac{\\infty}{\\infty}$ $\\infty - \\infty$ $0 \\cdot \\infty$ $1^\\infty$ $0^0$ $\\infty^0$ å·²å®šå¼ ä»£å…¥å¾—ç»“æœ 5. æé™çš„å››åˆ™è¿ç®— # å½“$x \\to x_0$æ—¶ï¼Œè‹¥$\\lim_{x \\to x_0}f(x)=A$ï¼Œ$\\lim_{x \\to x_0}g(x)=B$ï¼Œåˆ™å¯æ­£å¸¸å››åˆ™è¿ç®—\n6. æé™æ‹†åˆ† # ç†è®ºï¼šä¸¤ä¸ªæé™éƒ½å­˜åœ¨æ‰èƒ½æ‹†åˆ†\nå®é™…è§£é¢˜æé™å¯æ‹†ï¼š\nä¸¤é¡¹ç›¸åŠ å‡ éƒ½å­˜åœ¨ ä¸€ä¸ªå­˜åœ¨ï¼Œä¸€ä¸ªæ— ç©·å¤§ ä¸¤é¡¹ç›¸ä¹˜é™¤ éƒ½å­˜åœ¨ æœ‰ä¸€ä¸ªéé›¶å­˜åœ¨ è¾¨æï¼šä¸ºä»€ä¹ˆä¹¦ä¸Šè¯´åªæœ‰ä¸¤ä¸ªæé™éƒ½å­˜åœ¨æ‰èƒ½æ‹†åˆ†ï¼Œä½†æ˜¯åšé¢˜æ±‚æé™æ—¶æˆ‘ä»¬ä¸è¦æ±‚è¿™æ ·å‘¢ï¼Ÿ ä¸¤é¡¹ç›¸åŠ å‡æ—¶ï¼Œä¸ºä»€ä¹ˆâ€œä¸€ä¸ªå­˜åœ¨ï¼Œä¸€ä¸ªæ— ç©·å¤§â€å¯ä»¥æ‹†åˆ†ï¼Ÿ\nè‹¥ $\\lim f(x)=A$ï¼Œ$\\lim g(x)=\\infty$ï¼Œ\nåˆ™ $\\lim [f(x)+g(x)]=\\lim f(x)+\\lim g(x)=A+\\infty=\\infty$\nè¿™å®é™…ä¸Šä¸æ˜¯æ ‡å‡†çš„æé™\u0026quot;æ‹†åˆ†\u0026quot;ï¼Œè€Œæ˜¯åˆ©ç”¨äº†ä»¥ä¸‹æ€§è´¨ï¼š\n$$ æœ‰é™å€¼ Â± æ— ç©·å¤§ = Â± æ— ç©·å¤§ $$ä¾‹å¦‚ï¼Œè‹¥ $\\lim f(x) = 5$ ä¸” $\\lim g(x) = \\infty$ï¼Œåˆ™ $\\lim[f(x) + g(x)] = \\infty$\nè¿™ä¸è¿èƒŒåŸç†ï¼Œè€Œæ˜¯å¯¹æ— ç©·å¤§æƒ…å†µçš„ç‰¹æ®Šå¤„ç†ã€‚\næ‰€ä»¥ï¼Œä¸¤é¡¹ç›¸åŠ å‡æ—¶ï¼Œâ€œä¸€ä¸ªå­˜åœ¨ï¼Œä¸€ä¸ªæ— ç©·å¤§â€å°±å¯ä»¥æ‹†åˆ†\nä¸¤é¡¹ç›¸ä¹˜é™¤æ—¶ï¼Œä¸ºä»€ä¹ˆâ€œæœ‰ä¸€ä¸ªéé›¶å­˜åœ¨â€å°±å¯ä»¥æ‹†åˆ†ï¼Ÿ\nåœ¨ä¹˜é™¤æ³•çš„æé™è¿ç®—ä¸­ï¼Œ\u0026ldquo;æœ‰ä¸€ä¸ªéé›¶å­˜åœ¨\u0026quot;å¯ä»¥æ‹†åˆ†æ˜¯å› ä¸ºå­˜åœ¨ä»¥ä¸‹ç‰¹æ®Šæƒ…å†µå¤„ç†è§„åˆ™ï¼š\nä¹˜æ³•æƒ…å†µ\nä¸€ä¸ªæé™ä¸ºéé›¶æœ‰é™å€¼ï¼Œå¦ä¸€ä¸ªä¸ºä¸å­˜åœ¨\nè‹¥ $\\lim f(x)=A \\neq 0$ï¼Œ\nåˆ™ $\\lim [f(x)\\cdot g(x)]=\\lim f(x) \\cdot \\lim g(x)=A\\cdot\\lim g(x)$\né™¤æ³•æƒ…å†µ\nåˆ†å­æé™ä¸ºæœ‰é™å€¼ï¼Œåˆ†æ¯æé™ä¸ºä¸å­˜åœ¨\nè‹¥ $\\lim f(x) = A$ï¼ˆæœ‰é™å€¼ï¼‰ï¼Œ\nåˆ™ $\\lim\\frac{f(x)}{g(x)} = \\frac{A}{\\lim g(x)}$\næ³¨ï¼šåˆ†å­æé™å­˜åœ¨æ—¶ç‰¹åˆ«åŒ…æ‹¬$A=0$ åˆ†å­æé™ä¸ºä¸å­˜åœ¨ï¼Œåˆ†æ¯æé™ä¸ºéé›¶æœ‰é™å€¼\nè‹¥ $\\lim g(x) = B \\neq 0$ï¼Œ\nåˆ™ $\\lim\\frac{f(x)}{g(x)} = \\frac{\\lim f(x)}{B}$\næ‰€ä»¥ï¼Œä¸¤é¡¹ç›¸ä¹˜é™¤æ—¶ï¼Œâ€œæœ‰ä¸€ä¸ªéé›¶å­˜åœ¨â€å°±å¯ä»¥æ‹†åˆ†\n7. æé™å­˜åœ¨å……è¦æ¡ä»¶ # æé™å­˜åœ¨å……è¦æ¡ä»¶ï¼šâ€œå·¦å³æé™å­˜åœ¨ä¸”ç›¸ç­‰â€\nã€å¸¸ç”¨åä¾‹æˆåˆ†ã€‘å¸¸è§å·¦å³æé™ä¸ç›¸ç­‰æƒ…å†µ è€ƒç ”ä¸­å¸¸è§çš„åŒºåˆ†å·¦å³æé™çš„æƒ…å†µï¼š\n$$ \\lim_{x \\to \\infty} e^x = \\begin{cases} \\lim_{x \\to +\\infty} e^x = +\\infty, \\\\\\\\ \\lim_{x \\to -\\infty} e^x = 0. \\end{cases} $$ $$ \\lim_{x \\to \\infty} \\arctan x = \\begin{cases} \\lim_{x \\to +\\infty} \\arctan x = \\frac{\\pi}{2}, \\\\\\\\ \\lim_{x \\to -\\infty} \\arctan x = -\\frac{\\pi}{2}. \\end{cases} $$ $$ \\lim_{x \\to 0} |x| = \\begin{cases} \\lim_{x \\to 0^+} x, \\\\\\\\ \\lim_{x \\to 0^-} (-x). \\end{cases} $$ $$ F(x) = \\begin{cases} f(x) \u0026 x \\ge x_0 \\\\\\\\ g(x) \u0026 x \u003c x_0 \\end{cases} \\hspace{10pt} [f(x) \\neq g(x)] $$ $$ \\lim_{x \\to x_0} F(x) = \\begin{cases} \\lim_{x \\to x_0^+} f(x), \\\\\\\\ \\lim_{x \\to x_0^-} g(x). \\end{cases} $$ 8. æé™ä¸å­˜åœ¨ä¸æé™æ— ç©·å¤§çš„å…³ç³» # â€œæé™ä¸å­˜åœ¨åŒ…æ‹¬æé™æ— ç©·å¤§çš„æƒ…å†µâ€\næé™ä¸å­˜åœ¨ä¸‰ç§æƒ…å†µ æé™ä¸å­˜åœ¨åŒ…æ‹¬ï¼š\næé™ä¸ºæ— ç©·å¤§ å·¦æé™å’Œå³æé™ä¸ç›¸ç­‰ æé™éœ‡è¡ä¸å­˜åœ¨ äºŒã€åˆ©ç”¨æ³°å‹’å…¬å¼æ±‚æé™ # 1. éº¦å…‹åŠ³æ—å…¬å¼ï¼ˆæ³°å‹’å…¬å¼åœ¨$x_0=0$æ—¶çš„ç‰¹æ®Šå½¢å¼ï¼‰ # $$ f(x) = f(0) + f'(0)x + \\cdots + \\frac{f^{(n)}(0)}{n!}x^n + o(x^n) $$ 2. æ³°å‹’å…¬å¼æ±‚æé™è§£é¢˜åŸåˆ™ï¼š(k ç¡®å®š)ä¸Šä¸‹åŒé˜¶ã€(k ä¸ç¡®å®š)æŠµæ¶ˆä¸äº† # ä¸Šä¸‹åŒé˜¶ï¼šå¦‚æœåˆ†å¼ä¸­åˆ†å­æˆ–åˆ†æ¯ä¸­æœ‰ä¸€ä¸ªé˜¶æ•°ç¡®å®šï¼Œé‚£ä¹ˆå¦å¤–ä¸€éƒ¨åˆ†éœ€è¦å±•å¼€åˆ°è¿™ä¸ªç¡®å®šé˜¶æ•°çš„åŒé˜¶ã€‚ æŠµæ¶ˆä¸äº†ï¼šå¦‚æœåˆ†å¼ä¸­åˆ†å­æˆ–åˆ†æ¯ä¸­é˜¶æ•°éƒ½ä¸ç¡®å®šï¼Œé‚£ä¹ˆå®ƒä»¬è¦å±•å¼€åˆ°å½¼æ­¤æŠµæ¶ˆä¸äº†çš„å¹‚æ¬¡ä¸ºæ­¢ã€‚ 3. å¸¸è§çš„éº¦å…‹åŠ³æ—å…¬å¼ï¼ˆ7 ç»„ 14 ä¸ªï¼‰ # ç±»åˆ« å¸¸ç”¨éº¦å…‹åŠ³æ—å…¬å¼ ä¸€ã€åˆ†å¼ å‡½æ•°å±•å¼€å¼$\\frac{1}{1-x}$$=1+x+x^2+\\cdots+x^n+o(x^n)$$\\frac{1}{1+x}$$=1-x+x^2-\\cdots+(-1)^{n}x^n+o(x^n)$ äºŒã€å¯¹æ•°å‡½æ•° å‡½æ•°å±•å¼€å¼$\\ln(1+x)$$=x-\\frac{x^2}{2}+\\frac{x^3}{3}-\\cdots+(-1)^{n-1}\\frac{x^n}{n}+o(x^n)$$\\ln(1-x)$$=-x-\\frac{x^2}{2}-\\frac{x^3}{3}-\\cdots-\\frac{x^n}{n}+o(x^n)$$-\\ln(1-x)$$=x+\\frac{x^2}{2}+\\frac{x^3}{3}+\\cdots+\\frac{x^n}{n}+o(x^n)$ ä¸‰ã€åˆ†å¼ (å¶æ¬¡å¹‚) å‡½æ•°å±•å¼€å¼$\\frac{1}{1-x^2}$$=1+x^2+x^4+\\cdots+x^{2n}+o(x^{2n+1})$$\\frac{1}{1+x^2}$$=1-x^2+x^4-\\cdots+(-1)^{n}x^{2n}+o(x^{2n+1})$ å››ã€ä¸‰è§’ä¸åä¸‰è§’ (å¸¸ç”¨) å‡½æ•°å±•å¼€å¼ (å¸¸ç”¨å‰å‡ é¡¹)$\\arctan x$$=x-\\frac{x^3}{3}+o(x^3)$$\\tan x$$=x+\\frac{x^3}{3}+o(x^3)$$\\arcsin x$$=x+\\frac{x^3}{6}+o(x^3)$ äº”ã€åŸºæœ¬ä¸‰è§’å‡½æ•° å‡½æ•°å±•å¼€å¼$\\sin x$$=x-\\frac{x^3}{3!}+\\frac{x^5}{5!}-\\cdots+(-1)^{n}\\frac{x^{2n+1}}{(2n+1)!}+o(x^{2n+1})$$\\cos x$$=1-\\frac{x^2}{2!}+\\frac{x^4}{4!}-\\cdots+(-1)^{n}\\frac{x^{2n}}{(2n)!}+o(x^{2n})$ å…­ã€äºŒé¡¹å¼ $(1+x)^{\\alpha}=1+\\alpha x+\\frac{\\alpha(\\alpha-1)}{2!}x^2+\\cdots+\\frac{\\alpha(\\alpha-1)\\cdots(\\alpha-n+1)}{n!}x^n+o(x^n)$ ä¸ƒã€æŒ‡æ•°å‡½æ•° $e^x=1+x+\\frac{x^2}{2!}+\\frac{x^3}{3!}+\\cdots+\\frac{x^n}{n!}+o(x^n)$ å¸¸è§ç­‰ä»·æ— ç©·å°å’Œæ³°å‹’å…¬å¼çš„å…³ç³»åŠæ¨å¯¼ é¦–å…ˆè¦çŸ¥é“ï¼Œç­‰ä»·æ— ç©·å°æ˜¯æ³°å‹’å…¬å¼å±•å¼€çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µã€‚ ç„¶åæˆ‘ä»¬å…ˆå†™å‡ºå¸¸è§çš„ 8 ç§ç­‰ä»·æ— ç©·å°åŠå…¶å¯¹åº”çš„æ³°å‹’å…¬å¼å±•å¼€å¼ï¼š\n$sinâ—‹ \\sim tanâ—‹ \\sim arcsinâ—‹ \\sim arctanâ—‹ \\sim e^{â—‹}-1 \\sim ln(1+â—‹) \\sim â—‹$\n$sinx =x-\\frac{x^3}{3!}+\\frac{x^5}{5!}-\\cdots+(-1)^{n}\\frac{x^{2n+1}}{(2n+1)!}+o(x^{2n+1})$ $tanx = x+\\frac{x^3}{3}+o(x^3)$ $arcsinx = x+\\frac{x^3}{6}+o(x^3)$ $arctanx = x-\\frac{x^3}{3}+o(x^3)$ $e^{x} = 1+x+\\frac{x^2}{2!}+\\frac{x^3}{3!}+\\cdots+\\frac{x^n}{n!}+o(x^n)$ $ln(1+x) = x-\\frac{x^2}{2}+\\frac{x^3}{3}+\\cdots+(-1)^{n-1}\\frac{x^n}{n}+o(x^n)$ $a^{â—‹}-1 \\sim â—‹lna$\n$a^x = 1+xlna+\\frac{(lna)^2}{2!}x^2+\\frac{(lna)^3}{3!}x^3+o(x^3)$ $1-cosâ—‹ \\sim \\frac{1}{2}â—‹^2$\n$cosx = 1-\\frac{x^2}{2!}+\\cdots+(-1)^{n}\\frac{x^{2n}}{(2n)!}+o(x^{2n})$ $(1+â—‹)^{a} -1 \\sim aâ—‹$\n$(1+x)^a = 1+ax+\\frac{a(a-1)}{2!}x^2+\\cdots+\\frac{a(a-1)\\cdots(a-n+1)}{n!}+o(x^n)$ $â—‹-ln(1+â—‹) \\sim \\frac{1}{2}â—‹^2$\n$ln(1+x) = x-\\frac{x^2}{2}+\\frac{x^3}{3}+\\cdots+(-1)^{n-1}\\frac{x^n}{n}+o(x^n)$ $tanâ—‹-â—‹ \\sim â—‹-arctanâ—‹ \\sim \\frac{1}{3}â—‹^3$\n$â—‹-sinâ—‹ \\sim arcsinâ—‹-â—‹ \\sim \\frac{1}{6}â—‹^3$\n$tanâ—‹-sinâ—‹ \\sim arcsinâ—‹-arctanâ—‹ \\sim \\frac{1}{2}â—‹^3$\nä¸‰ã€åˆ©ç”¨æ— ç©·å°æ›¿æ¢æ±‚æé™ # 1. å¸¸è§çš„ç­‰ä»·æ— ç©·å°ï¼ˆ8 ä¸ªï¼‰ # ç±»åˆ« ç­‰ä»·æ— ç©·å° (å½“ $â—‹ \\to 0$ æ—¶) ä¸€ã€ $\\sin â—‹ \\sim \\tan â—‹ \\sim \\arcsin â—‹ \\sim \\arctan â—‹ \\sim e^{â—‹}-1 \\sim \\ln(1+â—‹) \\sim â—‹$ äºŒã€ $a^{â—‹}-1 \\sim â—‹\\ln a$ ä¸‰ã€ $1-\\cos â—‹ \\sim \\frac{1}{2}â—‹^2$ å››ã€ $(1+â—‹)^{a} -1 \\sim aâ—‹$ äº”ã€ $â—‹-\\ln(1+â—‹) \\sim \\frac{1}{2}â—‹^2$ å…­ $\\tan â—‹ - â—‹ \\sim â—‹ - \\arctan â—‹ \\sim \\frac{1}{3}â—‹^3$$â—‹ - \\sin â—‹ \\sim \\arcsin â—‹ - â—‹ \\sim \\frac{1}{6}â—‹^3$$\\tan â—‹ - \\sin â—‹ \\sim \\arcsin â—‹ - \\arctan â—‹ \\sim \\frac{1}{2}â—‹^3$ 2. ç­‰ä»·æ— ç©·å°å˜å½¢ä¾‹å­ # $x \\to 0$ æ—¶ï¼Œ$\\sqrt{1+sinx}$ å’Œ $\\sqrt[3]{1+sinx}$ ç”¨ $(1+â—‹)^{a} -1 \\sim aâ—‹$ $x \\to 0$ æ—¶ï¼Œ$f(x) \\to 1$ï¼Œ$ln(f(x))$ åŒ–ä¸º $ln(1+(f(x)-1))$å ç”¨ $â—‹-ln(1+â—‹) \\sim \\frac{1}{2}â—‹^2$ $x \\to 0$ æ—¶ï¼Œ$ln(x+\\sqrt{1+x^2})$ åŒ–ä¸º $ln(1+(x+\\sqrt{1+x^2}-1))$ åå…ˆç”¨ $\\ln(1+â—‹) \\sim â—‹$ï¼Œå†ç”¨$(1+â—‹)^{a} -1 \\sim aâ—‹$ï¼Œæœ€åå¾—åˆ°$x+x^2$ç­‰ä»·ä¸º$x$ $x \\to 0$ æ—¶ï¼Œ$e^{f(x)}-e^{g(x)}$ åŒ–ä¸º $e^{g(x)}(e^{f(x)-g(x)}-1)$ åç”¨ $e^{â—‹}-1 \\sim â—‹$ é¦–å…ˆçŸ¥é“ $x \\to 0$ï¼Œç„¶åç»™æˆ‘ä¸€ä¸ªå¼å­æ±‚æé™ï¼Œå…ˆåˆ¤æ–­èƒ½å¦ä½¿ç”¨ç­‰ä»·æ— ç©·å°ï¼ˆåŒ…æ‹¬ä½¿ç”¨å“ªä¸ªï¼Œåˆ¤æ–­æ–¹æ³•ä¸ºæ˜¯å¦ç¬¦åˆå¸¸è§çš„ç­‰ä»·æ— ç©·å°çš„å› å­ï¼Œå†çœ‹è¿ç®—æ–¹å¼ï¼Œåªæœ‰â€œåŠ å‡ä¸”ç›¸æ¶ˆä¸º 0â€æ‰ä¸å¯ä»¥ä½¿ç”¨ï¼‰ï¼Œå¯ä»¥çš„è¯å°±å°è¯•å˜å½¢åç”¨ç­‰ä»·æ— ç©·å°ä»£æ¢ï¼Œä¸å¯ä»¥çš„è¯å°±ç”¨æ³°å‹’å±•å¼€ã€‚\nè§£é¢˜æŠ€å·§æ€»ç»“ # 1. æ ¹å·$\\sqrt{}$æå¹³æ–¹è¦æ³¨æ„æ­£è´Ÿï¼š$\\sqrt{x^2}$æå¹³æ–¹åä¸º$|x|$ # ç‰¹åˆ«æ˜¯ï¼Œ$x\\rightarrow è´Ÿ$æ—¶ï¼Œ$\\sqrt{x^2}$æå¹³æ–¹åä¸º$|x|=-x$\n2. æ±‚æé™ä¸­ï¼Œæ±‚å·¦å³æé™çš„æƒ…å†µ # ä»»ä½•æ—¶å€™ï¼Œå½“ä½ æ€€ç–‘å‡½æ•°åœ¨æé™ç‚¹å·¦ä¾§å’Œå³ä¾§çš„è¡Œä¸ºå¯èƒ½ä¸åŒæ—¶ï¼Œéƒ½åº”è¯¥åˆ†åˆ«è®¡ç®—å·¦å³æé™ã€‚ ç‰¹åˆ«æ˜¯ï¼Œè§åˆ°ä»¥ä¸‹æƒ…å†µæ—¶ï¼Œåº”è¯¥åˆ†åˆ«æ±‚å·¦å³æé™ï¼š\n$e^{\\frac{1}{x}}$ $arctan{\\frac{1}{x}}$ $|x|$ åˆ†æ¯è¶‹äº 0 ä¸”åˆ†å­ä¸ä¸º 0 æ¶‰åŠåˆ°å¶æ¬¡æ ¹å¼ï¼Œä¸”æ ¹å·ä¸‹çš„è¡¨è¾¾å¼åœ¨æé™ç‚¹å¤„ä¸º 0 æ¶‰åŠå®šä¹‰åŸŸè¾¹ç•Œæˆ–å•ä¾§å®šä¹‰ 3. æ³°å‹’å…¬å¼æ±‚æé™ä¹¦é¢è¦æ±‚ # å†™æ³°å‹’å…¬å¼æ—¶ï¼Œå¿…é¡»æŠŠæœ€åçš„ $o(x^{n})$ å¸¦ä¸Šï¼Œä½†æ˜¯åœ¨è‰ç¨¿ä¸­å¯ä»¥å¿½ç•¥ï¼Œæœ€ååªè¦æŠŠç­‰ä»·ç»“æœå†™å…¥ç­”æ¡ˆå³å¯\n4. æ³°å‹’å…¬å¼æ±‚æé™ä¸­ï¼Œé‡åˆ° $(f(x))^2-(g(x))^2$å¯åŒ–ä¸º$(f(x)+g(x))(f(x)-g(x))$ ï¼Œè€Œä¸ç”¨è®¡ç®— $(f(x))^2$å’Œ$(g(x))^2$ çš„æ³°å‹’ # 5. è§åˆ° $\\sqrt{f(x)}ä¸­f(x)\\to 1$ å¯åŒ–ä¸º $\\sqrt{1+f(x)-1}$ ï¼Œç”¨ç­‰ä»·æ— ç©·å° $â€œ(1+â—‹)^{a} -1 \\sim aâ—‹â€$ å¾—åˆ° $\\frac{1}{2}\\sqrt{f(x)-1}$ # 6. æ±‚æé™ä¸­ï¼Œåˆ†å¼ç”¨åŒæ—¶æœ‰ $x$ å’Œ$ g(x)$ ï¼Œå¯ä»¥å°è¯•å°† $x$ åŒ–ä¸º $f(x)$ ï¼Œå†ç”¨ $t=f(x)$ ä»£æ¢ # 7. â€œ $\\infty-\\infty$ â€å‹ä¸­ # è§åˆ° $\\sqrt{\\frac{1}{x^2}+1}$ ç±»ä¼¼å¯åŒ–ä¸º $\\frac{\\sqrt{1+x^2}}{x}$ ï¼Œè€Œä¸ç”¨æœ‰ç†åŒ–\nè§åˆ° $\\sqrt[n]{x^n+ax^{n-1}+â€¦}$ ï¼Œå¯ç›´æ¥ä»£æ¢ä¸ºå…¶æ¸è¿›å¼ $x+\\frac{a}{n}$\næ¯”å¦‚ $lim_{x \\to \\infty} \\sqrt[3]{x^3+x^2+1}-\\sqrt[2]{x^2+x+1}$ ï¼Œå¯ç›´æ¥ä»£æ¢ä¸º $(x+\\frac{1}{3})-(x+\\frac{1}{2})$ ï¼Œç«‹åˆ»å¾—åˆ°ç»“æœä¸º $-\\frac{1}{6}$\n8. æ±‚æé™è®¡ç®—é¢˜æ­¥éª¤è§„èŒƒ # æœ‰å˜é‡ä»£æ¢å…ˆå†™ä»£æ¢ï¼Œç„¶åå†™å˜å½¢å¼ï¼Œå†å†™åŒ–ç®€åå¼å­ï¼Œæœ€åå†™ç­”æ¡ˆ æ±‚æé™è®¡ç®—é¢˜æ­¥éª¤è§„èŒƒåˆ†æ ç­‰ä»·æ— ç©·å°ï¼šä¹˜é™¤å¯ä»¥ç›´æ¥æ›¿æ¢ï¼ŒåŠ å‡å¯ä»¥ç›´æ¥æ›¿æ¢ï¼ˆä½†æ˜¯ä¸»è¦é¡¹ä¸èƒ½ç›¸æ¶ˆä¸º 0ï¼‰ã€æœ€å¥½ä½¿ç”¨æ³°å‹’éªŒè¯ä¸€éç»“æœã€‘ï¼Œè¿™æ­¥å¿…é¡»å†™ å¿«é€Ÿå˜é‡ä»£æ¢ï¼šå¿…é¡»å†™$ä»¤x=tâ€¦ï¼Œåˆ™t=â€¦xã€‚å½“x \\to â€¦æ—¶ï¼Œt \\to 0$ 9. æ±‚æé™ä¸­è§åˆ°$x^x$ # ä½¿ç”¨$u^v=e^{v\\ln u}$\n","date":"2025å¹´5æœˆ8æ—¥","externalUrl":null,"permalink":"/postgraduate/%E4%B8%89%E5%A4%A7%E8%AE%A1%E7%AE%97%E6%B1%82%E6%9E%81%E9%99%90/","section":"å­¦ä¹ æ€è€ƒ","summary":"","title":"ã€ä¸‰å¤§è®¡ç®—ã€‘æ±‚æé™","type":"postgraduate"},{"content":"","date":"2025å¹´5æœˆ8æ—¥","externalUrl":null,"permalink":"/tags/study/","section":"Tags","summary":"","title":"Study","type":"tags"},{"content":"","date":"2025å¹´5æœˆ8æ—¥","externalUrl":null,"permalink":"/series/%E4%B8%89%E5%A4%A7%E8%AE%A1%E7%AE%97/","section":"Series","summary":"","title":"ä¸‰å¤§è®¡ç®—","type":"series"},{"content":"","date":"2025å¹´5æœˆ8æ—¥","externalUrl":null,"permalink":"/tags/%E6%95%B0%E4%BA%8C/","section":"Tags","summary":"","title":"æ•°äºŒ","type":"tags"},{"content":"","date":"2025å¹´5æœˆ6æ—¥","externalUrl":null,"permalink":"/tags/bark/","section":"Tags","summary":"","title":"Bark","type":"tags"},{"content":"","date":"2025å¹´5æœˆ6æ—¥","externalUrl":null,"permalink":"/tags/ios/","section":"Tags","summary":"","title":"IOS","type":"tags"},{"content":"","date":"2025å¹´5æœˆ6æ—¥","externalUrl":null,"permalink":"/tags/iphone/","section":"Tags","summary":"","title":"IPhone","type":"tags"},{"content":"","date":"2025å¹´5æœˆ6æ—¥","externalUrl":null,"permalink":"/tags/tools/","section":"Tags","summary":"","title":"Tools","type":"tags"},{"content":" 0.å†™åœ¨å¼€å¤´ # æƒ³è¯´è¿™ä¸ªå·¥å…·å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯è¯åˆ°å˜´è¾¹å´å‘ç°æ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚Bark æ˜¯ä¸€ä¸ªå¥½ç”¨ä½†éå¿…è¦çš„å·¥å…·ï¼Œå°±åƒä¸€ä¸ªæ‰“å­—æ›´é¡ºç•…çš„é”®ç›˜ã€ä¸€ä¸ªæ›´åˆæ‰‹çš„é¼ æ ‡ï¼Œä½ ä¸ä¼šå¤©å¤©æŒ‚åœ¨å˜´è¾¹ï¼Œä½†ä½ ç¡®å®æ¯å¤©éƒ½åœ¨ç”¨ã€‚\næœåŠ¡å™¨ Docker Compose éƒ¨ç½² # è¯·è‡ªè¡Œæ›¿æ¢ä¸‹é¢å†…å®¹ï¼š\n\u0026lt;mysql_root_password\u0026gt; ä¸ºä½ çš„ MySQL å¯†ç  \u0026lt;bark_server_port\u0026gt; ä¸ºä½ çš„ Bark æœåŠ¡å™¨ç«¯å£ volumes: bark_data: mysql_data: services: bark-server: image: finab/bark-server container_name: bark-server restart: unless-stopped ports: - \u0026#39;\u0026lt;bark_server_port\u0026gt;:8080\u0026#39; environment: - MYSQL_DSN=root:\u0026lt;mysql_root_password\u0026gt;@tcp(mysql:3306)/bark?charset=utf8mb4\u0026amp;parseTime=True\u0026amp;loc=Local volumes: - bark_data:/data depends_on: mysql: condition: service_healthy mysql: image: mysql:8.0 container_name: bark-mysql restart: unless-stopped environment: - MYSQL_ROOT_PASSWORD=\u0026lt;mysql_root_password\u0026gt; - MYSQL_DATABASE=bark # ports: # - \u0026#34;3306:3306\u0026#34; # å·²æ³¨é‡Šæ‰ï¼Œä¸å¯¹å¤–æš´éœ²MySQLç«¯å£ volumes: - mysql_data:/var/lib/mysql healthcheck: test: [\u0026#39;CMD\u0026#39;, \u0026#39;mysqladmin\u0026#39;, \u0026#39;ping\u0026#39;, \u0026#39;-h\u0026#39;, \u0026#39;127.0.0.1\u0026#39;] interval: 10s timeout: 5s retries: 3 start_period: 30s cap_add: - SYS_NICE ç„¶åè¿è¡Œï¼š\ndocker-compose up -d å¯¹ä½ çš„ \u0026lt;bark_server_port\u0026gt; è®¾ç½®åå‘ä»£ç†ï¼Œè®¿é—®å³å¯ã€‚\nä½¿ç”¨æ–¹æ³• # å‰©ä¸‹çš„ä¸€åˆ‡è¯·å‚è€ƒ Bark ä½¿ç”¨æ•™ç¨‹ã€‚\nè¿™é‡Œç»™å‡ºä¸€ç§ç¤ºä¾‹ä½¿ç”¨æ–¹å¼ï¼š\ncurl -X \u0026#34;POST\u0026#34; \u0026#34;https://\u0026lt;ä½ çš„bark_server_url\u0026gt;/push\u0026#34; \\ -H \u0026#39;Content-Type: application/json; charset=utf-8\u0026#39; \\ -d $\u0026#39; { \u0026#34;title\u0026#34;: \u0026#34;æˆ‘æ˜¯title\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;æˆ‘æ˜¯body\u0026#34;, \u0026#34;device_key\u0026#34;: \u0026#34;\u0026lt;ä½ çš„device_key\u0026gt;\u0026#34; }\u0026#39; ","date":"2025å¹´5æœˆ6æ—¥","externalUrl":null,"permalink":"/posts/%E4%BD%BF%E7%94%A8bark%E6%8E%A8%E9%80%81%E9%80%9A%E7%9F%A5%E5%88%B0%E4%BD%A0%E7%9A%84iphone/","section":"æ–‡ç« ","summary":"","title":"ä½¿ç”¨Barkæ¨é€é€šçŸ¥åˆ°ä½ çš„iPhone","type":"posts"},{"content":"","date":"2025å¹´4æœˆ9æ—¥","externalUrl":null,"permalink":"/tags/linux/","section":"Tags","summary":"","title":"Linux","type":"tags"},{"content":"","date":"2025å¹´4æœˆ9æ—¥","externalUrl":null,"permalink":"/tags/mitmproxy/","section":"Tags","summary":"","title":"Mitmproxy","type":"tags"},{"content":"","date":"2025å¹´4æœˆ9æ—¥","externalUrl":null,"permalink":"/tags/sing-box/","section":"Tags","summary":"","title":"Sing-Box","type":"tags"},{"content":"","date":"2025å¹´4æœˆ9æ—¥","externalUrl":null,"permalink":"/tags/tun/","section":"Tags","summary":"","title":"Tun","type":"tags"},{"content":" 0.å†™åœ¨å¼€å¤´ # è¿™é‡Œä¸ä»‹ç»å…·ä½“æ“ä½œæ­¥éª¤ï¼Œä¸»è¦è¯´æ˜ä¸€ä¸ªæ€è·¯ã€‚\n1.æŠ“åŒ…æ–¹æ¡ˆå¯¹æ¯” # å½“å‰å¸¸è§çš„æŠ“åŒ…æ–¹æ¡ˆæœ‰ä»¥ä¸‹å‡ ç§ï¼š\nåºå· æ–¹æ¡ˆ ä»£è¡¨å·¥å…· è¯´æ˜ 1 åŸºäºä»£ç†çš„ HTTP/HTTPS æŠ“åŒ… Fiddler\nCharles\nBurpSuite\nReqable\nmitmproxy å®‰è£…ä¸­é—´äººè¯ä¹¦ï¼ˆè‡ªç­¾ï¼‰ï¼Œè§£å¯† https æµé‡ï¼Œå¯¹å¤–ä¼šå¼€æ”¾ä¸€ä¸ªä»£ç†ï¼Œå‘èµ·è¯·æ±‚æ—¶æŒ‡å®šè¯¥ä»£ç†å°±èƒ½æŠ“åŒ… 2 åŸºäºç½‘å¡å—…æ¢çš„å…¨åè®®æŠ“åŒ… Wireshark\nTcpdump å•¥åŒ…éƒ½èƒ½æŠ“ï¼Œå”¯ä¸€çš„ç¼ºç‚¹æ˜¯æ— æ³•è§£å¯† tls æµé‡ï¼Œå¯ä»¥è®¾ç½®ç¯å¢ƒå˜é‡ SSLKEYLOGFILEï¼Œä½†è¿™ç§æ–¹å¼åªèƒ½è§£å¯†æµè§ˆå™¨å‘èµ·çš„ httpsï¼Œå¯¹äºæŸäº›åº”ç”¨å†…çš„è¯·æ±‚è¿˜æ˜¯æ²¡æ³•è§£å¯†ã€‚ ä½†æ˜¯è¿™ä¸¤ä¸ªæ–¹æ¡ˆåœ¨é‡åˆ°ç‰¹å®šåœºæ™¯æ—¶ï¼š\næ¥å£ä½¿ç”¨ https åè®® åŒ…æ‹¬åº”ç”¨å†…éƒ¨è¯·æ±‚å’Œæµè§ˆå™¨è¯·æ±‚ åº”ç”¨æ— æ³•æŒ‡å®šä»£ç† éƒ¨åˆ†è¯·æ±‚éœ€è¦é€šè¿‡æ¢¯å­ è¿™ä¸ªæ—¶å€™ï¼Œä½¿ç”¨ tun è™šæ‹Ÿç½‘å¡æŠ“åŒ…æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚åœ¨ç½‘ç»œå±‚å°±æ‹¦æˆªè¯·æ±‚ï¼Œå†äº¤ç»™æŒ‡å®šçš„ä»£ç†è¿›è¡ŒæŠ“åŒ…ã€‚\n2.ä½¿ç”¨ Tun è™šæ‹Ÿç½‘å¡æŠ“åŒ…æµç¨‹ç¤ºæ„ # flowchart TD %% ä¸»èŠ‚ç‚¹å®šä¹‰ APP(\"åº”ç”¨ç¨‹åº\") BROWSER(\"æµè§ˆå™¨\") TUN(\"TUNå…¥ç«™\n(è™šæ‹Ÿç½‘å¡)\") TUN_ROUTE(\"TUNä¸“ç”¨è·¯ç”±\nå…¨éƒ¨è½¬å‘åˆ°ä»£ç†å‡ºç«™\") TO_MITM(\"To-Mitmproxyå‡ºç«™\n(è½¬å‘åˆ°9999ç«¯å£)\") HTTP_PROXY(\"HTTPä»£ç†æœåŠ¡\n(9999ç«¯å£)\") MITM(\"mitmproxy\nè§£å¯†ä¸åˆ†æHTTPSæµé‡\") MIXED(\"Mixedå…¥ç«™\næ¥æ”¶8888ç«¯å£æµé‡\nHTTP+HTTPS\") ROUTER(\"ä¸»è·¯ç”±è§„åˆ™\nå›½å†…/å›½å¤–/å¹¿å‘Šåˆ†æµ\") DIRECT(\"ç›´è¿å‡ºç«™\n(å›½å†…æœåŠ¡å™¨)\") PROXY(\"ä»£ç†å‡ºç«™\n(å›½å¤–æœåŠ¡å™¨)\") BLOCK(\"é˜»æ–­å‡ºç«™\n(Blockå¹¿å‘Š)\") WEBUI(\"mitmwebç•Œé¢\n(8081ç«¯å£)\") INTERNET(\"ç›®æ ‡æœåŠ¡\") %% å­å›¾åˆ†ç»„ subgraph deviceEnv[\"è®¾å¤‡ç¯å¢ƒ\"] APP BROWSER end subgraph singbox[\"sing-box\"] subgraph inbounds[\"å…¥ç«™è§„åˆ™\"] TUN MIXED end subgraph routing[\"è·¯ç”±è§„åˆ™\"] TUN_ROUTE ROUTER end subgraph outbounds[\"å‡ºç«™è§„åˆ™\"] TO_MITM DIRECT PROXY BLOCK end end subgraph mitmproxy[\"mitmproxy\"] HTTP_PROXY MITM WEBUI end subgraph external[\"å¤–éƒ¨ç½‘ç»œ\"] INTERNET end %% è¯·æ±‚è·¯å¾„ - å®çº¿ APP --\u003e|\"åº”ç”¨è¯·æ±‚\"| TUN TUN --\u003e|\"TUNæµé‡\"| TUN_ROUTE TUN_ROUTE --\u003e|\"å…¨éƒ¨æµé‡\"| TO_MITM TO_MITM --\u003e|\"è½¬å‘åˆ°9999ç«¯å£\"| HTTP_PROXY HTTP_PROXY --\u003e|\"ä¸Šæ¸¸ä»£ç†åˆ°8888ç«¯å£\"| MITM MITM --\u003e|\"è¿”å›åˆ°8888ç«¯å£\"| MIXED MIXED --\u003e|\"è§£å¯†åçš„æµé‡\"| ROUTER %% ä»è·¯ç”±åˆ°ä¸‰ä¸ªå¹¶åˆ—å‡ºç«™çš„çº¿æ¡ - ä¸‰ä¸ªå®Œå…¨ç‹¬ç«‹ ROUTER --\u003e|\"å›½å†…ç½‘ç«™\"| DIRECT ROUTER --\u003e|\"å›½å¤–ç½‘ç«™\"| PROXY ROUTER --\u003e|\"å¹¿å‘Šè¯·æ±‚\"| BLOCK %% ä»å‡ºç«™åˆ°äº’è”ç½‘çš„çº¿æ¡ DIRECT --\u003e|\"ç›´è¿è¯·æ±‚\"| INTERNET PROXY --\u003e|\"ä»£ç†è¯·æ±‚\"| INTERNET %% å“åº”è·¯å¾„ - è™šçº¿ INTERNET -.-\u003e|\"å›½å†…å“åº”\"| DIRECT INTERNET -.-\u003e|\"å›½å¤–å“åº”\"| PROXY %% ä»å‡ºç«™è¿”å›åˆ°è·¯ç”±çš„çº¿æ¡ - ä¸‰ä¸ªå®Œå…¨ç‹¬ç«‹ DIRECT -.-\u003e|\"ç›´è¿å“åº”\"| ROUTER PROXY -.-\u003e|\"ä»£ç†å“åº”\"| ROUTER BLOCK -.-\u003e|\"é˜»æ–­å“åº”\"| ROUTER %% åç»­å“åº”æµç¨‹ ROUTER -.-\u003e|\"åˆ†ç±»åå“åº”\"| MIXED MIXED -.-\u003e|\"åŠ å¯†åå“åº”\"| MITM MITM -.-\u003e|\"ä»£ç†å“åº”\"| HTTP_PROXY HTTP_PROXY -.-\u003e|\"è¿”å›9999ç«¯å£\"| TO_MITM TO_MITM -.-\u003e|\"è½¬å‘å“åº”\"| TUN_ROUTE TUN_ROUTE -.-\u003e|\"TUNå“åº”\"| TUN TUN -.-\u003e|\"åº”ç”¨å“åº”\"| APP %% ç›‘æ§çº¿è·¯ - ç‚¹è™šçº¿ MITM -...-\u003e|\"æµé‡åˆ†æ\"| WEBUI BROWSER -...-\u003e|\"è®¿é—®ç•Œé¢\"| WEBUI %% èŠ‚ç‚¹æ ·å¼ classDef appNode fill:#6a329f,stroke:#9d78c2,color:#ffffff,stroke-width:2px classDef browserNode fill:#4682b4,stroke:#87ceeb,color:#ffffff,stroke-width:2px classDef tunNode fill:#2472c8,stroke:#5cb3ff,color:#ffffff,stroke-width:2px classDef mixedNode fill:#8b4513,stroke:#d2691e,color:#ffffff,stroke-width:2px classDef routerNode fill:#a52a2a,stroke:#cd5c5c,color:#ffffff,stroke-width:2px classDef proxyNode fill:#6b8e23,stroke:#9acd32,color:#ffffff,stroke-width:2px classDef directNode fill:#483d8b,stroke:#7b68ee,color:#ffffff,stroke-width:2px classDef blockNode fill:#8b0000,stroke:#ff6347,color:#ffffff,stroke-width:2px classDef httpNode fill:#c95f00,stroke:#ffa452,color:#ffffff,stroke-width:2px classDef mitmNode fill:#298a3c,stroke:#5fd46c,color:#ffffff,stroke-width:2px classDef webUINode fill:#800080,stroke:#da70d6,color:#ffffff,stroke-width:2px classDef internetNode fill:#696969,stroke:#d3d3d3,color:#ffffff,stroke-width:2px classDef toMitmNode fill:#ff7f50,stroke:#ffb347,color:#ffffff,stroke-width:2px classDef tunRouteNode fill:#db7093,stroke:#ffb6c1,color:#ffffff,stroke-width:2px %% åº”ç”¨èŠ‚ç‚¹æ ·å¼ class APP appNode class BROWSER browserNode class TUN tunNode class MIXED mixedNode class TUN_ROUTE tunRouteNode class ROUTER routerNode class TO_MITM toMitmNode class PROXY proxyNode class DIRECT directNode class BLOCK blockNode class HTTP_PROXY httpNode class MITM mitmNode class WEBUI webUINode class INTERNET internetNode %% å­å›¾æ ·å¼ style deviceEnv fill:#2d2d2d,stroke:#666666,color:#ffffff,stroke-width:1px style singbox fill:#1a1a1a,stroke:#555555,color:#ffffff,stroke-width:1px style inbounds fill:#333333,stroke:#888888,color:#ffffff,stroke-width:1px style routing fill:#333333,stroke:#888888,color:#ffffff,stroke-width:1px style outbounds fill:#333333,stroke:#888888,color:#ffffff,stroke-width:1px style mitmproxy fill:#2a2a2a,stroke:#777777,color:#ffffff,stroke-width:1px style external fill:#2d2d2d,stroke:#666666,color:#ffffff,stroke-width:1px 3.æ•´ä½“é…ç½® # 3.1 sing-box é…ç½® # ä¸¤ä¸ªå…¥ç«™ tun è™šæ‹Ÿç½‘å¡ mixed æ··åˆå…¥ç«™ï¼šæ¥æ”¶ 8888 ç«¯å£æµé‡ å››ä¸ªå‡ºç«™ To-Mitmproxyï¼šæ¥æ”¶ tun æµé‡è½¬å‘åˆ° 9999 ç«¯å£ å›½å¤–ä»£ç†ï¼šæ¥æ”¶ mixed æµé‡è½¬å‘åˆ°å›½å¤–ä»£ç† å›½å†…ä»£ç†ï¼šæ¥æ”¶ mixed æµé‡è½¬å‘åˆ°å›½å†…ä»£ç† å¹¿å‘Šæ‹¦æˆªï¼šæ¥æ”¶ mixed æµé‡è½¬å‘åˆ°å¹¿å‘Šæ‹¦æˆª å››ä¸ªè·¯ç”± TUN ä¸“ç”¨è·¯ç”±ï¼šæ¥æ”¶ tun æµé‡ï¼Œå…¨éƒ¨è½¬å‘åˆ° To-Mitmproxy å‡ºç«™ å›½å†…ç½‘ç«™ï¼šæ¥æ”¶ mixed æµé‡è½¬å‘åˆ°å›½å†…ä»£ç† å›½å¤–ç½‘ç«™ï¼šæ¥æ”¶ mixed æµé‡è½¬å‘åˆ°å›½å¤–ä»£ç† å¹¿å‘Šè¯·æ±‚ï¼šæ¥æ”¶ mixed æµé‡è½¬å‘åˆ°å¹¿å‘Šæ‹¦æˆª 3.2 mitmproxy é…ç½® # web ç•Œé¢ --set web_port=8081 æ‰“å¼€äº8081ç«¯å£ ä»£ç†æ¨¡å¼ --mode=upstream:http://127.0.0.1:8888@9999 ä»£ç†æ¨¡å¼ä¸ºä¸Šæ¸¸ä»£ç†æ¨¡å¼ åœ¨æœ¬åœ°9999ç«¯å£ç›‘å¬å®¢æˆ·ç«¯è¿æ¥ï¼Œå°†æ‰€æœ‰æ‹¦æˆªåˆ°çš„æµé‡è½¬å‘åˆ°ä¸Šæ¸¸ä»£ç†http://127.0.0.1:8888 4. å¿«é€Ÿä½¿ç”¨ # ä½¿ç”¨UIFæ¥å¿«é€Ÿä½¿ç”¨ sing-box å•ç‹¬ç¼–å†™uif_capture.jsonï¼Œåœ¨è¦æŠ“åŒ…çš„æ—¶å€™ï¼Œå…ˆå¤‡ä»½æ­£å¸¸çš„uif.jsonï¼Œç„¶åå¤åˆ¶uif_capture.jsonåˆ°/usr/bin/uif/uif.json å•ç‹¬ç¼–å†™core_config_capture.jsonï¼Œåœ¨è¦æŠ“åŒ…çš„æ—¶å€™ï¼Œå…ˆå¤‡ä»½æ­£å¸¸çš„core_config.jsonï¼Œç„¶åå¤åˆ¶core_config_capture.jsonåˆ°/usr/bin/uif/core_config.json å¯åŠ¨mitmwebï¼š mitmweb --set web_port=8081 --mode=upstream:http://127.0.0.1:8888@9999 å¯åŠ¨uif å¼€å§‹æŠ“åŒ… æŠ“åŒ…ç»“æŸåï¼Œæ¢å¤uif.jsonå’Œcore_config.json 5.å‚è€ƒèµ„æ–™ # ç‚¹å‡»å±•å¼€æŸ¥çœ‹å‚è€ƒèµ„æ–™ https://linux.do/t/topic/528371 https://linux.do/t/topic/127658 å¯èƒ½æ›´æ–¹ä¾¿çš„æ–¹æ¡ˆï¼šProxifier æ­é…ä»»ä¸€ http(s) æŠ“åŒ…å·¥å…· ","date":"2025å¹´4æœˆ9æ—¥","externalUrl":null,"permalink":"/posts/%E4%BD%BF%E7%94%A8tun%E8%99%9A%E6%8B%9F%E7%BD%91%E5%8D%A1%E6%8A%93%E5%8C%85/","section":"æ–‡ç« ","summary":"","title":"ä½¿ç”¨Tunè™šæ‹Ÿç½‘å¡æŠ“åŒ…","type":"posts"},{"content":"","date":"2025å¹´2æœˆ7æ—¥","externalUrl":null,"permalink":"/tags/onedrive/","section":"Tags","summary":"","title":"OneDrive","type":"tags"},{"content":"","date":"2025å¹´2æœˆ7æ—¥","externalUrl":null,"permalink":"/tags/rclone/","section":"Tags","summary":"","title":"Rclone","type":"tags"},{"content":"","date":"2025å¹´2æœˆ7æ—¥","externalUrl":null,"permalink":"/tags/webdav/","section":"Tags","summary":"","title":"WebDav","type":"tags"},{"content":" 0.å†™åœ¨å¼€å¤´ # ç”±äºæ–°è´­å…¥äº†ä¸€å°è…¾è®¯äº‘é¦–å°” 200M çš„å°é¸¡ï¼Œæ‰€ä»¥å‡†å¤‡å¤šææä»¥å‰å—ç½‘é€Ÿå½±å“æ²¡æçš„ä¸ªäººæœåŠ¡ã€‚\nåˆåœ¨åœŸè€³å…¶åŒºè®¢é˜…äº† Miscrosoft 365ï¼Œé‡Œé¢æœ‰ç¨³å®šçš„ 1T ç©ºé—´ OneDriveå¯ä»¥ä½¿ç”¨ï¼Œå¹³æ—¶ä½¿ç”¨å ç”¨ä¸å¤šï¼Œæ‰€ä»¥æƒ³åˆ°è¿™ä¸ªæ–¹æ¡ˆã€‚\ngraph TD A[æœ¬åœ°è®¾å¤‡/å¤–éƒ¨æœåŠ¡] B(OneDriveæœåŠ¡å™¨) C(æœåŠ¡å™¨) A --\u003e|rcloneç›´æ¥æŒ‚è½½| B A --\u003e|WebDAVè®¿é—®| C C --\u003e|rcloneè¿æ¥| B C --\u003e|æä¾›WebDAVæœåŠ¡| A ä»¥ä¸‹ä¿¡æ¯è¯·æ ¹æ®å®é™…æƒ…å†µå…¨å±€æ›¿æ¢ï¼š\né¡¹ç›®è·¯å¾„ï¼š/projectpath/rclone_onedrive_webdav é¡¹ç›®åï¼šrclone_onedrive_webdav å†…éƒ¨ç«¯å£ï¼š10001 WebDav ç”¨æˆ·åï¼šwebdavusername WebDav å¯†ç ï¼šwebdavpassword æœ¬åœ°è®¾å¤‡ç”¨æˆ·åï¼šusername webdav ç½‘å€ï¼šyoutwebdav.site 1.æœåŠ¡å™¨éƒ¨ç½² # åŸºæœ¬è½¯ä»¶å®‰è£…\nsudo apt update \u0026amp;\u0026amp; sudo apt install rclone apache2-utils -y Rclone è¿æ¥ OneDrive\nè‡ªè¡Œæœç´¢ linuxæœåŠ¡å™¨ä½¿ç”¨rcloneè¿æ¥onedrive\næ³¨æ„ï¼šrclone æ–°å»ºçš„ name åº”ä¸º onedrive1T è¿è¡Œ rclone configç»“æœåº”åŒ…å«å¦‚ä¸‹ï¼š\nCurrent remotes: Name Type ==== ==== onedrive1T onedrive é¡¹ç›®æ–‡ä»¶å¤¹åˆ›å»º\nmkdir -p /projectpath/rclone_onedrive_webdav mkdir -p /projectpath/rclone_onedrive_webdav/cache mkdir -p /projectpath/rclone_onedrive_webdav/temp é¡¹ç›®æ–‡ä»¶\nrclone-webdav.service\n[Unit] Description=Rclone WebDAV service After=network-online.target Wants=network-online.target [Service] Type=simple User=root ExecStart=/projectpath/rclone_onedrive_webdav/start_rclone_webdav.sh Restart=on-failure RestartSec=30 StartLimitInterval=60s StartLimitBurst=3 [Install] WantedBy=multi-user.target start_rclone_webdav.sh\n#!/bin/bash /usr/bin/rclone serve webdav onedrive1T: \\ --addr=127.0.0.1:10001 \\ --vfs-cache-mode writes \\ --vfs-cache-max-size 1G \\ --vfs-cache-max-age 6h \\ --buffer-size 16M \\ --dir-cache-time 30m \\ --poll-interval 1h \\ --tpslimit 30 \\ --bwlimit 150M \\ --log-level WARNING \\ --log-file /projectpath/rclone_onedrive_webdav/rclone.log \\ --cache-dir=/projectpath/rclone_onedrive_webdav/cache \\ --htpasswd /projectpath/rclone_onedrive_webdav/htpasswd \\ --no-checksum \\ --timeout 1m åˆ›å»º htpasswdæ–‡ä»¶ï¼š\nsudo htpasswd -c /projectpath/rclone_onedrive_webdav/htpasswd webdavusername ç¡®ä¿ htpasswdæ–‡ä»¶æƒé™ä¸º 644\nsudo chmod 644 /projectpath/rclone_onedrive_webdav/htpasswd ç„¶åè¾“å…¥ webdavpassword\nåˆ›å»º rclone.logæ–‡ä»¶\ntouch /projectpath/rclone_onedrive_webdav/rclone.log å¯åŠ¨æœåŠ¡\nsudo cp /projectpath/rclone_onedrive_webdav/rclone-webdav.service /etc/systemd/system/ sudo systemctl daemon-reload sudo systemctl enable rclone-webdav.service sudo systemctl start rclone-webdav.service è®¾ç½®åå‘ä»£ç†ï¼Œå¹¶é…ç½® HTTPSã€‚\nserver { listen 80; listen 443 ssl http2; server_name youtwebdav.site; # SSLé…ç½®ä¼˜åŒ– ssl_certificate /www/sites/youtwebdav.site/ssl/fullchain.pem; ssl_certificate_key /www/sites/youtwebdav.site/ssl/privkey.pem; ssl_protocols TLSv1.2 TLSv1.3; ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305; ssl_prefer_server_ciphers off; ssl_session_cache shared:SSL:10m; ssl_session_timeout 1d; ssl_session_tickets off; # OCSP Stapling ssl_stapling on; ssl_stapling_verify on; resolver 8.8.8.8 8.8.4.4 valid=60s; resolver_timeout 2s; # HTTPè·³è½¬HTTPS if ($scheme = \u0026#34;http\u0026#34;) { return 301 https://$host$request_uri; } error_page 497 https://$host$request_uri; # æ—¥å¿—é…ç½® access_log /www/sites/youtwebdav.site/log/access.log combined buffer=512k flush=1m; error_log /www/sites/youtwebdav.site/log/error.log warn; # ä¸Šä¼ é™åˆ¶ client_max_body_size 10240M; client_body_timeout 3600s; # ä»£ç†åŸºç¡€é…ç½® proxy_http_version 1.1; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \u0026#34;\u0026#34;; proxy_set_header Authorization $http_authorization; proxy_pass_header Authorization; # ACMEéªŒè¯ location ^~ /.well-known/acme-challenge { allow all; root /usr/share/nginx/html; } # WebDAVé…ç½® location / { proxy_pass http://127.0.0.1:10001; # è¶…æ—¶è®¾ç½®ä¼˜åŒ– proxy_connect_timeout 60s; proxy_send_timeout 3600s; proxy_read_timeout 3600s; send_timeout 3600s; # ç¼“å†²åŒºä¼˜åŒ– proxy_buffer_size 16k; proxy_buffers 8 16k; proxy_busy_buffers_size 32k; # å…³é—­ç¼“å†²æé«˜ä¼ è¾“æ•ˆç‡ proxy_buffering off; proxy_request_buffering off; proxy_max_temp_file_size 0; # WebDAVæ–¹æ³• limit_except GET HEAD POST PUT DELETE MKCOL COPY MOVE PROPFIND PROPPATCH LOCK UNLOCK OPTIONS { deny all; } # å¤§æ–‡ä»¶ä¼ è¾“ä¼˜åŒ– client_body_buffer_size 512k; # å¯ç”¨å‹ç¼© gzip on; gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript; } # å®‰å…¨å¤´ä¼˜åŒ– add_header Strict-Transport-Security \u0026#34;max-age=63072000; includeSubDomains; preload\u0026#34; always; add_header X-Content-Type-Options \u0026#34;nosniff\u0026#34; always; add_header X-Frame-Options \u0026#34;SAMEORIGIN\u0026#34; always; add_header X-XSS-Protection \u0026#34;1; mode=block\u0026#34; always; add_header Referrer-Policy \u0026#34;strict-origin-when-cross-origin\u0026#34; always; # ç¦æ­¢è®¿é—®éšè—æ–‡ä»¶ location ~ /\\. { deny all; access_log off; log_not_found off; } } é…ç½®å®Œæˆåï¼Œè®¿é—® https://youtwebdav.siteå³å¯ã€‚\n2.æœ¬åœ°æŒ‚è½½ # 2.1 åŸºç¡€ä½¿ç”¨ # åˆ›å»ºé¡¹ç›®è·¯å¾„ mkdir -p /home/username/Documents/OneDrive mkdir -p /home/username/.cache/rclone touch /home/username/.cache/rclone/rclone.log æŒ‚è½½ rclone mount onedrive1T: /home/username/Documents/OneDrive \\ --vfs-cache-mode full \\ --vfs-cache-max-size 30G \\ --vfs-cache-max-age 168h \\ --vfs-cache-poll-interval 15m \\ --buffer-size 1G \\ --vfs-read-chunk-size 256M \\ --vfs-read-chunk-size-limit 8G \\ --vfs-read-ahead 3G \\ --fast-list \\ --dir-cache-time 12h \\ --poll-interval 2m \\ --transfers 16 \\ --checkers 32 \\ --multi-thread-cutoff 1G \\ --multi-thread-streams 8 \\ --cache-dir /home/username/.cache/rclone \\ --use-mmap \\ --max-read-ahead 1G \\ --log-file=/home/username/.cache/rclone/rclone.log \\ --log-level NOTICE \\ --allow-non-empty \\ --daemon \\ --allow-other 2.2 è¿›é˜¶ä½¿ç”¨ # é»˜è®¤æŒ‚è½½è„šæœ¬ï¼šmount_Cloud_Drive.sh\n#!/bin/bash # åœ¨è¿™é‡Œå®šä¹‰è¦æŒ‚è½½çš„äº‘ç›˜ï¼Œç”¨ç©ºæ ¼åˆ†éš” CLOUD_DRIVES=\u0026#34;OneDrive\u0026#34; # ç”Ÿæˆé€‰é¡¹åˆ—è¡¨ options=() for drive in $CLOUD_DRIVES; do options+=(\u0026#34;æŒ‚è½½$drive\u0026#34;) done options+=(\u0026#34;æŒ‚è½½å…¨éƒ¨\u0026#34;) # ä½¿ç”¨zenityåˆ›å»ºé€‰æ‹©å¯¹è¯æ¡† choice=$(zenity --list \\ --title=\u0026#34;æŒ‚è½½äº‘ç›˜\u0026#34; \\ --column=\u0026#34;é€‰é¡¹\u0026#34; \\ \u0026#34;${options[@]}\u0026#34; \\ --width=300 --height=400 \\ --cancel-label=\u0026#34;å–æ¶ˆ\u0026#34; \\ --ok-label=\u0026#34;ç¡®å®š\u0026#34;) # å¦‚æœç”¨æˆ·å–æ¶ˆäº†é€‰æ‹©ï¼Œåˆ™é€€å‡ºè„šæœ¬ if [ $? -ne 0 ]; then exit 0 fi # å®šä¹‰æŒ‚è½½å‡½æ•° mount_drive() { local script=\u0026#34;\u0026lt;ä½ æ”¾è„šæœ¬çš„åœ°å€\u0026gt;/mount_$1.sh\u0026#34; if [ -f \u0026#34;$script\u0026#34; ]; then \u0026#34;$script\u0026#34; else zenity --error --text=\u0026#34;æ‰¾ä¸åˆ°æŒ‚è½½è„šæœ¬ï¼š$script\u0026#34; fi } # å¤„ç†ç”¨æˆ·é€‰æ‹© if [ \u0026#34;$choice\u0026#34; = \u0026#34;æŒ‚è½½å…¨éƒ¨\u0026#34; ]; then for drive in $CLOUD_DRIVES; do mount_drive \u0026#34;$drive\u0026#34; done else # ä»é€‰é¡¹ä¸­æå–äº‘ç›˜åç§° selected_drive=${choice#æŒ‚è½½} mount_drive \u0026#34;$selected_drive\u0026#34; fi æŒ‚è½½ OneDrive è„šæœ¬ï¼šmount_OneDrive.sh\n#!/bin/bash SERVICE_NAME=\u0026#34;OneDrive\u0026#34; RCLONE_REMOTE=\u0026#34;onedrive1T:\u0026#34; MOUNT_POINT=\u0026#34;/home/username/Documents/OneDrive\u0026#34; ICON_PATH=\u0026#34;/home/username/Pictures/AppIcons/onedrive_1.icns\u0026#34; # æ£€æŸ¥æ˜¯å¦å·²ç»æŒ‚è½½ if mountpoint -q \u0026#34;$MOUNT_POINT\u0026#34;; then # å¦‚æœå·²ç»æŒ‚è½½ï¼Œç”¨nautilusæ‰“å¼€æ–‡ä»¶å¤¹ notify-send -t 1000 -u normal -i \u0026#34;$ICON_PATH\u0026#34; \u0026#34;${SERVICE_NAME}å·²æŒ‚è½½\u0026#34; \u0026#34;æ­£åœ¨æ‰“å¼€æ–‡ä»¶å¤¹...\u0026#34; nautilus \u0026#34;$MOUNT_POINT\u0026#34; else # å¦‚æœæœªæŒ‚è½½ï¼Œå¼€å§‹æŒ‚è½½æµç¨‹ notify-send -t 1000 -u normal -i \u0026#34;$ICON_PATH\u0026#34; \u0026#34;æ­£åœ¨æŒ‚è½½${SERVICE_NAME}\u0026#34; \u0026#34;è¯·ç­‰å¾…â€¦â€¦â€¦â€¦\u0026#34; # æ‰§è¡ŒrcloneæŒ‚è½½å‘½ä»¤ rclone mount \u0026#34;$RCLONE_REMOTE\u0026#34; \u0026#34;$MOUNT_POINT\u0026#34; \\ --vfs-cache-mode full \\ --vfs-cache-max-size 20G \\ --vfs-cache-max-age 168h \\ --vfs-cache-poll-interval 1m \\ --buffer-size 256M \\ --vfs-read-chunk-size 256M \\ --vfs-read-chunk-size-limit 8G \\ --vfs-read-ahead 2G \\ --fast-list \\ --dir-cache-time 12h \\ --poll-interval 1m \\ --transfers 8 \\ --checkers 16 \\ --multi-thread-cutoff 512M \\ --multi-thread-streams 8 \\ --cache-dir /home/username/.cache/rclone/${SERVICE_NAME} \\ --use-mmap \\ --max-read-ahead 512M \\ --log-file=/home/username/.cache/rclone/rclone_${SERVICE_NAME}.log \\ --log-level NOTICE \\ --allow-non-empty \\ --daemon \\ --allow-other \\ --volname \u0026#34;$SERVICE_NAME\u0026#34; \\ --umask 002 \\ --attr-timeout 5s \\ --no-modtime # ç­‰å¾…rcloneæŒ‚è½½å®Œæˆ while ! mountpoint -q \u0026#34;$MOUNT_POINT\u0026#34;; do sleep 1 done # æ˜¾ç¤ºæŒ‚è½½å®Œæˆä¿¡æ¯ notify-send -t 1000 -u normal -i \u0026#34;$ICON_PATH\u0026#34; \u0026#34;${SERVICE_NAME}æŒ‚è½½å®Œæˆ\u0026#34; \u0026#34;å·²æŒ‚è½½åˆ° ${MOUNT_POINT}\u0026#34; fi åº”ç”¨å›¾æ ‡ï¼šmount_cloud_drive.desktop\n[Desktop Entry] Type=Application Name=Mount Cloud Drive Name[en]=Mount Cloud Drive Comment=æŒ‚è½½äº‘ç›˜åˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ Comment[en]=Mount Cloud Drive to local filesystem Exec=/home/username/APP/Scripts/mount_cloud_drive/mount_Cloud_Drive.sh Icon=/home/username/Pictures/AppIcons/drive.icns Terminal=false Categories=Utility; Actions=MountOneDrive; [Desktop Action MountOneDrive] Name=æŒ‚è½½OneDrive Name[en]=Mount OneDrive Exec=/home/username/APP/Scripts/mount_cloud_drive/mount_OneDrive.sh æ­é…DwarFSä½¿ç”¨\n","date":"2025å¹´2æœˆ7æ—¥","externalUrl":null,"permalink":"/posts/%E4%BD%BF%E7%94%A8rclone%E5%BC%80%E6%94%BEonedrive/","section":"æ–‡ç« ","summary":"","title":"ä½¿ç”¨Rcloneå¼€æ”¾OneDrive","type":"posts"},{"content":" æ¢³ç† # 0. é—®é¢˜ # å¿ƒæ€ è€ƒè¯•å¿ƒæ€ç´§å¼ ï¼Œä¸å¤Ÿæ”¾æ¾å’Œæ¸¸åˆƒæœ‰ä½™ æ•°äºŒï¼š åšé¢˜æ—¶ï¼Œæœ‰æ—¶å€™ä¼šå¿½ç•¥é¢˜ç›®ä¸­çš„ä¸€äº›ç»†èŠ‚æˆ–è€…è®¡ç®—é”™è¯¯ä¸€äº›è·³ä¸€æ­¥è®¡ç®—ï¼Œå¯¼è‡´ç­”æ¡ˆé”™è¯¯ å¹³æ—¶åšé¢˜ï¼Œä¸æ€è€ƒå’Œæ€»ç»“é¢˜å‹ï¼Œä¸çŸ¥é“å‡ºé¢˜è€å¤´ä¸ºä»€ä¹ˆè¦å‡ºè¿™é¢˜ã€è¿™é¢˜è¦è€ƒä»€ä¹ˆçŸ¥è¯†ç‚¹ å¹³æ—¶åšé¢˜æ—¶è‰ç¨¿ä¹ æƒ¯ä¸å¥½ï¼Œå­—å¤§ã€ä¹± å¹³æ—¶åšé¢˜æ–¹æ³•ä¸å¯¹ï¼Œé‡åˆ°ä¸ä¼šå°±å»çœ‹ç­”æ¡ˆï¼Œæ²¡æœ‰è¿ç»­åšé¢˜ è‹±è¯­ï¼š è¯æ±‡é‡ä¸è¶³ï¼Œä¸€äº›ç®€å•è¯è®°å¿†æ··æ·†ã€é”™è¯¯ é˜…è¯»é€Ÿåº¦æ…¢ã€æ–¹æ³•ä¸å¯¹ï¼Œå¸¸å¿½è§†å…³é”®ä¿¡æ¯ å¯¹äºä¸€äº›é¢˜ç›®çš„ç­”æ¡ˆä¸æ•æ„Ÿ æ”¿æ²»ï¼š å¹³æ—¶ç§¯ç´¯ä¸è¶³ï¼Œå¯¹äºä¸€äº›è€ƒç‚¹ä¸é€å½» 1. æ•°äºŒ # 1.1 é«˜æ•° # graph LR A[é«˜æ•°] B[ç¬¬ä¸€ç« ï¼šæé™] C[ç¬¬äºŒç« ï¼šè¿ç»­æ€§å’Œé—´æ–­ç‚¹] D[ç¬¬ä¸‰ç« ï¼šå¯¼æ•°å’Œå¾®åˆ†] E[ç¬¬å››ç« ï¼šå¾®åˆ†ä¸­å€¼å®šç†] F[ç¬¬äº”ç« ï¼šå¯¼æ•°çš„åº”ç”¨] G[ç¬¬å…­ç« ï¼šå®šç§¯åˆ†] H[ç¬¬ä¸ƒç« ï¼šä¸å®šç§¯åˆ†] I[ç¬¬å…«ç« ï¼šäºŒé‡ç§¯åˆ†] J[ç¬¬ä¹ç« ï¼šç§¯åˆ†ä¸­å€¼å®šç†] K[ç¬¬åç« ï¼šç§¯åˆ†å¸¸ç”¨æŠ€å·§] L[ç¬¬åä¸€ç« ï¼šåå¯¼æ•°å’Œå…¨å¾®åˆ†] M[ç¬¬åäºŒç« ï¼šåå¯¼æ•°åœ¨è®¡ç®—æå€¼ä¸Šçš„åº”ç”¨] N[ç¬¬åä¸‰ç« ï¼šä¸€é˜¶å¾®åˆ†æ–¹ç¨‹] O[ç¬¬åå››ç« ï¼šäºŒé˜¶å¾®åˆ†æ–¹ç¨‹] P[ç¬¬åäº”ç« ï¼šé«˜äºäºŒé˜¶çš„å¸¸ç³»æ•°çº¿æ€§é½æ¬¡å¾®åˆ†æ–¹ç¨‹] Q[ç¬¬åå…­ç« ï¼šå¯é™é˜¶çš„å¾®åˆ†æ–¹ç¨‹] A --\u003e B A --\u003e C A --\u003e D A --\u003e E A --\u003e F A --\u003e G A --\u003e H A --\u003e I A --\u003e J A --\u003e K A --\u003e L A --\u003e M A --\u003e N A --\u003e O A --\u003e P A --\u003e Q 1.2 çº¿ä»£ # graph LR A[çº¿ä»£] B[ç¬¬ä¸€ç« ï¼šè¡Œåˆ—å¼çš„æ€§è´¨] C[ç¬¬äºŒç« ï¼šä½™å­å¼å’Œä»£æ•°ä½™å­å¼] D[ç¬¬ä¸‰ç« ï¼šè¡Œåˆ—å¼æŒ‰è¡Œæˆ–æŒ‰åˆ—å±•å¼€å®šç†] E[ç¬¬å››ç« ï¼šè®¡ç®—å…·ä½“å‹è¡Œåˆ—å¼çš„å¸¸ç”¨å…¬å¼] F[ç¬¬äº”ç« ï¼šè®¡ç®—æŠ½è±¡å‹è¡Œåˆ—å¼çš„å¸¸ç”¨å…¬å¼] G[ç¬¬å…­ç« ï¼šå…‹æ‹‰å§†æ³•åˆ™] H[ç¬¬ä¸ƒç« ï¼šç‰¹æ®Šçš„çŸ©é˜µ] I[ç¬¬å…«ç« ï¼šçŸ©é˜µçš„è¿ç®—] J[ç¬¬ä¹ç« ï¼šä¼´éšçŸ©é˜µ] K[ç¬¬åç« ï¼šé€†çŸ©é˜µ] L[ç¬¬åä¸€ç« ï¼šåˆç­‰å˜æ¢å’Œåˆç­‰ä¸¾è¯] M[ç¬¬åäºŒç« ï¼šçŸ©é˜µçš„ç§©] N[ç¬¬åä¸‰ç« ï¼šnç»´å‘é‡çš„æ¦‚å¿µå’Œè¿ç®—] O[ç¬¬åå››ç« ï¼šå‘é‡ç»„çš„çº¿æ€§è¡¨ç¤ºä¸å‘é‡ç»„çš„çº¿æ€§ç›¸å…³æ€§å®šä¹‰] P[ç¬¬åäº”ç« ï¼šçº¿æ€§ç›¸å…³ä¸çº¿æ€§æ— å…³çš„ç»“è®º] Q[ç¬¬åå…­ç« ï¼šçº¿æ€§è¡¨å‡ºç›¸å…³ç»“è®º] R[ç¬¬åä¸ƒç« ï¼šå‘é‡çš„å†…ç§¯åŠæ­£äº¤æ€§] S[ç¬¬åå…«ç« ï¼šé½æ¬¡çº¿æ€§æ–¹ç¨‹ç»„] T[ç¬¬åä¹ç« ï¼šéé½æ¬¡çº¿æ€§æ–¹ç¨‹ç»„] U[ç¬¬äºŒåç« ï¼šç‰¹å¾å€¼å’Œç‰¹å¾å‘é‡] V[ç¬¬äºŒåä¸€ç« ï¼šçŸ©é˜µçš„ç›¸ä¼¼å¯¹è§’åŒ–] W[ç¬¬äºŒåäºŒç« ï¼šå®å¯¹ç§°çŸ©é˜µçš„ç›¸ä¼¼å¯¹è§’åŒ–] X[ç¬¬äºŒåä¸‰ç« ï¼šäºŒæ¬¡å‹åŠå…¶æ ‡å‡†å‹] Y[ç¬¬äºŒåå››ç« :æ­£å®šäºŒæ¬¡å‹] Z[ç¬¬äºŒåäº”ç« ï¼šçŸ©é˜µç­‰ä»·ã€ç›¸ä¼¼ä¸åˆåŒé—´çš„å¼‚åŒ] A --\u003e B A --\u003e C A --\u003e D A --\u003e E A --\u003e F A --\u003e G A --\u003e H A --\u003e I A --\u003e J A --\u003e K A --\u003e L A --\u003e M A --\u003e N A --\u003e O A --\u003e P A --\u003e Q A --\u003e R A --\u003e S A --\u003e T A --\u003e U A --\u003e V A --\u003e W A --\u003e X A --\u003e Y A --\u003e Z 2. è‹±äºŒ # graph LR A[è‹±äºŒ] B[ç¬¬ä¸€éƒ¨åˆ†ï¼šå°ä½œæ–‡] C[ç¬¬äºŒéƒ¨åˆ†ï¼šå¤§ä½œæ–‡] D[ç¬¬ä¸‰éƒ¨åˆ†ï¼šé˜…è¯»4ç¯‡] E[ç¬¬å››éƒ¨åˆ†ï¼šæ–°é¢˜å‹] F[ç¬¬äº”éƒ¨åˆ†ï¼šç¿»è¯‘] G[ç¬¬å…­éƒ¨åˆ†ï¼šå®Œå‹] A --\u003e B A --\u003e C A --\u003e D A --\u003e E A --\u003e F A --\u003e G 3. ä¿¡å· # graph LR A[ä¿¡å·] B[ç¬¬ä¸€ç« ï¼šç»ªè®ºä¸åŸºç¡€] C[ç¬¬äºŒç« ï¼šè¿ç»­ç³»ç»Ÿçš„æ—¶åŸŸåˆ†æ] D[ç¬¬ä¸‰ç« ï¼šå‚…é‡Œå¶å˜æ¢] E[ç¬¬å››ç« ï¼šæ‹‰æ°å˜æ¢å’Œè¿ç»­æ—¶é—´ç³»ç»Ÿçš„såŸŸåˆ†æ] F[ç¬¬äº”ç« ï¼šæ»¤æ³¢ã€è°ƒåˆ¶ã€æŠ½æ ·] G[ç¬¬å…­ç« ï¼šèƒ½é‡ä¿¡å·ä¸åŠŸç‡ä¿¡å·ã€èƒ½é‡è°±ä¸åŠŸç‡è°±] H[ç¬¬ä¸ƒç« ï¼šç¦»æ•£æ—¶é—´ç³»ç»Ÿçš„æ—¶åŸŸåˆ†æ] I[ç¬¬å…«ç« ï¼šZå˜æ¢ç¦»æ•£æ—¶é—´ç³»ç»Ÿçš„ZåŸŸåˆ†æ] J[ç¬¬ä¹ç« ï¼šæµå›¾] K[ç¬¬åç« ï¼šç³»ç»Ÿçš„çŠ¶æ€å˜é‡åˆ†æ] L[ç¬¬åä¸€ç« ï¼šç³»ç»Ÿå‡½æ•°çš„è¡¥å……] M[ç¬¬åäºŒç« ï¼šç”µè·¯åˆ†æä¸“é¢˜] A --\u003e B A --\u003e C A --\u003e D A --\u003e E A --\u003e F A --\u003e G A --\u003e H A --\u003e I A --\u003e J A --\u003e K A --\u003e L A --\u003e M 4. ç”µè·¯ # graph LR A[ç”µè·¯] B[ç¬¬ä¸€ç« ï¼šç”µè·¯çš„åŸºæœ¬æ¦‚å¿µå’Œå®šå¾‹] C[ç¬¬äºŒç« ï¼šç”µé˜»ç”µè·¯åˆ†æ] D[ç¬¬ä¸‰ç« ï¼šåŠ¨æ€ç”µè·¯] E[ç¬¬å››ç« ï¼šæ­£å¼¦ç¨³æ€ç”µè·¯] F[ç¬¬äº”ç« ï¼šç”µè·¯çš„é¢‘ç‡å“åº”å’Œè°æŒ¯ç”µè·¯] G[ç¬¬å…­ç« ï¼šäºŒç«¯å£ç”µè·¯] A --\u003e B A --\u003e C A --\u003e D A --\u003e E A --\u003e F A --\u003e G 5. æ”¿æ²» # graph LR A[æ”¿æ²»] B[ç¬¬ä¸€ç« ï¼šé©¬åŸ] C[ç¬¬äºŒç« ï¼šæ¯›æ¦‚] D[ç¬¬ä¸‰ç« ï¼šæ–°æ€æƒ³] E[ç¬¬å››ç« ï¼šå²çº²] F[ç¬¬äº”ç« ï¼šæ€ä¿®] G[ç¬¬å…­ç« ï¼šæ—¶æ”¿] A --\u003e B A --\u003e C A --\u003e D A --\u003e E A --\u003e F A --\u003e G ","date":"2025å¹´1æœˆ12æ—¥","externalUrl":null,"permalink":"/postgraduate/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/","section":"å­¦ä¹ æ€è€ƒ","summary":"","title":"ã€æ€ç»´å¯¼å›¾ã€‘æ•°äºŒè‹±äºŒ+æ”¿æ²»+ä¿¡å·+ç”µè·¯","type":"postgraduate"},{"content":"","date":"2024å¹´12æœˆ31æ—¥","externalUrl":null,"permalink":"/tags/mac/","section":"Tags","summary":"","title":"Mac","type":"tags"},{"content":"","date":"2024å¹´12æœˆ31æ—¥","externalUrl":null,"permalink":"/tags/win/","section":"Tags","summary":"","title":"Win","type":"tags"},{"content":" ä¸€ã€ä¸ºä»€ä¹ˆä½¿ç”¨ DwarFS # DwarFS å’Œæ™®é€šå‹ç¼©æ–¹å¼ç›¸æ¯”æœ‰å‡ ä¸ªä¸»è¦ä¼˜åŠ¿ï¼š\né‡å¤æ•°æ®å…±äº«\nDwarFS ä¼šè¯†åˆ«å¹¶åˆå¹¶ç›¸åŒçš„æ–‡ä»¶å’Œæ•°æ®å—,åªå­˜å‚¨ä¸€ä»½ å¯¹äºå¤‡ä»½æ¥è¯´ç‰¹åˆ«æœ‰ç”¨,å› ä¸ºå¤‡ä»½ç»å¸¸åŒ…å«å¤§é‡é‡å¤æ–‡ä»¶ éšæœºè®¿é—®èƒ½åŠ›\nå¯ä»¥ç›´æ¥è®¿é—®å‹ç¼©æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä»»æ„æ–‡ä»¶ æ™®é€šå‹ç¼©åŒ…éœ€è¦å…ˆè§£å‹æ‰èƒ½è®¿é—®æ–‡ä»¶ åªè¯»ç‰¹æ€§\nDwarFS æ˜¯åªè¯»æ–‡ä»¶ç³»ç»Ÿ,æ•°æ®ä¸ä¼šè¢«æ„å¤–ä¿®æ”¹ éå¸¸é€‚åˆé•¿æœŸå½’æ¡£å­˜å‚¨ æ›´å¥½çš„å‹ç¼©ç‡\né’ˆå¯¹ç‰¹å®šæ–‡ä»¶ç±»å‹ä¼˜åŒ–çš„å‹ç¼©ç®—æ³• å¯ä»¥è¾¾åˆ°æ¯”æ™®é€šå‹ç¼©æ›´é«˜çš„å‹ç¼©æ¯” ä¸è¿‡ DwarFS ä¹Ÿæœ‰ä¸€äº›å±€é™:\nä¸æ”¯æŒå†™å…¥,åªèƒ½è¯»å– åˆ›å»ºè¿‡ç¨‹è¾ƒæ…¢ éœ€è¦é¢å¤–çš„ç³»ç»Ÿæ”¯æŒ äºŒã€åŸºç¡€ä½¿ç”¨ # ä»¥ä¸‹ä»¥ archlinuxå¹³å°ä¸ºä¾‹ï¼Œå…¶ä»–ç³»ç»Ÿå¯ä»¥ç•¥ä½œå‚è€ƒã€‚\nå®‰è£…\nparu -S dwarfs-bin åˆ›å»ºé•œåƒ\nmkdwarfs -i \u0026lt;æ–‡ä»¶å¤¹è·¯å¾„\u0026gt; -o \u0026lt;é•œåƒæ–‡ä»¶è·¯å¾„/é•œåƒæ–‡ä»¶å.dwarfs\u0026gt; è§£å‹é•œåƒ\ndwarfsextract -i \u0026lt;é•œåƒæ–‡ä»¶è·¯å¾„/é•œåƒæ–‡ä»¶å.dwarfs\u0026gt; -o \u0026lt;æ–‡ä»¶å¤¹è·¯å¾„\u0026gt; æŒ‚è½½é•œåƒï¼ˆæ³¨æ„ï¼šå†…å®¹ä¸ºåªè¯»ï¼‰\nsudo dwarfs \u0026lt;é•œåƒæ–‡ä»¶è·¯å¾„/é•œåƒæ–‡ä»¶å.dwarfs\u0026gt; \u0026lt;æŒ‚è½½è·¯å¾„\u0026gt; -o allow_other -o readonly å¸è½½æŒ‚è½½åçš„é•œåƒ\nsudo umount \u0026lt;æŒ‚è½½è·¯å¾„\u0026gt; ä¸‰ã€å®è·µ # 3.1 å®‰è£… # paru -S dwarfs-bin ç„¶åç¼–è¾‘ /etc/fuse.confæ–‡ä»¶ï¼Œå–æ¶ˆæ³¨é‡Š user_allow_otherè¡Œï¼Œä»¥å…è®¸é root ç”¨æˆ·æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿã€‚\n3.2 è®¾ç½®å•ç‹¬æ–‡ä»¶ MIME # åˆ›å»º /usr/share/mime/packages/x-dwarfs.xml\nsudo vim /usr/share/mime/packages/x-dwarfs.xml æ·»åŠ å†…å®¹\n\u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;mime-info xmlns=\u0026#34;http://www.freedesktop.org/standards/shared-mime-info\u0026#34;\u0026gt; \u0026lt;mime-type type=\u0026#34;application/x-dwarfs\u0026#34;\u0026gt; \u0026lt;comment\u0026gt;DwarFS Archive\u0026lt;/comment\u0026gt; \u0026lt;icon name=\u0026#34;application-zip\u0026#34;/\u0026gt; \u0026lt;glob-deleteall/\u0026gt; \u0026lt;glob pattern=\u0026#34;*.dwarfs\u0026#34;/\u0026gt; \u0026lt;/mime-type\u0026gt; \u0026lt;/mime-info\u0026gt; æ›´æ–° MIME æ•°æ®åº“\nsudo update-mime-database /usr/share/mime 3.3 å…¶ä»– # ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼ˆgnome+waylandï¼‰ï¼Œæˆ‘å®‰è£…äº† Actions For Nautilusï¼Œå¹¶ä¸”ä½¿ç”¨ notify-sendå‘é€é€šçŸ¥ã€‚\nç›¸å…³ json é…ç½®å¦‚ä¸‹ï¼ˆè¯·æ›¿æ¢ usernameä¸ºä½ çš„ç”¨æˆ·åï¼‰ï¼š\n{ \u0026#34;actions\u0026#34;: [ { \u0026#34;type\u0026#34;: \u0026#34;command\u0026#34;, \u0026#34;label\u0026#34;: \u0026#34;DwarFS å‹ç¼©\u0026#34;, \u0026#34;command_line\u0026#34;: \u0026#34;notify-send \\\u0026#34;DwarFS å‹ç¼©\\\u0026#34; \\\u0026#34;è¯·ç­‰å¾…å‹ç¼©å®Œæˆ\\\u0026#34; \u0026amp;\u0026amp; mkdwarfs -i %f -o %f.dwarfs \u0026amp;\u0026amp; notify-send \\\u0026#34;DwarFS å‹ç¼©\\\u0026#34; \\\u0026#34;æ–‡ä»¶å¤¹ %b å‹ç¼©æˆåŠŸ\\\u0026#34; || notify-send \\\u0026#34;DwarFS å‹ç¼©\\\u0026#34; \\\u0026#34;æ–‡ä»¶å¤¹ %b å‹ç¼©å¤±è´¥\\\u0026#34;\u0026#34;, \u0026#34;use_shell\u0026#34;: true, \u0026#34;filetypes\u0026#34;: [\u0026#34;directory\u0026#34;] }, { \u0026#34;type\u0026#34;: \u0026#34;command\u0026#34;, \u0026#34;label\u0026#34;: \u0026#34;DwarFS è§£å‹\u0026#34;, \u0026#34;command_line\u0026#34;: \u0026#34;[ ! -d \\\u0026#34;%D/%W\\\u0026#34; ] \u0026amp;\u0026amp; mkdir -p \\\u0026#34;%D/%W\\\u0026#34; \u0026amp;\u0026amp; dwarfsextract -i \\\u0026#34;%f\\\u0026#34; -o \\\u0026#34;%D/%W\\\u0026#34; \u0026amp;\u0026amp; notify-send \\\u0026#34;DwarFS è§£å‹æˆåŠŸ\\\u0026#34; \\\u0026#34;%b è§£å‹æˆåŠŸ\\\u0026#34; || { [ -d \\\u0026#34;%D/%W\\\u0026#34; ] \u0026amp;\u0026amp; notify-send \\\u0026#34;DwarFS è§£å‹å¤±è´¥\\\u0026#34; \\\u0026#34;æ–‡ä»¶å¤¹ %D/%W å·²å­˜åœ¨\\\u0026#34; || notify-send \\\u0026#34;DwarFS è§£å‹å¤±è´¥\\\u0026#34; \\\u0026#34;%b è§£å‹å¤±è´¥\\\u0026#34;; }\u0026#34;, \u0026#34;use_shell\u0026#34;: true, \u0026#34;mimetypes\u0026#34;: [\u0026#34;application/x-dwarfs\u0026#34;] }, { \u0026#34;type\u0026#34;: \u0026#34;command\u0026#34;, \u0026#34;label\u0026#34;: \u0026#34;DwarFS æŒ‚è½½\u0026#34;, \u0026#34;command_line\u0026#34;: \u0026#34;PASSWORD=$(zenity --password --title \\\u0026#34;æŒ‚è½½DwarFSé•œåƒ:%w\\\u0026#34; --width 500) \u0026amp;\u0026amp; echo \\\u0026#34;$PASSWORD\\\u0026#34; | sudo -S true \u0026amp;\u0026amp; sudo mkdir -p /run/media/username/%w \u0026amp;\u0026amp; sudo dwarfs %f /run/media/username/%w -o allow_other -o readonly \u0026amp;\u0026amp; notify-send \\\u0026#34;DwarFS æŒ‚è½½\\\u0026#34; \\\u0026#34;%b æŒ‚è½½æˆåŠŸ\\\u0026#34; || notify-send \\\u0026#34;DwarFS æŒ‚è½½\\\u0026#34; \\\u0026#34;%b æŒ‚è½½å¤±è´¥\\\u0026#34;\u0026#34;, \u0026#34;use_shell\u0026#34;: true, \u0026#34;mimetypes\u0026#34;: [\u0026#34;application/x-dwarfs\u0026#34;] }, { \u0026#34;type\u0026#34;: \u0026#34;command\u0026#34;, \u0026#34;label\u0026#34;: \u0026#34;DwarFS å¸è½½\u0026#34;, \u0026#34;command_line\u0026#34;: \u0026#34;PASSWORD=$(zenity --password --title \\\u0026#34;å¸è½½DwarFSé•œåƒ:%w\\\u0026#34; --width 500) \u0026amp;\u0026amp; echo \\\u0026#34;$PASSWORD\\\u0026#34; | sudo -S true \u0026amp;\u0026amp; sudo umount /run/media/username/%w \u0026amp;\u0026amp; sudo rm -rf /run/media/username/%w \u0026amp;\u0026amp; notify-send \\\u0026#34;DwarFS å¸è½½\\\u0026#34; \\\u0026#34;%b å¸è½½æˆåŠŸ\\\u0026#34; || notify-send \\\u0026#34;DwarFS å¸è½½\\\u0026#34; \\\u0026#34;%b å¸è½½å¤±è´¥\\\u0026#34;\u0026#34;, \u0026#34;use_shell\u0026#34;: true, \u0026#34;mimetypes\u0026#34;: [\u0026#34;application/x-dwarfs\u0026#34;] } ], \u0026#34;sort\u0026#34;: \u0026#34;manual\u0026#34;, \u0026#34;debug\u0026#34;: true } 88. å‚è€ƒèµ„æ–™ # ç‚¹å‡»å±•å¼€æŸ¥çœ‹å‚è€ƒèµ„æ–™ https://tech.meituan.com/2021/01/07/pack-gzip-zstd-lz4.html https://zh.wikipedia.org/wiki/%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%E5%88%97%E8%A1%A8 ","date":"2024å¹´12æœˆ31æ—¥","externalUrl":null,"permalink":"/posts/%E4%BD%BF%E7%94%A8dwarfs%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6/","section":"æ–‡ç« ","summary":"","title":"ä½¿ç”¨DwarFSå‹ç¼©æ–‡ä»¶","type":"posts"},{"content":"","date":"2024å¹´12æœˆ17æ—¥","externalUrl":null,"permalink":"/tags/ai/","section":"Tags","summary":"","title":"AI","type":"tags"},{"content":" 0. å†™åœ¨å¼€å¤´ # ä»…ç”¨äºè®°å½•éƒ¨ç½²æµç¨‹ï¼Œç”¨æˆ·åusernameã€é¡¹ç›®åprojectnameã€æ–‡ä»¶å¤¹åç­‰ä¿¡æ¯å‡ä¸ºç¤ºä¾‹ï¼Œå®é™…éƒ¨ç½²æ—¶è¯·æ ¹æ®å®é™…æƒ…å†µå…¨å±€æ›¿æ¢ã€‚\nç”¨æˆ·åï¼šusername é¡¹ç›®åï¼šprojectname 1. è£…é…å¥½æœåŠ¡å™¨ç¡¬ä»¶å¹¶å®‰è£…ç³»ç»ŸåŠåŸºç¡€ç¯å¢ƒ # è£…é…å¥½æœåŠ¡å™¨ç¡¬ä»¶ï¼Œè¿æ¥å¥½ç”µæºã€ç½‘çº¿ç­‰å¤–éƒ¨è®¾å¤‡ å®‰è£… Ubuntu20.04 ç³»ç»Ÿ é•œåƒï¼šubuntu-20.04.6-desktop-amd64.iso æ›´æ–°å’Œå…¶ä»–è½¯ä»¶ï¼šæ­£å¸¸å®‰è£…ã€å®‰è£… Ubuntu æ—¶ä¸‹è½½æ›´æ–°ã€å®‰è£…ç¬¬ä¸‰æ–¹è½¯ä»¶ å®‰è£…ç±»å‹ï¼šæ¸…é™¤æ•´ä¸ªç£ç›˜å¹¶å®‰è£… Ubuntuã€é€‰æ‹©ç³»ç»Ÿç›˜ å§“åï¼šusername ç”¨æˆ·åï¼šusername é€‰ä¸­è‡ªåŠ¨ç™»å½• å®‰è£…å®Œæˆåï¼Œæ‹·è´é¡¹ç›®æ–‡ä»¶å¤¹å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨ï¼Œè§£å‹åˆ°/home/username/usernameæ–‡ä»¶å¤¹ä¸‹ï¼Œé‡å‘½åä¸ºprojectname å†æ‰“å¼€è½¯ä»¶å’Œæ›´æ–°çš„é™„åŠ é©±åŠ¨ï¼Œé€‰ä¸­æœ€æ–°çš„é©±åŠ¨ï¼ˆåº”è¯¥æ˜¯nvidia-driver-5xxï¼‰ï¼Œç­‰å¾…ä¸‹è½½ï¼Œå®‰è£…å®Œæˆåé‡å¯ 2. å®‰è£…å¹¶è®¾ç½® conda # ä¸‹è½½ miniforge å¹¶å®‰è£…ï¼ˆpsï¼šä¸çŸ¥å…·ä½“æ–‡ä»¶ï¼Œè§é™„ä»¶ï¼‰\ncd /home/username/username/projectname chmod +x deploy/*.sh ./deploy/install_miniforge.sh æµ‹è¯• conda æ˜¯å¦å®‰è£…æˆåŠŸ\né‡æ–°æ‰“å¼€ç»ˆç«¯ echo \u0026#39;export PATH=\u0026#34;$HOME/miniforge3/bin:$PATH\u0026#34;\u0026#39; \u0026gt;\u0026gt; ~/.bashrc conda -V æœ‰ç±»ä¼¼conda xx.xxå°±è¯´æ˜ conda å®‰è£…æˆåŠŸ é…ç½® conda å’Œ pipï¼ˆ[è§é™„ä»¶]ï¼ˆpsï¼šä¸çŸ¥å…·ä½“æ–‡ä»¶ï¼Œè§é™„ä»¶ï¼‰\ncp deploy/.condarc /home/username/ mkdir -p /home/username/.config/pip/ cp deploy/pip.conf /home/username/.config/pip/ 3. åˆ›å»º conda ç¯å¢ƒå¹¶å®‰è£…é¡¹ç›®ä¾èµ– # è¯·æ ¹æ®å½“å‰è®¾å¤‡æ˜¯å¦è”ç½‘é€‰æ‹©å¯¹åº”çš„å®‰è£…æ–¹å¼\nps: è®°å¾—æ£€æŸ¥scriptså†…è„šæœ¬æ˜¯å¦ä¸ºåœ¨ conda æŒ‡å®šç¯å¢ƒè¿è¡Œï¼šconda run -n projectname \u0026lt;æ­£å¸¸å‘½ä»¤\u0026gt;ï¼Œæ²¡æœ‰åˆ™æ·»åŠ  ps: è®°å¾—æ£€æŸ¥scriptså†…è„šæœ¬æ˜¯å¦æœ‰export PATH=\u0026quot;/home/minifoge3/bin:$PATH\u0026quot; ï¼Œæ²¡æœ‰åˆ™æ·»åŠ  3.1 è”ç½‘ # åˆ›å»º conda ç¯å¢ƒï¼ˆpython ç‰ˆæœ¬æ ¹æ®å®é™…å·¥ç¨‹ç»™å®šï¼‰\nconda create -n projectname python=3.9 conda activate projectname å®‰è£…é¡¹ç›®ä¾èµ–\ncd /home/username/username/projectname conda activate projectname pip install -r requirements.txt æ£€æŸ¥åŒ…ï¼ˆæœ‰å°±è¯´æ˜æ— é—®é¢˜ï¼Œæ— è§†å‡ºç°ERROR: Pipe to stdout was brokenï¼‰ï¼š\nconda activate projectname (conda list | head -n 5 ) \u0026amp;\u0026amp; echo \u0026#34;======\u0026#34; \u0026amp;\u0026amp; (pip list | head -n 5 ) æµ‹è¯•è¿è¡Œç¨‹åºï¼š\nå¯åŠ¨ç¨‹åºï¼š cd /home/username/username/projectname \u0026amp;\u0026amp; chmod +x ./scripts/*.sh \u0026amp;\u0026amp; ./scripts/projectnamedetimgstart.sh ç­‰å¾…ç¨‹åºå®Œå…¨å¯åŠ¨åï¼Œåœ¨æ–°ç»ˆç«¯ä¸­æµ‹è¯•ï¼š conda activate projectname cd /home/username/username/projectname python test/test.py æŸ¥çœ‹logsæ–‡ä»¶å¤¹ä¸‹æœ€æ–°çš„ä»¥æ—¥æœŸå‘½åçš„.logæ–‡ä»¶ï¼š\ntail -f /home/username/username/projectname/logs/\u0026lt;ä¿®æ”¹ä¸ºæ—¥æœŸæœ€æ–°çš„é‚£ä¸€ä¸ª\u0026gt;.log å…³é—­ç¨‹åºï¼š\ncd /home/username/username/projectname ./scripts/projectnamedetimgstop.sh 3.2 ä¸è”ç½‘ # 3.2.1 é¡¹ç›®ä¾èµ–æ‰“åŒ… # æ¿€æ´» projectname ç¯å¢ƒï¼š\nconda activate projectname å¯¼å‡º conda æ˜¾å¼ä¾èµ–åˆ—è¡¨ï¼š\nmkdir -p /home/username/projectname/extra \u0026amp;\u0026amp; conda list --explicit \u0026gt; /home/username/projectname/extra/conda_env.txt å¯¼å‡º pip åŒ…ä¾èµ–åˆ—è¡¨ï¼š\npip freeze \u0026gt; /home/username/projectname/extra/pip_requirements.txt ä¸‹è½½ conda åŒ…ï¼š\nmkdir -p /home/username/projectname/extra/conda_pkg \u0026amp;\u0026amp; wget -i /home/username/projectname/extra/conda_env.txt -P /home/username/projectname/extra/conda_pkg/ ä¸‹è½½ pip åŒ…ï¼š\nmkdir -p /home/username/projectname/extra/pip_pkg \u0026amp;\u0026amp; pip download -r /home/username/projectname/extra/pip_requirements.txt -d /home/username/projectname/extra/pip_pkg/ ä¿®æ”¹ conda æ˜¾å¼ä¾èµ–æ–‡ä»¶conda_env.txtå†…åŒ…çš„è·¯å¾„ä¸ºè¦å®‰è£…çš„è®¾å¤‡ä¸‹çš„å¯¹åº”åŒ…ä½ç½®çš„ç»å¯¹è·¯å¾„\n3.2.2 æœ¬åœ°å¼€å‘ç¯å¢ƒæµ‹è¯• # è§£å‹æˆ‘å‘ç»™ä½ çš„å‹ç¼©åŒ…ï¼Œè§£å‹åæ–‡ä»¶å¤¹åº”è¯¥æ˜¯/home/username/projectname\nåˆ›å»ºæ–°çš„ conda ç¯å¢ƒï¼ˆè¾“å…¥ y ç¡®è®¤ï¼Œä¸€å…± 2 æ¬¡ï¼‰ï¼š\nconda create --name local_test --no-default-packages --offline \u0026amp;\u0026amp; conda activate local_test åœ¨æ–°ç¯å¢ƒä¸­å®‰è£… conda åŒ…ï¼š\nconda install --name local_test --file /home/username/projectname/extra/conda_env_local.txt å®‰è£… pip åŒ…ï¼š\npip install --no-index --find-links /home/username/projectname/extra/pip_pkg/ -r /home/username/projectname/extra/pip_requirements.txt æ£€æŸ¥åŒ…ï¼ˆæœ‰å°±è¯´æ˜æ— é—®é¢˜ï¼Œæ— è§†å‡ºç°ERROR: Pipe to stdout was brokenï¼‰ï¼š\nconda activate projectname (conda list | head -n 5 ) \u0026amp;\u0026amp; echo \u0026#34;======\u0026#34; \u0026amp;\u0026amp; (pip list | head -n 5 ) æµ‹è¯•è¿è¡Œç¨‹åºï¼š\nå¯åŠ¨ç¨‹åºï¼š cd /home/username/projectname \u0026amp;\u0026amp; chmod +x ./scripts/*.sh \u0026amp;\u0026amp; ./scripts/projectnamedetimgstart.sh ç­‰å¾…ç¨‹åºå®Œå…¨å¯åŠ¨åï¼Œåœ¨æ–°ç»ˆç«¯ä¸­æµ‹è¯•ï¼š conda activate projectname cd /home/username/projectname python test/test.py æŸ¥çœ‹logsæ–‡ä»¶å¤¹ä¸‹æœ€æ–°çš„ä»¥æ—¥æœŸå‘½åçš„.logæ–‡ä»¶ï¼š\ntail -f /home/username/projectname/logs/\u0026lt;ä¿®æ”¹ä¸ºæ—¥æœŸæœ€æ–°çš„é‚£ä¸€ä¸ª\u0026gt;.log å…³é—­ç¨‹åºï¼š\ncd /home/username/projectname ./scripts/projectnamedetimgstop.sh 3.2.3 æœåŠ¡å™¨éƒ¨ç½² # åˆ›å»ºæ–°çš„ conda ç¯å¢ƒï¼š conda create --name projectname --no-default-packages --offline conda activate projectname åœ¨æ–°ç¯å¢ƒä¸­å®‰è£… conda åŒ…ï¼š conda activate projectname conda install --name projectname --file /home/username/username/projectname/extra/conda_env_server.txt å®‰è£… pip åŒ…ï¼š conda activate projectname pip install --no-index --find-links /home/username/username/projectname/extra/pip_pkg/ --no-deps -r /home/username/username/projectname/extra/pip_requirements.txt æ£€æŸ¥åŒ…ï¼ˆæœ‰å°±è¯´æ˜æ— é—®é¢˜ï¼Œæ— è§†å‡ºç°ERROR: Pipe to stdout was brokenï¼‰ï¼š conda activate projectname (conda list | head -n 5 ) \u0026amp;\u0026amp; echo \u0026#34;======\u0026#34; \u0026amp;\u0026amp; (pip list | head -n 5 ) æµ‹è¯•è¿è¡Œç¨‹åºï¼š å¯åŠ¨ç¨‹åºï¼š cd /home/username/username/projectname \u0026amp;\u0026amp; chmod +x ./scripts/*.sh \u0026amp;\u0026amp; ./scripts/projectnamedetimgstart.sh ç­‰å¾…ç¨‹åºå®Œå…¨å¯åŠ¨åï¼Œåœ¨æ–°ç»ˆç«¯ä¸­æµ‹è¯•ï¼š conda activate projectname cd /home/username/username/username/projectname python test/test.py æŸ¥çœ‹logsæ–‡ä»¶å¤¹ä¸‹æœ€æ–°çš„ä»¥æ—¥æœŸå‘½åçš„.logæ–‡ä»¶ï¼š tail -f /home/username/username/projectname/logs/\u0026lt;ä¿®æ”¹ä¸ºæ—¥æœŸæœ€æ–°çš„é‚£ä¸€ä¸ª\u0026gt;.log å…³é—­ç¨‹åºï¼š cd /home/username/username/projectname ./scripts/projectnamedetimgstop.sh 4. è®¾ç½®ç¨‹åºå¼€æœºè‡ªå¯å’Œå®ˆæŠ¤ # å®‰è£… supervisor å¹¶è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ sudo apt install -y supervisor sudo systemctl enable supervisor sudo systemctl start supervisor sudo systemctl status supervisor ä¿®æ”¹/home/username/username/projectname/deploy/illegaloperatedetimg.confå†…çš„è·¯å¾„ä¸ºå®é™…è·¯å¾„ è®¾ç½®ç¨‹åºå®ˆæŠ¤ cd /home/username/username/projectname sudo cp deploy/illegaloperatedetimg.conf /etc/supervisor/conf.d/ sudo supervisorctl reread sudo supervisorctl update æ£€æŸ¥æ•ˆæœ æ‰‹åŠ¨æ‰“å¼€/home/username/username/projectname/logsæ–‡ä»¶å¤¹ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰illegaloperatedetimg.logå’Œä»¥æ—¶é—´å‘½åçš„.logæ–‡ä»¶ï¼Œå¦‚æœæœ‰åˆ™è¯´æ˜ç¨‹åºå·²ç»åœ¨åå°è¿è¡Œã€‚ é‡å¯ï¼Œç­‰å¾…ç¨‹åºè‡ªå¯åŠ¨ï¼Œé‡å¤ä¸Šä¸€æ­¥æ“ä½œ 66. BUG ä¿®å¤ # è¿è¡Œå¯åŠ¨è„šæœ¬æ­£å¸¸ï¼Œä½†æ˜¯åœ¨æµ‹è¯•æ—¶ï¼Œå‡ºç°éæ³•æŒ‡ä»¤ (æ ¸å¿ƒå·²è½¬å‚¨) è§£å†³æ–¹æ³•: requirements.txté‡Œé¢çš„ paddlepaddle ç‰ˆæœ¬å·ä¿®æ”¹ä¸º2.5.2ï¼Œç„¶åè¿è¡Œ pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple 88. é™„ä»¶ # ç‚¹å‡»å±•å¼€æŸ¥çœ‹é™„ä»¶ install_miniforge.sh\n# æ£€æµ‹ç³»ç»Ÿæ¶æ„å¹¶è‡ªåŠ¨ä¸‹è½½å¯¹åº”çš„ Miniforge å®‰è£…åŒ…ï¼ˆå›½å†…åŠ é€Ÿï¼‰ ARCH=$(uname -m) if [ \u0026#34;$ARCH\u0026#34; = \u0026#34;x86_64\u0026#34; ]; then MINIFORGE_URL=\u0026#34;https://gh-proxy.com/github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-Linux-x86_64.sh\u0026#34; elif [ \u0026#34;$ARCH\u0026#34; = \u0026#34;aarch64\u0026#34; ]; then MINIFORGE_URL=\u0026#34;https://gh-proxy.com/github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-Linux-aarch64.sh\u0026#34; else echo \u0026#34;ä¸æ”¯æŒçš„æ¶æ„: $ARCH\u0026#34; exit 1 fi # ä¸‹è½½ Miniforge å®‰è£…è„šæœ¬ wget $MINIFORGE_URL -O Miniforge3.sh # èµ‹äºˆè„šæœ¬æ‰§è¡Œæƒé™ chmod +x Miniforge3.sh # æ‰§è¡Œå®‰è£…è„šæœ¬ ./Miniforge3.sh -b -p $HOME/miniforge3 # æ·»åŠ  Miniforge åˆ° PATH echo \u0026#39;export PATH=\u0026#34;$HOME/miniforge3/bin:$PATH\u0026#34;\u0026#39; \u0026gt;\u0026gt; ~/.bashrc # é‡æ–°åŠ è½½ shellï¼ˆå¯ç”¨ Miniforgeï¼‰ source ~/.bashrc # éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ conda --version pip.conf\n[global] # è®¾ç½®é»˜è®¤çš„ PyPI é•œåƒæºä¸ºæ¸…åå¤§å­¦çš„é•œåƒ index-url = https://pypi.tuna.tsinghua.edu.cn/simple # è®¾ç½®é¢å¤–çš„é•œåƒæº extra-index-url = https://mirrors.aliyun.com/pypi/simple/ https://pypi.doubanio.com/simple/ # è®¾ç½®å—ä¿¡ä»»çš„ä¸»æœºï¼Œç”¨äºé¿å… SSL è¯ä¹¦éªŒè¯é”™è¯¯ trusted-host = pypi.tuna.tsinghua.edu.cn mirrors.aliyun.com pypi.doubanio.com # ç¦ç”¨ pip ç‰ˆæœ¬æ£€æŸ¥ disable-pip-version-check = true # è®¾ç½®é‡è¯•æ¬¡æ•°ä¸º 3 æ¬¡ retries = 3 # è®¾ç½®è¶…æ—¶æ—¶é—´ä¸º 30 ç§’ timeout = 30 # è¦æ±‚ä½¿ç”¨ HTTPS require-https = true # æ˜¾ç¤ºè¿›åº¦æ¡ progress-bar = on # å…è®¸å½©è‰²è¾“å‡º no-color = false [install] # ä¼˜å…ˆä½¿ç”¨é¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶åŒ… prefer-binary = true # å…è®¸ç¼–è¯‘æºç åŒ… no-compile = false # å®‰è£…ä¾èµ– no-deps = false # ä¸å¿½ç•¥å·²å®‰è£…çš„åŒ… ignore-installed = false # æ˜¾ç¤ºè„šæœ¬å®‰è£…ä½ç½®çš„è­¦å‘Š no-warn-script-location = false [freeze] # åœ¨ freeze è¾“å‡ºä¸­æ’é™¤å¯ç¼–è¾‘å®‰è£…çš„åŒ… exclude-editable = true # æ˜¾ç¤ºæ‰€æœ‰å·²å®‰è£…çš„åŒ…ï¼ŒåŒ…æ‹¬ä¸æ˜¯ç›´æ¥å®‰è£…çš„åŒ… all = true [search] # é™åˆ¶æœç´¢ç»“æœæ•°é‡ä¸º 10 ä¸ª limit = 10 # åœ¨ PyPI ä¸Šæœç´¢åŒ… index = true .condarc\n# conda é…ç½®æ–‡ä»¶ # é…ç½®å¯ç”¨çš„åŒ…æº/é¢‘é“ channels: - https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge # æ¸…åå¤§å­¦é•œåƒçš„conda-forgeæº - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main # æ¸…åå¤§å­¦é•œåƒçš„å®˜æ–¹mainæº - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free # æ¸…åå¤§å­¦é•œåƒçš„å®˜æ–¹freeæº - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r # æ¸…åå¤§å­¦é•œåƒçš„Rè¯­è¨€æº - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/pro # æ¸…åå¤§å­¦é•œåƒçš„proæº - conda-forge # é»˜è®¤çš„conda-forgeä½œä¸ºå…œåº•ï¼ˆå¯é€‰ï¼‰ # ä¸ä½¿ç”¨ssléªŒè¯ ssl_verify: false # æ˜¾ç¤ºè½¯ä»¶åŒ…çš„æ¥æºé¢‘é“ä¿¡æ¯ show_channel_urls: true # è®¾ç½®é¢‘é“ä¼˜å…ˆçº§ä¸ºä¸¥æ ¼æ¨¡å¼ # strictæ¨¡å¼ä¸‹å°†ä¸¥æ ¼æŒ‰ç…§channelsçš„é¡ºåºæŸ¥æ‰¾åŒ…ï¼Œåªä¼šä»ç¬¬ä¸€ä¸ªæ‰¾åˆ°çš„é¢‘é“å®‰è£…åŒ… channel_priority: strict # ç¦æ­¢è‡ªåŠ¨æ¿€æ´»baseç¯å¢ƒ auto_activate_base: false # åˆ›å»ºæ–°ç¯å¢ƒæ—¶é»˜è®¤å®‰è£…çš„åŒ… create_default_packages: - pip # åœ¨æ–°ç¯å¢ƒä¸­é»˜è®¤å®‰è£…pipï¼ˆä¹‹åä¸€ç›´ä½¿ç”¨pipæ¥å®‰è£…åŒ…ï¼‰ illegaloperatedetimg.conf\n[program:illegaloperatedetimg] # è®¾ç½®ç¨‹åºçš„å·¥ä½œç›®å½• directory=/home/username/username/projectname # æŒ‡å®šè¦æ‰§è¡Œçš„å‘½ä»¤ command=bash scripts/projectnamedetimgstart.sh # è®¾ç½®ä¸º trueï¼Œè¡¨ç¤º supervisor å¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨è¯¥ç¨‹åº autostart=true # è®¾ç½®ä¸º trueï¼Œè¡¨ç¤ºç¨‹åºå´©æºƒæ—¶è‡ªåŠ¨é‡å¯ autorestart=true # è®¾ç½®æœ€å¤§é‡å¯å°è¯•æ¬¡æ•°ä¸º 200 æ¬¡ startretries=200 # è®¾ç½®åœæ­¢ç¨‹åºæ—¶ç­‰å¾…çš„ç§’æ•°ï¼Œè¶…è¿‡åå¼ºåˆ¶ç»ˆæ­¢ stopwaitsecs=10 # å°†æ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡º redirect_stderr=true # æŒ‡å®šæ ‡å‡†è¾“å‡ºæ—¥å¿—æ–‡ä»¶çš„ä½ç½® stdout_logfile=/home/username/username/projectname/logs/illegaloperatedetimg.log ","date":"2024å¹´12æœˆ17æ—¥","externalUrl":null,"permalink":"/posts/ai%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E8%AE%B0%E5%BD%95/","section":"æ–‡ç« ","summary":"","title":"AIæœåŠ¡å™¨éƒ¨ç½²æµç¨‹è®°å½•","type":"posts"},{"content":"","date":"2024å¹´12æœˆ17æ—¥","externalUrl":null,"permalink":"/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/","section":"Tags","summary":"","title":"æœåŠ¡å™¨","type":"tags"},{"content":"","date":"2024å¹´12æœˆ17æ—¥","externalUrl":null,"permalink":"/categories/%E8%87%AA%E7%94%A8/","section":"åˆ†ç±»","summary":"","title":"è‡ªç”¨","type":"categories"},{"content":"","date":"2024å¹´12æœˆ17æ—¥","externalUrl":null,"permalink":"/tags/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/","section":"Tags","summary":"","title":"é¡¹ç›®éƒ¨ç½²","type":"tags"},{"content":"","date":"2024å¹´12æœˆ9æ—¥","externalUrl":null,"permalink":"/tags/poe/","section":"Tags","summary":"","title":"Poe","type":"tags"},{"content":" å‰è¨€ # ç”±äºä½¿ç”¨ POE è¾ƒå°‘ï¼Œæ›´æ–°ä¸åŠæ—¶ï¼Œè„šæœ¬å¯èƒ½ä¸èƒ½ä½¿ç”¨ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹è‡ªè¡Œä¿®æ”¹å‡ ä¸ªé¡µé¢å‚æ•°å³å¯ã€‚ ç‚¹å‡»ç›´æ¥å®‰è£… ä»Šå¹´å¹´åˆçš„æ—¶å€™ï¼Œå‡ºäºè·Ÿè¿›å…ˆè¿›ç”Ÿäº§åŠ›çš„éœ€æ±‚ï¼Œåœ¨ä¼—å¤š AI å¹³å°ä¸­é€‰ä¸­äº†Poeã€‚\næ–°å†™äº†ä¸€ä¸ªæ¯å¤©æ›´æ–°çš„Poe æœºå™¨äººç§¯åˆ†é¡µé¢ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥çœ‹çœ‹ã€‚ å½“æ—¶ï¼Œå®ƒçš„ä¼˜åŠ¿å¦‚ä¸‹ï¼š\nåºå· é¡¹ç›® ä¼˜åŠ¿ 1 ä»·æ ¼ å½“æ—¶å°¼åŒºä»·æ ¼æ˜¯ 99900 å¥ˆæ‹‰ï¼ŒåŠ ä¸Šä¸€äº›æ¶ˆè€—ï¼Œå¤§æ¦‚ 500 ä¸€å¹´ã€‚\nè€Œä¸”å¯ä»¥å¹´ä»˜ï¼Œç›¸å¯¹ GPT å’Œ Claude çš„æœˆä»˜ï¼Œä½ä»·åŒºçš„æ”¶ç›Šæ›´é«˜ã€‚ 2 åŠŸèƒ½ æ”¯æŒå¤šå¹³å°çš„ AI æœåŠ¡ï¼ŒåŒ…æ‹¬å„ç‰ˆæœ¬ GPTã€å„ç‰ˆæœ¬ Claudeã€å„æœåŠ¡çš„é•¿ä¸Šä¸‹æ–‡ç‰ˆæœ¬ï¼Œæ›´æ–°çš„ä¹Ÿè¾ƒå¿«ã€‚\nå¹¶ä¸”æ˜¯å¹³å°æ–¹æ¥å…¥å®˜æ–¹ APIï¼Œè´¨é‡æ–¹é¢ç›¸å¯¹å…¶ä»–ç¬¬ä¸‰æ–¹æ›´æœ‰ä¿éšœã€‚ 3 æ˜¯å¦æ˜“ç”¨ æ”¯æŒå¯¹è¯ã€æ”¯æŒæœºå™¨äºº APIã€IP é™åˆ¶å°‘ï¼ˆps: ä¸åƒ Claude è€å°å·ï¼‰ 4 ç”¨é‡æ˜¯å¦è¶³å¤Ÿ æ¯æœˆ 100 ä¸‡ç§¯åˆ†ï¼Œæ¯æ¬¡å¯¹è¯æ¶ˆè€—å›ºå®šç§¯åˆ†ï¼Œé»˜è®¤ API çš„ä¸Šä¸‹æ–‡ã€‚ å½“æ—¶æ˜¯ä¸€ä¸ªäººä½¿ç”¨æ¯ä¸ªæœˆéƒ½ç”¨ä¸å®Œç§¯åˆ†ï¼Œç›´åˆ°å‰å‡ å¤© Poe æ›´æ–°äº†è®¡ç®—ç‚¹ç³»ç»Ÿï¼Œç­‰äºæ˜¯æ¯æ¬¡å¯¹è¯æ˜¯åœ¨åŸºç¡€å›ºå®šç§¯åˆ†ä¸ŠåŠ ä¸Š Token çš„æ¶ˆè€—ï¼Œè¿™æ ·ç›¸å¯¹ä¹‹å‰æ¥è¯´ï¼Œæ¶ˆè€—ç§¯åˆ†æ›´å¤šäº†ï¼Œç‰¹åˆ«æ˜¯é•¿ä¸Šä¸‹æ–‡æƒ…å†µä¸‹ï¼Œç§¯åˆ†æ¶ˆè€—å‡ ä¹æ˜¯æŒ‡æ•°ä¸Šå‡ã€‚\nä¸è¿‡ï¼Œç›¸å¯¹æ¥è¯´ï¼ŒPoe ä»·æ ¼ä¹Ÿè¿˜ç®—å®æƒ ã€‚å†ç›¸æ¯”æœ€è¿‘ GPT é™æ™ºã€Claude å°å·ï¼ŒPoe ä»ç„¶æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚\nä¸‹é¢æ˜¯ Poe å’Œå®˜ Key å¯¹æ¯”ï¼š\næ¶¨ä»·ä¹‹åæˆ‘ç®€å•ç®—äº†ä¸€ä¸‹ï¼Œè½¬å˜æ€æƒ³ï¼ŒæŠŠ Poe å½“æˆä¸ª 6 æŠ˜ API çœç€ç”¨ã€‚ä½¿ç”¨ä¹ æƒ¯ä¸Šï¼Œéå¿…è¦ä¸è¿½é—®ï¼Œéšæ‰‹æ¸…é™¤ä¸Šä¸‹æ–‡ï¼Œé—®é¢˜å°½é‡ä¸€æ®µè¯é—®å‡ºæ¥ï¼ˆç”šè‡³ä½¿ç”¨æ²‰æµ¸å¼ç¿»è¯‘æŠŠè¾“å…¥ç¿»è¯‘æˆè‹±æ–‡ï¼‰ï¼Œæ€»æ¯”ä¹°å®˜ key ä¾¿å®œã€‚\nä½†æ˜¯å‘¢ï¼Œè¿™ Poe åˆä¸æ˜¾ç¤ºæ¯æ¬¡å¯¹è¯æ¶ˆè€—çš„ç§¯åˆ†ï¼Œåªèƒ½åœ¨è®¾ç½®é¡µé¢çœ‹åˆ°å½“å‰æ€»ç§¯åˆ†ï¼Œå¾ˆéš¾å»çœ‹åˆ°æ¯æ¬¡å¯¹è¯æ¶ˆè€—çš„ç§¯åˆ†ã€‚ æ‰€ä»¥ï¼Œæˆ‘å†™äº†ä¸€ä¸ªè„šæœ¬ï¼Œç”¨æ¥æ˜¾ç¤ºæ¯æ¬¡å¯¹è¯çš„æ¶ˆè€—ç§¯åˆ†ï¼Œæ–¹ä¾¿è‡ªå·±æ§åˆ¶æ¶ˆè€—ã€‚\n1. è„šæœ¬æ•ˆæœ # æ˜¾ç¤ºå†…å®¹ï¼š\né‡ç½®æ—¶é—´ å½“å‰ç§¯åˆ† æœ¬æ¬¡æ¶ˆè€—ç§¯åˆ† 2. è„šæœ¬å†…å®¹ # ç‚¹å‡»å®‰è£… // ==UserScript== // @name Poeç§¯åˆ†æ˜¾ç¤º // @namespace http://tampermonkey.net/ // @version 1.4 // @author xiadengma // @description åœ¨æ¯æ¬¡å¯¹è¯çš„ä¸‹æ–¹æ˜¾ç¤ºå½“å‰ç§¯åˆ†å’Œæœ¬æ¬¡å¯¹è¯æ¶ˆè€—çš„ç§¯åˆ†ï¼Œå¹¶åœ¨é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºæœ€æ–°ç§¯åˆ† // @match *://poe.com/* // @grant GM_xmlhttpRequest // @grant GM_addStyle // @grant GM_getValue // @grant GM_setValue // @icon https://psc2.cf2.poecdn.net/assets/favicon.svg // @updateURL https://gist.githubusercontent.com/XIADENGMA/62e1239fdbd9c9b7ca0da285c2756fd1/raw/Poe_show_points_usage.user.js // @downloadURL https://gist.githubusercontent.com/XIADENGMA/62e1239fdbd9c9b7ca0da285c2756fd1/raw/Poe_show_points_usage.user.js // ==/UserScript== (function () { \u0026#39;use strict\u0026#39;; const DEBUG = false; const log = DEBUG ? console.log.bind(console, \u0026#39;[Poeç§¯åˆ†æ˜¾ç¤º]\u0026#39;) : () =\u0026gt; { }; const error = DEBUG ? console.error.bind(console, \u0026#39;[Poeç§¯åˆ†æ˜¾ç¤º]\u0026#39;) : () =\u0026gt; { }; const SELECTORS = { messagePair: \u0026#39;.ChatMessagesView_messageTuple__Jh5lQ\u0026#39;, inputMessage: \u0026#39;.Message_rightSideMessageBubble__ioa_i\u0026#39;, outputMessage: \u0026#39;.Message_leftSideMessageBubble__VPdk6\u0026#39;, stopButton: \u0026#39;button[aria-label=\u0026#34;åœæ­¢ä¿¡æ¯\u0026#34;]\u0026#39;, actionBar: \u0026#39;section.ChatMessageActionBar_actionBar__gyeEs\u0026#39;, pointsElement: \u0026#39;.SettingsSubscriptionSection_computePointsValue___DLOM\u0026#39;, resetElement: \u0026#39;.SettingsSubscriptionSection_subtext__cZuI6\u0026#39;, messagePointLimitElement: \u0026#39;.DefaultMessagePointLimit_computePointsValue__YYJkB\u0026#39; }; const CONFIG = { checkInterval: 200, stableCount: 1, cacheExpiry: 5 * 60 * 1000, retryLimit: 3, retryDelay: 1000, maxPointsFetchAttempts: 5 }; const state = { pointsBeforeOutput: null, resetDate: \u0026#39;\u0026#39;, processedInputNodes: new WeakSet(), processedOutputNodes: new WeakSet(), initialLoadCompleted: false, isFetching: false, isInitialized: false, observer: null, }; GM_addStyle(` .points-info { font-size: 12px; padding: 8px 16px; margin: 8px 0; font-family: -apple-system, BlinkMacSystemFont, \u0026#34;Segoe UI\u0026#34;, Roboto, \u0026#34;Helvetica Neue\u0026#34;, Arial, sans-serif; background: rgba(255, 255, 255, 0.05); border-radius: 8px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 8px; } .points-info-highlight { color: #fff !important; } `); const throttle = (func, limit) =\u0026gt; { let lastFunc; let lastRan; return function () { const context = this; const args = arguments; if (!lastRan) { func.apply(context, args); lastRan = Date.now(); } else { clearTimeout(lastFunc); lastFunc = setTimeout(function () { if ((Date.now() - lastRan) \u0026gt;= limit) { func.apply(context, args); lastRan = Date.now(); } }, limit - (Date.now() - lastRan)); } } } async function fetchPoints(retryCount = 0) { if (state.isFetching) { await new Promise(resolve =\u0026gt; setTimeout(resolve, 100)); return fetchPoints(retryCount); } state.isFetching = true; try { log(\u0026#39;æ­£åœ¨è·å–ç§¯åˆ†ä¿¡æ¯...\u0026#39;); const response = await new Promise((resolve, reject) =\u0026gt; { GM_xmlhttpRequest({ method: \u0026#39;GET\u0026#39;, url: \u0026#39;https://poe.com/settings\u0026#39;, onload: resolve, onerror: reject }); }); const doc = new DOMParser().parseFromString(response.responseText, \u0026#39;text/html\u0026#39;); const pointsElement = doc.querySelector(SELECTORS.pointsElement); const resetElement = doc.querySelector(SELECTORS.resetElement); const messagePointLimitElement = doc.querySelector(SELECTORS.messagePointLimitElement); if (!pointsElement) { throw new Error(\u0026#39;ç§¯åˆ†å…ƒç´ ä¸¢å¤±\u0026#39;); } const currentPoints = parseInt(pointsElement.textContent.replace(/,/g, \u0026#39;\u0026#39;), 10); log(\u0026#39;å½“å‰ç§¯åˆ†:\u0026#39;, currentPoints); if (resetElement) { state.resetDate = resetElement.textContent.trim(); log(\u0026#39;é‡ç½®æ—¶é—´:\u0026#39;, state.resetDate); } if (messagePointLimitElement) { state.messagePointLimit = parseInt(messagePointLimitElement.textContent.replace(/,/g, \u0026#39;\u0026#39;), 10); log(\u0026#39;å…¨å±€å•æ¡ä¿¡æ¯é¢„ç®—:\u0026#39;, state.messagePointLimit); } state.pointsBeforeOutput = currentPoints; return currentPoints; } catch (err) { error(\u0026#39;è·å–ç§¯åˆ†ä¿¡æ¯å¤±è´¥\u0026#39;, err); if (retryCount \u0026lt; CONFIG.retryLimit) { log(`é‡è¯•è·å–ç§¯åˆ† (${retryCount + 1}/${CONFIG.retryLimit})...`); await new Promise(resolve =\u0026gt; setTimeout(resolve, CONFIG.retryDelay)); return fetchPoints(retryCount + 1); } throw err; } finally { state.isFetching = false; } } function monitorMessages() { log(\u0026#39;å¼€å§‹ç›‘å¬æ¶ˆæ¯...\u0026#39;); if (state.observer) { state.observer.disconnect(); } state.observer = new MutationObserver(throttledHandleMutations); state.observer.observe(document.body, { childList: true, subtree: true }); detectInitialLoadCompletion(); } function detectInitialLoadCompletion() { let messageCount = 0; let lastMessageCount = 0; let stableCount = 0; const checkComplete = () =\u0026gt; { messageCount = document.querySelectorAll(SELECTORS.messagePair).length; if (messageCount === lastMessageCount) { if (++stableCount \u0026gt;= CONFIG.stableCount) { log(\u0026#39;åˆå§‹åŠ è½½å®Œæˆï¼Œå¼€å§‹å¿½ç•¥å†å²æ¶ˆæ¯\u0026#39;); state.initialLoadCompleted = true; displayLatestPointsInfo(); return; } } else { stableCount = 0; } lastMessageCount = messageCount; setTimeout(checkComplete, CONFIG.checkInterval); }; checkComplete(); } const throttledHandleMutations = throttle(handleMutations, 200); function handleMutations(mutations) { for (const mutation of mutations) { for (const node of mutation.addedNodes) { if (node.nodeType === Node.ELEMENT_NODE) { const messagePair = node.closest(SELECTORS.messagePair); if (messagePair) { processMessagePair(messagePair); } } } } } const isMessageGenerating = () =\u0026gt; !!document.querySelector(SELECTORS.stopButton); function waitForMessageCompletion(outputMessage) { return new Promise(resolve =\u0026gt; { let lastContent = outputMessage.textContent; let stableCount = 0; const checkComplete = () =\u0026gt; { const currentContent = outputMessage.textContent; if (currentContent === lastContent \u0026amp;\u0026amp; !isMessageGenerating()) { if (++stableCount \u0026gt;= CONFIG.stableCount) { log(\u0026#39;æ¶ˆæ¯è¾“å‡ºå·²å®Œæˆ\u0026#39;); resolve(); return; } } else { stableCount = 0; } lastContent = currentContent; setTimeout(checkComplete, CONFIG.checkInterval); }; checkComplete(); }); } async function processMessagePair(messagePair) { if (!state.isInitialized || !state.initialLoadCompleted) { log(\u0026#39;è„šæœ¬å°šæœªå®Œå…¨åˆå§‹åŒ–æˆ–é¡µé¢æœªåŠ è½½å®Œæˆï¼Œè·³è¿‡æ¶ˆæ¯å¤„ç†\u0026#39;); return; } const inputMessage = messagePair.querySelector(SELECTORS.inputMessage); if (inputMessage \u0026amp;\u0026amp; !state.processedInputNodes.has(inputMessage)) { log(\u0026#39;æ£€æµ‹åˆ°æ–°çš„è¾“å…¥æ¶ˆæ¯\u0026#39;); state.processedInputNodes.add(inputMessage); log(\u0026#39;è¾“å…¥å‰ç§¯åˆ†:\u0026#39;, state.pointsBeforeOutput); } const outputMessage = messagePair.querySelector(SELECTORS.outputMessage); if (outputMessage \u0026amp;\u0026amp; !state.processedOutputNodes.has(outputMessage)) { if (!outputMessage.textContent.trim()) { log(\u0026#39;è¾“å‡ºæ¶ˆæ¯å°šæœªå®Œæ•´ï¼Œç­‰å¾…åŠ è½½...\u0026#39;); return; } log(\u0026#39;æ£€æµ‹åˆ°æ–°çš„è¾“å‡ºæ¶ˆæ¯\u0026#39;); state.processedOutputNodes.add(outputMessage); const pointsBeforeOutput = state.pointsBeforeOutput; log(\u0026#39;è¾“å‡ºå‰ç§¯åˆ†:\u0026#39;, pointsBeforeOutput); try { await waitForMessageCompletion(outputMessage); log(\u0026#39;æ¶ˆæ¯å·²å®Œå…¨è¾“å‡ºï¼Œç­‰å¾…ç§¯åˆ†æ›´æ–°...\u0026#39;); await new Promise(resolve =\u0026gt; setTimeout(resolve, 500)); let pointsAfterOutput = pointsBeforeOutput; for (let i = 0; i \u0026lt; CONFIG.maxPointsFetchAttempts; i++) { const newPoints = await fetchPoints(); if (newPoints !== pointsBeforeOutput) { pointsAfterOutput = newPoints; break; } log(`ç¬¬ ${i + 1} æ¬¡å°è¯•è·å–ç§¯åˆ†ï¼Œæœªå‘ç°å˜åŒ–`); if (i \u0026lt; CONFIG.maxPointsFetchAttempts - 1) { await new Promise(resolve =\u0026gt; setTimeout(resolve, 1000)); } } const pointsUsed = pointsBeforeOutput - pointsAfterOutput; log(\u0026#39;è¾“å‡ºåç§¯åˆ†:\u0026#39;, pointsAfterOutput); log(\u0026#39;æœ¬æ¬¡å¯¹è¯æ¶ˆè€—ç§¯åˆ†:\u0026#39;, pointsUsed); if (pointsUsed \u0026gt; 0) { displayPointsInfo(messagePair, pointsAfterOutput, pointsUsed); } state.pointsBeforeOutput = pointsAfterOutput; } catch (err) { error(\u0026#39;ç§¯åˆ†æ›´æ–°æˆ–æ¶ˆæ¯å®Œæˆå¤±è´¥:\u0026#39;, err); } } } function displayPointsInfo(messagePair, currentPoints, pointsUsed) { if (messagePair.querySelector(\u0026#39;.points-info\u0026#39;)) return; log(\u0026#39;æ˜¾ç¤ºç§¯åˆ†ä¿¡æ¯\u0026#39;); const pointsInfo = createPointsInfoElement(currentPoints, pointsUsed); const actionBar = messagePair.querySelector(SELECTORS.actionBar); if (actionBar) { actionBar.parentNode.insertBefore(pointsInfo, actionBar); } else { messagePair.appendChild(pointsInfo); } } function createPointsInfoElement(currentPoints, pointsUsed = null, isInitialLoad = false) { const pointsInfo = document.createElement(\u0026#39;div\u0026#39;); pointsInfo.className = \u0026#39;points-info\u0026#39;; const infoItems = [ { text: `é‡ç½®æ—¶é—´: ${state.resetDate}`, color: \u0026#39;#555\u0026#39; }, { text: `å½“å‰ç§¯åˆ†: ${currentPoints.toLocaleString()}`, color: \u0026#39;#888\u0026#39;, highlight: isInitialLoad } ]; if (pointsUsed !== null) { infoItems.push({ text: `æœ¬æ¬¡æ¶ˆè€—ç§¯åˆ†: ${pointsUsed}`, color: \u0026#39;#fff\u0026#39; }); } pointsInfo.innerHTML = infoItems.map(item =\u0026gt; `\u0026lt;div style=\u0026#34;color: ${item.color}\u0026#34; ${item.highlight ? \u0026#39;class=\u0026#34;points-info-highlight\u0026#34;\u0026#39; : \u0026#39;\u0026#39;}\u0026gt;${item.text}\u0026lt;/div\u0026gt;` ).join(\u0026#39;\u0026#39;); return pointsInfo; } async function displayLatestPointsInfo() { const messagePairs = document.querySelectorAll(SELECTORS.messagePair); if (messagePairs.length \u0026gt; 0) { const lastMessagePair = messagePairs[messagePairs.length - 1]; const currentPoints = await fetchPoints(); const pointsInfo = createPointsInfoElement(currentPoints, null, true); const existingPointsInfo = lastMessagePair.querySelector(\u0026#39;.points-info\u0026#39;); if (existingPointsInfo) { existingPointsInfo.replaceWith(pointsInfo); } else { const actionBar = lastMessagePair.querySelector(SELECTORS.actionBar); if (actionBar) { actionBar.parentNode.insertBefore(pointsInfo, actionBar); } else { lastMessagePair.appendChild(pointsInfo); } } } } function handleUrlChange() { log(\u0026#39;URLå·²æ›´æ”¹ï¼Œé‡ç½®çŠ¶æ€\u0026#39;); state.processedInputNodes = new WeakSet(); state.processedOutputNodes = new WeakSet(); state.initialLoadCompleted = false; state.pointsBeforeOutput = null; init(); } async function init() { try { const initialPoints = await fetchPoints(); state.pointsBeforeOutput = initialPoints; state.isInitialized = true; log(\u0026#39;åˆå§‹åŒ–å®Œæˆï¼Œå½“å‰ç§¯åˆ†:\u0026#39;, initialPoints); monitorMessages(); displayLatestPointsInfo(); // åœ¨åˆå§‹åŒ–æ—¶æ˜¾ç¤ºæœ€æ–°ç§¯åˆ†ä¿¡æ¯ window.addEventListener(\u0026#39;popstate\u0026#39;, handleUrlChange); let lastUrl = location.href; new MutationObserver(() =\u0026gt; { const url = location.href; if (url !== lastUrl) { lastUrl = url; handleUrlChange(); } }).observe(document, { subtree: true, childList: true }); } catch (err) { error(\u0026#39;åˆå§‹åŒ–å¤±è´¥:\u0026#39;, err); } } init(); })(); 3. æ›´æ–°è®°å½• # ç‚¹å‡»å±•å¼€æŸ¥çœ‹æ›´æ–°è®°å½• 2025-02-03ï¼šä¿®å¤è„šæœ¬ï¼›æ·»åŠ æ¯æ¬¡é‡æ–°è¿›å…¥é¡µé¢åœ¨æœ€åä¸€æ¬¡å¯¹è¯ä¸‹é¢æ˜¾ç¤ºå½“å‰ç§¯åˆ†ç­‰ä¿¡æ¯ï¼›æ·»åŠ è„šæœ¬å›¾æ ‡ 2025-02-04ï¼šæ·»åŠ è„šæœ¬å‘å¸ƒå’Œæ›´æ–°åœ°å€ ","date":"2024å¹´12æœˆ9æ—¥","externalUrl":null,"permalink":"/posts/poe%E6%98%BE%E7%A4%BA%E6%B6%88%E8%80%97%E7%A7%AF%E5%88%86%E8%84%9A%E6%9C%AC/","section":"æ–‡ç« ","summary":"","title":"Poeæ˜¾ç¤ºæ¶ˆè€—ç§¯åˆ†è„šæœ¬","type":"posts"},{"content":"","date":"2024å¹´12æœˆ9æ—¥","externalUrl":null,"permalink":"/tags/tampermonkey/","section":"Tags","summary":"","title":"Tampermonkey","type":"tags"},{"content":"","date":"2024å¹´12æœˆ9æ—¥","externalUrl":null,"permalink":"/tags/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/","section":"Tags","summary":"","title":"å®ç”¨å·¥å…·","type":"tags"},{"content":"","date":"2024å¹´12æœˆ9æ—¥","externalUrl":null,"permalink":"/tags/%E8%84%9A%E6%9C%AC/","section":"Tags","summary":"","title":"è„šæœ¬","type":"tags"},{"content":"","date":"2024å¹´12æœˆ9æ—¥","externalUrl":null,"permalink":"/tags/git/","section":"Tags","summary":"","title":"Git","type":"tags"},{"content":"","date":"2024å¹´12æœˆ9æ—¥","externalUrl":null,"permalink":"/series/git%E6%8E%8C%E6%8F%A1%E4%B8%8E%E5%AE%9E%E8%B7%B5/","section":"Series","summary":"","title":"GitæŒæ¡ä¸å®è·µ","type":"series"},{"content":" 1. Git åŸºç¡€ # 1.1 ä¸ºä»€ä¹ˆè¦ç”¨ Gitï¼Ÿä»€ä¹ˆæ˜¯ Gitï¼Ÿ # å½“ä½ æƒ³è¦ä½¿ç”¨ Git çš„æ—¶å€™ï¼Œä½ ä¸€å®šé‡åˆ°äº†ç‰ˆæœ¬æ§åˆ¶ç›¸å…³çš„é—®é¢˜ã€‚\næ¯”å¦‚ï¼šæƒ³è¦ä¿®æ”¹ A.txtï¼Œä½†æ˜¯åˆæ‹…å¿ƒç°åœ¨çš„ A.txt æ–‡ä»¶å†…å®¹ä»ç„¶éœ€è¦ä½¿ç”¨ã€‚ä¸€äº›äººä¼šé€‰æ‹©å¤åˆ¶ä¸€ä»½ A.txt ä¸º A_1.txt çš„ï¼Œå†å»ä¿®æ”¹ A_1.txtã€‚é•¿æ­¤ä»¥å¾€ï¼Œä½ å¯èƒ½æœ‰äº† A_99.txtã€A_100.txtï¼Œå¹¶ä¸”è¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œä½ å·²ç»ä¸çŸ¥é“å“ªä¸€æ–‡ä»¶å¤¹ä¿®æ”¹äº†å“ªä¸€éƒ¨åˆ†ã€‚è¿™ä¸ªæ—¶å€™ï¼Œç‚¹å¼€ Git æ•™ç¨‹ï¼Œå®ƒä¼šç»™ä½ ç­”æ¡ˆã€‚\nå†æ¯”å¦‚ï¼šä½ æœ‰ä¸€ä¸ª A.txt éœ€è¦ç»™ä½ çš„åŒäº‹ç”²åä½œï¼Œè®©ä»–ä¿®æ”¹éƒ¨åˆ†å†…å®¹ï¼ŒåŒæ—¶ï¼Œä½ ä¹Ÿè¦ä¿®æ”¹ A.txtã€‚é‚£æƒ…å†µå°±æ›´éº»çƒ¦äº†ï¼Œå¦‚æœæ²¡æœ‰åˆé€‚çš„å·¥å…·ï¼Œä¸€äº›äººä¼šé€‰æ‹©æŠŠåŒäº‹ä¿®æ”¹å®Œçš„å‘½åä¸º A_ç”²_1.txtï¼Œå†æŠŠè‡ªå·±ä¿®æ”¹çš„å‘½åä¸º A_1.txtï¼Œç„¶ååŒæ—¶æ‰“å¼€è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œæ‰‹åŠ¨å¯¹æ¯”åŒºåˆ«ï¼Œæœ€åå½’çº³ä¸º A_2.txtã€‚è¿™ä¸ªæ—¶å€™ï¼Œä½ æƒ³åˆ°ä¹‹åè¿˜è¦å¾ˆå¤šæ¬¡è¿›è¡Œä¸€æ ·çš„æ“ä½œï¼Œå¤ªè€—è´¹æ—¶é—´ï¼Œç‚¹å¼€ Git æ•™ç¨‹ï¼Œå®ƒä¼šç»™ä½ ç­”æ¡ˆã€‚\nGit æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚\nGit å°±åƒä¸€ä¸ªå¼ºå¤§çš„æ—¶é—´æœºå™¨ï¼Œå®ƒèƒ½è®°å½•ä½ é¡¹ç›®çš„æ‰€æœ‰ä¿®æ”¹ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨å†™ä¸€ç¯‡æ–‡ç« ï¼Œæ¯ä¿®æ”¹ä¸€ä¸ªæ®µè½ï¼ŒGit éƒ½ä¼šå¸®ä½ ä¿å­˜ä¸€ä¸ªå¿«ç…§ã€‚è¿™æ ·ï¼Œä½ å¯ä»¥éšæ—¶å›åˆ°ä»»ä½•ä¸€ä¸ªå†å²ç‰ˆæœ¬ï¼Œæ¯”è¾ƒä¸åŒç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚ï¼Œç”šè‡³å¯ä»¥æŠŠå‡ ä¸ªäººçš„ä¿®æ”¹åˆå¹¶åˆ°ä¸€èµ·ã€‚ç®€å•æ¥è¯´ï¼ŒGit æ˜¯ä¸€ä¸ªè®©ä½ å®‰å…¨ã€é«˜æ•ˆåœ°ç®¡ç†é¡¹ç›®ä»£ç çš„å·¥å…·ï¼Œå®ƒèƒ½å¸®ä½ è¿½è¸ªä¿®æ”¹ã€æ–¹ä¾¿åä½œã€å¹¶éšæ—¶å›åˆ°è¿‡å»ã€‚\nä¸‹é¢æ˜¯ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„å¯¹æ¯”å’Œä½ é€‰æ‹© Git çš„ç†ç”±ï¼š\nç‰¹æ€§/å¯¹æ¯”é¡¹ Git SVN (Subversion) Mercurial (Hg) CVS æ¶æ„ åˆ†å¸ƒå¼ (Distributed) é›†ä¸­å¼ (Centralized) åˆ†å¸ƒå¼ (Distributed) é›†ä¸­å¼ (Centralized) åˆ†æ”¯ç®¡ç† å¼ºå¤§ä¸”çµæ´»ï¼Œè½»é‡çº§ï¼Œé¼“åŠ±é¢‘ç¹ä½¿ç”¨ ç›¸å¯¹ç¬¨é‡ï¼Œåˆ›å»ºåˆ†æ”¯æˆæœ¬é«˜ è¾ƒå¥½ï¼Œä¸ Git ç±»ä¼¼ è¾ƒå¼±ï¼Œä¸é¼“åŠ±é¢‘ç¹ä½¿ç”¨ æ€§èƒ½ éå¸¸å¿«ï¼Œå°¤å…¶åœ¨å¤§å‹é¡¹ç›®å’Œå¤§é‡æäº¤æ—¶ è¾ƒæ…¢ï¼Œæ€§èƒ½ç“¶é¢ˆæ˜æ˜¾ ç›¸å¯¹è¾ƒå¿«ï¼Œä½†ä¸å¦‚ Git æ€§èƒ½è¾ƒå·®ï¼Œå°¤å…¶åœ¨å¤§å‹é¡¹ç›®æ—¶ ç¦»çº¿å·¥ä½œ æ”¯æŒï¼Œæœ¬åœ°æœ‰å®Œæ•´ä»“åº“ ä¸æ”¯æŒï¼Œä¾èµ–ä¸­å¤®æœåŠ¡å™¨ æ”¯æŒï¼Œæœ¬åœ°æœ‰å®Œæ•´ä»“åº“ ä¸æ”¯æŒï¼Œä¾èµ–ä¸­å¤®æœåŠ¡å™¨ èµ„æºå ç”¨ å ç”¨ç£ç›˜ç©ºé—´è¾ƒå¤šï¼Œä½†æ“ä½œé«˜æ•ˆ å ç”¨ç£ç›˜ç©ºé—´è¾ƒå°‘ï¼Œä½†æ“ä½œç›¸å¯¹è¾ƒæ…¢ å ç”¨ç£ç›˜ç©ºé—´è¾ƒå¤šï¼Œä½†æ“ä½œé«˜æ•ˆ å ç”¨ç£ç›˜ç©ºé—´è¾ƒå°‘ï¼Œä½†æ“ä½œç›¸å¯¹è¾ƒæ…¢ å¤æ‚æ€§ å­¦ä¹ æ›²çº¿ç¨é™¡å³­ï¼Œä½†åŠŸèƒ½å¼ºå¤§ ç›¸å¯¹ç®€å•æ˜“å­¦ï¼Œä½†åŠŸèƒ½è¾ƒå°‘ å­¦ä¹ æ›²çº¿è¾ƒå¹³ç¼“ï¼ŒåŠŸèƒ½ç±»ä¼¼ Git è¾ƒä¸ºç®€å•ï¼Œä½†åŠŸèƒ½è¾ƒå°‘ æµè¡Œåº¦ ç›®å‰æ˜¯è¡Œä¸šæ ‡å‡†ï¼Œéå¸¸æµè¡Œ é€æ¸è¢« Git å–ä»£ï¼Œä½†ä»æœ‰éƒ¨åˆ†åº”ç”¨ å—æ¬¢è¿ç¨‹åº¦ä¸åŠ Git å·²ç»è¿‡æ—¶ï¼Œä¸æ¨èä½¿ç”¨ é€‰æ‹© Git çš„ç†ç”± ä¸ªäººå¼€å‘è€… å›¢é˜Ÿå¼€å‘è€… ä¼˜åŠ¿ - ç‰ˆæœ¬æ§åˆ¶çš„å¼ºå¤§èƒ½åŠ›ï¼Œæ–¹ä¾¿å›æº¯ - é«˜æ•ˆåä½œï¼Œå¤šäººåŒæ—¶å¼€å‘ - æœ¬åœ°æ“ä½œï¼Œç¦»çº¿ä¹Ÿèƒ½å·¥ä½œ - å¼ºå¤§çš„åˆ†æ”¯ç®¡ç†ï¼Œçµæ´»åº”å¯¹å¤æ‚éœ€æ±‚ - æ–¹ä¾¿å®éªŒæ–°æƒ³æ³•ï¼Œéšæ—¶å›æ»š - ä»£ç å®¡æŸ¥ï¼Œæé«˜ä»£ç è´¨é‡ - ä¿æŠ¤ä»£ç ï¼Œé˜²æ­¢è¯¯åˆ å’Œä¸¢å¤± - è½»æ¾å¤„ç†åˆå¹¶å†²çªï¼Œé¿å…å¼€å‘æ··ä¹± - å­¦ä¹ ç°ä»£å¼€å‘æ ‡å‡†ï¼Œæé«˜ç«äº‰åŠ› - å¹¿æ³›çš„ç¤¾åŒºæ”¯æŒï¼Œæ˜“äºè§£å†³é—®é¢˜ - ä¸ºåä½œå¼€å‘æ‰“ä¸‹åŸºç¡€ï¼Œæ–¹ä¾¿æœªæ¥å›¢é˜Ÿåˆä½œ - æ”¯æŒå¤šç§å¼€å‘æ¨¡å¼ï¼ˆå¦‚ Gitflowï¼‰ æ€»ç»“ æ›´æœ‰æ•ˆç‡åœ°ç®¡ç†ä¸ªäººé¡¹ç›®ï¼Œä¿æŠ¤ä»£ç èµ„äº§ æé«˜å›¢é˜Ÿåä½œæ•ˆç‡ï¼Œç¡®ä¿é¡¹ç›®é«˜è´¨é‡å’Œå¿«é€Ÿäº¤ä»˜ 1.2 Git å®‰è£… # è¯·è‡ªè¡Œæœç´¢ï¼šâ€œæ€ä¹ˆåœ¨ xxx ç³»ç»Ÿå®‰è£… Gitâ€ã€‚\n2. Git åŸºç¡€ä½¿ç”¨ # ä»¥ä¸‹ä»¥ Linux ç¯å¢ƒä¸ºä¾‹ã€‚\nè®©æˆ‘ä»¬å¼€å§‹ï¼Œæ–°å»ºæ–‡ä»¶å¤¹ learn_gitï¼Œå¹¶è¿›å…¥è¯¥æ–‡ä»¶å¤¹ï¼š\nmkdir learn_git cd learn_git ä»¥åæˆ‘ä»¬çš„æ“ä½œéƒ½åœ¨ learn_gitæ–‡ä»¶å¤¹ä¸‹è¿›è¡Œã€‚\n2.1 Git åŸºç¡€é…ç½® # åœ¨æ­£å¼ä½¿ç”¨ Git åˆ›å»ºå¹¶ç®¡ç†é¡¹ç›®å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¯¹ Git è¿›è¡Œåˆå§‹çš„é…ç½®ã€‚Git æä¾›äº† git configå·¥å…·ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œé…ç½®ã€‚åœ¨ç»ˆç«¯è¾“å…¥:\ngit config --list --show-origin æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„é…ç½®ä»¥åŠå®ƒä»¬æ‰€åœ¨çš„æ–‡ä»¶ä¿¡æ¯ã€‚\nç»ˆç«¯ä¸­è¾“å‡ºäº†é…ç½®æ–‡ä»¶åç§°ã€è·¯å¾„ä»¥åŠè¯¦ç»†çš„é…ç½®é¡¹ã€‚Git çš„é…ç½®æ–‡ä»¶æ€»å…±æœ‰ä¸‰ä¸ªï¼Œåˆ†åˆ«å­˜å‚¨åœ¨ä¸åŒçš„åœ°æ–¹ï¼Œå¹¶å¯¹åº”ä¸åŒçš„æƒé™ï¼ˆä¼˜å…ˆçº§ï¼šç³»ç»Ÿ\u0026gt;ç”¨æˆ·\u0026gt;ä»“åº“ï¼‰ã€‚\nå­˜å‚¨åœ¨å®‰è£…ç›®å½•ä¸‹ etcè·¯å¾„ä¸‹çš„ gitconfigæ–‡ä»¶ï¼Œå®ƒæ˜¯ç³»ç»Ÿå…¨å±€é…ç½®æ–‡ä»¶ï¼Œå®ƒåŒ…å«ç³»ç»Ÿä¸Šæ¯ä¸€ä¸ªç”¨æˆ·åŠä»–ä»¬ä»“åº“çš„é€šç”¨é…ç½®ã€‚ åœ¨å½“å‰ç³»ç»Ÿç”¨æˆ·ä¸‹çš„ .gitconfigæ–‡ä»¶ï¼Œè¿™æ˜¯å½“å‰ç”¨æˆ·çš„å…¨å±€é…ç½®æ–‡ä»¶ï¼Œå®ƒå­˜å‚¨äº†ä»“åº“éƒ½å…±äº«çš„é€šç”¨é…ç½®é€‰é¡¹ã€‚ å­˜å‚¨åœ¨ä»“åº“ç›®å½•ä¸‹çš„ .git/configæ–‡ä»¶ï¼Œæ˜¯é’ˆå¯¹ä»“åº“çš„é…ç½®æ–‡ä»¶ï¼Œå®ƒå­˜å‚¨äº†ä»“åº“çš„é…ç½®ä¿¡æ¯ã€‚ å¦‚æœä½ å®‰è£…äº† vscodeï¼Œä½ å¯ä»¥è®¾ç½® gitçš„é»˜è®¤ç¼–è¾‘å™¨ä¸º vscodeï¼š\ngit config --global core.editor \u0026#34;code --waitâ€ 2.2 Git åŸºç¡€æ¦‚å¿µ # 2.2.1 ä¸‰ä¸ªåŠŸèƒ½åŒºåŸŸ # graph LR A[å·¥ä½œåŒº] --\u003e|git add| B(æš‚å­˜åŒº); B --\u003e|git commit| C[ç‰ˆæœ¬åº“]; C --\u003e|æ£€æµ‹è¿½è¸ªé¡¹ç›®æ–‡ä»¶| A å·¥ä½œåŒº(Working Directory) å·¥ä½œåŒºæ˜¯æŒ‡åŒ…å«é¡¹ç›®ä»£ç çš„æœ¬åœ°ç›®å½•ï¼Œæ˜¯æˆ‘ä»¬å¹³å¸¸åœ¨ç¼–è¾‘å™¨ä¸­ä¿®æ”¹å’Œæ“ä½œçš„ç›®å½•ã€‚ æš‚å­˜åŒºï¼ˆStage/Indexï¼‰ æš‚å­˜åŒºæ˜¯ç”¨äºå­˜å‚¨å³å°†è¢«æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­çš„æ–‡ä»¶å¿«ç…§ã€‚æˆ‘ä»¬å¯ä»¥å¤šæ¬¡é¢„è§ˆå’Œå®¡æŸ¥æ–‡ä»¶æ˜¯å¦æ­£ç¡®ä¿®æ”¹ã€‚ ç‰ˆæœ¬åº“ï¼ˆRepositoryï¼‰ ç‰ˆæœ¬åº“å¯ä»¥ç®€å•ç†è§£æˆä¸€ä¸ªç›®å½•ï¼Œè¿™ä¸ªç›®å½•é‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶éƒ½å¯ä»¥è¢« Git ç®¡ç†èµ·æ¥ï¼Œæ¯ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ã€åˆ é™¤ï¼ŒGit éƒ½èƒ½è·Ÿè¸ªï¼Œä»¥ä¾¿ä»»ä½•æ—¶åˆ»éƒ½å¯ä»¥è¿½è¸ªå†å²ï¼Œæˆ–è€…åœ¨å°†æ¥æŸä¸ªæ—¶åˆ»å¯ä»¥â€œè¿˜åŸâ€ã€‚ 2.2.2 ä¸‰ç§æ–‡ä»¶çŠ¶æ€ # å·²ä¿®æ”¹ï¼ˆmodifiedï¼‰ï¼š è¡¨ç¤ºæ–‡ä»¶å·²è¢«ä¿®æ”¹ä½†å°šæœªè¢«æš‚å­˜ã€‚æˆ‘ä»¬åœ¨å·¥ä½œåŒºä¿®æ”¹äº†æ–‡ä»¶ï¼Œå¹¶ç‚¹å‡»äº†ä¿å­˜ï¼Œè¿™æ—¶å€™æ–‡ä»¶çŠ¶æ€ä¼šå˜æˆå·²ä¿®æ”¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å·²ç»å¯¹æ–‡ä»¶è¿›è¡Œäº†æ›´æ”¹ï¼Œä½†è¿˜æ²¡æœ‰ä½¿ç”¨ git addå‘½ä»¤å°†å…¶æ·»åŠ åˆ°æš‚å­˜åŒºåŸŸã€‚ å·²æš‚å­˜ï¼ˆstagedï¼‰ï¼š è¡¨ç¤ºå¯¹ä¸€ä¸ªå·²ä¿®æ”¹æ–‡ä»¶çš„å½“å‰ç‰ˆæœ¬åšå‡ºäº†æ ‡è®°ï¼Œä»¥ä¾¿åœ¨ä¸‹ä¸€æ¬¡æäº¤æ—¶å°†å…¶çº³å…¥ç‰ˆæœ¬æ§åˆ¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨ git addå‘½ä»¤å°†ä¿®æ”¹çš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºåŸŸä¸­ã€‚ å·²æäº¤ï¼ˆcommittedï¼‰ï¼š è¡¨ç¤ºæ•°æ®å·²ç»è¢«å®‰å…¨åœ°ä¿å­˜åœ¨æœ¬åœ°æ•°æ®åº“ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä½ æ‰§è¡Œäº† git commitå‘½ä»¤ä¹‹åï¼Œæ‰€æœ‰çš„æ›´æ”¹éƒ½è¢«ä¿å­˜åˆ°äº† Git ä»“åº“çš„å†å²è®°å½•ä¸­ã€‚ 2.2.3 .git æ–‡ä»¶å¤¹ç®€å•ä»‹ç» # å½“æˆ‘ä»¬æ‰§è¡Œäº† git initåˆå§‹åŒ–ä»“åº“ä¹‹åï¼ŒGit ä¼šåˆ›å»ºä¸€ä¸ª .gitæ–‡ä»¶å¤¹ï¼Œä¸‹é¢æ˜¯éƒ¨åˆ†æ–‡ä»¶ä¿¡æ¯\nHEADï¼šæŒ‡å‘å½“å‰æ´»åŠ¨åˆ†æ”¯çš„æŒ‡é’ˆã€‚ configï¼šç‰ˆæœ¬åº“çš„é…ç½®æ–‡ä»¶ï¼ŒåŒ…æ‹¬ç”¨æˆ·åã€é‚®ä»¶åœ°å€ã€ç¼–è¾‘å™¨ç­‰ä¿¡æ¯ã€‚ descriptionï¼šç”¨äºåœ¨ GitWeb ç­‰å·¥å…·ä¸­æ˜¾ç¤ºæœ‰å…³ç‰ˆæœ¬åº“çš„æè¿°ä¿¡æ¯ã€‚ hooks/ï¼šåŒ…å«å¯è‡ªå®šä¹‰çš„ Git é’©å­è„šæœ¬ï¼Œç”¨äºå®ç°ç‰¹å®šåŠŸèƒ½æˆ–æ‰§è¡Œè‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚ objects/ï¼šåŒ…å« Git å¯¹è±¡æ•°æ®åº“ï¼Œå…¶ä¸­å­˜å‚¨äº†ç‰ˆæœ¬åº“ä¸­æ‰€æœ‰çš„æ–‡ä»¶å’Œæäº¤å†å²è®°å½•ã€‚ refs/ï¼šåŒ…å«åˆ†æ”¯å’Œæ ‡ç­¾çš„æŒ‡é’ˆæ–‡ä»¶ï¼Œå…¶ä¸­ä¿å­˜äº†æ¯ä¸ªåˆ†æ”¯å’Œæ ‡ç­¾åŠå…¶æ‰€æŒ‡å‘çš„æäº¤ IDã€‚ indexï¼šæš‚å­˜åŒºçš„ç´¢å¼•æ–‡ä»¶ï¼Œç”¨äºè®°å½•ä¸‹ä¸€æ¬¡æäº¤è¦åŒ…æ‹¬çš„æ–‡ä»¶ã€‚ 2.3 å­¦ä¹ æŒæ¡ # 2.3.1 åˆ›å»ºä¸€ä¸ªç‰ˆæœ¬åº“å¹¶æäº¤ç¬¬ä¸€ä¸ªæ–‡ä»¶ # åœ¨å·²ç»æ–°å»ºæ–‡ä»¶å¤¹ learn_gitå¹¶è¿›å…¥è¯¥æ–‡ä»¶å¤¹çš„å‰æä¸‹ã€‚\nåˆå§‹åŒ–ä¸€ä¸ª Git ä»“åº“å¹¶è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±\ngit init git config user.name \u0026#34;yourname\u0026#34; git config user.email \u0026#34;youremail\u0026#34; æ–°å»ºä¸€ä¸ªæ–‡ä»¶ test.txt\necho \u0026#34;learn_git 2.3.1\u0026#34; \u0026gt; test.txt æŸ¥çœ‹ä»“åº“çŠ¶æ€\ngit status è¾“å‡ºï¼š\nä½äºåˆ†æ”¯ main å°šæ— æäº¤ æœªè·Ÿè¸ªçš„æ–‡ä»¶: ï¼ˆä½¿ç”¨ \u0026#34;git add \u0026lt;æ–‡ä»¶\u0026gt;...\u0026#34; ä»¥åŒ…å«è¦æäº¤çš„å†…å®¹ï¼‰ test.txt æäº¤ä¸ºç©ºï¼Œä½†æ˜¯å­˜åœ¨å°šæœªè·Ÿè¸ªçš„æ–‡ä»¶ï¼ˆä½¿ç”¨ \u0026#34;git add\u0026#34; å»ºç«‹è·Ÿè¸ªï¼‰ å°†æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº\ngit add test.txt å†æ¬¡æŸ¥çœ‹ä»“åº“çŠ¶æ€\ngit status è¾“å‡ºï¼š\nä½äºåˆ†æ”¯ main å°šæ— æäº¤ è¦æäº¤çš„å˜æ›´ï¼š ï¼ˆä½¿ç”¨ \u0026#34;git rm --cached \u0026lt;æ–‡ä»¶\u0026gt;...\u0026#34; ä»¥å–æ¶ˆæš‚å­˜ï¼‰ æ–°æ–‡ä»¶ï¼š test.txt æäº¤æ–‡ä»¶åˆ°ç‰ˆæœ¬åº“\ngit commit -m \u0026#34;add test.txt\u0026#34; å†æ¬¡æŸ¥çœ‹ä»“åº“çŠ¶æ€\ngit status è¾“å‡ºï¼š\nä½äºåˆ†æ”¯ main æ— æ–‡ä»¶è¦æäº¤ï¼Œå¹²å‡€çš„å·¥ä½œåŒº 2.3.2 ä¿®æ”¹æ–‡ä»¶å¹¶æäº¤ # ä¿®æ”¹æ–‡ä»¶ test.txt\necho \u0026#34;learn_git 2.3.2\u0026#34; \u0026gt; test.txt æŸ¥çœ‹ä»“åº“çŠ¶æ€\ngit status è¾“å‡ºï¼š\nä½äºåˆ†æ”¯ main å°šæœªæš‚å­˜ä»¥å¤‡æäº¤çš„å˜æ›´ï¼š ï¼ˆä½¿ç”¨ \u0026#34;git add \u0026lt;æ–‡ä»¶\u0026gt;...\u0026#34; æ›´æ–°è¦æäº¤çš„å†…å®¹ï¼‰ ï¼ˆä½¿ç”¨ \u0026#34;git restore \u0026lt;æ–‡ä»¶\u0026gt;...\u0026#34; ä¸¢å¼ƒå·¥ä½œåŒºçš„æ”¹åŠ¨ï¼‰ ä¿®æ”¹ï¼š test.txt ä¿®æ”¹å°šæœªåŠ å…¥æäº¤ï¼ˆä½¿ç”¨ \u0026#34;git add\u0026#34; å’Œ/æˆ– \u0026#34;git commit -a\u0026#34;ï¼‰ è¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨ git commit -amå‘½ä»¤ï¼Œå®ƒä¼šè‡ªåŠ¨å°†æ‰€æœ‰å·²ä¿®æ”¹çš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºå¹¶æäº¤\ngit commit -a -m \u0026#34;modify test.txt to 2.3.2\u0026#34; å†æ¬¡æŸ¥çœ‹ä»“åº“çŠ¶æ€\ngit status è¾“å‡ºï¼š\nä½äºåˆ†æ”¯ main æ— æ–‡ä»¶è¦æäº¤ï¼Œå¹²å‡€çš„å·¥ä½œåŒº 2.3.3 æŸ¥çœ‹æäº¤å†å² # æŸ¥çœ‹æäº¤å†å²\ngit log è¾“å‡ºï¼š\ncommit SHA-1 40-character commit hash (HEAD -\u0026gt; main) Author: yourname \u0026lt;youremail\u0026gt; Date: Day of week Month Date hh:mm:ss Year +UTC modify test.txt to 2.3.2 commit SHA-1 40-character commit hash Author: yourname \u0026lt;youremail\u0026gt; Date: Day of week Month Date hh:mm:ss Year +UTC add test.txt æŸ¥çœ‹æäº¤å†å²æ•´æ´ç‰ˆ\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_2 year-month-day | modify test.txt to 2.3.2 (HEAD -\u0026gt; main) [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] 2.3.4 æ’¤é”€ä¿®æ”¹ï¼ˆåˆ‡æ¢ç‰ˆæœ¬) # æŸ¥çœ‹å½“å‰æ–‡ä»¶å†…å®¹\ncat test.txt è¾“å‡ºï¼š\nlearn_git 2.3.2 æ’¤é”€ä¿®æ”¹ï¼Œåˆ‡æ¢åˆ°æŒ‡å®šç‰ˆæœ¬\ngit checkout 7_hash_1(ä¸º2.3.3æŸ¥çœ‹æäº¤å†å²æ•´æ´ç‰ˆè¾“å‡ºç»“æœçš„å“ˆå¸Œå€¼) è¾“å‡ºï¼š\næ³¨æ„ï¼šæ­£åœ¨åˆ‡æ¢åˆ° \u0026#39;7_hash_1\u0026#39;ã€‚ æ‚¨æ­£å¤„äºåˆ†ç¦»å¤´æŒ‡é’ˆçŠ¶æ€ã€‚æ‚¨å¯ä»¥æŸ¥çœ‹ã€åšè¯•éªŒæ€§çš„ä¿®æ”¹åŠæäº¤ï¼Œå¹¶ä¸”æ‚¨å¯ä»¥åœ¨åˆ‡æ¢ å›ä¸€ä¸ªåˆ†æ”¯æ—¶ï¼Œä¸¢å¼ƒåœ¨æ­¤çŠ¶æ€ä¸‹æ‰€åšçš„æäº¤è€Œä¸å¯¹åˆ†æ”¯é€ æˆå½±å“ã€‚ å¦‚æœæ‚¨æƒ³è¦é€šè¿‡åˆ›å»ºåˆ†æ”¯æ¥ä¿ç•™åœ¨æ­¤çŠ¶æ€ä¸‹æ‰€åšçš„æäº¤ï¼Œæ‚¨å¯ä»¥é€šè¿‡åœ¨ switch å‘½ä»¤ ä¸­æ·»åŠ å‚æ•° -c æ¥å®ç°ï¼ˆç°åœ¨æˆ–ç¨åï¼‰ã€‚ä¾‹å¦‚ï¼š git switch -c \u0026lt;æ–°åˆ†æ”¯å\u0026gt; æˆ–è€…æ’¤é”€æ­¤æ“ä½œï¼š git switch - é€šè¿‡å°†é…ç½®å˜é‡ advice.detachedHead è®¾ç½®ä¸º false æ¥å…³é—­æ­¤å»ºè®® HEAD ç›®å‰ä½äº 7_hash_1 add test.txt æŸ¥çœ‹å½“å‰æ–‡ä»¶å†…å®¹\ncat test.txt è¾“å‡ºï¼š\nlearn_git 2.3.1 åˆ‡æ¢å›æœ€æ–°ç‰ˆæœ¬\ngit checkout main è¾“å‡ºï¼š\nä¹‹å‰çš„ HEAD ä½ç½®æ˜¯ 7_hash_1 add test.txt åˆ‡æ¢åˆ°åˆ†æ”¯ \u0026#39;main\u0026#39; æŸ¥çœ‹å½“å‰æ–‡ä»¶å†…å®¹\ncat test.txt è¾“å‡ºï¼š\nlearn_git 2.3.2 2.3.5 æ’¤é”€ä¿®æ”¹-æœ¬åœ°å·²ä¿å­˜çŠ¶æ€ # ä¿®æ”¹æ–‡ä»¶ test.txt\necho \u0026#34;learn_git 2.3.5\u0026#34; \u0026gt; test.txt æŸ¥çœ‹å½“å‰æ–‡ä»¶å†…å®¹\ncat test.txt è¾“å‡ºï¼š\nlearn_git 2.3.5 æ¢å¤æœ¬åœ°ä¿®æ”¹\ngit checkout test.txt æŸ¥çœ‹å½“å‰æ–‡ä»¶å†…å®¹\ncat test.txt è¾“å‡ºï¼š\nlearn_git 2.3.2 2.3.6 æ’¤é”€ä¿®æ”¹-å·²æš‚å­˜çŠ¶æ€ä¸‹ # ä¿®æ”¹æ–‡ä»¶ test.txt echo \u0026#34;learn_git 2.3.6\u0026#34; \u0026gt; test.txt æ·»åŠ åˆ°æš‚å­˜åŒº\ngit add test.txt æŸ¥çœ‹ä»“åº“çŠ¶æ€\ngit status è¾“å‡ºï¼š\nä½äºåˆ†æ”¯ main è¦æäº¤çš„å˜æ›´ï¼š ï¼ˆä½¿ç”¨ \u0026#34;git restore --staged \u0026lt;æ–‡ä»¶\u0026gt;...\u0026#34; ä»¥å–æ¶ˆæš‚å­˜ï¼‰ ä¿®æ”¹ï¼š test.txt æ’¤é”€æš‚å­˜æ–‡ä»¶\ngit reset HEAD test.txt æŸ¥çœ‹ä»“åº“çŠ¶æ€\ngit status è¾“å‡ºï¼š\nä½äºåˆ†æ”¯ main å°šæœªæš‚å­˜ä»¥å¤‡æäº¤çš„å˜æ›´ï¼š ï¼ˆä½¿ç”¨ \u0026#34;git add \u0026lt;æ–‡ä»¶\u0026gt;...\u0026#34; æ›´æ–°è¦æäº¤çš„å†…å®¹ï¼‰ ï¼ˆä½¿ç”¨ \u0026#34;git restore \u0026lt;æ–‡ä»¶\u0026gt;...\u0026#34; ä¸¢å¼ƒå·¥ä½œåŒºçš„æ”¹åŠ¨ï¼‰ ä¿®æ”¹ï¼š test.txt ä¿®æ”¹å°šæœªåŠ å…¥æäº¤ï¼ˆä½¿ç”¨ \u0026#34;git add\u0026#34; å’Œ/æˆ– \u0026#34;git commit -a\u0026#34;ï¼‰ æ¢å¤æœ¬åœ°ä¿®æ”¹\ngit checkout test.txt æŸ¥çœ‹ä»“åº“çŠ¶æ€\ngit status è¾“å‡ºï¼š\nä½äºåˆ†æ”¯ main æ— æ–‡ä»¶è¦æäº¤ï¼Œå¹²å‡€çš„å·¥ä½œåŒº æŸ¥çœ‹å½“å‰æ–‡ä»¶å†…å®¹\ncat test.txt è¾“å‡ºï¼š\nlearn_git 2.3.2 2.3.7 è¾¨æ git checkoutå’Œ git reset # ç‰¹æ€§ git checkout git reset ä¸»è¦ç”¨é€” åˆ‡æ¢åˆ†æ”¯æˆ–æ¢å¤å·¥ä½œæ ‘æ–‡ä»¶ é‡ç½®å½“å‰ HEAD åˆ°æŒ‡å®šçŠ¶æ€ å½±å“èŒƒå›´ ä¸»è¦å½±å“å·¥ä½œç›®å½• å¯ä»¥å½±å“æš‚å­˜åŒºå’Œ/æˆ–å·¥ä½œç›®å½• å¸¸è§ç”¨æ³• git checkout \u0026lt;branch\u0026gt; git checkout \u0026lt;file\u0026gt; git reset --soft \u0026lt;commit\u0026gt; git reset --mixed \u0026lt;commit\u0026gt; git reset --hard \u0026lt;commit\u0026gt; å¯¹æäº¤å†å²çš„å½±å“ ä¸æ”¹å˜æäº¤å†å² å¯ä»¥æ”¹å˜æäº¤å†å²ï¼ˆä½¿ç”¨ --hardï¼‰ æ–‡ä»¶å±‚é¢æ“ä½œ å¯ä»¥æ£€å‡ºå•ä¸ªæ–‡ä»¶ ä¸»è¦ç”¨äºæäº¤å±‚é¢ï¼Œä½†ä¹Ÿå¯ä»¥é‡ç½®å•ä¸ªæ–‡ä»¶ åˆ†æ”¯æ“ä½œ å¯ä»¥åˆ›å»ºå’Œåˆ‡æ¢åˆ†æ”¯ ä¸èƒ½ç›´æ¥åˆ‡æ¢åˆ†æ”¯ æ•°æ®å®‰å…¨æ€§ ç›¸å¯¹å®‰å…¨ï¼Œä¸ä¼šä¸¢å¤±æ•°æ® ä½¿ç”¨ --hardå¯èƒ½ä¼šä¸¢å¤±æœªæäº¤çš„æ›´æ”¹ æ’¤é”€æ“ä½œ å¯ä»¥æ’¤é”€å·¥ä½œç›®å½•çš„ä¿®æ”¹ å¯ä»¥æ’¤é”€æäº¤ã€æš‚å­˜çš„æ›´æ”¹ åœ¨è¿›è¡Œ Git æ“ä½œæ—¶ï¼Œè¯·æ ¹æ®æ‚¨çš„éœ€è¦é€‰æ‹©æ­£ç¡®çš„å‘½ä»¤ï¼š\nå¦‚æœæ‚¨æƒ³è¦æ’¤é”€æŸäº›æ›´æ”¹å¹¶å°†å†å²è®°å½•å›æ»šåˆ°æ—§çš„æäº¤ï¼Œåˆ™åº”ä½¿ç”¨ git resetå‘½ä»¤ã€‚ å¦‚æœæ‚¨åªæ˜¯æƒ³æŸ¥çœ‹å…¶ä»–æäº¤çš„çŠ¶æ€æˆ–åˆ‡æ¢åˆ°ä¸åŒçš„åˆ†æ”¯ï¼Œåˆ™åº”ä½¿ç”¨ git checkoutå‘½ä»¤ã€‚ 2.3.8 æ’¤é”€æäº¤ # ä¿®æ”¹æ–‡ä»¶ test.txt\necho \u0026#34;learn_git 2.3.8\u0026#34; \u0026gt; test.txt æ·»åŠ æ‰€æœ‰ä¿®æ”¹çš„æ–‡ä»¶åˆ°æš‚å­˜åŒºå¹¶æäº¤\ngit commit -am \u0026#34;modify test.txt to 2.3.8\u0026#34; æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_3 year-month-day | modify test.txt to 2.3.8 (HEAD -\u0026gt; main) [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] æ’¤é”€æœ€åä¸€æ¬¡æäº¤ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤æ¥è¿˜åŸæ›´æ”¹ã€‚\ngit revert HEAD --no-edit æŸ¥çœ‹å½“å‰æ–‡ä»¶å†…å®¹\ncat test.txt è¾“å‡ºï¼š\nlearn_git 2.3.2 æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_4 year-month-day | Revert \u0026#34;modify test.txt to 2.3.8\u0026#34; (HEAD -\u0026gt; main) [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] æ¢å¤ä¸Šä¸€æ¬¡æ’¤é”€æäº¤\ngit reset --hard HEAD^ æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_3 year-month-day | modify test.txt to 2.3.8 (HEAD -\u0026gt; main) [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] æŸ¥çœ‹å½“å‰æ–‡ä»¶å†…å®¹\ncat test.txt è¾“å‡ºï¼š\nlearn_git 2.3.8 æ’¤é”€åˆ°æŒ‡å®šæäº¤\ngit revert 7_hash_2 --no-edit è¾“å‡ºï¼š\nè‡ªåŠ¨åˆå¹¶ test.txt å†²çªï¼ˆå†…å®¹ï¼‰ï¼šåˆå¹¶å†²çªäº test.txt é”™è¯¯ï¼šä¸èƒ½è¿˜åŸ 6396343... modify test.txt to 2.3.2 æç¤ºï¼š å†²çªè§£å†³å®Œæ¯•åï¼Œç”¨ \u0026#39;git add \u0026lt;è·¯å¾„\u0026gt;\u0026#39; æˆ– \u0026#39;git rm \u0026lt;è·¯å¾„\u0026gt;\u0026#39; æç¤ºï¼š å‘½ä»¤æ ‡è®°ä¿®æ­£åçš„æ–‡ä»¶ æç¤ºï¼š Disable this message with \u0026#34;git config advice.mergeConflict false\u0026#34; è¿™æ—¶å‘ç°æœ‰å†²çªï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨è§£å†³å†²çªï¼Œç¼–è¾‘æ–‡ä»¶ test.txtï¼Œä¿®æ”¹ä¸ºï¼š\nlearn_git 2.3.2 å³é‡‡ç”¨ä¼ å…¥çš„æ›´æ”¹\næ ‡è®°è§£å†³å¹¶å®Œæˆ revert\ngit add test.txt git revert --continue æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_5 year-month-day | Revert \u0026#34;modify test.txt to 2.3.2\u0026#34; (HEAD -\u0026gt; main) [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] 2.3.9 åˆ é™¤æäº¤ # ä¿®æ”¹æ–‡ä»¶å¹¶æäº¤\necho \u0026#34;learn_git 2.3.9\u0026#34; \u0026gt; test.txt git commit -am \u0026#34;modify test.txt to 2.3.9\u0026#34; æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_6 year-month-day | modify test.txt to 2.3.9 (HEAD -\u0026gt; main) [yourname] * 7_hash_5 year-month-day | Revert \u0026#34;modify test.txt to 2.3.2\u0026#34; [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] åˆ é™¤æäº¤ï¼ˆæ ‡è®°åˆ é™¤ 7_hash_3åé¢æ‰€æœ‰æäº¤ï¼‰\ngit reset --hard 7_hash_3 æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_3 year-month-day | modify test.txt to 2.3.8 (HEAD -\u0026gt; main) [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] 2.3.10 ä¿®æ”¹æäº¤å†…å®¹ # ä¿®æ”¹æ–‡ä»¶å¹¶æäº¤\necho \u0026#34;learn_git 2.3.10\u0026#34; \u0026gt; test.txt git commit -am \u0026#34;modify test.txt to 2.3.10\u0026#34; æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_7 year-month-day | modify test.txt to 2.3.10 (HEAD -\u0026gt; main) [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] å†æ¬¡ä¿®æ”¹æ–‡ä»¶å¹¶è¦†ç›–ä¸Šä¸€æ¬¡æäº¤\necho \u0026#34;learn_git 2.3.10_1\u0026#34; \u0026gt; test.txt git commit --amend -m \u0026#34;modify test.txt to 2.3.10_1\u0026#34; æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 (HEAD -\u0026gt; main) [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] 2.3.11 ç§»åŠ¨æ–‡ä»¶ # ç§»åŠ¨æ–‡ä»¶ test.txtåˆ° test/test.txt\nmkdir test git mv test.txt test/test.txt æŸ¥çœ‹ä»“åº“çŠ¶æ€\ngit status è¾“å‡ºï¼š\nä½äºåˆ†æ”¯ main è¦æäº¤çš„å˜æ›´ï¼š ï¼ˆä½¿ç”¨ \u0026#34;git restore --staged \u0026lt;æ–‡ä»¶\u0026gt;...\u0026#34; ä»¥å–æ¶ˆæš‚å­˜ï¼‰ é‡å‘½åï¼š test.txt -\u0026gt; test/test.txt å°šæœªæš‚å­˜ä»¥å¤‡æäº¤çš„å˜æ›´ï¼š ï¼ˆä½¿ç”¨ \u0026#34;git add \u0026lt;æ–‡ä»¶\u0026gt;...\u0026#34; æ›´æ–°è¦æäº¤çš„å†…å®¹ï¼‰ ï¼ˆä½¿ç”¨ \u0026#34;git restore \u0026lt;æ–‡ä»¶\u0026gt;...\u0026#34; ä¸¢å¼ƒå·¥ä½œåŒºçš„æ”¹åŠ¨ï¼‰ ä¿®æ”¹ï¼š test/test.txt æäº¤æ–‡ä»¶ç§»åŠ¨\ngit commit -m \u0026#34;move test.txt to test/test.txt\u0026#34; æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_9 year-month-day | move test.txt to test/test.txt (HEAD -\u0026gt; main) [yourname] * 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] æ¢å¤åˆ°ä¸Šä¸€æ¬¡æäº¤\ngit reset --hard 7_hash_8 æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 (HEAD -\u0026gt; main) [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] ç§»åŠ¨æ–‡ä»¶ test.txtåˆ° test_1/test.txt\nmkdir test_1 mv test.txt test_1 æŸ¥çœ‹ä»“åº“çŠ¶æ€\ngit status è¾“å‡ºï¼š\nä½äºåˆ†æ”¯ main å°šæœªæš‚å­˜ä»¥å¤‡æäº¤çš„å˜æ›´ï¼š ï¼ˆä½¿ç”¨ \u0026#34;git add/rm \u0026lt;æ–‡ä»¶\u0026gt;...\u0026#34; æ›´æ–°è¦æäº¤çš„å†…å®¹ï¼‰ ï¼ˆä½¿ç”¨ \u0026#34;git restore \u0026lt;æ–‡ä»¶\u0026gt;...\u0026#34; ä¸¢å¼ƒå·¥ä½œåŒºçš„æ”¹åŠ¨ï¼‰ åˆ é™¤ï¼š test.txt æœªè·Ÿè¸ªçš„æ–‡ä»¶: ï¼ˆä½¿ç”¨ \u0026#34;git add \u0026lt;æ–‡ä»¶\u0026gt;...\u0026#34; ä»¥åŒ…å«è¦æäº¤çš„å†…å®¹ï¼‰ test_1/ ä¿®æ”¹å°šæœªåŠ å…¥æäº¤ï¼ˆä½¿ç”¨ \u0026#34;git add\u0026#34; å’Œ/æˆ– \u0026#34;git commit -a\u0026#34;ï¼‰ æš‚å­˜æ–‡ä»¶\ngit add test_1 åˆ é™¤æ–‡ä»¶\ngit rm test.txt æŸ¥çœ‹ä»“åº“çŠ¶æ€\ngit status è¾“å‡ºï¼š\nä½äºåˆ†æ”¯ main è¦æäº¤çš„å˜æ›´ï¼š ï¼ˆä½¿ç”¨ \u0026#34;git restore --staged \u0026lt;æ–‡ä»¶\u0026gt;...\u0026#34; ä»¥å–æ¶ˆæš‚å­˜ï¼‰ é‡å‘½åï¼š test.txt -\u0026gt; test_1/test.txt æš‚å­˜æ–‡ä»¶å¹¶æäº¤\ngit commit -am \u0026#34;move test.txt to test_1/test.txt\u0026#34; æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_10 year-month-day | move test.txt to test_1/test.txt (HEAD -\u0026gt; main) [yourname] * 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] é‡å‘½åæ–‡ä»¶ test_1/test.txtä¸º test_1/test_1.txt\ngit mv test_1/test.txt test_1/test_1.txt æŸ¥çœ‹ä»“åº“çŠ¶æ€\ngit status è¾“å‡ºï¼š\nä½äºåˆ†æ”¯ main è¦æäº¤çš„å˜æ›´ï¼š ï¼ˆä½¿ç”¨ \u0026#34;git restore --staged \u0026lt;æ–‡ä»¶\u0026gt;...\u0026#34; ä»¥å–æ¶ˆæš‚å­˜ï¼‰ é‡å‘½åï¼š test_1/test.txt -\u0026gt; test_1/test_1.txt æš‚å­˜æ–‡ä»¶å¹¶æäº¤\ngit commit -am \u0026#34;rename test_1/test.txt to test_1/test_1.txt\u0026#34; æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_11 year-month-day | rename test_1/test.txt to test_1/test_1.txt (HEAD -\u0026gt; main) [yourname] * 7_hash_10 year-month-day | move test.txt to test_1/test.txt [yourname] * 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] 2.3.12 å¿½ç•¥æ–‡ä»¶ï¼ˆ.gitignoreï¼‰ # åˆ›å»ºä¸€ä¸ª .gitignoreæ–‡ä»¶ï¼Œå¹¶è®¾ç½®å¿½ç•¥ *.logæ–‡ä»¶\necho \u0026#34;*.log\u0026#34; \u0026gt; .gitignore æš‚å­˜æ–‡ä»¶å¹¶æäº¤\ngit add .gitignore git commit -m \u0026#34;add .gitignore\u0026#34; æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_12 year-month-day | add .gitignore (HEAD -\u0026gt; main) [yourname] * 7_hash_11 year-month-day | rename test_1/test.txt to test_1/test_1.txt [yourname] * 7_hash_10 year-month-day | move test.txt to test_1/test.txt [yourname] * 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] åˆ›å»ºæµ‹è¯•æ–‡ä»¶ test.log\necho \u0026#34;test.log 2.3.12\u0026#34; \u0026gt; test.log æŸ¥çœ‹ä»“åº“çŠ¶æ€\ngit status è¾“å‡ºï¼š\nä½äºåˆ†æ”¯ main æ— æ–‡ä»¶è¦æäº¤ï¼Œå¹²å‡€çš„å·¥ä½œåŒº 2.3.13 æ ‡ç­¾æ“ä½œ # æŠŠæœ€æ–°æäº¤æ‰“ä¸Šæ ‡ç­¾\ngit tag v1.0 æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_12 year-month-day | add .gitignore (HEAD -\u0026gt; main, tag: v1.0) [yourname] * 7_hash_11 year-month-day | rename test_1/test.txt to test_1/test_1.txt [yourname] * 7_hash_10 year-month-day | move test.txt to test_1/test.txt [yourname] * 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] åˆ é™¤æ ‡ç­¾\ngit tag -d v1.0 æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_12 year-month-day | add .gitignore (HEAD -\u0026gt; main) [yourname] * 7_hash_11 year-month-day | rename test_1/test.txt to test_1/test_1.txt [yourname] * 7_hash_10 year-month-day | move test.txt to test_1/test.txt [yourname] * 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] 3. Git è¿›é˜¶ä½¿ç”¨ # 3.1 Git å¯¹è±¡å­˜å‚¨æœºåˆ¶ # Git ä½¿ç”¨ä¸€ç§ç§°ä¸ºå¯¹è±¡å­˜å‚¨çš„æœºåˆ¶æ¥ç®¡ç†å’Œå¤„ç†æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•å†…å®¹ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚\nGit å¯¹è±¡å­˜å‚¨æœºåˆ¶åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š\nGit å¯¹è±¡ï¼šGit ä¸­çš„æ‰€æœ‰æ•°æ®éƒ½è¢«è§†ä¸ºå¯¹è±¡ã€‚ä¸€ä¸ªå¯¹è±¡å¯ä»¥æ˜¯ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼ˆBlobï¼‰ã€ç›®å½•ç»“æ„ï¼ˆTreeï¼‰ã€æäº¤è®°å½•ï¼ˆCommitï¼‰æˆ–æ ‡ç­¾ï¼ˆTagï¼‰ç­‰ã€‚ SHA-1 å“ˆå¸Œï¼šæ¯ä¸ª Git å¯¹è±¡éƒ½å…·æœ‰ä¸å…¶å†…å®¹ç›¸å…³è”çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œè¯¥æ ‡è¯†ç¬¦ç”±å…¶å†…å®¹çš„ SHA-1 å“ˆå¸Œå€¼ç”Ÿæˆã€‚è¿™ä½¿å¾— Git å¯ä»¥è½»æ¾åœ°æ£€æµ‹æ–‡ä»¶å†…å®¹çš„æ›´æ”¹ã€‚ Git æ•°æ®åº“ï¼šGit ä¼šå°†æ‰€æœ‰å¯¹è±¡å­˜å‚¨åœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Œè¯¥æ•°æ®åº“ä½äº .git/objectsç›®å½•ä¸‹ã€‚è¯¥ç›®å½•åŒ…å«ä¸€ä¸ªåä¸º infoçš„å­ç›®å½•å’Œä¸€ä¸ªåä¸º packçš„å­ç›®å½•ï¼Œå…¶ä¸­ infoå­ç›®å½•åŒ…å«æœ‰å…³å¯¹è±¡çš„å…ƒæ•°æ®ï¼Œè€Œ packå­ç›®å½•åŒ…å«ç»è¿‡å‹ç¼©çš„å¯¹è±¡ã€‚ 3.1.1 Git å¯¹è±¡ # Git æ•°æ®åº“åŒ…å«äº†è®¸å¤šä¸åŒç±»å‹çš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡ç›¸äº’å…³è”å½¢æˆä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰ã€‚åœ¨ Git ä¸­ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½ç”± SHA-1 å“ˆå¸Œå€¼å”¯ä¸€æ ‡è¯†ï¼Œå¹¶æŒ‰ç…§å…¶å“ˆå¸Œå€¼å­˜å‚¨åœ¨ .git ç›®å½•ä¸‹çš„ objects ç›®å½•ä¸­ã€‚\nGit å¯¹è±¡åŒ…æ‹¬å››ç§ä¸»è¦ç±»å‹ï¼šblobã€treeã€commit å’Œ tagã€‚\nBlobï¼šBlob å¯¹è±¡ä»£è¡¨ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚æ¯ä¸ª blob éƒ½ç”±ä¸€ä¸ªå”¯ä¸€çš„ SHA-1 å“ˆå¸Œå€¼æ ‡è¯†ï¼Œå¹¶å­˜å‚¨åœ¨ .git/objects ç›®å½•ä¸‹ã€‚Blob å¯¹è±¡æ˜¯ Git æ•°æ®åº“çš„åŸºæœ¬å•ä½ï¼Œå®ƒä»¬åŒ…å«æ–‡ä»¶çš„åŸå§‹å†…å®¹è€Œä¸åŒ…å«ä»»ä½•å…ƒæ•°æ®ã€‚ Treeï¼šTree å¯¹è±¡ä»£è¡¨ä¸€ä¸ªç›®å½•æˆ–æ–‡ä»¶å¤¹ï¼Œåœ¨ Git ä¸­è¢«ç§°ä¸ºâ€œæ ‘â€ã€‚å®ƒå¯ä»¥åŒ…å«å¤šä¸ª blob æˆ–å…¶ä»– tree å¯¹è±¡ï¼Œä»¥åŠç›¸å…³å…ƒæ•°æ®ï¼Œå¦‚æ–‡ä»¶åå’Œæƒé™ç­‰ä¿¡æ¯ã€‚Tree å¯¹è±¡ä¹Ÿç”±ä¸€ä¸ª SHA-1 å“ˆå¸Œå€¼å”¯ä¸€æ ‡è¯†ï¼Œå¹¶å­˜å‚¨åœ¨ .git/objects ç›®å½•ä¸‹çš„ objects/trees å­ç›®å½•ä¸­ã€‚ Commitï¼šCommit å¯¹è±¡ä»£è¡¨ä¸€ä¸ªæäº¤è®°å½•ï¼ŒåŒ…å«äº†æäº¤çš„ä½œè€…ã€æäº¤è€…ã€æäº¤æ—¶é—´ã€æäº¤ä¿¡æ¯ç­‰å…ƒæ•°æ®ï¼Œä»¥åŠæŒ‡å‘ä¸€ä¸ª tree å¯¹è±¡çš„æŒ‡é’ˆã€‚æ¯ä¸ª commit å¯¹è±¡éƒ½ç”±ä¸€ä¸ªå”¯ä¸€çš„ SHA-1 å“ˆå¸Œå€¼æ ‡è¯†ï¼Œå¹¶å­˜å‚¨åœ¨ .git/objects ç›®å½•ä¸‹çš„ objects/commits å­ç›®å½•ä¸­ã€‚ Tagï¼šTag å¯¹è±¡ä»£è¡¨ä¸€ä¸ªæ ‡ç­¾ï¼Œç”¨äºæ ‡è®°æŸä¸ªç‰¹å®šçš„ commit å¯¹è±¡ã€‚Tag å¯¹è±¡åŒ…å«äº†æ ‡ç­¾çš„åç§°ã€æ ‡ç­¾çš„ç±»å‹ã€æ ‡ç­¾çš„ä½œè€…ã€æ ‡ç­¾çš„åˆ›å»ºæ—¶é—´ç­‰å…ƒæ•°æ®ï¼Œä»¥åŠæŒ‡å‘ä¸€ä¸ª commit å¯¹è±¡çš„æŒ‡é’ˆã€‚Tag å¯¹è±¡ä¹Ÿç”±ä¸€ä¸ªå”¯ä¸€çš„ SHA-1 å“ˆå¸Œå€¼æ ‡è¯†ï¼Œå¹¶å­˜å‚¨åœ¨ .git/objects ç›®å½•ä¸‹çš„ objects/tags å­ç›®å½•ä¸­ã€‚ psï¼šæœ‰å…³ git cat-fileä¼šå¸®åŠ©ä½ æ·±å…¥äº†è§£ Git å†…éƒ¨æœºåˆ¶ï¼Œè¿™é‡Œä¸å¤šåšä»‹ç»ï¼Œéœ€è¦äº†è§£çš„å¯ä»¥è‡ªè¡ŒæŸ¥é˜…ã€‚\n3.2 åˆ†æ”¯ç®¡ç† # 3.2.1 åˆ›å»ºåˆ†æ”¯ # åœ¨ Git ä¸­ï¼Œåˆ†æ”¯æ˜¯æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘æŸä¸ªæäº¤è®°å½•ã€‚åœ¨ Git å­˜å‚¨åº“ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹æœ‰ä¸€ä¸ªåä¸º mainçš„ä¸»åˆ†æ”¯ï¼Œè¯¥åˆ†æ”¯æŒ‡å‘æœ€æ–°çš„æäº¤è®°å½•ã€‚\nä½¿ç”¨åˆ†æ”¯å¯ä»¥è½»æ¾åœ°å°†ä»£ç åº“åˆ†æˆä¸åŒçš„ç‰ˆæœ¬ï¼Œå¹¶åœ¨è¿™äº›ç‰ˆæœ¬ä¹‹é—´è¿›è¡Œåˆ‡æ¢å’Œåˆå¹¶æ“ä½œã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³å°è¯•æ–°åŠŸèƒ½æˆ–ä¿®å¤é”™è¯¯ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œåœ¨è¯¥åˆ†æ”¯ä¸Šè¿›è¡Œæ›´æ”¹ï¼Œè€Œä¸ä¼šå½±å“ä¸»åˆ†æ”¯ã€‚ä¸€æ—¦æ›´æ”¹å‡†å¤‡å¥½ï¼Œå°±å¯ä»¥å°†å…¶åˆå¹¶å›ä¸»åˆ†æ”¯ä¸­ã€‚è¿™ä½¿å¾—åä½œå˜å¾—æ›´åŠ å®¹æ˜“ï¼Œå› ä¸ºå›¢é˜Ÿæˆå‘˜å¯ä»¥åœ¨è‡ªå·±çš„åˆ†æ”¯ä¸Šå¼€å‘æ–°åŠŸèƒ½ï¼Œè€Œä¸å¿…æ‹…å¿ƒä¸å…¶ä»–äººçš„æ›´æ”¹å†²çªã€‚\nåˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ feature\ngit checkout -b feature æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯\ngit branch è¾“å‡ºï¼š\n* feature main æŸ¥çœ‹ä»“åº“çŠ¶æ€\ngit status è¾“å‡ºï¼š\nä½äºåˆ†æ”¯ feature æ— æ–‡ä»¶è¦æäº¤ï¼Œå¹²å‡€çš„å·¥ä½œåŒº æ–°å»ºæ–‡ä»¶ feature.txtå¹¶æäº¤\necho \u0026#34;feature branch\u0026#34; \u0026gt; feature.txt git add feature.txt git commit -m \u0026#34;add feature.txt\u0026#34; æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_13 year-month-day | add feature.txt (HEAD -\u0026gt; feature) [yourname] * 7_hash_12 year-month-day | add .gitignore (main) [yourname] * 7_hash_11 year-month-day | rename test_1/test.txt to test_1/test_1.txt [yourname] * 7_hash_10 year-month-day | move test.txt to test_1/test.txt [yourname] * 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] 3.2.2 åˆå¹¶åˆ†æ”¯ # åœ¨ Git ä¸­ï¼Œåˆå¹¶åˆ†æ”¯æ˜¯ä¸€ç§å°†ä¸¤ä¸ªä¸åŒçš„åˆ†æ”¯ä¸­çš„ä»£ç æ›´æ”¹åˆå¹¶åˆ°ä¸€ä¸ªåˆ†æ”¯ä¸­çš„æ“ä½œã€‚è¿™å…è®¸å›¢é˜Ÿæˆå‘˜åœ¨ä¸åŒçš„åˆ†æ”¯ä¸­å¼€å‘åŠŸèƒ½å’Œä¿®å¤é”™è¯¯ï¼Œå¹¶æœ€ç»ˆå°†å®ƒä»¬åˆå¹¶åˆ°ä¸»åˆ†æ”¯æˆ–å…¶ä»–ç¨³å®šåˆ†æ”¯ä¸­ã€‚\nåˆ‡æ¢åˆ°ä¸»åˆ†æ”¯\ngit checkout main åˆå¹¶ featureåˆ†æ”¯åˆ° mainåˆ†æ”¯\ngit merge feature æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_13 year-month-day | add feature.txt (HEAD -\u0026gt; main, feature) [yourname] * 7_hash_12 year-month-day | add .gitignore [yourname] * 7_hash_11 year-month-day | rename test_1/test.txt to test_1/test_1.txt [yourname] * 7_hash_10 year-month-day | move test.txt to test_1/test.txt [yourname] * 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] 3.2.3 åˆå¹¶å†²çª # åœ¨ Git ä¸­ï¼Œå½“å°è¯•å°†ä¸¤ä¸ªä¸åŒçš„åˆ†æ”¯åˆå¹¶æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°åˆå¹¶å†²çªã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨ä¸¤ä¸ªåˆ†æ”¯ä¸Šéƒ½æ›´æ”¹äº†åŒä¸€æ–‡ä»¶çš„åŒä¸€éƒ¨åˆ†æ—¶ã€‚\nä¿®æ”¹æ–‡ä»¶ feature.txtå¹¶æäº¤\necho \u0026#34;changed by main 3.2.3\u0026#34; \u0026gt; feature.txt git commit -am \u0026#34;modify feature.txt by main\u0026#34; åˆ‡æ¢åˆ° featureåˆ†æ”¯\ngit checkout feature ä¿®æ”¹æ–‡ä»¶ feature.txtå¹¶æäº¤\necho \u0026#34;changed by feature 3.2.3\u0026#34; \u0026gt; feature.txt git commit -am \u0026#34;modify feature.txt by feature\u0026#34; åˆå¹¶ featureåˆ†æ”¯åˆ° mainåˆ†æ”¯\ngit checkout main git merge feature è¾“å‡ºï¼š\nè‡ªåŠ¨åˆå¹¶ feature.txt å†²çªï¼ˆå†…å®¹ï¼‰ï¼šåˆå¹¶å†²çªäº feature.txt è‡ªåŠ¨åˆå¹¶å¤±è´¥ï¼Œä¿®æ­£å†²çªç„¶åæäº¤ä¿®æ­£çš„ç»“æœã€‚ æ‰‹åŠ¨åˆå¹¶å†²çª\ncat feature.txt è¾“å‡ºï¼š\n\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; HEAD changed by main 3.2.3 ======= changed by feature 3.2.3 \u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt; feature ç”±äºæˆ‘ä¹‹å‰è®¾ç½®äº† vscodeä½œä¸ºé»˜è®¤ç¼–è¾‘å™¨ï¼Œæ‰€ä»¥è¿™é‡Œä¼šè‡ªåŠ¨æ‰“å¼€ vscodeç¼–è¾‘å™¨ï¼Œæ‰‹åŠ¨è§£å†³å†²çªï¼Œç‚¹å‡» ä¿ç•™åŒæ–¹æ›´æ”¹ï¼š\nchanged by main 3.2.3 changed by feature 3.2.3 æäº¤åˆå¹¶ç»“æœ\ngit add feature.txt git commit -m \u0026#34;merge feature branch and resolve conflict\u0026#34; æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_15 year-month-day | merge feature branch and resolve conflict (HEAD -\u0026gt; main) [yourname] |\\ | * 7_hash_14 year-month-day | modify feature.txt by feature (feature) [yourname] * | 7_hash_13 year-month-day | modify feature.txt by main [yourname] |/ * 7_hash_12 year-month-day | add .gitignore [yourname] * 7_hash_11 year-month-day | rename test_1/test.txt to test_1/test_1.txt [yourname] * 7_hash_10 year-month-day | move test.txt to test_1/test.txt [yourname] * 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] 3.2.4 å˜åŸºå’Œåˆå¹¶ # Rebasingï¼ˆå˜åŸºï¼‰ å’Œ Mergingï¼ˆåˆå¹¶ï¼‰ æ˜¯ Git ä¸­å¸¸ç”¨çš„ä¸¤ç§é›†æˆåˆ†æ”¯çš„æ–¹æ³•ã€‚è¿™ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥å°†ä¸€ä¸ªåˆ†æ”¯çš„æ›´æ”¹åˆå¹¶åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ä¸­ï¼Œä½†å®ƒä»¬çš„å†…éƒ¨å®ç°ä¸åŒï¼Œå› æ­¤å…¶ä½¿ç”¨åœºæ™¯å’Œç»“æœä¹Ÿç•¥æœ‰ä¸åŒã€‚\nRebasing Rebasing æ˜¯ä¸€ç§å°†åˆ†æ”¯æ›´æ”¹åº”ç”¨äºç›®æ ‡åˆ†æ”¯çš„æ–¹æ³•ï¼Œå®ƒä¼šå°†åˆ†æ”¯çš„æ¯ä¸ªæäº¤éƒ½è½¬ç§»åˆ°ç›®æ ‡åˆ†æ”¯çš„é¡¶éƒ¨ï¼Œå¹¶åœ¨æ¯ä¸ªæäº¤ä¹‹é—´å°†ç›®æ ‡åˆ†æ”¯çš„æ›´æ”¹åº”ç”¨äºåˆ†æ”¯æ›´æ”¹ã€‚è¿™æ„å‘³ç€ï¼Œå½“ä½ ä½¿ç”¨ Rebasing æ–¹æ³•æ—¶ï¼Œæœ€ç»ˆçš„æäº¤å†å²è®°å½•æ˜¯ä¸€ä¸ªçº¿æ€§çš„å†å²è®°å½•ï¼Œå…¶ä¸­æ‰€æœ‰æ›´æ”¹éƒ½æŒ‰ç…§æ—¶é—´é¡ºåºæ’åˆ—ã€‚\nä¸»è¦ä¼˜ç‚¹ï¼š æäº¤å†å²è®°å½•æ›´åŠ å¹²å‡€å’Œæœ‰åºã€‚ å¯ä»¥å¿«é€Ÿè§£å†³ç”±äºåˆ†æ”¯å˜åŒ–è€Œå¯¼è‡´çš„ä»£ç å†²çªã€‚ ä¸»è¦ç¼ºç‚¹ï¼š å¯èƒ½éœ€è¦è€—è´¹å¤§é‡æ—¶é—´å’Œç²¾åŠ›æ¥å¤„ç†å†²çªã€‚ å¯¹äºå¤šäººåä½œå¼€å‘è€Œè¨€ï¼Œå¯èƒ½éœ€è¦è¿›è¡Œåè°ƒæ‰èƒ½ç¡®ä¿ä¸å‡ºç°é—®é¢˜ã€‚ Merging Merging æ˜¯ä¸€ç§å°†åˆ†æ”¯æ›´æ”¹åˆå¹¶åˆ°ç›®æ ‡åˆ†æ”¯çš„æ–¹æ³•ã€‚å®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„åˆå¹¶æäº¤ï¼Œè¯¥æäº¤åŒ…å«äº†ç›®æ ‡åˆ†æ”¯å’Œè¦åˆå¹¶çš„åˆ†æ”¯çš„å…¨éƒ¨æ›´æ”¹ã€‚è¿™æ„å‘³ç€ï¼Œå½“ä½ ä½¿ç”¨ Merging æ–¹æ³•æ—¶ï¼Œæœ€ç»ˆçš„æäº¤å†å²è®°å½•å°†åŒ…å«åˆå¹¶æäº¤ä»¥åŠä¸¤ä¸ªåˆ†æ”¯çš„æ›´æ”¹å†å²è®°å½•ã€‚\nä¸»è¦ä¼˜ç‚¹ï¼š å®¹æ˜“ç†è§£å’Œä½¿ç”¨ã€‚ ä¸éœ€è¦æ‰‹åŠ¨å¤„ç†å†²çªã€‚ ä¸»è¦ç¼ºç‚¹ï¼š æäº¤å†å²è®°å½•å¯èƒ½ä¼šå˜å¾—æ‚ä¹±æ— åºï¼Œéš¾ä»¥é˜…è¯»å’Œç†è§£ã€‚ å¦‚æœåˆ†æ”¯æ›´æ”¹é¢‘ç¹ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¤§é‡çš„å†²çªã€‚ ç»¼ä¸Šæ‰€è¿°ï¼ŒRebasing å’Œ Merging éƒ½æ˜¯æœ‰æ•ˆçš„é›†æˆåˆ†æ”¯çš„æ–¹æ³•ï¼Œå®ƒä»¬é€‚ç”¨äºä¸åŒçš„åœºæ™¯ã€‚\nå¦‚æœä½ éœ€è¦ä¿æŒæäº¤å†å²è®°å½•çš„æ•´æ´å’Œæœ‰åºï¼Œæˆ–è€…éœ€è¦å¿«é€Ÿè§£å†³ç”±äºåˆ†æ”¯å˜åŒ–è€Œå¯¼è‡´çš„ä»£ç å†²çªï¼Œåˆ™å¯ä»¥é€‰æ‹©ä½¿ç”¨ Rebasing æ–¹æ³•ã€‚ å¦‚æœä½ éœ€è¦ç®€å•åœ°å°†ä¸€ä¸ªåˆ†æ”¯çš„æ›´æ”¹åˆå¹¶åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ä¸­ï¼Œå¹¶ä¸”ä¸å…³å¿ƒæœ€ç»ˆçš„æäº¤å†å²è®°å½•ï¼Œåˆ™å¯ä»¥é€‰æ‹©ä½¿ç”¨ Merging æ–¹æ³•ã€‚ 3.2.5 ä½¿ç”¨å˜åŸºåˆå¹¶åˆ†æ”¯ # é‡ç½®åˆ°åˆå¹¶å‰çš„æœ€åä¸€ä¸ªæäº¤\ngit reset --hard 7_hash_13 æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_13 year-month-day | modify feature.txt by main (HEAD -\u0026gt; main) [yourname] * 7_hash_12 year-month-day | add .gitignore [yourname] * 7_hash_11 year-month-day | rename test_1/test.txt to test_1/test_1.txt [yourname] * 7_hash_10 year-month-day | move test.txt to test_1/test.txt [yourname] * 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] å˜åŸº featureåˆ†æ”¯åˆ° mainåˆ†æ”¯\ngit checkout feature git rebase main æ‰‹åŠ¨åˆå¹¶å†²çª\ncat feature.txt è¾“å‡ºåˆå¹¶åç»“æœï¼š\nchanged by main 3.2.3 changed by feature 3.2.3 æäº¤åˆå¹¶ç»“æœ\ngit add feature.txt git commit -m \u0026#34;rebase feature branch and resolve conflict\u0026#34; git rebase --continue æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_16 year-month-day | rebase feature branch and resolve conflict (HEAD -\u0026gt; feature) [yourname] * 7_hash_13 year-month-day | modify feature.txt by main [yourname] * 7_hash_12 year-month-day | add .gitignore [yourname] * 7_hash_11 year-month-day | rename test_1/test.txt to test_1/test_1.txt [yourname] * 7_hash_10 year-month-day | move test.txt to test_1/test.txt [yourname] * 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] åˆ‡æ¢åˆ° mainåˆ†æ”¯\ngit checkout main åˆå¹¶ featureåˆ†æ”¯åˆ° mainåˆ†æ”¯\ngit merge feature æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_17 year-month-day | rebase feature branch and resolve conflict (HEAD -\u0026gt; main, feature) [yourname] * 7_hash_13 year-month-day | modify feature.txt by main [yourname] * 7_hash_12 year-month-day | add .gitignore [yourname] * 7_hash_11 year-month-day | rename test_1/test.txt to test_1/test_1.txt [yourname] * 7_hash_10 year-month-day | move test.txt to test_1/test.txt [yourname] * 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] 3.3 å¤šå­˜å‚¨åº“ # åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨ä½¿ç”¨å•ä¸ª git å­˜å‚¨åº“ã€‚ç„¶è€Œï¼Œgit æ“…é•¿å¤„ç†å¤šä¸ªå­˜å‚¨åº“ã€‚è¿™äº›é¢å¤–çš„å­˜å‚¨åº“å¯ä»¥æœ¬åœ°å­˜å‚¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç½‘ç»œè¿æ¥è®¿é—®ã€‚\næœ¬èŠ‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåä¸º learn_git_clonedçš„æ–°å­˜å‚¨åº“ã€‚å±•ç¤ºå¦‚ä½•ä»ä¸€ä¸ªå­˜å‚¨åº“ç§»åŠ¨æ›´æ”¹åˆ°å¦ä¸€ä¸ªå­˜å‚¨åº“ï¼Œå¹¶ä¸”å½“ä¸¤ä¸ªå­˜å‚¨åº“ä¹‹é—´å‘ç”Ÿå†²çªæ—¶å¦‚ä½•å¤„ç†ã€‚\nç›®å‰ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æœ¬åœ°å­˜å‚¨åº“ï¼ˆå³å­˜å‚¨åœ¨æœ¬åœ°ç¡¬ç›˜ä¸Šçš„å­˜å‚¨åº“ï¼‰è¿›è¡Œå·¥ä½œï¼Œä½†æ˜¯ï¼Œåœ¨æœ¬èŠ‚ä¸­å­¦åˆ°çš„å¤§å¤šæ•°å†…å®¹éƒ½é€‚ç”¨äºå¤šä¸ªå­˜å‚¨åº“ï¼Œæ— è®ºå®ƒä»¬æ˜¯åœ¨æœ¬åœ°è¿˜æ˜¯é€šè¿‡ç½‘ç»œè¿œç¨‹å­˜å‚¨ã€‚\n3.3.1 å…‹éš†å­˜å‚¨åº“ # åœ¨ learn_gitåŒçº§ç›®å½•ä¸‹å…‹éš† learn_gitå­˜å‚¨åº“\ngit clone learn_git learn_git_cloned è¿›å…¥ learn_git_clonedç›®å½•ï¼Œå¹¶æŸ¥çœ‹æäº¤å†å²\ncd learn_git_cloned git log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_17 year-month-day | rebase feature branch and resolve conflict (HEAD -\u0026gt; main, feature) [yourname] * 7_hash_13 year-month-day | modify feature.txt by main [yourname] * 7_hash_12 year-month-day | add .gitignore [yourname] * 7_hash_11 year-month-day | rename test_1/test.txt to test_1/test_1.txt [yourname] * 7_hash_10 year-month-day | move test.txt to test_1/test.txt [yourname] * 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] æŸ¥çœ‹è¿œç¨‹å­˜å‚¨åº“\ngit remote -v è¾“å‡ºï¼š\norigin learn_git (fetch) origin learn_git (push) æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯\ngit remote show origin è¾“å‡ºï¼š\n* è¿œç¨‹ origin è·å–åœ°å€ï¼šlearn_git æ¨é€åœ°å€ï¼šlearn_git HEAD åˆ†æ”¯ï¼šmain è¿œç¨‹åˆ†æ”¯ï¼š feature å·²è·Ÿè¸ª main å·²è·Ÿè¸ª ä¸º \u0026#39;git pull\u0026#39; é…ç½®çš„æœ¬åœ°åˆ†æ”¯ï¼š main ä¸è¿œç¨‹ main åˆå¹¶ ä¸º \u0026#39;git push\u0026#39; é…ç½®çš„æœ¬åœ°å¼•ç”¨ï¼š main æ¨é€è‡³ main (æœ€æ–°) æŸ¥çœ‹åˆ†æ”¯\ngit branch -a è¾“å‡ºï¼š\n* main remotes/origin/HEAD -\u0026gt; origin/main remotes/origin/feature remotes/origin/main 3.3.2 ä»åŸå§‹å­˜å‚¨åº“æ‹‰å–æ›´æ”¹ # åœ¨ learn_gitå­˜å‚¨åº“ä¸­åˆ›å»ºæ–‡ä»¶ test.txtå¹¶æäº¤\ncd learn_git echo \u0026#34;add test.txt by learn_git 3.3.2\u0026#34; \u0026gt; test.txt git add test.txt git commit -m \u0026#34;add test.txt by learn_git 3.3.2\u0026#34; æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_18 year-month-day | add test.txt by learn_git 3.3.2 (HEAD -\u0026gt; main) [yourname] * 7_hash_17 year-month-day | rebase feature branch and resolve conflict (feature) [yourname] * 7_hash_13 year-month-day | modify feature.txt by main [yourname] * 7_hash_12 year-month-day | add .gitignore [yourname] * 7_hash_11 year-month-day | rename test_1/test.txt to test_1/test_1.txt [yourname] * 7_hash_10 year-month-day | move test.txt to test_1/test.txt [yourname] * 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] è¿›å…¥ learn_git_clonedç›®å½•ï¼Œæ‹‰å– learn_gitå­˜å‚¨åº“çš„æ›´æ”¹\ncd learn_git_cloned git pull origin main åœ¨ learn_gitå­˜å‚¨åº“ä¸­ä¿®æ”¹æ–‡ä»¶ test.txtå¹¶æäº¤\ncd learn_git echo \u0026#34;modify test.txt by learn_git 3.3.2\u0026#34; \u0026gt; test.txt git add test.txt git commit -m \u0026#34;modify test.txt by learn_git 3.3.2\u0026#34; è¿›å…¥ learn_git_clonedç›®å½•ï¼Œè·å– learn_gitå­˜å‚¨åº“çš„æ›´æ”¹\ncd learn_git_cloned git fetch æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short --all è¾“å‡ºï¼š\n* 7_hash_19 year-month-day | modify test.txt by learn_git 3.3.2 (origin/main, origin/HEAD) [yourname] * 7_hash_18 year-month-day | add test.txt by learn_git 3.3.2 (HEAD -\u0026gt; main) [yourname] * 7_hash_17 year-month-day | rebase feature branch and resolve conflict (origin/feature) [yourname] * 7_hash_13 year-month-day | modify feature.txt by main [yourname] * 7_hash_12 year-month-day | add .gitignore [yourname] * 7_hash_11 year-month-day | rename test_1/test.txt to test_1/test_1.txt [yourname] * 7_hash_10 year-month-day | move test.txt to test_1/test.txt [yourname] * 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] åˆå¹¶å·²ç»è·å–çš„æ›´æ”¹\ngit merge origin/main æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_19 year-month-day | modify test.txt by learn_git 3.3.2 (HEAD -\u0026gt; main, origin/main, origin/HEAD) [yourname] * 7_hash_18 year-month-day | add test.txt by learn_git 3.3.2 [yourname] * 7_hash_17 year-month-day | rebase feature branch and resolve conflict (origin/feature) [yourname] * 7_hash_13 year-month-day | modify feature.txt by main [yourname] * 7_hash_12 year-month-day | add .gitignore [yourname] * 7_hash_11 year-month-day | rename test_1/test.txt to test_1/test_1.txt [yourname] * 7_hash_10 year-month-day | move test.txt to test_1/test.txt [yourname] * 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] 3.3.3 å‘åŸå§‹å­˜å‚¨åº“æ¨é€æ›´æ”¹ # è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±ï¼Œå¹¶ä¸”è®¾ç½®ä¸ºè£¸ä»“åº“\ngit config user.name \u0026#34;yourname\u0026#34; git config user.email \u0026#34;youremail\u0026#34; git config --bool core.bare true åœ¨ learn_git_clonedå­˜å‚¨åº“ä¸­ä¿®æ”¹æ–‡ä»¶ test.txtå¹¶æäº¤\necho \u0026#34;modify test.txt by learn_git 3.3.3\u0026#34; \u0026gt; test.txt git add cloned.txt git commit -m \u0026#34;modify test.txt by learn_git 3.3.3\u0026#34; æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_20 year-month-day | modify test.txt by learn_git 3.3.3 (HEAD -\u0026gt; main) [yourname] * 7_hash_19 year-month-day | modify test.txt by learn_git 3.3.2 (origin/main, origin/HEAD) [yourname] * 7_hash_18 year-month-day | add test.txt by learn_git 3.3.2 [yourname] * 7_hash_17 year-month-day | rebase feature branch and resolve conflict (origin/feature) [yourname] * 7_hash_13 year-month-day | modify feature.txt by main [yourname] * 7_hash_12 year-month-day | add .gitignore [yourname] * 7_hash_11 year-month-day | rename test_1/test.txt to test_1/test_1.txt [yourname] * 7_hash_10 year-month-day | move test.txt to test_1/test.txt [yourname] * 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] è®¾ç½®learn_gitå­˜å‚¨åº“æ¥æ”¶æ›´æ”¹\ncd learn_git git config receive.denyCurrentBranch updateInstead æ¨é€æ›´æ”¹åˆ° learn_gitå­˜å‚¨åº“\ncd learn_git_cloned git push origin main æŸ¥çœ‹æäº¤å†å²\ngit log --pretty=format:\u0026#39;%h %ad | %s%d [%an]\u0026#39; --graph --date=short è¾“å‡ºï¼š\n* 7_hash_20 year-month-day | modify test.txt by learn_git 3.3.3 (HEAD -\u0026gt; main, origin/main, origin/HEAD) [yourname] * 7_hash_19 year-month-day | modify test.txt by learn_git 3.3.2 [yourname] * 7_hash_18 year-month-day | add test.txt by learn_git 3.3.2 [yourname] * 7_hash_17 year-month-day | rebase feature branch and resolve conflict (origin/feature) [yourname] * 7_hash_13 year-month-day | modify feature.txt by main [yourname] * 7_hash_12 year-month-day | add .gitignore [yourname] * 7_hash_11 year-month-day | rename test_1/test.txt to test_1/test_1.txt [yourname] * 7_hash_10 year-month-day | move test.txt to test_1/test.txt [yourname] * 7_hash_8 year-month-day | modify test.txt to 2.3.10_1 [yourname] * 7_hash_3 year-month-day | modify test.txt to 2.3.8 [yourname] * 7_hash_2 year-month-day | modify test.txt to 2.3.2 [yourname] * 7_hash_1 year-month-day | add test.txt [yourname] 88. è¡¥å……èµ„æ–™ # ç‚¹å‡»å±•å¼€æŸ¥çœ‹èµ„æ–™ å»–é›ªå³°çš„ Git æ•™ç¨‹ Pro Git ","date":"2024å¹´12æœˆ9æ—¥","externalUrl":null,"permalink":"/posts/git%E6%8E%8C%E6%8F%A1%E4%B8%8E%E5%AE%9E%E8%B7%B5%E4%B8%80/","section":"æ–‡ç« ","summary":"","title":"GitæŒæ¡ä¸å®è·µã€ä¸€ã€‘","type":"posts"},{"content":"","date":"2024å¹´12æœˆ9æ—¥","externalUrl":null,"permalink":"/categories/%E4%BB%A3%E7%A0%81/","section":"åˆ†ç±»","summary":"","title":"ä»£ç ","type":"categories"},{"content":"","date":"2024å¹´11æœˆ25æ—¥","externalUrl":null,"permalink":"/tags/code/","section":"Tags","summary":"","title":"Code","type":"tags"},{"content":"","date":"2024å¹´11æœˆ25æ—¥","externalUrl":null,"permalink":"/tags/shell/","section":"Tags","summary":"","title":"Shell","type":"tags"},{"content":"","date":"2024å¹´11æœˆ25æ—¥","externalUrl":null,"permalink":"/tags/zsh/","section":"Tags","summary":"","title":"Zsh","type":"tags"},{"content":" 0. å†™åœ¨å¼€å¤´ # ç”±äºç³»ç»Ÿã€ç¯å¢ƒç­‰å·®å¼‚å¯èƒ½è¿‡å¤§ï¼Œè¿™é‡Œåªæ˜¯è®°å½•ä¸ªäººçš„ zsh é…ç½®ï¼Œä»…ä¾›å‚è€ƒã€‚\n0.1 .zshrc # # My zsh settings with zinit # ------------------- æ ¸å¿ƒé…ç½® ------------------- # æ€§èƒ½ä¼˜åŒ–é€‰é¡¹ skip_global_compinit=1 DISABLE_MAGIC_FUNCTIONS=true ZSH_DISABLE_COMPFIX=true # è¡¥å…¨ç³»ç»Ÿè®¾ç½® COMPLETION_WAITING_DOTS=\u0026#34;true\u0026#34; ZSH_AUTOSUGGEST_MANUAL_REBIND=1 ZSH_AUTOSUGGEST_USE_ASYNC=1 ZSH_AUTOSUGGEST_BUFFER_MAX_SIZE=20 # ------------------- Powerlevel10k å³æ—¶æç¤º ------------------- if [[ -r \u0026#34;${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh\u0026#34; ]]; then source \u0026#34;${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh\u0026#34; fi # ------------------- zinit æ’ä»¶ç®¡ç†å™¨ ------------------- source \u0026#34;/usr/share/zinit/zinit.zsh\u0026#34; autoload -Uz _zinit (( ${+_comps} )) \u0026amp;\u0026amp; _comps[zinit]=_zinit # zinit annexes zinit ice wait\u0026#34;1\u0026#34; lucid as\u0026#34;null\u0026#34; for \\ zdharma-continuum/zinit-annex-as-monitor \\ zdharma-continuum/zinit-annex-bin-gem-node \\ zdharma-continuum/zinit-annex-patch-dl \\ zdharma-continuum/zinit-annex-rust # ------------------- ä¸»é¢˜ ------------------- zinit ice depth=1 zinit light romkatv/powerlevel10k # ------------------- æ ¸å¿ƒæ’ä»¶ ------------------- # fzf zinit ice from\u0026#34;gh-r\u0026#34; as\u0026#34;command\u0026#34; zinit light junegunn/fzf # è¡¥å…¨å¢å¼º \u0026amp; è¡¥å…¨åˆå§‹åŒ– zinit ice wait\u0026#34;0a\u0026#34; lucid atload\u0026#34;zicompinit; zicdreplay\u0026#34; blockf zinit light zsh-users/zsh-completions # fzf-tab zinit ice wait\u0026#34;0b\u0026#34; lucid zinit light Aloxaf/fzf-tab # è‡ªåŠ¨å»ºè®® zinit ice wait\u0026#34;0c\u0026#34; lucid \\ atload\u0026#39; _zsh_autosuggest_start bindkey \u0026#34;\\`\u0026#34; autosuggest-accept \u0026#39; zinit light zsh-users/zsh-autosuggestions # å†å²å‘½ä»¤ zinit ice wait\u0026#34;0d\u0026#34; lucid from\u0026#34;gh-r\u0026#34; as\u0026#34;program\u0026#34; \\ bpick\u0026#34;*x86_64-unknown-linux-gnu.tar.gz\u0026#34; \\ extract\u0026#34;\u0026#34; \\ mv\u0026#34;atuin*/atuin -\u0026gt; atuin\u0026#34; \\ atload\u0026#39; eval \u0026#34;$(atuin init zsh)\u0026#34; bindkey \u0026#34;^R\u0026#34; _atuin_search_widget \u0026#39; zinit light atuinsh/atuin # è¯­æ³•é«˜äº® zinit ice wait\u0026#34;0e\u0026#34; lucid atinit\u0026#34;zpcompinit;zpcdreplay\u0026#34; zinit light zdharma-continuum/fast-syntax-highlighting # ------------------- CLI å·¥å…· ------------------- # æ ¸å¿ƒå·¥å…·ï¼ˆæ— å»¶è¿ŸåŠ è½½ï¼‰ zinit ice wait\u0026#34;0\u0026#34; lucid from\u0026#34;gh-r\u0026#34; as\u0026#34;program\u0026#34; \\ bpick\u0026#34;*x86_64-unknown-linux-musl.tar.gz\u0026#34; \\ extract\u0026#34;\u0026#34; \\ mv\u0026#34;eza* -\u0026gt; eza\u0026#34; zinit light eza-community/eza zinit ice wait\u0026#34;0\u0026#34; lucid from\u0026#34;gh-r\u0026#34; as\u0026#34;program\u0026#34; \\ bpick\u0026#34;*x86_64-unknown-linux-gnu.tar.gz\u0026#34; \\ extract\u0026#34;\u0026#34; \\ mv\u0026#34;bat*/bat -\u0026gt; bat\u0026#34; zinit light sharkdp/bat # å»¶è¿ŸåŠ è½½å·¥å…· zinit ice wait\u0026#34;1\u0026#34; lucid from\u0026#34;gh-r\u0026#34; as\u0026#34;program\u0026#34; \\ bpick\u0026#34;*x86_64-unknown-linux-musl.tar.gz\u0026#34; \\ extract\u0026#34;\u0026#34; \\ mv\u0026#34;ripgrep*/rg -\u0026gt; rg\u0026#34; zinit light BurntSushi/ripgrep zinit ice wait\u0026#34;1\u0026#34; lucid from\u0026#34;gh-r\u0026#34; as\u0026#34;program\u0026#34; \\ bpick\u0026#34;*x86_64-unknown-linux-gnu.tar.gz\u0026#34; \\ extract\u0026#34;\u0026#34; \\ mv\u0026#34;fd*/fd -\u0026gt; fd\u0026#34; zinit light sharkdp/fd zinit ice wait\u0026#34;1\u0026#34; lucid from\u0026#34;gh-r\u0026#34; as\u0026#34;program\u0026#34; \\ bpick\u0026#34;*Linux_x86_64.tar.gz\u0026#34; \\ extract\u0026#34;\u0026#34; zinit light jesseduffield/lazydocker zinit ice wait\u0026#34;1\u0026#34; lucid from\u0026#34;gh-r\u0026#34; as\u0026#34;program\u0026#34; \\ bpick\u0026#34;*linux-amd64.tar.gz\u0026#34; \\ extract\u0026#34;\u0026#34; \\ mv\u0026#34;fastfetch*/usr/bin/fastfetch -\u0026gt; fastfetch\u0026#34; \\ atclone\u0026#34;chmod +x fastfetch\u0026#34; \\ atpull\u0026#34;%atclone\u0026#34; zinit light fastfetch-cli/fastfetch zinit ice wait\u0026#34;1\u0026#34; lucid from\u0026#34;gh-r\u0026#34; as\u0026#34;program\u0026#34; \\ bpick\u0026#34;*linux_x86_64.tar.gz\u0026#34; \\ extract=\u0026#34;\u0026#34; zinit light muesli/duf zinit ice wait\u0026#34;1\u0026#34; lucid as\u0026#34;program\u0026#34; pick\u0026#34;prettyping\u0026#34; zinit load denilsonsa/prettyping # bat-extras zinit ice wait\u0026#34;1\u0026#34; lucid as\u0026#34;program\u0026#34; \\ pick\u0026#34;src/batgrep.sh\u0026#34; pick\u0026#34;src/batdiff.sh\u0026#34; \\ atload\u0026#39;alias batgrep=\u0026#34;batgrep.sh\u0026#34;; alias batdiff=\u0026#34;batdiff.sh\u0026#34;\u0026#39; zinit light eth-p/bat-extras # ------------------- è¡¥å…¨é…ç½® ------------------- # åŸºç¡€è¡¥å…¨è®¾ç½® zstyle \u0026#39;:completion:*\u0026#39; completer _expand _complete _ignored zstyle \u0026#39;:completion:*\u0026#39; matcher-list \u0026#39;m:{a-z}={A-Z}\u0026#39; zstyle \u0026#39;:completion:*\u0026#39; list-colors \u0026#34;${(s.:.)LS_COLORS}\u0026#34; zstyle \u0026#39;:completion:*\u0026#39; menu no # fzf-tab åŸºç¡€è®¾ç½® zstyle \u0026#39;:fzf-tab:*\u0026#39; use-fzf-default-opts yes # fzf-tab é¢„è§ˆè®¾ç½® zstyle \u0026#39;:fzf-tab:complete:cd:*\u0026#39; fzf-preview \u0026#39;eza --icons -1 --color=always $realpath\u0026#39; zstyle \u0026#39;:fzf-tab:complete:cd:*\u0026#39; popup-pad 30 0 zstyle \u0026#39;:fzf-tab:complete:__zoxide_z:*\u0026#39; fzf-preview \u0026#39;eza --icons -1 --color=always $realpath\u0026#39; zstyle \u0026#39;:fzf-tab:complete:z:*\u0026#39; fzf-preview \u0026#39;eza --icons -1 --color=always $realpath\u0026#39; # è¿›ç¨‹è¡¥å…¨é¢„è§ˆ zstyle \u0026#39;:fzf-tab:complete:kill:argument-rest\u0026#39; fzf-preview \u0026#39;ps --pid=$word -o cmd --no-headers -w -w\u0026#39; zstyle \u0026#39;:fzf-tab:complete:kill:argument-rest\u0026#39; fzf-flags \u0026#39;--preview-window=down:3:wrap\u0026#39; zstyle \u0026#39;:fzf-tab:complete:kill:*\u0026#39; popup-pad 0 3 # fzf-tab å¿«æ·é”® zstyle \u0026#39;:fzf-tab:*\u0026#39; fzf-bindings \u0026#39;`:accept\u0026#39; zstyle \u0026#39;:fzf-tab:*\u0026#39; switch-group \u0026#39;\u0026lt;\u0026#39; \u0026#39;\u0026gt;\u0026#39; # ------------------- è‡ªåŠ¨å»ºè®®é…ç½® ------------------- ZSH_AUTOSUGGEST_STRATEGY=(history completion) ZSH_AUTOSUGGEST_COMPLETION_IGNORE=\u0026#39;( |man |pikaur -S )*\u0026#39; ZSH_AUTOSUGGEST_HISTORY_IGNORE=\u0026#39;?(#c50,)\u0026#39; # ------------------- fzf é…ç½® ------------------- export FZF_DEFAULT_OPTS=\u0026#34; --ansi --layout=reverse --info=inline --height=50% --multi --cycle --preview-window=right:50% --preview-window=cycle --prompt=\u0026#39;Î» -\u0026gt; \u0026#39; --pointer=\u0026#39;â–·\u0026#39; --marker=\u0026#39;âœ“\u0026#39; --color=bg+:236,gutter:-1,fg:-1,bg:-1,hl:-1,hl+:-1,prompt:-1,pointer:105,marker:-1,spinner:-1 \u0026#34; export FZF_DEFAULT_COMMAND=\u0026#39;fd --type f --hidden --follow --exclude .git\u0026#39; # ------------------- Conda é…ç½® ------------------- export CONDA_AUTO_ACTIVATE_BASE=false conda() { unfunction conda eval \u0026#34;$(/opt/miniforge/bin/conda shell.zsh hook)\u0026#34; conda $@ } [[ \u0026#34;${CONDA_AUTO_ACTIVATE_BASE:-true}\u0026#34; == \u0026#34;true\u0026#34; ]] \u0026amp;\u0026amp; { eval \u0026#34;$(/opt/miniforge/bin/conda shell.zsh hook)\u0026#34; conda activate base } # ------------------- å…¶ä»–å·¥å…·é…ç½® ------------------- # zoxide eval \u0026#34;$(zoxide init zsh --cmd cd)\u0026#34; # åŠ è½½è‡ªå®šä¹‰åˆ«å source $HOME/.zsh_aliases # Powerlevel10k é…ç½® [[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh 0.2 .zsh_aliases # alias l=\u0026#34;eza --icons --long --header\u0026#34; alias ls=\u0026#34;eza --icons --grid\u0026#34; alias ll=\u0026#34;eza --icons --long --header\u0026#34; alias la=\u0026#34;eza --icons --long --header --all\u0026#34; alias lg=\u0026#34;eza --icons --long --header --all --git\u0026#34; alias tree=\u0026#34;eza --icons --tree -L1\u0026#34; alias cat=\u0026#34;bat\u0026#34; alias man=\u0026#34;tldr\u0026#34; alias mkdir=\u0026#39;mkdir -p\u0026#39; alias df=\u0026#34;duf -style unicode -hide-mp \u0026#39;/run/credentials/*\u0026#39;\u0026#34; alias top=\u0026#34;bpytop\u0026#34; alias gedit=\u0026#34;gnome-text-editor\u0026#34; alias nvidia-smi=\u0026#34;watch -n 3 -c nvidia-smi\u0026#34; alias x=\u0026#34;unar\u0026#34; alias ff=\u0026#34;fastfetch\u0026#34; # å¿«é€Ÿæ˜¾ç¤ºfastfetch function tmp() { cd \u0026#34;$(mktemp -d /tmp/temp_XXX)\u0026#34; #åˆ›å»ºä¸´æ—¶ç›®å½• } 1. åŸºæœ¬ä¿¡æ¯ # System: Arch Linux x86_64 Terminal: kitty Shell: zsh Theme: powerlevel10k Plugins Manerger: zinit 2. åŸæœ‰é…ç½®ç—›ç‚¹ # å¦‚æœå†å²å‘½ä»¤ä¸­æœ‰ä¸­æ–‡ï¼ŒæŒ‰ upé”®ï¼Œä¼šå‡ºç°å†å²å‘½ä»¤é”™ä½å’Œç»ˆæ­¢ç»ˆç«¯çš„é—®é¢˜ã€‚ æœ‰äº›æ—¶å€™ï¼Œå‘½ä»¤è¾“å…¥å»¶è¿Ÿå¾ˆé«˜ï¼Œå·²ç»è¾“å…¥å®Œä¸€æ®µå‘½ä»¤ï¼Œä½†æ˜¯ç»ˆç«¯æ˜¯æ…¢æ…¢ä¸€ä¸ªå­—ä¸€ä¸ªå­—è·³çš„ã€‚ æ€§èƒ½è¿˜æ˜¯ä¸å¤Ÿé«˜ã€‚ 3. æ–¹æ¡ˆå¯¹æ¯”å’Œé€‰æ‹© # 3.1 æ’ä»¶ç®¡ç†å™¨æˆ–æ’ä»¶æ¡†æ¶ # åºå· é¡¹ç›® è¯´æ˜ ä¼˜åŠ¿ åŠ£åŠ¿ 1 Oh My Zsh æœ€æµè¡Œçš„ Zsh æ¡†æ¶ - 300+é¢„ç½®æ’ä»¶å’Œ 150+ä¸»é¢˜\n- é…ç½®ç®€å•ç›´è§‚\n- ç¤¾åŒºåºå¤§ - å¯åŠ¨é€Ÿåº¦æ…¢\n- æ’ä»¶æ•°é‡å¢åŠ ä¼šæ˜¾è‘—é™ä½æ€§èƒ½ 2 Zinit ç°ä»£åŒ–æ’ä»¶ç®¡ç†å™¨ - Turbo æ¨¡å¼å¯åŠ¨é€Ÿåº¦æå‡ 50-80%\n- æ”¯æŒé€‰æ‹©æ€§ç¦ç”¨/å¯ç”¨åŠŸèƒ½\n- å®Œæ•´å…¼å®¹ OMZ å’Œ Prezto æ’ä»¶ - è¯­æ³•ç›¸å¯¹å¤æ‚\n- ä¸é€‚åˆæ–°æ‰‹ 3 Zim è½»é‡çº§æ¡†æ¶ - å¯åŠ¨é€Ÿåº¦å¿«\n- æ¨¡å—åŒ–è®¾è®¡\n- åˆç†çš„é»˜è®¤é…ç½®\n- å®Œæ•´æ”¯æŒ OMZ æ’ä»¶ - å†…ç½®åŠŸèƒ½ç›¸å¯¹è¾ƒå°‘ 4 Sheldon å¯é…ç½®çš„æ’ä»¶ç®¡ç†å™¨ - é…ç½®çµæ´»\n- æ”¯æŒå»¶è¿ŸåŠ è½½\n- æ”¯æŒå¤šç§ shell - ç¤¾åŒºç›¸å¯¹è¾ƒå° 5 zsh4humans ä¼˜åŒ–çš„ Zsh ç¯å¢ƒ - å¯åŠ¨é€Ÿåº¦å¿«\n- é»˜è®¤é…ç½®åˆç†\n- æ€§èƒ½ä¼˜åŒ–å‡ºè‰² - å®šåˆ¶æ€§ç›¸å¯¹è¾ƒä½ 6 Antigen ä¼ ç»Ÿæ’ä»¶ç®¡ç†å™¨ - ç±»ä¼¼åŒ…ç®¡ç†å™¨çš„ä½¿ç”¨æ–¹å¼\n- è‡ªåŠ¨æ›´æ–°æ’ä»¶ - ç»´æŠ¤ä¸å¤Ÿæ´»è·ƒ\n- æ€§èƒ½ä¸€èˆ¬ 7 zgen è½»é‡çº§ç®¡ç†å™¨ - ç”Ÿæˆé™æ€åŠ è½½æ–‡ä»¶\n- å¯åŠ¨ç›¸å¯¹è¾ƒå¿« - åŠŸèƒ½ç›¸å¯¹ç®€å•\n- æ›´æ–°è¾ƒå°‘ 8 zplug å…¨åŠŸèƒ½æ’ä»¶ç®¡ç†å™¨ - åŠŸèƒ½ä¸°å¯Œ\n- å¹¶è¡Œå®‰è£…æ’ä»¶ - å·²åŸºæœ¬åœæ­¢ç»´æŠ¤\n- æ€§èƒ½ä¸€èˆ¬ åœ¨è¿™ä¸ªé‡Œé¢ï¼Œæ ¹æ®è½»é‡åŒ–ã€æ€§èƒ½å¥½ã€ç¤¾åŒºç»´æŠ¤æ´»è·ƒç­‰å› ç´ ï¼Œæˆ‘æœ€ç»ˆé€‰æ‹©äº† Zinitä½œä¸ºæ’ä»¶ç®¡ç†å™¨ã€‚\n3.2 æ’ä»¶ # è¯­æ³•é«˜äº®ï¼šfast-syntax-highlighting\nå‘½ä»¤è¡¥å…¨ï¼šzsh-completionså’Œ fzf-tab\næ™ºèƒ½å»ºè®®ï¼šzsh-autosuggestions\nç›®å½•è·³è½¬ï¼šzoxide\nåºå· é¡¹ç›® è¯´æ˜ ä¼˜åŠ¿ åŠ£åŠ¿ 1 zoxide Rust ç¼–å†™çš„ç°ä»£åŒ–ç›®å½•è·³è½¬å·¥å…· - æ€§èƒ½æœ€å¿«ï¼Œå¯åŠ¨é€Ÿåº¦å¿«\n- ä½¿ç”¨ç®€å•ç›´è§‚\n- æ”¯æŒæ‰€æœ‰ä¸»æµ shell - éœ€è¦é¢å¤–å®‰è£…\n- ä¸æ”¯æŒç›¸å¯¹è·¯å¾„è·³è½¬ 2 autojump Python ç¼–å†™çš„ç»å…¸è·³è½¬å·¥å…· - åŠŸèƒ½ä¸°å¯Œå®Œæ•´\n- é«˜çº§ç‰¹æ€§å¤š - å­¦ä¹ æ›²çº¿è¾ƒé™¡\n- æ€§èƒ½ç›¸å¯¹è¾ƒæ…¢ 3 z Zsh å†…ç½®çš„ç›®å½•è·³è½¬æ’ä»¶ - æ— éœ€é¢å¤–å®‰è£…\n- ä¸ Zsh æ·±åº¦é›†æˆ - åŠŸèƒ½ç›¸å¯¹åŸºç¡€\n- ä»…æ”¯æŒ Zsh 4 z.lua Lua å®ç°çš„è·³è½¬å·¥å…· - è·¨å¹³å°æ”¯æŒå¥½\n- é…ç½®çµæ´» - æ€§èƒ½æ¯” zoxide æ…¢\n- éœ€è¦ Lua ç¯å¢ƒ 5 zsh-z Zsh ä¸“ç”¨çš„ z å®ç° - è½»é‡çº§\n- å®‰è£…ç®€å• - ä»…æ”¯æŒ Zsh\n- åŠŸèƒ½è¾ƒå°‘ 6 ZLOcation Shell åŸç”Ÿå®ç°çš„è·³è½¬å·¥å…· - æ— å¤–éƒ¨ä¾èµ–\n- æ€§èƒ½ç¨³å®š - åŠŸèƒ½ç›¸å¯¹ç®€å•\n- ç¤¾åŒºè¾ƒå° å†å²å‘½ä»¤ï¼šatuin\nåºå· é¡¹ç›® è¯´æ˜ ä¼˜åŠ¿ åŠ£åŠ¿ 1 atuin åŸºäº SQLite çš„ç°ä»£åŒ– shell å†å²è®°å½•å·¥å…· - æ”¯æŒå¤šè®¾å¤‡åŒæ­¥\n- æ”¯æŒç«¯åˆ°ç«¯åŠ å¯†\n- å¯æŒ‰ç›®å½•/ä¸»æœºç­‰è¿‡æ»¤æœç´¢\n- è®°å½•å‘½ä»¤æ‰§è¡Œæ—¶é—´å’Œé€€å‡ºç \n- æ”¯æŒè‡ªæ‰˜ç®¡åŒæ­¥æœåŠ¡å™¨\n- é…ç½®ç®€å•ï¼Œå®‰è£…ä¾¿æ· - é¦–æ¬¡æ‰“å¼€ä»ªè¡¨æ¿è¾ƒæ…¢\n- åœ¨ mosh ä¸‹å¯èƒ½å‡ºç°å±å¹•æ˜¾ç¤ºé—®é¢˜\n- åŒæ­¥æœºåˆ¶ä¸å¤Ÿç›´è§‚\n- é…ç½®æ— æ³•è·¨è®¾å¤‡åŒæ­¥ 2 zsh-histdb åŸºäº SQLite çš„ Zsh å†å²è®°å½•æ’ä»¶ - è®°å½•å‘½ä»¤å·¥ä½œç›®å½•\n- è®°å½•å‘½ä»¤æ‰§è¡Œä¸»æœº\n- æ”¯æŒå¤šæ•°æ®åº“åˆå¹¶\n- ä¸ zsh-autosuggestions é›†æˆè‰¯å¥½\n- æ”¯æŒæŒ‰ç›®å½•æœç´¢å†å² - ä¸ä½¿ç”¨ä¼ ç»Ÿæ–‡æœ¬æ–‡ä»¶å­˜å‚¨\n- é¡¹ç›®ç»´æŠ¤ä¸å¤Ÿæ´»è·ƒ\n- ä»…æ”¯æŒ Zsh\n- é…ç½®ç›¸å¯¹å¤æ‚ ä¸»é¢˜ç¾åŒ–ï¼špowerlevel10k\n3.2 ç¬¬ä¸‰æ–¹å‘½ä»¤è¡Œå·¥å…·ç®¡ç† # ç”±äºæ”¹é…ç½®ä¼šåŒæ­¥ Dockeræ·±åº¦å­¦ä¹ ç¯å¢ƒã€è¿œç¨‹æœåŠ¡å™¨ä½¿ç”¨ï¼Œç³»ç»ŸåŒ…ç®¡ç†å™¨ä¸åŒï¼ˆæœ‰ubuntuã€archlinuxã€debianç­‰ï¼‰ï¼Œæ•…ç¬¬ä¸‰æ–¹å‘½ä»¤è¡Œå·¥å…·ä½¿ç”¨ zinitç®¡ç†ï¼Œè€Œéä½¿ç”¨åŒ…ç®¡ç†å™¨ç®¡ç†ã€‚ åˆ™æ–°å»ºä¸€ç³»ç»Ÿæ—¶å®‰è£…zshå’Œzinitï¼Œå†åŒæ­¥é…ç½®å³å¯ï¼Œå…¶ä½™çš„äº¤ç»™zinitç®¡ç†ã€‚\nTODO: ä¹‹åç”¨chezimoç®¡ç†é…ç½®æ–‡ä»¶å¹¶åŒæ­¥åˆ°å„ä¸ªç³»ç»Ÿã€‚\n4. æµ‹è¯•å·¥å…· # è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨zsh-benchåŸºå‡†å·¥å…·æ¥æµ‹è¯• zsh äº¤äº’æ€§èƒ½ï¼Œå†è¿›è¡Œå¯¹æ¯”ã€‚\næµ‹é‡æŒ‡æ ‡ first_prompt_lag_ms (é¦–æ¬¡æç¤ºç¬¦å»¶è¿Ÿ) æ‰“å¼€æ–°ç»ˆç«¯æ—¶ï¼Œæ˜¾ç¤ºç¬¬ä¸€ä¸ªå‘½ä»¤æç¤ºç¬¦ï¼ˆå¦‚ user@host:~$ï¼‰æ‰€éœ€çš„æ—¶é—´ è‰¯å¥½: \u0026lt; 50msï¼Œå‡ ä¹ç¬é—´æ˜¾ç¤ºæç¤ºç¬¦ è¾ƒå·®: \u0026gt; 100msï¼Œæ‰“å¼€ç»ˆç«¯åæ˜æ˜¾ç­‰å¾…æ‰çœ‹åˆ°æç¤ºç¬¦ first_command_lag_ms (é¦–æ¬¡å‘½ä»¤å»¶è¿Ÿ) è¾“å…¥ç¬¬ä¸€ä¸ªå‘½ä»¤ï¼ˆå¦‚ lsï¼‰åˆ°æ‰§è¡Œå®Œæˆçš„æ—¶é—´ è‰¯å¥½: \u0026lt; 200msï¼Œè¾“å…¥å‘½ä»¤åç«‹å³æ‰§è¡Œ è¾ƒå·®: \u0026gt; 500msï¼Œè¾“å…¥ç¬¬ä¸€ä¸ªå‘½ä»¤åæ˜æ˜¾å¡é¡¿ command_lag_ms (å‘½ä»¤å»¶è¿Ÿ) æ‰§è¡Œåç»­å‘½ä»¤çš„å¹³å‡å“åº”æ—¶é—´ è‰¯å¥½: \u0026lt; 10msï¼Œå‘½ä»¤æ‰§è¡Œæ— æ„ŸçŸ¥å»¶è¿Ÿ è¾ƒå·®: \u0026gt; 50msï¼Œæ¯æ¬¡æ‰§è¡Œå‘½ä»¤éƒ½èƒ½æ„Ÿè§‰åˆ°è½»å¾®å¡é¡¿ input_lag_ms (è¾“å…¥å»¶è¿Ÿ) æŒ‰é”®åˆ°å­—ç¬¦æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„æ—¶é—´ è‰¯å¥½: \u0026lt; 30msï¼Œæ‰“å­—æµç•…è‡ªç„¶ è¾ƒå·®: \u0026gt; 50msï¼Œæ‰“å­—æ—¶æ„Ÿè§‰æ˜æ˜¾å»¶è¿Ÿæˆ–å¡é¡¿ exit_time_ms (é€€å‡ºæ—¶é—´) è¾“å…¥ exit æˆ–æŒ‰ Ctrl+D åˆ°ç»ˆç«¯å®Œå…¨å…³é—­çš„æ—¶é—´ è‰¯å¥½: \u0026lt; 100msï¼Œç»ˆç«¯ç«‹å³å…³é—­ è¾ƒå·®: \u0026gt; 200msï¼Œå…³é—­ç»ˆç«¯æ—¶å‡ºç°æ˜æ˜¾å»¶è¿Ÿ æµ‹è¯•å‘½ä»¤å¦‚ä¸‹ï¼š ./zsh-bench -i 30 -l yes -g yes 5. æµ‹è¯•ç»“æœ # ==\u0026gt; benchmarking login shell of user xiadengma ... creates_tty=0 has_compsys=0 has_syntax_highlighting=0 has_autosuggestions=0 has_git_prompt=1 first_prompt_lag_ms=18.829 first_command_lag_ms=78.340 command_lag_ms=4.930 input_lag_ms=3.903 exit_time_ms=45.429 å¯ä»¥çœ‹åˆ°å½“å‰ zsh é…ç½®åœ¨æ€§èƒ½ä¸Šè¡¨ç°è‰¯å¥½ï¼Œå“åº”é€Ÿåº¦å¿«ã€‚\nå‚è€ƒèµ„æ–™ # ç‚¹å‡»å±•å¼€æŸ¥çœ‹å‚è€ƒèµ„æ–™ https://github.com/crivotz/dot_files/blob/master/linux/zinit/zshrc https://github.com/synthpop123/dotfiles/blob/main/.zshrc https://github.com/Aloxaf/dotfiles/blob/master/zsh/.config/zsh/zshrc.zsh https://www.aloxaf.com/2024/02/manage_zsh_shell_with_atuin/ https://blog.lkwplus.com/posts/macos-dev-setup/#zsh-%E9%85%8D%E7%BD%AE https://notes.fe-mm.com/workflow/terminal/toolkit ","date":"2024å¹´11æœˆ25æ—¥","externalUrl":null,"permalink":"/posts/%E4%B8%AA%E4%BA%BAzsh%E9%85%8D%E7%BD%AE/","section":"æ–‡ç« ","summary":"","title":"ä¸ªäººzshé…ç½®","type":"posts"},{"content":"","date":"2024å¹´11æœˆ25æ—¥","externalUrl":null,"permalink":"/series/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/","section":"Series","summary":"","title":"å¼€å‘ç¯å¢ƒé…ç½®","type":"series"},{"content":"","date":"2024å¹´11æœˆ22æ—¥","externalUrl":null,"permalink":"/tags/blowfish/","section":"Tags","summary":"","title":"Blowfish","type":"tags"},{"content":"è¯¦ç»†è§https://blowfish.page/zh-cn/docs/shortcodes/#button\n1. å±•å¼€æŠ˜å  # ç‚¹å‡»å±•å¼€ è¿™æ˜¯æŠ˜å çš„å†…å®¹ é»˜è®¤å±•å¼€çš„å†…å®¹ è¿™ä¸ªå†…å®¹å—é»˜è®¤æ˜¯å±•å¼€çš„ 2. å„ç±»å‹æç¤ºæ¡† # è¿™æ˜¯ä¸€ä¸ªä¿¡æ¯æç¤ºæ¡† è¿™æ˜¯ä¸€ä¸ªè­¦å‘Šæç¤ºæ¡† è¿™æ˜¯ä¸€ä¸ªå±é™©æç¤ºæ¡† 3. ç”»å»Š # ç”¨äºç”Ÿæˆå¯äº¤äº’ä¸”å…·æœ‰è§†è§‰å¸å¼•åŠ›çš„æ–¹å¼å±•ç¤ºå¤šä¸ªå›¾åƒçš„ç”»å»Šã€‚è¿™å…è®¸ç”¨æˆ·æ»‘åŠ¨æµè§ˆå¤šä¸ªå›¾åƒï¼ŒåŒæ—¶ä»…å ç”¨å•ä¸ªå›¾åƒçš„å‚ç›´ç©ºé—´ã€‚æ‰€æœ‰å›¾åƒå‡ä½¿ç”¨çˆ¶ç»„ä»¶çš„å®Œæ•´å®½åº¦å¹¶ä½¿ç”¨é¢„å®šä¹‰çš„å®½é«˜æ¯” 16:9 ã€ 21:9 æˆ– 32:9 ä¹‹ä¸€æ˜¾ç¤ºã€‚\nå‚æ•° åŠŸèƒ½ images å¿…å¡« ç”¨äºåŒ¹é…å›¾åƒåç§°çš„æ­£åˆ™è¡¨è¾¾å¼æˆ– URLã€‚ aspectRatio å¯é€‰ ç”»å»Šçš„çºµæ¨ªæ¯”ã€‚ 16-9 ã€ 21-9 æˆ– 32-9 ã€‚é»˜è®¤è®¾ç½®ä¸º 16-9 ã€‚ interval å¯é€‰ è‡ªåŠ¨æ»šåŠ¨çš„æ—¶é—´é—´éš”ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½æŒ‡å®šã€‚é»˜è®¤ä¸º 2000 (2 ç§’)ã€‚ 4. å›¾è¡¨ # æ”¯æŒchart.jsï¼Œå…·ä½“è§Chart.js å®˜æ–¹æ–‡æ¡£ã€‚\n5. å¤–éƒ¨ä»£ç  # æ­¤çŸ­ä»£ç ç”¨äºè½»æ¾ä»å¤–éƒ¨æºå¯¼å…¥ä»£ç ï¼Œæ— éœ€å¤åˆ¶å’Œç²˜è´´\nParameter Description url å¿…éœ€çš„ å¤–éƒ¨æ‰˜ç®¡ä»£ç æ–‡ä»¶çš„ URL. type ç”¨äºè¯­æ³•çªå‡ºæ˜¾ç¤ºçš„ä»£ç ç±»å‹. startLine å¯é€‰ ä»ä»£ç æ–‡ä»¶ä¸­å¯¼å…¥çš„èµ·å§‹è¡Œ. endLine å¯é€‰ ä»ä»£ç æ–‡ä»¶ä¸­å¯¼å…¥çš„ç»“æŸè¡Œ. 6. Github å¡ç‰‡ # å…è®¸æ‚¨å¿«é€Ÿé“¾æ¥åˆ° github Repoï¼ŒåŒæ—¶æ˜¾ç¤ºå’Œæ›´æ–°æœ‰å…³å®ƒçš„å®æ—¶ç»Ÿè®¡ä¿¡æ¯ï¼Œä¾‹å¦‚å®ƒçš„ star å’Œ fork æ•°ã€‚\nå‚æ•° åŠŸèƒ½ repo [String] æ ¼å¼ä¸º username/repo çš„ github repo nunocoracao/blowfish Personal Website \u0026amp; Blog Theme for Hugo HTML 2370 615 7. KaTeX æ•°å­¦å…¬å¼ # katex ç®€ç å¯ç”¨äºä½¿ç”¨ KaTeX åŒ…å‘æ–‡ç« å†…å®¹æ·»åŠ æ•°å­¦è¡¨è¾¾å¼ã€‚æœ‰å…³å¯ç”¨è¯­æ³•ï¼Œè¯·å‚é˜…æ”¯æŒçš„ TeX å‡½æ•°çš„åœ¨çº¿å‚è€ƒã€‚\nè¦åœ¨æ–‡ç« ä¸­åŠ å…¥æ•°å­¦è¡¨è¾¾å¼ï¼Œåªéœ€å°†ç®€ç æ”¾åœ¨ä»»æ„ä½ç½®å³å¯ã€‚æ¯ç¯‡æ–‡ç« åªéœ€åŠ å…¥ä¸€æ¬¡ï¼ŒKaTeX å°†è‡ªåŠ¨å‘ˆç°è¯¥é¡µé¢ä¸Šçš„ä»»ä½•æ ‡è®°ã€‚æ”¯æŒå†…è”å’Œå—è¡¨ç¤ºæ³•ã€‚\nå¯ä»¥é€šè¿‡å°†è¡¨è¾¾å¼åŒ…è£…åœ¨ \\\\( å’Œ \\\\) åˆ†éš”ç¬¦ä¸­æ¥ç”Ÿæˆå†…è”è¡¨ç¤ºæ³•ã€‚æˆ–è€…ï¼Œå¯ä»¥ä½¿ç”¨ $$ åˆ†éš”ç¬¦ç”Ÿæˆå—ç¬¦å·ã€‚\n\\(f(a,b,c) = (a^2+b^2+c^2)^3\\)\n8. Mermaid å›¾è¡¨å’Œæµç¨‹å›¾ # mermaid å…è®¸æ‚¨ä½¿ç”¨æ–‡æœ¬ç»˜åˆ¶å¯è§†åŒ–çš„å›¾è¡¨ã€‚åº•å±‚ä½¿ç”¨ Mermaidï¼Œå¹¶æ”¯æŒå„ç§å›¾è¡¨ã€å›¾è¡¨å’Œå…¶ä»–è¾“å‡ºæ ¼å¼ã€‚\nåªéœ€åœ¨ mermaid ç®€ç ä¸­ç¼–å†™æ‚¨çš„ Mermaid è¯­æ³•ï¼Œç„¶åè®©æ’ä»¶å®Œæˆå…¶ä½™çš„å·¥ä½œã€‚\nå·²ç»æ”¯æŒ markdown è¯­æ³•ï¼Œç›´æ¥åœ¨ markdown ä¸­ç¼–å†™å³å¯ã€‚\næœ‰å…³è¯­æ³•å’Œæ”¯æŒçš„å›¾è¡¨ç±»å‹çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…å®˜æ–¹ Mermaid æ–‡æ¡£ã€‚\ngraph LR; A[Lemons]--\u003eB[Lemonade]; B--\u003eC[Profit] 9. æœ¬åœ°è§†é¢‘ # ç”¨äºåœ¨æ–‡ç« ä¸­åµŒå…¥æœ¬åœ°è§†é¢‘æ–‡ä»¶ï¼Œæ”¯æŒå“åº”å¼è®¾è®¡å’Œå¤šç§é…ç½®é€‰é¡¹ã€‚ æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼ï¼š\n{{\u0026lt; video src=\u0026#34;video.mp4\u0026#34; \u0026gt;}} å‚æ•°è¯´æ˜ # å‚æ•° è¯´æ˜ é»˜è®¤å€¼ src å¿…å¡« è§†é¢‘æ–‡ä»¶è·¯å¾„ï¼ˆæœ¬åœ°æˆ– URLï¼‰ - poster å¯é€‰ è§†é¢‘å°é¢å›¾è·¯å¾„ - aspectRatio å¯é€‰ è§†é¢‘çºµæ¨ªæ¯”ã€‚16-9ã€21-9 æˆ– 32-9 16-9 controls å¯é€‰ æ˜¯å¦æ˜¾ç¤ºæ§åˆ¶æ¡ true autoplay å¯é€‰ æ˜¯å¦è‡ªåŠ¨æ’­æ”¾ false loop å¯é€‰ æ˜¯å¦å¾ªç¯æ’­æ”¾ false muted å¯é€‰ æ˜¯å¦é™éŸ³ false playsinline å¯é€‰ æ˜¯å¦åœ¨ç§»åŠ¨ç«¯å†…è”æ’­æ”¾ false preload å¯é€‰ é¢„åŠ è½½æ–¹å¼ï¼ˆmetadataã€autoã€noneï¼‰ metadata caption å¯é€‰ è§†é¢‘è¯´æ˜æ–‡å­—ï¼ˆæ”¯æŒ Markdownï¼‰ - src-webm å¯é€‰ WebM æ ¼å¼è§†é¢‘æºï¼ˆæä¾›å¤šæ ¼å¼ä»¥æé«˜å…¼å®¹æ€§ï¼‰ - src-ogg å¯é€‰ OGG æ ¼å¼è§†é¢‘æº - class å¯é€‰ è‡ªå®šä¹‰ CSS ç±» - ","date":"2024å¹´11æœˆ22æ—¥","externalUrl":null,"permalink":"/posts/blowfish%E4%B8%BB%E9%A2%98%E5%B8%B8%E7%94%A8%E7%AE%80%E7%A0%81/","section":"æ–‡ç« ","summary":"","title":"Blowfishä¸»é¢˜å¸¸ç”¨ç®€ç ","type":"posts"},{"content":"","date":"2024å¹´11æœˆ22æ—¥","externalUrl":null,"permalink":"/tags/hugo/","section":"Tags","summary":"","title":"Hugo","type":"tags"},{"content":"","date":"2024å¹´11æœˆ22æ—¥","externalUrl":null,"permalink":"/tags/shortcode/","section":"Tags","summary":"","title":"Shortcode","type":"tags"},{"content":" 0. å†™åœ¨å¼€å¤´ # åœ¨é…ç½®å¥½ä»£ç†å’Œè½¯ä»¶æºçš„æƒ…å†µä¸‹ï¼Œé…ç½®å¼€å‘ç¯å¢ƒã€‚\n1. åŸºæœ¬ä¿¡æ¯ä¸è½¯ä»¶å®‰è£… # System: Arch Linux x86_64 IDE: VSCode LSP: clangd Compiler: clang Debugger: lldb Build System: xmake åœ¨ç»ˆç«¯ä¾æ¬¡è¾“å…¥ä¸‹åˆ—å‘½ä»¤å®‰è£…è½¯ä»¶ï¼š\nsudo pacman -Syyu sudo pacman -S clang sudo pacman -S clangd sudo pacman -S lldb sudo pacman -S xmake sudo pacman -S visual-studio-code-bin ä¾æ¬¡è¾“å…¥ä¸‹åˆ—å‘½ä»¤æ£€æŸ¥æ˜¯å¦æ­£ç¡®å®‰è£…ï¼š\nclang -v clangd -v clang-tidy --version clang-format --version lldb --version xmake --version 2. vscode åŸºç¡€é…ç½®ä¸æ’ä»¶ # åŸºç¡€é…ç½®ä½œä¸ºæ‰€æœ‰é…ç½®çš„åŸºç¡€å’Œå¹³æ—¶çš„ç¼–è¾‘å™¨ä½¿ç”¨\n2.1 vscode åŸºç¡€æ’ä»¶ # è¿›å…¥vscodeï¼Œç‚¹å‡»æ‰©å±•ï¼Œä¾æ¬¡è¾“å…¥ä¸‹åˆ—å†…å®¹å®‰è£…æ˜¾ç¤ºçš„ç¬¬ä¸€ä¸ªæ’ä»¶\nMS-CEINTL.vscode-language-pack-zh-hansï¼šä¸­æ–‡è¯­è¨€åŒ… intellsmi.comment-translateï¼šæ³¨é‡Šç¿»è¯‘ deeplx-comment-translate.deeplx-comment-translateï¼šæ³¨é‡Šç¿»è¯‘æ‰©å±•ï¼Œä½¿å…¶å¯ä»¥ä½¿ç”¨Deeplx usernamehw.errorlensï¼šä»£ç é”™è¯¯æç¤º eamodio.gitlensï¼šgit å·¥å…· tamasfe.even-better-tomlï¼šTOML è¯­æ³•é«˜äº® cweijan.vscode-officeï¼švscode å†… office æ–‡ä»¶é¢„è§ˆå’Œ markdown é¢„è§ˆ github.copilotï¼šAI ä»£ç æç¤º github.copilot-chatï¼šAI ä»£ç å¯¹è¯ fisheva.eva-themeï¼švscode é¢œè‰²ä¸»é¢˜ miguelsolorio.fluent-iconsï¼švscode äº§å“å›¾æ ‡ä¸»é¢˜ wayou.vscode-icons-macï¼švscode æ–‡ä»¶å›¾æ ‡ä¸»é¢˜ ms-vscode-remote.remote-sshï¼šSSH è¿œç¨‹è¿æ¥ åœ¨å®‰è£…å®Œæˆåï¼Œåœ¨æ‰©å±•åˆ—è¡¨ä¾æ¬¡å³é”®ç‚¹å‡»æ’ä»¶ï¼Œæ‰“å¼€å°†æ‰©å±•åº”ç”¨äºæ‰€æœ‰é…ç½®æ–‡ä»¶é€‰é¡¹\n2.2 vscode åŸºç¡€é…ç½® # è¿›å…¥vscodeï¼Œå…ˆç‚¹å‡»å·¦ä¸Šè§’æ–‡ä»¶-\u0026gt;é¦–é€‰é¡¹-\u0026gt;Profile-\u0026gt;é»˜è®¤ï¼Œå†æŒ‰å¿«æ·é”®Ctrl+Shift+Pï¼Œåœ¨è¾“å…¥æ¡†å†…è¾“å…¥user jsonï¼Œé€‰ä¸­Preferences: Open Settings (JSON),æ­¤æ—¶ä¼šæœ‰ä¸€ä¸ªsettings.jsonæ–‡ä»¶è¢«æ‰“å¼€ï¼Œä¿®æ”¹å…¶å†…å®¹ä¸ºä¸‹é¢å†…å®¹\n{ //------------------ä¸‹åˆ—é…ç½®å…±äº«ç»™æ‰€æœ‰å…¶ä»–é…ç½®------------------ \u0026#34;workbench.settings.applyToAllProfiles\u0026#34;: [ //---å·¥ä½œå°--- \u0026#34;workbench.colorTheme\u0026#34;, \u0026#34;workbench.iconTheme\u0026#34;, \u0026#34;workbench.productIconTheme\u0026#34;, \u0026#34;workbench.startupEditor\u0026#34;, \u0026#34;workbench.list.smoothScrolling\u0026#34;, \u0026#34;workbench.tree.indent\u0026#34;, \u0026#34;workbench.editor.highlightModifiedTabs\u0026#34;, \u0026#34;workbench.editor.pinnedTabsOnSeparateRow\u0026#34;, \u0026#34;workbench.editor.wrapTabs\u0026#34;, \u0026#34;workbench.editor.empty.hint\u0026#34;, \u0026#34;workbench.editor.enablePreview\u0026#34;, \u0026#34;workbench.activityBar.location\u0026#34;, \u0026#34;workbench.editorAssociations\u0026#34;, \u0026#34;workbench.reduceMotion\u0026#34;, //---æ–‡æœ¬ç¼–è¾‘å™¨--- \u0026#34;editor.accessibilitySupport\u0026#34;, \u0026#34;editor.codeLensFontFamily\u0026#34;, \u0026#34;editor.codeLensFontSize\u0026#34;, \u0026#34;editor.cursorBlinking\u0026#34;, \u0026#34;editor.cursorSurroundingLines\u0026#34;, \u0026#34;editor.fontFamily\u0026#34;, \u0026#34;editor.fontLigatures\u0026#34;, \u0026#34;editor.fontSize\u0026#34;, \u0026#34;editor.fontWeight\u0026#34;, \u0026#34;editor.lineHeight\u0026#34;, \u0026#34;editor.formatOnPaste\u0026#34;, \u0026#34;editor.formatOnSave\u0026#34;, \u0026#34;editor.gotoLocation.multipleDeclarations\u0026#34;, \u0026#34;editor.gotoLocation.multipleDefinitions\u0026#34;, \u0026#34;editor.guides.bracketPairs\u0026#34;, \u0026#34;editor.guides.indentation\u0026#34;, \u0026#34;editor.inlayHints.enabled\u0026#34;, \u0026#34;editor.linkedEditing\u0026#34;, \u0026#34;editor.multiCursorModifier\u0026#34;, \u0026#34;editor.quickSuggestions.comments\u0026#34;, \u0026#34;editor.quickSuggestions.strings\u0026#34;, \u0026#34;editor.quickSuggestionsDelay\u0026#34;, \u0026#34;editor.renderWhitespace\u0026#34;, \u0026#34;editor.smoothScrolling\u0026#34;, \u0026#34;editor.snippetSuggestions\u0026#34;, \u0026#34;editor.suggest.insertMode\u0026#34;, \u0026#34;editor.suggest.preview\u0026#34;, \u0026#34;editor.suggestFontSize\u0026#34;, \u0026#34;editor.tokenColorCustomizations\u0026#34;, \u0026#34;editor.unicodeHighlight.allowedLocales\u0026#34;, \u0026#34;editor.acceptSuggestionOnEnter\u0026#34;, \u0026#34;editor.bracketPairColorization.enabled\u0026#34;, \u0026#34;editor.wordWrap\u0026#34;, \u0026#34;editor.wordWrapColumn\u0026#34;, \u0026#34;editor.mouseWheelZoom\u0026#34;, \u0026#34;editor.suggest.snippetsPreventQuickSuggestions\u0026#34;, \u0026#34;editor.suggestSelection\u0026#34;, \u0026#34;editor.stickyScroll.enabled\u0026#34;, \u0026#34;editor.wordSeparators\u0026#34;, \u0026#34;editor.dragAndDrop\u0026#34;, \u0026#34;editor.showFoldingControls\u0026#34;, \u0026#34;editor.hover.above\u0026#34;, \u0026#34;editor.hover.hidingDelay\u0026#34;, \u0026#34;editor.scrollbar.verticalScrollbarSize\u0026#34;, \u0026#34;editor.unicodeHighlight.nonBasicASCII\u0026#34;, \u0026#34;editor.minimap.maxColumn\u0026#34;, //---æ–‡ä»¶èµ„æºç®¡ç†å™¨--- \u0026#34;explorer.confirmDelete\u0026#34;, \u0026#34;explorer.enableDragAndDrop\u0026#34;, \u0026#34;explorer.confirmDragAndDrop\u0026#34;, \u0026#34;explorer.fileNesting.enabled\u0026#34;, \u0026#34;explorer.autoReveal\u0026#34;, //---æ–‡ä»¶--- \u0026#34;files.autoGuessEncoding\u0026#34;, \u0026#34;files.autoSave\u0026#34;, \u0026#34;files.autoSaveDelay\u0026#34;, \u0026#34;files.eol\u0026#34;, \u0026#34;files.exclude\u0026#34;, \u0026#34;files.trimFinalNewlines\u0026#34;, \u0026#34;files.trimTrailingWhitespace\u0026#34;, \u0026#34;files.insertFinalNewline\u0026#34;, \u0026#34;files.refactoring.autoSave\u0026#34;, \u0026#34;files.watcherExclude\u0026#34;, \u0026#34;files.hotExit\u0026#34;, //---ç»ˆç«¯--- \u0026#34;terminal.integrated.fontSize\u0026#34;, \u0026#34;terminal.integrated.fontWeight\u0026#34;, \u0026#34;terminal.integrated.stickyScroll.enabled\u0026#34;, \u0026#34;terminal.integrated.gpuAcceleration\u0026#34;, \u0026#34;terminal.integrated.defaultLocation\u0026#34;, \u0026#34;terminal.integrated.enableMultiLinePasteWarning\u0026#34;, \u0026#34;terminal.integrated.smoothScrolling\u0026#34;, \u0026#34;terminal.integrated.defaultProfile.linux\u0026#34;, \u0026#34;terminal.integrated.scrollback\u0026#34;, //---å…¶ä»–è‡ªå¸¦è®¾ç½®--- \u0026#34;breadcrumbs.icons\u0026#34;, \u0026#34;notebook.breadcrumbs.showCodeCells\u0026#34;, \u0026#34;notebook.output.fontFamily\u0026#34;, \u0026#34;notebook.output.fontSize\u0026#34;, \u0026#34;search.exclude\u0026#34;, \u0026#34;search.searchEditor.singleClickBehaviour\u0026#34;, \u0026#34;search.followSymlinks\u0026#34;, \u0026#34;search.collapseResults\u0026#34;, \u0026#34;scm.inputFontSize\u0026#34;, \u0026#34;window.dialogStyle\u0026#34;, \u0026#34;window.density.editorTabHeight\u0026#34;, \u0026#34;window.restoreWindows\u0026#34;, \u0026#34;window.newWindowProfile\u0026#34;, \u0026#34;window.customTitleBarVisibility\u0026#34;, \u0026#34;extensions.ignoreRecommendations\u0026#34;, \u0026#34;update.mode\u0026#34;, \u0026#34;[jsonc].editor.defaultFormatter\u0026#34;, \u0026#34;security.workspace.trust.untrustedFiles\u0026#34;, \u0026#34;git.openRepositoryInParentFolders\u0026#34;, \u0026#34;extensions.autoUpdate\u0026#34;, //----æ’ä»¶ï¼šError Lens--- \u0026#34;errorLens.enabledDiagnosticLevels\u0026#34;, \u0026#34;errorLens.excludeBySource\u0026#34;, \u0026#34;errorLens.fontSize\u0026#34;, \u0026#34;errorLens.fontWeight\u0026#34;, //----æ’ä»¶ï¼šGitHub Copilot\u0026amp;Chat--- \u0026#34;github.copilot.enable\u0026#34;, \u0026#34;github.copilot.chat.localeOverride\u0026#34;, \u0026#34;github.copilot.advanced\u0026#34;, \u0026#34;github-enterprise.uri\u0026#34;, //----æ’ä»¶ï¼šComment Translate\u0026amp;Deeplx comment translate--- \u0026#34;commentTranslate.targetLanguage\u0026#34;, \u0026#34;commentTranslate.hover.string\u0026#34;, \u0026#34;commentTranslate.multiLineMerge\u0026#34;, \u0026#34;commentTranslate.source\u0026#34;, \u0026#34;commentTranslate.maxTranslationLength\u0026#34;, \u0026#34;deeplxTranslate.authKey\u0026#34;, //----æ’ä»¶ï¼šVscode Office--- \u0026#34;vscode-office.editorTheme\u0026#34;, \u0026#34;vscode-office.openOutline\u0026#34;, //----æ’ä»¶ï¼šgitlens--- \u0026#34;gitlens.currentLine.enabled\u0026#34;, \u0026#34;gitlens.blame.format\u0026#34;, \u0026#34;gitlens.hovers.currentLine.over\u0026#34;, \u0026#34;gitlens.hovers.enabled\u0026#34;, \u0026#34;gitlens.hovers.avatars\u0026#34;, \u0026#34;gitlens.blame.compact\u0026#34;, \u0026#34;gitlens.blame.separateLines\u0026#34;, \u0026#34;gitlens.codeLens.authors.enabled\u0026#34;, \u0026#34;gitlens.views.repositories.files.layout\u0026#34;, \u0026#34;gitlens.views.repositories.compact\u0026#34;, \u0026#34;gitlens.defaultDateLocale\u0026#34;, \u0026#34;gitlens.defaultDateFormat\u0026#34;, \u0026#34;gitlens.defaultDateStyle\u0026#34;, \u0026#34;gitlens.advanced.messages\u0026#34;, \u0026#34;gitlens.gitCommands.search.showResultsInSideBar\u0026#34;, \u0026#34;gitlens.advanced.fileHistoryShowAllBranches\u0026#34; ], //------------------------------------------------------------------------------------------------------------ // //---é€šç”¨è®¾ç½®--- // //------------------å·¥ä½œå°------------------ \u0026#34;workbench.colorTheme\u0026#34;: \u0026#34;Eva Dark\u0026#34;, //é¢œè‰²ä¸»é¢˜ \u0026#34;workbench.iconTheme\u0026#34;: \u0026#34;vscode-icons-mac\u0026#34;, //å·¥ä½œå°å›¾æ ‡ä¸»é¢˜ \u0026#34;workbench.productIconTheme\u0026#34;: \u0026#34;fluent-icons\u0026#34;, //å·¥ä½œå°äº§å“å›¾æ ‡ä¸»é¢˜ \u0026#34;workbench.startupEditor\u0026#34;: \u0026#34;newUntitledFile\u0026#34;, //åœ¨æ²¡æœ‰ä»ä¸Šä¸€ä¼šè¯ä¸­æ¢å¤å‡ºä¿¡æ¯çš„æƒ…å†µä¸‹ï¼Œæ§åˆ¶å¯åŠ¨æ—¶æ˜¾ç¤ºçš„ç¼–è¾‘å™¨ \u0026#34;workbench.list.smoothScrolling\u0026#34;: true, //åˆ—è¡¨å’Œæ ‘è§†å›¾å¯ç”¨å¹³æ»‘æ»šåŠ¨ \u0026#34;workbench.tree.indent\u0026#34;: 14, //æ ‘ç¼©è¿›14pix \u0026#34;workbench.editor.highlightModifiedTabs\u0026#34;: false, //åœ¨ä¿®æ”¹åæœªä¿å­˜çš„æ–‡ä»¶ä¸Šæ–¹åªæ˜¾ç¤ºç‚¹ \u0026#34;workbench.editor.pinnedTabsOnSeparateRow\u0026#34;: true, //å›ºå®šçš„é€‰é¡¹å¡å‡ºç°åœ¨é¡¶ç«¯ \u0026#34;workbench.editor.wrapTabs\u0026#34;: true, //é€‰é¡¹å¡æ¢è¡Œ \u0026#34;workbench.editor.empty.hint\u0026#34;: \u0026#34;hidden\u0026#34;, //éšè—åœ¨æ²¡æœ‰æ‰“å¼€ç¼–è¾‘å™¨æ—¶æ˜¾ç¤ºçš„æç¤ºä¿¡æ¯ \u0026#34;workbench.editor.enablePreview\u0026#34;: true, //å¯ç”¨é¢„è§ˆç¼–è¾‘å™¨ \u0026#34;workbench.activityBar.location\u0026#34;: \u0026#34;top\u0026#34;, //æ´»åŠ¨æ ä½ç½®ï¼šé¡¶éƒ¨ \u0026#34;workbench.editorAssociations\u0026#34;: { //ç¼–è¾‘å™¨å…³è” \u0026#34;*.copilotmd\u0026#34;: \u0026#34;vscode.markdown.preview.editor\u0026#34;, //ä½¿ç”¨markdowné¢„è§ˆç¼–è¾‘å™¨æ‰“å¼€.copilotmdæ–‡ä»¶ \u0026#34;*.md\u0026#34;: \u0026#34;default\u0026#34;, //ä½¿ç”¨é»˜è®¤ç¼–è¾‘å™¨æ‰“å¼€.mdæ–‡ä»¶ \u0026#34;{git,gitlens}:/**/*.{md,csv,svg}\u0026#34;: \u0026#34;default\u0026#34; //ä½¿ç”¨é»˜è®¤ç¼–è¾‘å™¨æ‰“å¼€gitå’Œgitlensæ‰©å±•ä¸­çš„.mdã€.csvã€.svgæ–‡ä»¶ }, \u0026#34;workbench.reduceMotion\u0026#34;: \u0026#34;on\u0026#34;, //å‡å°‘åŠ¨ç”» // // //------------------æ–‡æœ¬ç¼–è¾‘å™¨------------------ \u0026#34;editor.accessibilitySupport\u0026#34;: \u0026#34;off\u0026#34;, //UIå…³é—­å±å¹•é˜…è¯»å™¨ä¼˜åŒ– \u0026#34;editor.codeLensFontFamily\u0026#34;: \u0026#34;\u0026#39;Cascadia Code PL\u0026#39;\u0026#34;, //CodeLensï¼ˆæç¤ºï¼‰å­—ä½“ \u0026#34;editor.codeLensFontSize\u0026#34;: 13, //CodeLenså­—å· \u0026#34;editor.cursorBlinking\u0026#34;: \u0026#34;smooth\u0026#34;, //å…‰æ ‡é—ªçƒï¼šå¹³æ»‘ \u0026#34;editor.cursorSurroundingLines\u0026#34;: 14, //å…‰æ ‡å‘¨å›´å§‹ç»ˆå¯è§xè¡Œ \u0026#34;editor.fontFamily\u0026#34;: \u0026#34;\u0026#39;MonoLisa Nerd Font\u0026#39;, \u0026#39;Cascadia Code PL\u0026#39;, \u0026#39;SF Pro Text\u0026#39;, \u0026#39;Jetbrains Mono\u0026#39;, \u0026#39;Fira Code\u0026#39;, monospace\u0026#34;, //å­—ä½“ \u0026#34;editor.fontLigatures\u0026#34;: true, //å¯ç”¨å­—ä½“è¿å­— \u0026#34;editor.fontSize\u0026#34;: 14, //ç¼–è¾‘å™¨å­—å· \u0026#34;editor.fontWeight\u0026#34;: \u0026#34;300\u0026#34;, //ç¼–è¾‘å™¨å­—ä½“ç²—ç»† \u0026#34;editor.lineHeight\u0026#34;: 1.5, //ç¼–è¾‘å™¨è¡Œé«˜ \u0026#34;editor.formatOnPaste\u0026#34;: true, //ç²˜è´´å†…å®¹æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç  \u0026#34;editor.formatOnSave\u0026#34;: true, //ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç  \u0026#34;editor.gotoLocation.multipleDeclarations\u0026#34;: \u0026#34;goto\u0026#34;, //ä»£ç å¯¼èˆªæ—¶ç›´æ¥è·³è½¬åˆ°ç¬¬ä¸€ä¸ªå£°æ˜ \u0026#34;editor.gotoLocation.multipleDefinitions\u0026#34;: \u0026#34;goto\u0026#34;, //ä»£ç å¯¼èˆªæ—¶ç›´æ¥è·³è½¬åˆ°ç¬¬ä¸€ä¸ªå®šä¹‰ \u0026#34;editor.guides.bracketPairs\u0026#34;: true, //æ˜¾ç¤ºæ‹¬å·å¯¹é½çš„æŒ‡å¼•çº¿ \u0026#34;editor.guides.indentation\u0026#34;: false, //ä¸æ˜¾ç¤ºç¼©è¿›çš„æŒ‡å¼•çº¿ \u0026#34;editor.inlayHints.enabled\u0026#34;: \u0026#34;off\u0026#34;, //å…³é—­å†…è”æç¤º \u0026#34;editor.linkedEditing\u0026#34;: true, //å¯ç”¨è”åŠ¨ç¼–è¾‘ \u0026#34;editor.multiCursorModifier\u0026#34;: \u0026#34;ctrlCmd\u0026#34;, //å¤šå…‰æ ‡æ“ä½œè¾…åŠ©é”®è®¾ç½®ä¸ºctrl \u0026#34;editor.quickSuggestions\u0026#34;: { \u0026#34;comments\u0026#34;: \u0026#34;on\u0026#34;, //å¼€å¯æ³¨é‡Šå¿«é€Ÿå»ºè®® \u0026#34;strings\u0026#34;: \u0026#34;on\u0026#34; //å¼€å¯å­—ç¬¦ä¸²å¿«é€Ÿå»ºè®® }, \u0026#34;editor.quickSuggestionsDelay\u0026#34;: 0, //ç«‹å³æ˜¾ç¤ºå¿«é€Ÿå»ºè®® \u0026#34;editor.renderWhitespace\u0026#34;: \u0026#34;none\u0026#34;, //ä¸æ¸²æŸ“ç©ºç™½å­—ç¬¦ \u0026#34;editor.smoothScrolling\u0026#34;: true, //å¯ç”¨å¹³æ»‘æ»šåŠ¨ \u0026#34;editor.snippetSuggestions\u0026#34;: \u0026#34;top\u0026#34;, //åœ¨å»ºè®®åˆ—è¡¨çš„é¡¶éƒ¨æ˜¾ç¤ºä»£ç ç‰‡æ®µå»ºè®® \u0026#34;editor.suggest.insertMode\u0026#34;: \u0026#34;replace\u0026#34;, //å»ºè®®æ’å…¥æ¨¡å¼ï¼šæ›¿æ¢ \u0026#34;editor.suggest.preview\u0026#34;: false, //ä¸é¢„è§ˆå»ºè®® \u0026#34;editor.suggestFontSize\u0026#34;: 13, //æ§åˆ¶å»ºè®®åˆ—è¡¨å­—å· \u0026#34;editor.tokenColorCustomizations\u0026#34;: { //è‡ªå®šä¹‰è¯­æ³•é«˜äº® \u0026#34;textMateRules\u0026#34;: [ { \u0026#34;scope\u0026#34;: \u0026#34;comment\u0026#34;, \u0026#34;settings\u0026#34;: { \u0026#34;fontStyle\u0026#34;: \u0026#34;italic\u0026#34; //æ‰€æœ‰è¯­è¨€çš„æ³¨é‡Šéƒ¨åˆ†å°†ä»¥æ–œä½“æ˜¾ç¤º } } ] }, \u0026#34;editor.unicodeHighlight.allowedLocales\u0026#34;: { \u0026#34;zh-hans\u0026#34;: true, //ç®€ä½“ä¸­æ–‡ç¯å¢ƒï¼Œå…è®¸ä½¿ç”¨ Unicode å­—ç¬¦ï¼Œä¸ä¼šè¢«é«˜äº®æ˜¾ç¤º \u0026#34;zh-hant\u0026#34;: true //ç¹ä½“ä¸­æ–‡ç¯å¢ƒï¼Œå…è®¸ä½¿ç”¨ Unicode å­—ç¬¦ï¼Œä¸ä¼šè¢«é«˜äº®æ˜¾ç¤º }, \u0026#34;editor.acceptSuggestionOnEnter\u0026#34;: \u0026#34;smart\u0026#34;, //æ™ºèƒ½æ¥å—å»ºè®® \u0026#34;editor.bracketPairColorization.enabled\u0026#34;: true, //å¯ç”¨æ‹¬å·å¯¹é¢œè‰²åŒ– \u0026#34;editor.wordWrap\u0026#34;: \u0026#34;bounded\u0026#34;, //åœ¨è§†åŒºå®½åº¦å’Œ \u0026#34;Editor: Word Wrap Column\u0026#34; ä¸­çš„è¾ƒå°å€¼å¤„æŠ˜è¡Œã€‚ \u0026#34;editor.wordWrapColumn\u0026#34;: 240, //ç¼–è¾‘å™¨çª—å£å®½åº¦å¤§äºxåˆ—æ—¶ï¼Œè‡ªåŠ¨æ¢è¡Œ \u0026#34;editor.mouseWheelZoom\u0026#34;: false, //å…³é—­é¼ æ ‡æ»šè½®ç¼©æ”¾å­—ä½“å¤§å° \u0026#34;editor.suggest.snippetsPreventQuickSuggestions\u0026#34;: false, //æ§åˆ¶æ´»åŠ¨ä»£ç æ®µä¸é˜»æ­¢å¿«é€Ÿå»ºè®® \u0026#34;editor.suggestSelection\u0026#34;: \u0026#34;recentlyUsedByPrefix\u0026#34;, //ä»£ç è¡¥å…¨åˆ—è¡¨ä¸­ï¼Œä¼˜å…ˆé€‰æ‹©æœ€è¿‘çš„å»ºè®® \u0026#34;editor.stickyScroll.enabled\u0026#34;: true, //çˆ¶çº§è‡ªåŠ¨å¸é™„ç½®é¡¶ \u0026#34;editor.wordSeparators\u0026#34;: \u0026#34;`~!@%^\u0026amp;*()=+[{]}\\\\|;:\u0026#39;\\\u0026#34;,.\u0026lt;\u0026gt;/?ï¼ˆï¼‰ï¼Œã€‚ï¼›ï¼š\u0026#34;, //åŒå‡»é€‰ä¸­è¢«æˆªæ–­å­—ç¬¦ \u0026#34;editor.dragAndDrop\u0026#34;: false, //å…³é—­æ‹–æ‹½ç§»åŠ¨ä»£ç  \u0026#34;editor.showFoldingControls\u0026#34;: \u0026#34;always\u0026#34;, //åœ¨è¡Œå·æ§½ä¸­å§‹ç»ˆæ˜¾ç¤ºæŠ˜å æ§ä»¶ \u0026#34;editor.hover.above\u0026#34;: false, //é¼ æ ‡æŒ‡é’ˆæ‚¬åœåœ¨ä»£ç å…ƒç´ ä¸Šæ—¶ï¼Œæ‚¬åœæç¤ºå°†æ˜¾ç¤ºåœ¨é¼ æ ‡æŒ‡é’ˆçš„ä¸‹æ–¹ \u0026#34;editor.hover.hidingDelay\u0026#34;: 0, //é¼ æ ‡æŒ‡é’ˆä»æ‚¬åœæç¤ºç§»å¼€åï¼Œæ‚¬åœæç¤ºç«‹å³æ¶ˆå¤± \u0026#34;editor.scrollbar.verticalScrollbarSize\u0026#34;: 12, //å‚ç›´æ»šåŠ¨æ¡çš„å®½åº¦ \u0026#34;editor.unicodeHighlight.nonBasicASCII\u0026#34;: false, //ç¦ç”¨éåŸºæœ¬ ASCII å­—ç¬¦é«˜äº® \u0026#34;editor.minimap.maxColumn\u0026#34;: 40, //ä¾§è¾¹ç¼©ç•¥å›¾æœ€å¤§åˆ—æ•° // // //------------------æ–‡ä»¶èµ„æºç®¡ç†å™¨------------------ \u0026#34;explorer.confirmDelete\u0026#34;: false, //åˆ é™¤æ–‡ä»¶æ—¶ä¸æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡† \u0026#34;explorer.enableDragAndDrop\u0026#34;: false, //ç¦ç”¨é¼ æ ‡æ‹–æ”¾æ–‡ä»¶ \u0026#34;explorer.confirmDragAndDrop\u0026#34;: false, //æ‹–æ”¾æ–‡ä»¶æ—¶ä¸æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡† \u0026#34;explorer.fileNesting.enabled\u0026#34;: true, //å¯ç”¨æ–‡ä»¶åµŒå¥— \u0026#34;explorer.autoReveal\u0026#34;: true, //æ‰“å¼€æ–‡ä»¶æ—¶è‡ªåŠ¨å±•å¼€æ–‡ä»¶å¤¹ // // //------------------æ–‡ä»¶------------------ \u0026#34;files.autoGuessEncoding\u0026#34;: true, //è‡ªåŠ¨ä¿å­˜ \u0026#34;files.autoSaveDelay\u0026#34;: 1000, //åœ¨æœ€åä¸€æ¬¡ç¼–è¾‘åxç§’è‡ªåŠ¨ä¿å­˜ \u0026#34;files.eol\u0026#34;: \u0026#34;\\n\u0026#34;, //ä½¿ç”¨æ¢è¡Œç¬¦ï¼ˆLFï¼‰ä½œä¸ºè¡Œå°¾å­—ç¬¦ \u0026#34;files.exclude\u0026#34;: { //æ–‡ä»¶èµ„æºç®¡ç†å™¨æ’é™¤ç›®å½• \u0026#34;**/.idea\u0026#34;: true, \u0026#34;**/__pycache__\u0026#34;: true, \u0026#34;**/.DS_Store\u0026#34;: true, }, \u0026#34;files.trimFinalNewlines\u0026#34;: true, //ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨åˆ é™¤æ–‡ä»¶æœ«å°¾çš„å¤šä½™æ¢è¡Œç¬¦ \u0026#34;files.trimTrailingWhitespace\u0026#34;: true, //ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨åˆ é™¤è¡Œå°¾çš„å¤šä½™ç©ºç™½å­—ç¬¦ \u0026#34;files.insertFinalNewline\u0026#34;: true, //ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨æ’å…¥æœ€åä¸€è¡Œçš„æ¢è¡Œç¬¦ \u0026#34;files.refactoring.autoSave\u0026#34;: true, //é‡å‘½åæ–‡ä»¶æ—¶è‡ªåŠ¨ä¿å­˜ \u0026#34;files.watcherExclude\u0026#34;: { //æ–‡ä»¶ç›‘è§†å™¨æ’é™¤ç›®å½• \u0026#34;**/node_modules/**\u0026#34;: true, \u0026#34;**/dist/**\u0026#34;: true, \u0026#34;**/.idea/**\u0026#34;: true }, \u0026#34;files.hotExit\u0026#34;: \u0026#34;onExitAndWindowClose\u0026#34;, //å…³é—­çª—å£æ—¶ä¿å­˜æ‰€æœ‰æ–‡ä»¶ // // //------------------ç»ˆç«¯------------------ \u0026#34;terminal.integrated.fontSize\u0026#34;: 13, //é›†æˆç»ˆç«¯å­—å· \u0026#34;terminal.integrated.fontWeight\u0026#34;: \u0026#34;300\u0026#34;, //é›†æˆç»ˆç«¯ \u0026#34;terminal.integrated.stickyScroll.enabled\u0026#34;: false, //ç»ˆç«¯å‘½ä»¤ç½®é¡¶ \u0026#34;terminal.integrated.gpuAcceleration\u0026#34;: \u0026#34;on\u0026#34;, //ä½¿ç”¨GPUåŠ é€Ÿ \u0026#34;terminal.integrated.defaultLocation\u0026#34;: \u0026#34;editor\u0026#34;, //ç»ˆç«¯é»˜è®¤ä½ç½®ï¼šç¼–è¾‘å™¨ \u0026#34;terminal.integrated.enableMultiLinePasteWarning\u0026#34;: \u0026#34;never\u0026#34;, //å…³é—­å¤šè¡Œç²˜è´´è­¦å‘Š \u0026#34;terminal.integrated.smoothScrolling\u0026#34;: true, //ç»ˆç«¯å¹³æ»‘æ»šåŠ¨ \u0026#34;terminal.integrated.defaultProfile.linux\u0026#34;: \u0026#34;zsh\u0026#34;, //é»˜è®¤ç»ˆç«¯shellï¼šzsh \u0026#34;terminal.integrated.scrollback\u0026#34;: 1500, //ç»ˆç«¯æ»šåŠ¨æ¡æœ€å¤§è¡Œæ•° // // //------------------å…¶ä»–è‡ªå¸¦è®¾ç½®------------------ \u0026#34;breadcrumbs.icons\u0026#34;: false, //ç›®å½•å¯¼èˆªä¸æ˜¾ç¤ºæ–‡ä»¶/æ–‡ä»¶å¤¹å›¾æ ‡ \u0026#34;notebook.breadcrumbs.showCodeCells\u0026#34;: false, //é¢åŒ…å±‘å¯¼èˆªä¸­ä¸æ˜¾ç¤ºä»£ç å•å…ƒæ ¼ \u0026#34;notebook.output.fontFamily\u0026#34;: \u0026#34;\u0026#39;Cascadia Code PL\u0026#39;\u0026#34;, //ç¬”è®°æœ¬è¾“å‡ºåŒºåŸŸå­—ä½“ \u0026#34;notebook.output.fontSize\u0026#34;: 14, //ç¬”è®°æœ¬è¾“å‡ºåŒºåŸŸå­—å· \u0026#34;search.exclude\u0026#34;: { //æœç´¢æ’é™¤ç›®å½• \u0026#34;**/.git\u0026#34;: true, \u0026#34;**/.svn\u0026#34;: true, \u0026#34;**/.vscode\u0026#34;: true, \u0026#34;**/.gitignore\u0026#34;: true, \u0026#34;**/node_modules\u0026#34;: true, \u0026#34;**/dist\u0026#34;: true, \u0026#34;**/build\u0026#34;: true, \u0026#34;**/*.lock\u0026#34;: true }, \u0026#34;search.searchEditor.singleClickBehaviour\u0026#34;: \u0026#34;peekDefinition\u0026#34;, //å•å‡»æœç´¢ç»“æœæ—¶ï¼Œåœ¨ä¸Šä¸‹æ–‡å†…æŸ¥çœ‹å®šä¹‰ \u0026#34;search.followSymlinks\u0026#34;: false, //å…³é—­æœç´¢ä¸­è·Ÿè¸ªç¬¦å·é“¾æ¥ \u0026#34;search.collapseResults\u0026#34;: \u0026#34;auto\u0026#34;, //æœç´¢ç»“æœè‡ªåŠ¨æŠ˜å  \u0026#34;search.showLineNumbers\u0026#34;: true, //æœç´¢ç»“æœæ˜¾ç¤ºè¡Œå· \u0026#34;scm.inputFontSize\u0026#34;: 13, //æºä»£ç ç®¡ç†å­—å· \u0026#34;window.dialogStyle\u0026#34;: \u0026#34;custom\u0026#34;, //ä½¿ç”¨VSCodeè‡ªå®šä¹‰çš„å¯¹è¯æ¡†æ ·å¼ \u0026#34;window.density.editorTabHeight\u0026#34;: \u0026#34;compact\u0026#34;, //ç´§å‡‘å¸ƒå±€é€‰é¡¹å¡ \u0026#34;window.restoreWindows\u0026#34;: \u0026#34;none\u0026#34;, //çª—å£æ¢å¤ \u0026#34;window.newWindowProfile\u0026#34;: \u0026#34;é»˜è®¤\u0026#34;, //æ–°çª—å£é…ç½®æ–‡ä»¶(ä¸åŒæ­¥åˆ°å…¶ä»–é…ç½®æ–‡ä»¶) \u0026#34;window.customTitleBarVisibility\u0026#34;: \u0026#34;never\u0026#34;, //éšè—æ ‡é¢˜æ  \u0026#34;extensions.ignoreRecommendations\u0026#34;: true, //å¿½ç•¥æ¨èçš„æ‰©å±• \u0026#34;update.mode\u0026#34;: \u0026#34;manual\u0026#34;, //VS Codeæ‰‹åŠ¨æ›´æ–° \u0026#34;[jsonc]\u0026#34;: { //jsoncæ–‡ä»¶æ ¼å¼åŒ– \u0026#34;editor.defaultFormatter\u0026#34;: \u0026#34;vscode.json-language-features\u0026#34; }, \u0026#34;security.workspace.trust.untrustedFiles\u0026#34;: \u0026#34;open\u0026#34;, //æ‰“å¼€ä¸å—ä¿¡ä»»çš„æ–‡ä»¶ \u0026#34;git.openRepositoryInParentFolders\u0026#34;: \u0026#34;always\u0026#34;, //åœ¨çˆ¶æ–‡ä»¶å¤¹ä¸­æ‰“å¼€ä»“åº“ \u0026#34;git.enableSmartCommit\u0026#34;: true, // \u0026#34;extensions.autoUpdate\u0026#34;: false, //ç¦ç”¨è‡ªåŠ¨æ›´æ–°æ‰©å±• // // //------------------æ’ä»¶ï¼šError Lens------------------ \u0026#34;errorLens.enabledDiagnosticLevels\u0026#34;: [ \u0026#34;warning\u0026#34;, //å¯ç”¨è­¦å‘Šçº§åˆ«çš„è¯Šæ–­ \u0026#34;error\u0026#34; //å¯ç”¨é”™è¯¯çº§åˆ«çš„è¯Šæ–­ ], \u0026#34;errorLens.excludeBySource\u0026#34;: [ \u0026#34;cSpell\u0026#34;, //æ’é™¤ cSpell äº§ç”Ÿçš„è¯Šæ–­ä¿¡æ¯ \u0026#34;Grammarly\u0026#34;, //æ’é™¤ Grammarly äº§ç”Ÿçš„è¯Šæ–­ä¿¡æ¯ ], \u0026#34;errorLens.fontSize\u0026#34;: \u0026#34;15\u0026#34;, //ErrorLenså­—å· \u0026#34;errorLens.fontWeight\u0026#34;: \u0026#34;300\u0026#34;, //ErrorLenså­—ä½“ç²—ç»† // // //------------------æ’ä»¶ï¼šGitHub CopilotåŠChat------------------ \u0026#34;github.copilot.enable\u0026#34;: { \u0026#34;*\u0026#34;: true, //å¯ç”¨github copilot \u0026#34;markdown\u0026#34;: true, //å¯ç”¨github copilotçš„markdownæ”¯æŒ \u0026#34;plaintext\u0026#34;: true, //å¯ç”¨github copilotçš„çº¯æ–‡æœ¬æ”¯æŒ \u0026#34;scminput\u0026#34;: true //å¯ç”¨github copilotçš„æºä»£ç ç®¡ç†è¾“å…¥æ”¯æŒ }, \u0026#34;github.copilot.chat.localeOverride\u0026#34;: \u0026#34;zh-CN\u0026#34;, //èŠå¤©çª—å£è¯­è¨€ï¼šç®€ä½“ä¸­æ–‡ // // //=== å®˜æ–¹ === \u0026#34;github.copilot.advanced\u0026#34;: { \u0026#34;authProvider\u0026#34;: \u0026#34;github\u0026#34; }, // // //------------------æ’ä»¶ï¼šComment Translate\u0026amp;Deeplx comment translate------------------ \u0026#34;commentTranslate.targetLanguage\u0026#34;: \u0026#34;zh-CN\u0026#34;, //ç¿»è¯‘ç›®æ ‡è¯­è¨€ï¼šç®€ä½“ä¸­æ–‡ \u0026#34;commentTranslate.hover.string\u0026#34;: true, //æ‚¬åœç¿»è¯‘å­—ç¬¦ä¸² \u0026#34;commentTranslate.multiLineMerge\u0026#34;: true, //å¤šè¡Œåˆå¹¶ç¿»è¯‘ \u0026#34;commentTranslate.source\u0026#34;: \u0026#34;deeplx-comment-translate.deeplx-comment-translate-deeplx\u0026#34;, //ç¿»è¯‘æºï¼šdeeplx-comment-translate \u0026#34;commentTranslate.maxTranslationLength\u0026#34;: 10000, //æœ€å¤§ç¿»è¯‘é•¿åº¦ï¼šçœ‹ä½œæ— ä¸Šé™ \u0026#34;deeplxTranslate.authKey\u0026#34;: \u0026#34;å¡«ä¸Šä½ çš„deeplx key\u0026#34;, //deeplxç¿»è¯‘æ’ä»¶çš„APIå¯†é’¥ // // //------------------æ’ä»¶ï¼šVscode Office------------------ \u0026#34;vscode-office.editorTheme\u0026#34;: \u0026#34;Auto\u0026#34;, //ç¼–è¾‘å™¨ä¸»é¢˜ \u0026#34;vscode-office.openOutline\u0026#34;: false, //æ‰“å¼€å¤§çº² // // //------------------æ’ä»¶ï¼šgitlens------------------ \u0026#34;gitlens.currentLine.enabled\u0026#34;: false, //å…³é—­gitlenså½“å‰è¡Œä¿¡æ¯ \u0026#34;gitlens.blame.format\u0026#34;: \u0026#34;${author|7} ${agoOrDate|14-relative} ${message|50}\u0026#34;, //gitlens blameä¿¡æ¯æ ¼å¼ï¼šä½œè€… æ—¥æœŸ æ¶ˆæ¯ \u0026#34;gitlens.hovers.currentLine.over\u0026#34;: \u0026#34;line\u0026#34;, //gitlenså½“å‰è¡Œæ‚¬åœä¿¡æ¯æ˜¾ç¤ºåœ¨è¡Œä¸Š \u0026#34;gitlens.hovers.enabled\u0026#34;: true, //å¯ç”¨gitlensæ‚¬åœä¿¡æ¯ \u0026#34;gitlens.hovers.avatars\u0026#34;: false, //å…³é—­gitlenså¤´åƒ \u0026#34;gitlens.blame.compact\u0026#34;: false, //å…³é—­gitlensç´§å‡‘æ¨¡å¼ \u0026#34;gitlens.blame.separateLines\u0026#34;: true, //gitlens blameä¿¡æ¯åˆ†è¡Œæ˜¾ç¤º \u0026#34;gitlens.codeLens.authors.enabled\u0026#34;: false, //å…³é—­gitlensä»£ç é•œå¤´ä½œè€…ä¿¡æ¯ \u0026#34;gitlens.views.repositories.files.layout\u0026#34;: \u0026#34;tree\u0026#34;, //gitlensæ–‡ä»¶å¸ƒå±€ï¼šæ ‘å½¢ \u0026#34;gitlens.views.repositories.compact\u0026#34;: true, //gitlensä»“åº“è§†å›¾ç´§å‡‘æ¨¡å¼ \u0026#34;gitlens.defaultDateLocale\u0026#34;: \u0026#34;zh-CN\u0026#34;, //gitlensé»˜è®¤æ—¥æœŸè¯­è¨€ï¼šç®€ä½“ä¸­æ–‡ \u0026#34;gitlens.defaultDateFormat\u0026#34;: \u0026#34;YYYY-MM-DD HH:mm\u0026#34;, //gitlensé»˜è®¤æ—¥æœŸæ ¼å¼ \u0026#34;gitlens.defaultDateStyle\u0026#34;: \u0026#34;absolute\u0026#34;, //gitlensé»˜è®¤æ—¥æœŸæ ·å¼ \u0026#34;gitlens.advanced.messages\u0026#34;: { //gitlensé«˜çº§æ¶ˆæ¯ \u0026#34;suppressCommitHasNoPreviousCommitWarning\u0026#34;: true, //æŠ‘åˆ¶æäº¤æ²¡æœ‰ä¸Šä¸€ä¸ªæäº¤çš„è­¦å‘Š }, \u0026#34;gitlens.gitCommands.search.showResultsInSideBar\u0026#34;: true, //gitlensæœç´¢ç»“æœæ˜¾ç¤ºåœ¨ä¾§è¾¹æ  \u0026#34;gitlens.advanced.fileHistoryShowAllBranches\u0026#34;: true, //gitlensæ–‡ä»¶å†å²æ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯ } } åœ¨å¤åˆ¶ç²˜è´´å®Œä¸Šé¢å†…å®¹åï¼Œä¸»è¦éœ€è¦ä¿®æ”¹ä»¥ä¸‹è‡ªå®šä¹‰é…ç½®ï¼ˆä¸»è¦æ˜¯å­—ä½“å’Œæ’ä»¶ APIï¼‰ï¼š\neditor.codeLensFontFamilyï¼šCodeLensï¼ˆæç¤ºï¼‰å­—ä½“ editor.fontFamilyï¼šå­—ä½“ editor.fontSizeï¼šå­—å· terminal.integrated.fontSizeï¼šç»ˆç«¯å­—å· notebook.output.fontFamilyï¼šç¬”è®°æœ¬è¾“å‡ºåŒºåŸŸå­—ä½“ scm.inputFontSizeï¼šæºä»£ç ç®¡ç†å­—å· errorLens.fontSizeï¼šErrorLens æ’ä»¶å­—å· github.copilot.advancedå’Œgithub-enterprise.uriï¼šGitHub Copilot æ’ä»¶çš„å¤–éƒ¨ API è®¾ç½®ï¼ˆå¦‚æœæ˜¯å®˜æ–¹ copilotï¼Œå¯ä»¥ä¸è®¾ç½®ï¼‰ deeplxTranslate.authKeyï¼šdeeplx ç¿»è¯‘æ’ä»¶çš„ API å¯†é’¥ 2.3 vscode åŸºç¡€å¿«æ·é”®é…ç½® # æŒ‰å¿«æ·é”®Ctrl+Shift+Pï¼Œåœ¨è¾“å…¥æ¡†å†…è¾“å…¥keyboard jsonï¼Œé€‰ä¸­Preferences: Open Keyboard Shortcuts (JSON),æ­¤æ—¶ä¼šæœ‰ä¸€ä¸ªkeybindings.jsonæ–‡ä»¶è¢«æ‰“å¼€ï¼Œä¿®æ”¹å…¶å†…å®¹ä¸ºä¸‹é¢å†…å®¹\n[ { //ç»ˆç«¯å¤åˆ¶ \u0026#34;key\u0026#34;: \u0026#34;ctrl+c\u0026#34;, \u0026#34;command\u0026#34;: \u0026#34;workbench.action.terminal.copySelection\u0026#34;, \u0026#34;when\u0026#34;: \u0026#34;terminalTextSelectedInFocused || terminalFocus \u0026amp;\u0026amp; terminalHasBeenCreated \u0026amp;\u0026amp; terminalTextSelected || terminalFocus \u0026amp;\u0026amp; terminalProcessSupported \u0026amp;\u0026amp; terminalTextSelected || terminalFocus \u0026amp;\u0026amp; terminalTextSelected \u0026amp;\u0026amp; terminalTextSelectedInFocused || terminalHasBeenCreated \u0026amp;\u0026amp; terminalTextSelected \u0026amp;\u0026amp; terminalTextSelectedInFocused || terminalProcessSupported \u0026amp;\u0026amp; terminalTextSelected \u0026amp;\u0026amp; terminalTextSelectedInFocused\u0026#34; }, { //ç»ˆç«¯ç²˜è´´ \u0026#34;key\u0026#34;: \u0026#34;ctrl+v\u0026#34;, \u0026#34;command\u0026#34;: \u0026#34;workbench.action.terminal.paste\u0026#34;, \u0026#34;when\u0026#34;: \u0026#34;terminalFocus \u0026amp;\u0026amp; terminalHasBeenCreated || terminalFocus \u0026amp;\u0026amp; terminalProcessSupported\u0026#34; }, { //åˆ‡æ¢é…ç½®æ–‡ä»¶ \u0026#34;key\u0026#34;: \u0026#34;ctrl+shift+[\u0026#34;, \u0026#34;command\u0026#34;: \u0026#34;workbench.profiles.actions.switchProfile\u0026#34; }, { //æ˜¾ç¤ºè¿œç¨‹èœå• \u0026#34;key\u0026#34;: \u0026#34;ctrl+shift+]\u0026#34;, \u0026#34;command\u0026#34;: \u0026#34;workbench.action.remote.showMenu\u0026#34; } ] 3. vscode C++å¼€å‘é…ç½®å’Œæ’ä»¶ # å…ˆæŒ‰å¿«æ·é”®Ctrl+Shift+Pï¼Œåœ¨è¾“å…¥æ¡†å†…è¾“å…¥new profileï¼Œé€‰ä¸­Profiles: New Profileï¼Œæ­¤æ—¶ä¼šæœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶é¡µé¢æ‰“å¼€ï¼Œä¿®æ”¹æ–°å‡ºç°çš„é…ç½®æ–‡ä»¶åç§°ä¸ºC++ï¼›å›¾æ ‡é€‰ä¸€ä¸ªå–œæ¬¢çš„ï¼›å¤åˆ¶è‡ªä¸ºæ— ï¼›Contentsé‡Œé¢é”®ç›˜å¿«æ·æ–¹å¼é€‰æ‹©æºè‡ªé»˜è®¤ã€å…¶ä»–éƒ½é€‰æ‹©æºè‡ªæ— ï¼Œæœ€åç‚¹å‡»åˆ›å»ºã€‚\nå†æŒ‰å¿«æ·é”®Ctrl+Shift+[ï¼Œé€‰æ‹©C++ï¼ˆä¹‹å‰è®¾ç½®çš„é…ç½®æ–‡ä»¶åç§°ï¼‰ï¼Œæ­¤æ—¶vscodeä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°C++é…ç½®æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥çš„é…ç½®éƒ½æ˜¯åŸºäºC++é…ç½®æ–‡ä»¶çš„ã€‚\n3.1 vscode C++å¼€å‘æ’ä»¶ # å’Œä¹‹å‰ä¸€æ ·ï¼Œè¿›å…¥vscodeï¼Œç‚¹å‡»æ‰©å±•ï¼Œä¾æ¬¡è¾“å…¥ä¸‹åˆ—å†…å®¹å®‰è£…æ˜¾ç¤ºçš„ç¬¬ä¸€ä¸ªæ’ä»¶\nxaver.clang-formatï¼šä½¿ç”¨.clang-formatæ–‡ä»¶è¿›è¡Œä»£ç æ ¼å¼åŒ– llvm-vs-code-extensions.vscode-clangdï¼šclangd æ’ä»¶ vadimcn.vscode-lldbï¼šlldb è°ƒè¯•æ’ä»¶ ajshort.include-autocompleteï¼šå¤´æ–‡ä»¶è‡ªåŠ¨è¡¥å…¨ tboox.xmake-vscodeï¼šxmake æ„å»ºç³»ç»Ÿ alefragnani.project-managerï¼šé¡¹ç›®ç®¡ç†ï¼ˆæ³¨æ„ï¼šè¿™ä¸ªæ’ä»¶å¦‚æœå¤šä¸ªé…ç½®æ–‡ä»¶åŒæ—¶è£…ï¼Œä¼šæ˜¾ç¤ºå…¨éƒ¨é¡¹ç›®ï¼‰ è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ’ä»¶æç¤ºä½ éœ€è¦ä¸‹è½½å…¶ä»–å†…å®¹ï¼Œè¯·å…è®¸\n3.2 vscode C++å¼€å‘é…ç½® # å’Œä¹‹å‰ä¸€æ ·ï¼ŒæŒ‰å¿«æ·é”®Ctrl+Shift+Pï¼Œåœ¨è¾“å…¥æ¡†å†…è¾“å…¥user jsonï¼Œé€‰ä¸­Preferences: Open Settings (JSON),æ­¤æ—¶ä¼šæœ‰ä¸€ä¸ªæ–°çš„settings.jsonæ–‡ä»¶è¢«æ‰“å¼€ï¼Œä¿®æ”¹å…¶å†…å®¹ä¸ºä¸‹é¢å†…å®¹\n{ //----------------xmakeè®¾ç½®----------------- \u0026#34;xmake.debugConfigType\u0026#34;: \u0026#34;codelldb\u0026#34;, //ä½¿ç”¨codelldbæ’ä»¶è°ƒè¯• \u0026#34;xmake.runMode\u0026#34;: \u0026#34;buildRun\u0026#34;, //è¿è¡Œå‰è‡ªåŠ¨æ„å»º \u0026#34;xmake.buildLevel\u0026#34;: \u0026#34;verbose\u0026#34;, //è®¾ç½®ç¼–è¯‘æ—¶è¾“å‡ºä¿¡æ¯çº§åˆ«,ä»…è¾“å‡ºç¼–è¯‘è­¦å‘Šä¿¡æ¯ä»¥åŠæ­£å¸¸ä¿¡æ¯ \u0026#34;xmake.customDebugConfig\u0026#34;: { \u0026#34;console\u0026#34;: \u0026#34;integratedTerminal\u0026#34; // xmakeè°ƒè¯•æ—¶ä½¿ç”¨é›†æˆç»ˆç«¯ }, // // //-----------------clangdè®¾ç½®----------------- \u0026#34;clangd.path\u0026#34;: \u0026#34;/usr/bin/clangd\u0026#34;, //æŒ‡å®š clangd çš„è·¯å¾„ \u0026#34;clangd.arguments\u0026#34;: [ // compile_commands.json ç”Ÿæˆæ–‡ä»¶å¤¹ \u0026#34;--compile-commands-dir=${workspaceFolder}/.vscode\u0026#34;, // è®© Clangd ç”Ÿæˆæ›´è¯¦ç»†çš„æ—¥å¿— \u0026#34;--log=verbose\u0026#34;, // è¾“å‡ºçš„ JSON æ–‡ä»¶æ›´ç¾è§‚ \u0026#34;--pretty\u0026#34;, // å…¨å±€è¡¥å…¨ \u0026#34;--all-scopes-completion\u0026#34;, // æ›´è¯¦ç»†çš„è¡¥å…¨å†…å®¹ \u0026#34;--completion-style=detailed\u0026#34;, // å»ºè®®é£æ ¼ï¼šæ‰“åŒ…(é‡è½½å‡½æ•°åªä¼šç»™å‡ºä¸€ä¸ªå»ºè®®ï¼‰ // ç›¸åå¯ä»¥è®¾ç½®ä¸ºdetailed \u0026#34;--completion-style=bundled\u0026#34;, // è·¨æ–‡ä»¶é‡å‘½åå˜é‡ \u0026#34;--cross-file-rename\u0026#34;, // å…è®¸è¡¥å……å¤´æ–‡ä»¶ \u0026#34;--header-insertion=iwyu\u0026#34;, // è¾“å…¥å»ºè®®ä¸­ï¼Œå·²åŒ…å«å¤´æ–‡ä»¶çš„é¡¹ä¸è¿˜æœªåŒ…å«å¤´æ–‡ä»¶çš„é¡¹ä¼šä»¥åœ†ç‚¹åŠ ä»¥åŒºåˆ† \u0026#34;--header-insertion-decorators\u0026#34;, // åœ¨åå°è‡ªåŠ¨åˆ†ææ–‡ä»¶ // åŸºäº complie_commands.jsonï¼Œç”Ÿæˆå‘½ä»¤ // xmake project -k compile_commands \u0026#34;--background-index\u0026#34;, // å¯ç”¨ Clang-Tidy ä»¥æä¾›ã€Œé™æ€æ£€æŸ¥ã€ \u0026#34;--clang-tidy\u0026#34;, \u0026#34;--clang-tidy-checks=cppcoreguidelines-*, performance-*, bugprone-*, misc-*, google-*, modernize-*, readability-*, portability-*\u0026#34;, // é»˜è®¤æ ¼å¼åŒ–é£æ ¼: è°·æ­Œå¼€æºé¡¹ç›®ä»£ç æŒ‡å— // C++æ–‡ä»¶å¤¹ä¸‹.clang-formatä½œä¸ºå…¨éƒ¨å­æ–‡ä»¶å¤¹çš„é»˜è®¤ \u0026#34;--fallback-style=file\u0026#34;, // åŒæ—¶å¼€å¯çš„ä»»åŠ¡æ•°é‡ \u0026#34;-j=16\u0026#34;, // pchä¼˜åŒ–çš„ä½ç½®(memory æˆ– diskï¼Œé€‰æ‹©memoryä¼šå¢åŠ å†…å­˜å¼€é”€ï¼Œä½†ä¼šæå‡æ€§èƒ½) æ¨èåœ¨æ¿å­ä¸Šä½¿ç”¨disk \u0026#34;--pch-storage=memory\u0026#34;, // å¯ç”¨è¿™é¡¹æ—¶ï¼Œè¡¥å…¨å‡½æ•°æ—¶ï¼Œå°†ä¼šç»™å‚æ•°æä¾›å ä½ç¬¦ï¼Œé”®å…¥åæŒ‰ Tab å¯ä»¥åˆ‡æ¢åˆ°ä¸‹ä¸€å ä½ç¬¦ï¼Œä¹ƒè‡³å‡½æ•°æœ«ã€‚æˆ‘é€‰æ‹©ç¦ç”¨ \u0026#34;--function-arg-placeholders=false\u0026#34;, \u0026#34;--query-driver=/usr/bin/g++*\u0026#34;, //è®¾å®š clang ç¼–è¯‘å™¨çš„è·¯å¾„ã€‚clangdå¯åŠ¨æ—¶éœ€è¦é€šè¿‡å‚æ•°æŒ‡å®šä»é‚£ä¸ªç›®å½•æœç´¢æ ‡å‡†åº“å¤´æ–‡ä»¶ \u0026#34;--completion-parse=auto\u0026#34;, //å½“ clangd å‡†å¤‡å°±ç»ªæ—¶ï¼Œç”¨å®ƒæ¥åˆ†æå»ºè®® \u0026#34;--enable-config\u0026#34;, \u0026#34;--function-arg-placeholders=true\u0026#34;, // è¡¥å…¨å‡½æ•°æ—¶ï¼Œå°†ä¼šç»™å‚æ•°æä¾›å ä½ç¬¦ï¼Œé”®å…¥åæŒ‰ Tab å¯ä»¥åˆ‡æ¢åˆ°ä¸‹ä¸€å ä½ç¬¦ï¼Œä¹ƒè‡³å‡½æ•°æœ« \u0026#34;--ranking-model=decision_forest\u0026#34; //å»ºè®®çš„æ’åºæ–¹æ¡ˆï¼šhueristics (å¯å‘å¼), decision_forest (å†³ç­–æ ‘) ], \u0026#34;clangd.checkUpdates\u0026#34;: true, \u0026#34;clangd.onConfigChanged\u0026#34;: \u0026#34;restart\u0026#34;, // é‡å¯ clangd æ—¶é‡è½½é…ç½®,å…·ä½“æ–¹æ³•: F1 + Fn æ‰“å¼€å‘½ä»¤é¢æ¿ï¼Œç„¶åæœç´¢â€œclangd: restart\u0026#34; // \u0026#34;clangd.serverCompletionRanking\u0026#34;: true, // å€ŸåŠ©ç½‘ä¸Šçš„ä¿¡æ¯æ’åºå»ºè®® \u0026#34;clangd.detectExtensionConflicts\u0026#34;: true, // å½“å…¶å®ƒæ‹“å±•ä¸ clangd å†²çªæ—¶è­¦å‘Šå¹¶å»ºè®®ç¦ç”¨ \u0026#34;clangd.fallbackFlags\u0026#34;: [ \u0026#34;-pedantic\u0026#34;, //å¯ç”¨æ‰€æœ‰è­¦å‘Š \u0026#34;-Wall\u0026#34;, //å¯ç”¨æ‰€æœ‰è­¦å‘Š \u0026#34;-Wextra\u0026#34;, //å¯ç”¨é¢å¤–è­¦å‘Š \u0026#34;-Wcast-align\u0026#34;, //å¼ºåˆ¶è½¬æ¢æ—¶æ£€æŸ¥å¯¹é½ \u0026#34;-Wdouble-promotion\u0026#34;, //å¼ºåˆ¶è½¬æ¢æ—¶æ£€æŸ¥ double ç±»å‹æå‡ \u0026#34;-Wformat=2\u0026#34;, //æ£€æŸ¥ printf å’Œ scanf å‡½æ•°çš„å‚æ•° \u0026#34;-Wimplicit-fallthrough\u0026#34;, //æ£€æŸ¥ switch è¯­å¥ä¸­çš„éšå¼ fallthrough \u0026#34;-Wmisleading-indentation\u0026#34;, //æ£€æŸ¥ç¼©è¿›æ˜¯å¦è¯¯å¯¼ \u0026#34;-Wnon-virtual-dtor\u0026#34;, //æ£€æŸ¥åŸºç±»ææ„å‡½æ•°æ˜¯å¦ä¸ºè™šå‡½æ•° \u0026#34;-Wnull-dereference\u0026#34;, //æ£€æŸ¥ç©ºæŒ‡é’ˆè§£å¼•ç”¨ \u0026#34;-Wold-style-cast\u0026#34;, //æ£€æŸ¥ C é£æ ¼çš„å¼ºåˆ¶è½¬æ¢ \u0026#34;-Woverloaded-virtual\u0026#34;, //æ£€æŸ¥è™šå‡½æ•°é‡è½½ \u0026#34;-Wpedantic\u0026#34;, //å¯ç”¨æ‰€æœ‰è­¦å‘Š \u0026#34;-Wshadow\u0026#34;, //æ£€æŸ¥å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡åŒå \u0026#34;-Wunused\u0026#34;, //æ£€æŸ¥æœªä½¿ç”¨çš„å˜é‡ \u0026#34;-pthread\u0026#34;, //å¯ç”¨å¤šçº¿ç¨‹æ”¯æŒ \u0026#34;-fuse-ld=lld\u0026#34;, //ä½¿ç”¨ lld ä½œä¸ºé“¾æ¥å™¨ \u0026#34;-fsanitize=address\u0026#34;, //å¯ç”¨åœ°å€æ£€æŸ¥ \u0026#34;-fsanitize=undefined\u0026#34;, //å¯ç”¨æœªå®šä¹‰è¡Œä¸ºæ£€æŸ¥ \u0026#34;-stdlib=libc++\u0026#34;, //ä½¿ç”¨ libc++ æ ‡å‡†åº“ \u0026#34;-std=c++20\u0026#34; //ä½¿ç”¨ C++20 æ ‡å‡† ], // // //-----------------æ ¼å¼åŒ–è®¾ç½®----------------- \u0026#34;clang-format.executable\u0026#34;: \u0026#34;/usr/bin/clang-format\u0026#34;, //æŒ‡å®š clang-format çš„è·¯å¾„ \u0026#34;[cpp]\u0026#34;: { \u0026#34;editor.defaultFormatter\u0026#34;: \u0026#34;xaver.clang-format\u0026#34; //è®¾ç½®é»˜è®¤æ ¼å¼åŒ–å™¨ }, \u0026#34;[c]\u0026#34;: { \u0026#34;editor.defaultFormatter\u0026#34;: \u0026#34;xaver.clang-format\u0026#34; //è®¾ç½®é»˜è®¤æ ¼å¼åŒ–å™¨ }, \u0026#34;files.associations\u0026#34;: { //æ–‡ä»¶å…³è” \u0026#34;*.cpp\u0026#34;: \u0026#34;cpp\u0026#34;, \u0026#34;*.hpp\u0026#34;: \u0026#34;cpp\u0026#34;, \u0026#34;*.h\u0026#34;: \u0026#34;cpp\u0026#34; }, // // //-----------------lldbè®¾ç½®----------------- \u0026#34;lldb.commandCompletions\u0026#34;: true, // LLDB æŒ‡ä»¤è‡ªåŠ¨è¡¥å…¨ \u0026#34;lldb.dereferencePointers\u0026#34;: true, // LLDB æŒ‡é’ˆæ˜¾ç¤ºè§£å¼•ç”¨å†…å®¹ \u0026#34;lldb.evaluateForHovers\u0026#34;: true, // LLDB é¼ æ ‡æ‚¬åœåœ¨å˜é‡ä¸Šæ—¶é¢„è§ˆå˜é‡å€¼ \u0026#34;lldb.launch.expressions\u0026#34;: \u0026#34;native\u0026#34;, // LLDB ç›‘è§†è¡¨è¾¾å¼çš„é»˜è®¤ç±»å‹ \u0026#34;lldb.showDisassembly\u0026#34;: \u0026#34;never\u0026#34;, // LLDB ä¸æ˜¾ç¤ºæ±‡ç¼–ä»£ç  \u0026#34;lldb.verboseLogging\u0026#34;: true // LLDB è¾“å‡ºè¯¦ç»†æ—¥å¿— } åœ¨å¤åˆ¶ç²˜è´´å®Œä¸Šé¢å†…å®¹åï¼Œå¯èƒ½éœ€è¦ä¿®æ”¹ä»¥ä¸‹è‡ªå®šä¹‰é…ç½®ï¼š\nclangd.pathï¼šæŒ‡å®šclangdçš„è·¯å¾„ï¼Œæ ¹æ®è‡ªå·±çš„clangdå®‰è£…è·¯å¾„è¿›è¡Œä¿®æ”¹ clang-format.executableï¼šæŒ‡å®šclang-formatçš„è·¯å¾„ï¼Œæ ¹æ®è‡ªå·±çš„clang-formatå®‰è£…è·¯å¾„è¿›è¡Œä¿®æ”¹ clangd.argumentså†…çš„-j=16ï¼šè®¾ç½®åŒæ—¶å¼€å¯çš„ä»»åŠ¡æ•°é‡ï¼Œæ ¹æ®è‡ªå·±çš„ç”µè„‘æ€§èƒ½è¿›è¡Œä¿®æ”¹ï¼ˆå¯åœ¨ç»ˆç«¯è¾“å…¥nprocæŸ¥çœ‹æœ€é«˜å€¼ï¼‰ clangd.fallbackFlagså†…çš„-std=c++20ï¼šè®¾ç½®ä½¿ç”¨çš„ C++æ ‡å‡† 4. é¢å¤–é…ç½® # æ¥ä¸‹æ¥ä¸¤ä¸ªæ–‡ä»¶å¯ä»¥æ”¾åœ¨æ‰€æœ‰åœ¨é¡¹ç›®æ–‡ä»¶å¤¹åŒçº§ç›®å½•ä¸‹ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æ‰€æœ‰é¡¹ç›®ä¸­ä½¿ç”¨è¿™ä¸¤ä¸ªæ–‡ä»¶äº†ã€‚\nç¤ºä¾‹æ–‡ä»¶æ ‘ï¼š\n/home/user/Code/C++ â”œâ”€â”€ .clang-format â”œâ”€â”€ .clangd â”œâ”€â”€ project1 â”œâ”€â”€ project2 .clang-formatï¼šå…·ä½“é…ç½®å¯ä»¥å‚è€ƒhttps://clang.llvm.org/docs/ClangFormatStyleOptions.html\n# è¯­è¨€: None, Cpp, Java, JavaScript, ObjC, Proto, TableGen, TextProto Language: Cpp # BasedOnStyle: LLVM # è®¿é—®è¯´æ˜ç¬¦(publicã€privateç­‰)çš„åç§» AccessModifierOffset: -4 # å¼€æ‹¬å·(å¼€åœ†æ‹¬å·ã€å¼€å°–æ‹¬å·ã€å¼€æ–¹æ‹¬å·)åçš„å¯¹é½: Align, DontAlign, AlwaysBreak(æ€»æ˜¯åœ¨å¼€æ‹¬å·åæ¢è¡Œ) AlignAfterOpenBracket: Align # è¿ç»­èµ‹å€¼æ—¶ï¼Œå¯¹é½æ‰€æœ‰ç­‰å· AlignConsecutiveAssignments: true # è¿ç»­å£°æ˜æ—¶ï¼Œå¯¹é½æ‰€æœ‰å£°æ˜çš„å˜é‡å AlignConsecutiveDeclarations: true # å·¦å¯¹é½é€ƒè„±æ¢è¡Œ(ä½¿ç”¨åæ–œæ æ¢è¡Œ)çš„åæ–œæ  AlignEscapedNewlinesLeft: true # æ°´å¹³å¯¹é½äºŒå…ƒå’Œä¸‰å…ƒè¡¨è¾¾å¼çš„æ“ä½œæ•° AlignOperands: true # å¯¹é½è¿ç»­çš„å°¾éšçš„æ³¨é‡Š AlignTrailingComments: true # å…è®¸å‡½æ•°å£°æ˜çš„æ‰€æœ‰å‚æ•°åœ¨æ”¾åœ¨ä¸‹ä¸€è¡Œ AllowAllParametersOfDeclarationOnNextLine: true # å…è®¸çŸ­çš„å—æ”¾åœ¨åŒä¸€è¡Œ AllowShortBlocksOnASingleLine: false # å…è®¸çŸ­çš„caseæ ‡ç­¾æ”¾åœ¨åŒä¸€è¡Œ AllowShortCaseLabelsOnASingleLine: false # å…è®¸çŸ­çš„å‡½æ•°æ”¾åœ¨åŒä¸€è¡Œ: None, InlineOnly(å®šä¹‰åœ¨ç±»ä¸­), Empty(ç©ºå‡½æ•°), Inline(å®šä¹‰åœ¨ç±»ä¸­ï¼Œç©ºå‡½æ•°), All AllowShortFunctionsOnASingleLine: Empty # å…è®¸çŸ­çš„ifè¯­å¥ä¿æŒåœ¨åŒä¸€è¡Œ AllowShortIfStatementsOnASingleLine: false # å…è®¸çŸ­çš„å¾ªç¯ä¿æŒåœ¨åŒä¸€è¡Œ AllowShortLoopsOnASingleLine: false # æ€»æ˜¯åœ¨å®šä¹‰è¿”å›ç±»å‹åæ¢è¡Œ(deprecated) AlwaysBreakAfterDefinitionReturnType: None # æ€»æ˜¯åœ¨è¿”å›ç±»å‹åæ¢è¡Œ: None, All, TopLevel(é¡¶çº§å‡½æ•°ï¼Œä¸åŒ…æ‹¬åœ¨ç±»ä¸­çš„å‡½æ•°), # AllDefinitions(æ‰€æœ‰çš„å®šä¹‰ï¼Œä¸åŒ…æ‹¬å£°æ˜), TopLevelDefinitions(æ‰€æœ‰çš„é¡¶çº§å‡½æ•°çš„å®šä¹‰) AlwaysBreakAfterReturnType: None # æ€»æ˜¯åœ¨å¤šè¡Œstringå­—é¢é‡å‰æ¢è¡Œ AlwaysBreakBeforeMultilineStrings: false # æ€»æ˜¯åœ¨templateå£°æ˜åæ¢è¡Œ AlwaysBreakTemplateDeclarations: false # falseè¡¨ç¤ºå‡½æ•°å®å‚è¦ä¹ˆéƒ½åœ¨åŒä¸€è¡Œï¼Œè¦ä¹ˆéƒ½å„è‡ªä¸€è¡Œ BinPackArguments: true # falseè¡¨ç¤ºæ‰€æœ‰å½¢å‚è¦ä¹ˆéƒ½åœ¨åŒä¸€è¡Œï¼Œè¦ä¹ˆéƒ½å„è‡ªä¸€è¡Œ BinPackParameters: true # å¤§æ‹¬å·æ¢è¡Œï¼Œåªæœ‰å½“BreakBeforeBracesè®¾ç½®ä¸ºCustomæ—¶æ‰æœ‰æ•ˆ BraceWrapping: # classå®šä¹‰åé¢ AfterClass: false # æ§åˆ¶è¯­å¥åé¢ AfterControlStatement: false # enumå®šä¹‰åé¢ AfterEnum: false # å‡½æ•°å®šä¹‰åé¢ AfterFunction: false # å‘½åç©ºé—´å®šä¹‰åé¢ AfterNamespace: false # ObjCå®šä¹‰åé¢ AfterObjCDeclaration: false # structå®šä¹‰åé¢ AfterStruct: false # unionå®šä¹‰åé¢ AfterUnion: false # catchä¹‹å‰ BeforeCatch: true # elseä¹‹å‰ BeforeElse: true # ç¼©è¿›å¤§æ‹¬å· IndentBraces: false # åœ¨äºŒå…ƒè¿ç®—ç¬¦å‰æ¢è¡Œ: None(åœ¨æ“ä½œç¬¦åæ¢è¡Œ), NonAssignment(åœ¨éèµ‹å€¼çš„æ“ä½œç¬¦å‰æ¢è¡Œ), All(åœ¨æ“ä½œç¬¦å‰æ¢è¡Œ) BreakBeforeBinaryOperators: NonAssignment # åœ¨å¤§æ‹¬å·å‰æ¢è¡Œ: Attach(å§‹ç»ˆå°†å¤§æ‹¬å·é™„åŠ åˆ°å‘¨å›´çš„ä¸Šä¸‹æ–‡), Linux(é™¤å‡½æ•°ã€å‘½åç©ºé—´å’Œç±»å®šä¹‰ï¼Œä¸Attachç±»ä¼¼), # Mozilla(é™¤æšä¸¾ã€å‡½æ•°ã€è®°å½•å®šä¹‰ï¼Œä¸Attachç±»ä¼¼), Stroustrup(é™¤å‡½æ•°å®šä¹‰ã€catchã€elseï¼Œä¸Attachç±»ä¼¼), # Allman(æ€»æ˜¯åœ¨å¤§æ‹¬å·å‰æ¢è¡Œ), GNU(æ€»æ˜¯åœ¨å¤§æ‹¬å·å‰æ¢è¡Œï¼Œ # å¹¶å¯¹äºæ§åˆ¶è¯­å¥çš„å¤§æ‹¬å·å¢åŠ é¢å¤–çš„ç¼©è¿›), WebKit(åœ¨å‡½æ•°å‰æ¢è¡Œ), Custom # æ³¨ï¼šè¿™é‡Œè®¤ä¸ºè¯­å¥å—ä¹Ÿå±äºå‡½æ•° BreakBeforeBraces: Allman # åœ¨ä¸‰å…ƒè¿ç®—ç¬¦å‰æ¢è¡Œ BreakBeforeTernaryOperators: true # åœ¨æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨çš„é€—å·å‰æ¢è¡Œ BreakConstructorInitializersBeforeComma: false # æ¯è¡Œå­—ç¬¦çš„é™åˆ¶ï¼Œ0è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ ColumnLimit: 200 # æè¿°å…·æœ‰ç‰¹æ®Šæ„ä¹‰çš„æ³¨é‡Šçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå®ƒä¸åº”è¯¥è¢«åˆ†å‰²ä¸ºå¤šè¡Œæˆ–ä»¥å…¶å®ƒæ–¹å¼æ”¹å˜ CommentPragmas: \u0026#39;^ IWYU pragma:\u0026#39; # æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨è¦ä¹ˆéƒ½åœ¨åŒä¸€è¡Œï¼Œè¦ä¹ˆéƒ½å„è‡ªä¸€è¡Œ ConstructorInitializerAllOnOneLineOrOnePerLine: false # æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨çš„ç¼©è¿›å®½åº¦ ConstructorInitializerIndentWidth: 4 # å»¶ç»­çš„è¡Œçš„ç¼©è¿›å®½åº¦ ContinuationIndentWidth: 4 # å»é™¤C++11çš„åˆ—è¡¨åˆå§‹åŒ–çš„å¤§æ‹¬å·{åå’Œ}å‰çš„ç©ºæ ¼ Cpp11BracedListStyle: false # ç»§æ‰¿æœ€å¸¸ç”¨çš„æŒ‡é’ˆå’Œå¼•ç”¨çš„å¯¹é½æ–¹å¼ DerivePointerAlignment: false # å…³é—­æ ¼å¼åŒ– DisableFormat: false # è‡ªåŠ¨æ£€æµ‹å‡½æ•°çš„è°ƒç”¨å’Œå®šä¹‰æ˜¯å¦è¢«æ ¼å¼ä¸ºæ¯è¡Œä¸€ä¸ªå‚æ•°(Experimental) ExperimentalAutoDetectBinPacking: false # éœ€è¦è¢«è§£è¯»ä¸ºforeachå¾ªç¯è€Œä¸æ˜¯å‡½æ•°è°ƒç”¨çš„å® ForEachMacros: [ foreach, Q_FOREACH, BOOST_FOREACH ] # å¯¹#includeè¿›è¡Œæ’åºï¼ŒåŒ¹é…äº†æŸæ­£åˆ™è¡¨è¾¾å¼çš„#includeæ‹¥æœ‰å¯¹åº”çš„ä¼˜å…ˆçº§ï¼Œ # åŒ¹é…ä¸åˆ°çš„åˆ™é»˜è®¤ä¼˜å…ˆçº§ä¸ºINT_MAX(ä¼˜å…ˆçº§è¶Šå°æ’åºè¶Šé å‰)ï¼Œ # å¯ä»¥å®šä¹‰è´Ÿæ•°ä¼˜å…ˆçº§ä»è€Œä¿è¯æŸäº›#includeæ°¸è¿œåœ¨æœ€å‰é¢ IncludeCategories: - Regex: \u0026#39;^\u0026#34;(llvm|llvm-c|clang|clang-c)/\u0026#39; Priority: 2 - Regex: \u0026#39;^(\u0026lt;|\u0026#34;(gtest|isl|json)/)\u0026#39; Priority: 3 - Regex: \u0026#39;.*\u0026#39; Priority: 1 # ç¼©è¿›caseæ ‡ç­¾ IndentCaseLabels: false # ç¼©è¿›å®½åº¦ IndentWidth: 4 # å‡½æ•°è¿”å›ç±»å‹æ¢è¡Œæ—¶ï¼Œç¼©è¿›å‡½æ•°å£°æ˜æˆ–å‡½æ•°å®šä¹‰çš„å‡½æ•°å IndentWrappedFunctionNames: false # ä¿ç•™åœ¨å—å¼€å§‹å¤„çš„ç©ºè¡Œ KeepEmptyLinesAtTheStartOfBlocks: true # å¼€å§‹ä¸€ä¸ªå—çš„å®çš„æ­£åˆ™è¡¨è¾¾å¼ MacroBlockBegin: \u0026#39;\u0026#39; # ç»“æŸä¸€ä¸ªå—çš„å®çš„æ­£åˆ™è¡¨è¾¾å¼ MacroBlockEnd: \u0026#39;\u0026#39; # è¿ç»­ç©ºè¡Œçš„æœ€å¤§æ•°é‡ MaxEmptyLinesToKeep: 1 # å‘½åç©ºé—´çš„ç¼©è¿›: None, Inner(ç¼©è¿›åµŒå¥—çš„å‘½åç©ºé—´ä¸­çš„å†…å®¹), All NamespaceIndentation: Inner # ä½¿ç”¨ObjCå—æ—¶ç¼©è¿›å®½åº¦ ObjCBlockIndentWidth: 4 # åœ¨ObjCçš„@propertyåæ·»åŠ ä¸€ä¸ªç©ºæ ¼ ObjCSpaceAfterProperty: false # åœ¨ObjCçš„protocolåˆ—è¡¨å‰æ·»åŠ ä¸€ä¸ªç©ºæ ¼ ObjCSpaceBeforeProtocolList: true # åœ¨call(åå¯¹å‡½æ•°è°ƒç”¨æ¢è¡Œçš„penalty PenaltyBreakBeforeFirstCallParameter: 19 # åœ¨ä¸€ä¸ªæ³¨é‡Šä¸­å¼•å…¥æ¢è¡Œçš„penalty PenaltyBreakComment: 300 # ç¬¬ä¸€æ¬¡åœ¨\u0026lt;\u0026lt;å‰æ¢è¡Œçš„penalty PenaltyBreakFirstLessLess: 120 # åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢é‡ä¸­å¼•å…¥æ¢è¡Œçš„penalty PenaltyBreakString: 1000 # å¯¹äºæ¯ä¸ªåœ¨è¡Œå­—ç¬¦æ•°é™åˆ¶ä¹‹å¤–çš„å­—ç¬¦çš„penalty PenaltyExcessCharacter: 1000000 # å°†å‡½æ•°çš„è¿”å›ç±»å‹æ”¾åˆ°å®ƒè‡ªå·±çš„è¡Œçš„penalty PenaltyReturnTypeOnItsOwnLine: 60 # æŒ‡é’ˆå’Œå¼•ç”¨çš„å¯¹é½: Left, Right, Middle PointerAlignment: Left # å…è®¸é‡æ–°æ’ç‰ˆæ³¨é‡Š ReflowComments: true # å…è®¸æ’åº#include SortIncludes: true # åœ¨Cé£æ ¼ç±»å‹è½¬æ¢åæ·»åŠ ç©ºæ ¼ SpaceAfterCStyleCast: false # åœ¨èµ‹å€¼è¿ç®—ç¬¦ä¹‹å‰æ·»åŠ ç©ºæ ¼ SpaceBeforeAssignmentOperators: true # å¼€åœ†æ‹¬å·ä¹‹å‰æ·»åŠ ä¸€ä¸ªç©ºæ ¼: Never, ControlStatements, Always SpaceBeforeParens: ControlStatements # åœ¨ç©ºçš„åœ†æ‹¬å·ä¸­æ·»åŠ ç©ºæ ¼ SpaceInEmptyParentheses: false # åœ¨å°¾éšçš„è¯„è®ºå‰æ·»åŠ çš„ç©ºæ ¼æ•°(åªé€‚ç”¨äº//) SpacesBeforeTrailingComments: 2 # åœ¨å°–æ‹¬å·çš„\u0026lt;åå’Œ\u0026gt;å‰æ·»åŠ ç©ºæ ¼ SpacesInAngles: false # åœ¨å®¹å™¨(ObjCå’ŒJavaScriptçš„æ•°ç»„å’Œå­—å…¸ç­‰)å­—é¢é‡ä¸­æ·»åŠ ç©ºæ ¼ SpacesInContainerLiterals: true # åœ¨Cé£æ ¼ç±»å‹è½¬æ¢çš„æ‹¬å·ä¸­æ·»åŠ ç©ºæ ¼ SpacesInCStyleCastParentheses: true # åœ¨åœ†æ‹¬å·çš„(åå’Œ)å‰æ·»åŠ ç©ºæ ¼ SpacesInParentheses: false # åœ¨æ–¹æ‹¬å·çš„[åå’Œ]å‰æ·»åŠ ç©ºæ ¼ï¼Œlamdaè¡¨è¾¾å¼å’ŒæœªæŒ‡æ˜å¤§å°çš„æ•°ç»„çš„å£°æ˜ä¸å—å½±å“ SpacesInSquareBrackets: false # æ ‡å‡†: Cpp03, Cpp11, Auto Standard: Cpp11 # tabå®½åº¦ TabWidth: 4 # ä½¿ç”¨tabå­—ç¬¦: Never, ForIndentation, ForContinuationAndIndentation, Always UseTab: Never .clangdï¼šå…·ä½“é…ç½®å¯ä»¥å‚è€ƒhttps://clang.llvm.org/extra/clang-tidy/\nIndex: Background: Build Diagnostics: ClangTidy: Add: [\u0026#39;*\u0026#39;] Remove: [ abseil*, fuchsia*, llvmlib*, zircon*, altera*, google-readability-todo, readability-braces-around-statements, hicpp-braces-around-statements, hicpp-signed-bitwise, modernize-use-trailing-return-type, readability-identifier-length, cppcoreguidelines-avoid-magic-numbers, readability-magic-numbers, bugprone-easily-swappable-parameters ] 5. é¡¹ç›®ä½¿ç”¨æµ‹è¯• # è¿™é‡Œç›´æ¥ç»™å‡ºæµ‹è¯•æ–‡ä»¶ï¼ˆC++çš„åŸºç¡€ä¸Šæµ‹è¯• opencv åº“ã€fmt åº“ã€eigen åº“ä½¿ç”¨ï¼Œå¦‚æœä¸éœ€è¦ï¼Œè¯·æ‰‹åŠ¨å»é™¤å¯¹åº”éƒ¨åˆ†ï¼‰\nå…ˆæ–°å»ºé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ï¼Œä¾æ¬¡ä¿å­˜ä¸‹é¢æ–‡ä»¶ï¼š\nxmake.lua\nadd_rules(\u0026#34;mode.debug\u0026#34;, \u0026#34;mode.release\u0026#34;) set_toolchains(\u0026#34;clang\u0026#34;) set_languages(\u0026#34;c99\u0026#34;, \u0026#34;c++20\u0026#34;) add_rules(\u0026#34;plugin.compile_commands.autoupdate\u0026#34;, {outputdir = \u0026#34;.vscode\u0026#34;}) add_requires(\u0026#34;opencv\u0026#34;, {system = false ,configs = {shared = true, gtk = true}}) add_requires(\u0026#34;fmt\u0026#34;) add_requires(\u0026#34;eigen\u0026#34;) target(\u0026#34;template\u0026#34;) set_kind(\u0026#34;binary\u0026#34;) add_files(\u0026#34;src/*.cpp\u0026#34;) add_packages(\u0026#34;opencv\u0026#34;) add_packages(\u0026#34;fmt\u0026#34;) add_packages(\u0026#34;eigen\u0026#34;) srcæ–‡ä»¶å¤¹å†…main.cpp\n#include \u0026lt;Eigen/Dense\u0026gt; #include \u0026lt;fmt/format.h\u0026gt; #include \u0026lt;opencv2/opencv.hpp\u0026gt; int main() { std::cout \u0026lt;\u0026lt; \u0026#34;[æˆåŠŸ]ï¼šstdåº“æµ‹è¯•ï¼šhello world!\u0026#34; \u0026lt;\u0026lt; std::endl; Eigen::MatrixXd matrix1(2, 2); matrix1(0, 0) = 1; matrix1(0, 1) = 2; matrix1(1, 0) = 3; matrix1(1, 1) = 4; std::cout \u0026lt;\u0026lt; \u0026#34;[æˆåŠŸ]ï¼šEigenåº“çŸ©é˜µæµ‹è¯•ï¼šmatrix1 = \u0026#34; \u0026lt;\u0026lt; std::endl \u0026lt;\u0026lt; matrix1 \u0026lt;\u0026lt; std::endl; fmt::print(\u0026#34;[{}]ï¼šfmtåº“æµ‹è¯•ï¼šè¾“å‡º\\n\u0026#34;, \u0026#34;æˆåŠŸ\u0026#34;); cv::Mat image = cv::imread(\u0026#34;../../../../data/1.jpg\u0026#34;); cv::imshow(\u0026#34;[æˆåŠŸ]ï¼šOpenCVåº“æµ‹è¯•ï¼šæ˜¾ç¤º\u0026#34;, image); fmt::print(\u0026#34;æŒ‰ä»»æ„é”®é€€å‡º..\\n\u0026#34;); cv::waitKey(0); return 0; } ç„¶ååœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹æ–°å»ºdataæ–‡ä»¶å¤¹ï¼Œæ”¾å…¥ä¸€å¼ åä¸º1.jpgçš„å›¾ç‰‡\n5.1 ç¼–è¯‘ # åœ¨vscodeä¸‹æ–¹çŠ¶æ€æ çš„XMakeï¼ˆæ‰©å±•ï¼‰ä¸­å°†Set build modeè®¾ç½®ä¸ºdebugï¼›change the toolchainè®¾ç½®ä¸ºclang\nç„¶åçœ‹åˆ°Build the given targetï¼Œç‚¹å‡»ç¼–è¯‘\nç¬¬ä¸€æ¬¡ç¼–è¯‘xmakeéœ€è¦å®‰è£…å¤–éƒ¨åº“ï¼Œä¸€è·¯é€‰yå°±å¯ä»¥ã€‚\n5.2 è¿è¡Œ # åœ¨ç¼–è¯‘å®Œæˆåï¼Œç‚¹å‡»Run the given targetï¼Œå³å¯è¿è¡Œ\n5.3 è°ƒè¯• # åœ¨ç¼–è¯‘å®Œæˆåï¼Œç‚¹å‡»Debug the given targetï¼Œå³å¯è°ƒè¯•\nå¯ä»¥æ‰“å‡ ä¸ªæ–­ç‚¹ï¼Œç„¶åè°ƒè¯•\nå‚è€ƒèµ„æ–™ # ç‚¹å‡»å±•å¼€æŸ¥çœ‹å‚è€ƒèµ„æ–™ https://www.cnblogs.com/guoxuanhan/p/17864923.html ","date":"2024å¹´11æœˆ12æ—¥","externalUrl":null,"permalink":"/posts/linux%E5%B9%B3%E5%8F%B0c++%E5%BC%80%E5%8F%91%E9%85%8D%E7%BD%AE/","section":"æ–‡ç« ","summary":"","title":"ArchLinuxå¹³å° C/C++å¼€å‘é…ç½®","type":"posts"},{"content":"","date":"2024å¹´11æœˆ12æ—¥","externalUrl":null,"permalink":"/tags/c++/","section":"Tags","summary":"","title":"C++","type":"tags"},{"content":"","date":"2024å¹´11æœˆ12æ—¥","externalUrl":null,"permalink":"/tags/clangd/","section":"Tags","summary":"","title":"Clangd","type":"tags"},{"content":"","date":"2024å¹´11æœˆ12æ—¥","externalUrl":null,"permalink":"/tags/lldb/","section":"Tags","summary":"","title":"Lldb","type":"tags"},{"content":"","date":"2024å¹´11æœˆ12æ—¥","externalUrl":null,"permalink":"/tags/vscode/","section":"Tags","summary":"","title":"Vscode","type":"tags"},{"content":"","date":"2024å¹´11æœˆ12æ—¥","externalUrl":null,"permalink":"/tags/xmake/","section":"Tags","summary":"","title":"Xmake","type":"tags"},{"content":"","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","externalUrl":null,"permalink":"/categories/","section":"åˆ†ç±»","summary":"","title":"åˆ†ç±»","type":"categories"},{"content":"","externalUrl":null,"permalink":"/postgraduate/","section":"å­¦ä¹ æ€è€ƒ","summary":"","title":"å­¦ä¹ æ€è€ƒ","type":"postgraduate"},{"content":"","externalUrl":null,"permalink":"/posts/","section":"æ–‡ç« ","summary":"","title":"æ–‡ç« ","type":"posts"}]